function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var n={},i={},r=e.parcelRequireecff;function o(t,e){t.source=new itowns.WMTSSource(t.source);const n=new itowns.ColorLayer("Ortho",t);e.addLayer(n)}function s(t,e){t.source=new itowns.WMTSSource(t.source);const n=new itowns.ElevationLayer(t.id,t);e.addLayer(n)}null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequireecff=r),r.register("jpov1",(function(t,e){!function(e){function n(t,e,n){return e<=t&&t<=n}t.exports&&!e["encoding-indexes"]&&r("kjyEk");var i=Math.floor;function o(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function s(t){return 0<=t&&t<=127}var a=s,h=-1;function u(t){this.tokens=[].slice.call(t),this.tokens.reverse()}u.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():h},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var l=-1;function c(t,e){if(t)throw TypeError("Decoder error");return e||65533}function f(t){throw TypeError("The code point "+t+" could not be encoded.")}function p(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(g,t)?g[t]:null}var d=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],g={};d.forEach((function(t){t.encodings.forEach((function(t){t.labels.forEach((function(e){g[e]=t}))}))}));var y,m,_={},v={};function b(t,e){return e&&e[t]||null}function x(t,e){var n=e.indexOf(t);return-1===n?null:n}function w(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var E="utf-8";function M(t,e){if(!(this instanceof M))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):E,e=o(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=p(t);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!v[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var i=this;return i._encoding=n,Boolean(e.fatal)&&(i._error_mode="fatal"),Boolean(e.ignoreBOM)&&(i._ignoreBOM=!0),Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase(),this.fatal="fatal"===i._error_mode,this.ignoreBOM=i._ignoreBOM),i}function S(t,n){if(!(this instanceof S))throw TypeError("Called as a function. Did you forget 'new'?");n=o(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var i=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var r=p(t=void 0!==t?String(t):E);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!_[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");i._encoding=r}else i._encoding=p("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase()),i}function I(t){var e=t.fatal,i=0,r=0,o=0,s=128,a=191;this.handler=function(t,u){if(u===h&&0!==o)return o=0,c(e);if(u===h)return l;if(0===o){if(n(u,0,127))return u;if(n(u,194,223))o=1,i=31&u;else if(n(u,224,239))224===u&&(s=160),237===u&&(a=159),o=2,i=15&u;else{if(!n(u,240,244))return c(e);240===u&&(s=144),244===u&&(a=143),o=3,i=7&u}return null}if(!n(u,s,a))return i=o=r=0,s=128,a=191,t.prepend(u),c(e);if(s=128,a=191,i=i<<6|63&u,(r+=1)!==o)return null;var f=i;return i=o=r=0,f}}function C(t){t.fatal;this.handler=function(t,e){if(e===h)return l;if(a(e))return e;var i,r;n(e,128,2047)?(i=1,r=192):n(e,2048,65535)?(i=2,r=224):n(e,65536,1114111)&&(i=3,r=240);for(var o=[(e>>6*i)+r];i>0;){var s=e>>6*(i-1);o.push(128|63&s),i-=1}return o}}function P(t,e){var n=e.fatal;this.handler=function(e,i){if(i===h)return l;if(s(i))return i;var r=t[i-128];return null===r?c(n):r}}function N(t,e){e.fatal;this.handler=function(e,n){if(n===h)return l;if(a(n))return n;var i=x(n,t);return null===i&&f(n),i+128}}function L(t){var e=t.fatal,i=0,r=0,o=0;this.handler=function(t,a){if(a===h&&0===i&&0===r&&0===o)return l;var u;if(a!==h||0===i&&0===r&&0===o||(i=0,r=0,o=0,c(e)),0!==o){u=null,n(a,48,57)&&(u=function(t){if(t>39419&&t<189e3||t>1237575)return null;if(7457===t)return 59335;var e,n=0,i=0,r=w("gb18030-ranges");for(e=0;e<r.length;++e){var o=r[e];if(!(o[0]<=t))break;n=o[0],i=o[1]}return i+t-n}(10*(126*(10*(i-129)+r-48)+o-129)+a-48));var f=[r,o,a];return i=0,r=0,o=0,null===u?(t.prepend(f),c(e)):u}if(0!==r)return n(a,129,254)?(o=a,null):(t.prepend([r,a]),i=0,r=0,c(e));if(0!==i){if(n(a,48,57))return r=a,null;var p=i,d=null;i=0;var g=a<127?64:65;return(n(a,64,126)||n(a,128,254))&&(d=190*(p-129)+(a-g)),null===(u=null===d?null:b(d,w("gb18030")))&&s(a)&&t.prepend(a),null===u?c(e):u}return s(a)?a:128===a?8364:n(a,129,254)?(i=a,null):c(e)}}function O(t,e){t.fatal;this.handler=function(t,n){if(n===h)return l;if(a(n))return n;if(58853===n)return f(n);if(e&&8364===n)return 128;var r=x(n,w("gb18030"));if(null!==r){var o=r%190;return[i(r/190)+129,o+(o<63?64:65)]}if(e)return f(n);r=function(t){if(59335===t)return 7457;var e,n=0,i=0,r=w("gb18030-ranges");for(e=0;e<r.length;++e){var o=r[e];if(!(o[1]<=t))break;n=o[1],i=o[0]}return i+t-n}(n);var s=i(r/10/126/10),u=i((r-=12600*s)/10/126),c=i((r-=1260*u)/10);return[s+129,u+48,c+129,r-10*c+48]}}function k(t){var e=t.fatal,i=0;this.handler=function(t,r){if(r===h&&0!==i)return i=0,c(e);if(r===h&&0===i)return l;if(0!==i){var o=i,a=null;i=0;var u=r<127?64:98;switch((n(r,64,126)||n(r,161,254))&&(a=157*(o-129)+(r-u)),a){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var f=null===a?null:b(a,w("big5"));return null===f&&s(r)&&t.prepend(r),null===f?c(e):f}return s(r)?r:n(r,129,254)?(i=r,null):c(e)}}function A(t){t.fatal;this.handler=function(t,e){if(e===h)return l;if(a(e))return e;var n=function(t){m=m||w("big5").map((function(t,e){return e<5024?null:t}));var e=m;return 9552===t||9566===t||9569===t||9578===t||21313===t||21317===t?e.lastIndexOf(t):x(t,e)}(e);if(null===n)return f(e);var r=i(n/157)+129;if(r<161)return f(e);var o=n%157;return[r,o+(o<63?64:98)]}}function R(t){var e=t.fatal,i=!1,r=0;this.handler=function(t,o){if(o===h&&0!==r)return r=0,c(e);if(o===h&&0===r)return l;if(142===r&&n(o,161,223))return r=0,65216+o;if(143===r&&n(o,161,254))return i=!0,r=o,null;if(0!==r){var a=r;r=0;var u=null;return n(a,161,254)&&n(o,161,254)&&(u=b(94*(a-161)+(o-161),w(i?"jis0212":"jis0208"))),i=!1,n(o,161,254)||t.prepend(o),null===u?c(e):u}return s(o)?o:142===o||143===o||n(o,161,254)?(r=o,null):c(e)}}function T(t){t.fatal;this.handler=function(t,e){if(e===h)return l;if(a(e))return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return[142,e-65377+161];8722===e&&(e=65293);var r=x(e,w("jis0208"));return null===r?f(e):[i(r/94)+161,r%94+161]}}function D(t){var e=t.fatal,i=0,r=1,o=2,s=3,a=4,u=5,f=6,p=i,d=i,g=0,y=!1;this.handler=function(t,m){switch(p){default:case i:return 27===m?(p=u,null):n(m,0,127)&&14!==m&&15!==m&&27!==m?(y=!1,m):m===h?l:(y=!1,c(e));case r:return 27===m?(p=u,null):92===m?(y=!1,165):126===m?(y=!1,8254):n(m,0,127)&&14!==m&&15!==m&&27!==m&&92!==m&&126!==m?(y=!1,m):m===h?l:(y=!1,c(e));case o:return 27===m?(p=u,null):n(m,33,95)?(y=!1,65344+m):m===h?l:(y=!1,c(e));case s:return 27===m?(p=u,null):n(m,33,126)?(y=!1,g=m,p=a,null):m===h?l:(y=!1,c(e));case a:if(27===m)return p=u,c(e);if(n(m,33,126)){p=s;var _=b(94*(g-33)+m-33,w("jis0208"));return null===_?c(e):_}return m===h?(p=s,t.prepend(m),c(e)):(p=s,c(e));case u:return 36===m||40===m?(g=m,p=f,null):(t.prepend(m),y=!1,p=d,c(e));case f:var v=g;g=0;var x=null;if(40===v&&66===m&&(x=i),40===v&&74===m&&(x=r),40===v&&73===m&&(x=o),36!==v||64!==m&&66!==m||(x=s),null!==x){p=p=x;var E=y;return y=!0,E?c(e):null}return t.prepend([v,m]),y=!1,p=d,c(e)}}}function F(t){t.fatal;var e=0,n=1,r=2,o=e;this.handler=function(t,s){if(s===h&&o!==e)return t.prepend(s),o=e,[27,40,66];if(s===h&&o===e)return l;if(!(o!==e&&o!==n||14!==s&&15!==s&&27!==s))return f(65533);if(o===e&&a(s))return s;if(o===n&&(a(s)&&92!==s&&126!==s||165==s||8254==s)){if(a(s))return s;if(165===s)return 92;if(8254===s)return 126}if(a(s)&&o!==e)return t.prepend(s),o=e,[27,40,66];if((165===s||8254===s)&&o!==n)return t.prepend(s),o=n,[27,40,74];8722===s&&(s=65293);var u=x(s,w("jis0208"));return null===u?f(s):o!==r?(t.prepend(s),o=r,[27,36,66]):[i(u/94)+33,u%94+33]}}function B(t){var e=t.fatal,i=0;this.handler=function(t,r){if(r===h&&0!==i)return i=0,c(e);if(r===h&&0===i)return l;if(0!==i){var o=i,a=null;i=0;var u=r<127?64:65,f=o<160?129:193;if((n(r,64,126)||n(r,128,252))&&(a=188*(o-f)+r-u),n(a,8836,10715))return 48508+a;var p=null===a?null:b(a,w("jis0208"));return null===p&&s(r)&&t.prepend(r),null===p?c(e):p}return s(r)||128===r?r:n(r,161,223)?65216+r:n(r,129,159)||n(r,224,252)?(i=r,null):c(e)}}function z(t){t.fatal;this.handler=function(t,e){if(e===h)return l;if(a(e)||128===e)return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return e-65377+161;8722===e&&(e=65293);var r=function(t){return y=y||w("jis0208").map((function(t,e){return n(e,8272,8835)?null:t})),y.indexOf(t)}(e);if(null===r)return f(e);var o=i(r/188),s=r%188;return[o+(o<31?129:193),s+(s<63?64:65)]}}function j(t){var e=t.fatal,i=0;this.handler=function(t,r){if(r===h&&0!==i)return i=0,c(e);if(r===h&&0===i)return l;if(0!==i){var o=i,a=null;i=0,n(r,65,254)&&(a=190*(o-129)+(r-65));var u=null===a?null:b(a,w("euc-kr"));return null===a&&s(r)&&t.prepend(r),null===u?c(e):u}return s(r)?r:n(r,129,254)?(i=r,null):c(e)}}function q(t){t.fatal;this.handler=function(t,e){if(e===h)return l;if(a(e))return e;var n=x(e,w("euc-kr"));return null===n?f(e):[i(n/190)+129,n%190+65]}}function U(t,e){var n=t>>8,i=255&t;return e?[n,i]:[i,n]}function G(t,e){var i=e.fatal,r=null,o=null;this.handler=function(e,s){if(s===h&&(null!==r||null!==o))return c(i);if(s===h&&null===r&&null===o)return l;if(null===r)return r=s,null;var a;if(a=t?(r<<8)+s:(s<<8)+r,r=null,null!==o){var u=o;return o=null,n(a,56320,57343)?65536+1024*(u-55296)+(a-56320):(e.prepend(U(a,t)),c(i))}return n(a,55296,56319)?(o=a,null):n(a,56320,57343)?c(i):a}}function V(t,e){e.fatal;this.handler=function(e,i){if(i===h)return l;if(n(i,0,65535))return U(i,t);var r=U(55296+(i-65536>>10),t),o=U(56320+(i-65536&1023),t);return r.concat(o)}}function W(t){t.fatal;this.handler=function(t,e){return e===h?l:s(e)?e:63360+e-128}}function H(t){t.fatal;this.handler=function(t,e){return e===h?l:a(e)?e:n(e,63360,63487)?e-63360+128:f(e)}}Object.defineProperty&&(Object.defineProperty(M.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(M.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(M.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),M.prototype.decode=function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=o(e),this._do_not_flush||(this._decoder=v[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var i,r=new u(n),s=[];;){var a=r.read();if(a===h)break;if((i=this._decoder.handler(r,a))===l)break;null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i))}if(!this._do_not_flush){do{if((i=this._decoder.handler(r,r.read()))===l)break;null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i))}while(!r.endOfStream());this._decoder=null}return function(t){var e,n;return e=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===e.indexOf(n)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var i=t[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(t)}.call(this,s)},Object.defineProperty&&Object.defineProperty(S.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),S.prototype.encode=function(t,e){t=void 0===t?"":String(t),e=o(e),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var n,i=new u(function(t){for(var e=String(t),n=e.length,i=0,r=[];i<n;){var o=e.charCodeAt(i);if(o<55296||o>57343)r.push(o);else if(56320<=o&&o<=57343)r.push(65533);else if(55296<=o&&o<=56319)if(i===n-1)r.push(65533);else{var s=e.charCodeAt(i+1);if(56320<=s&&s<=57343){var a=1023&o,h=1023&s;r.push(65536+(a<<10)+h),i+=1}else r.push(65533)}i+=1}return r}(t)),r=[];;){var s=i.read();if(s===h)break;if((n=this._encoder.handler(i,s))===l)break;Array.isArray(n)?r.push.apply(r,n):r.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(i,i.read()))!==l;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)},_["UTF-8"]=function(t){return new C(t)},v["UTF-8"]=function(t){return new I(t)},"encoding-indexes"in e&&d.forEach((function(t){"Legacy single-byte encodings"===t.heading&&t.encodings.forEach((function(t){var e=t.name,n=w(e.toLowerCase());v[e]=function(t){return new P(n,t)},_[e]=function(t){return new N(n,t)}}))})),v.GBK=function(t){return new L(t)},_.GBK=function(t){return new O(t,!0)},_.gb18030=function(t){return new O(t)},v.gb18030=function(t){return new L(t)},_.Big5=function(t){return new A(t)},v.Big5=function(t){return new k(t)},_["EUC-JP"]=function(t){return new T(t)},v["EUC-JP"]=function(t){return new R(t)},_["ISO-2022-JP"]=function(t){return new F(t)},v["ISO-2022-JP"]=function(t){return new D(t)},_.Shift_JIS=function(t){return new z(t)},v.Shift_JIS=function(t){return new B(t)},_["EUC-KR"]=function(t){return new q(t)},v["EUC-KR"]=function(t){return new j(t)},_["UTF-16BE"]=function(t){return new V(!0,t)},v["UTF-16BE"]=function(t){return new G(!0,t)},_["UTF-16LE"]=function(t){return new V(!1,t)},v["UTF-16LE"]=function(t){return new G(!1,t)},_["x-user-defined"]=function(t){return new H(t)},v["x-user-defined"]=function(t){return new W(t)},e.TextEncoder||(e.TextEncoder=S),e.TextDecoder||(e.TextDecoder=M),t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(t.exports||{})})),r.register("kjyEk",(function(t,e){})),r.register("eNRCS",(function(e,n){var i;t(e.exports,"StringDecoder",(()=>i),(t=>i=t));var o=r("1U9GM").Buffer,s=o.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(o.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=p,e=3;break;default:return this.write=d,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(e)}function h(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function g(t){return t&&t.length?this.write(t):""}i=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},a.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=h(e[i]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if(r=h(e[i]),r>=0)return r>0&&(t.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if(r=h(e[i]),r>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),r.register("1U9GM",(function(t,e){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r("6ZWSX"),i=n.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,t.exports),t.exports.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}})),r.register("6ZWSX",(function(e,n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var i,o,s,a;t(e.exports,"Buffer",(()=>i),(t=>i=t)),t(e.exports,"SlowBuffer",(()=>o),(t=>o=t)),t(e.exports,"INSPECT_MAX_BYTES",(()=>s),(t=>s=t)),t(e.exports,"kMaxLength",(()=>a),(t=>a=t));var h=r("kuxul"),u=r("9NvM5"),l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i=p,o=function(t){+t!=t&&(t=0);return p.alloc(+t)},s=50;var c=2147483647;function f(t){if(t>c)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(t)}return d(t,e,n)}function d(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|b(t,e),i=f(n),r=i.write(t,e);r!==n&&(i=i.slice(0,r));return i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){var e=new Uint8Array(t);return _(e.buffer,e.byteOffset,e.byteLength)}return m(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return _(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return _(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return p.from(i,e,n);var r=function(t){if(p.isBuffer(t)){var e=0|v(t.length),n=f(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?f(0):m(t);if("Buffer"===t.type&&Array.isArray(t.data))return m(t.data)}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function g(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function y(t){return g(t),f(t<0?0:0|v(t))}function m(t){for(var e=t.length<0?0:0|v(t.length),n=f(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function _(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,p.prototype),i}function v(t){if(t>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|t}function b(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return i?-1:G(t).length;e=(""+e).toLowerCase(),r=!0}}function x(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return L(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function w(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function E(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=p.from(e,i)),p.isBuffer(e))return 0===e.length?-1:M(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):M(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function M(t,e,n,i,r){var o,s=1,a=t.length,h=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,h/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var l=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===h)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+h>a&&(n=a-h),o=n;o>=0;o--){for(var c=!0,f=0;f<h;f++)if(u(t,o+f)!==u(e,f)){c=!1;break}if(c)return o}return-1}function S(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(Y(a))return s;t[n+s]=a}return s}function I(t,e,n,i){return W(G(e,t.length-n),t,n,i)}function C(t,e,n,i){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function P(t,e,n,i){return W(V(e),t,n,i)}function N(t,e,n,i){return W(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function L(t,e,n){return 0===e&&n===t.length?h.fromByteArray(t):h.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,h,u=t[r],l=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c<=n)switch(c){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[r+1]))&&(h=(31&u)<<6|63&o)>127&&(l=h);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(h=(15&u)<<12|(63&o)<<6|63&s)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(h=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,c=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=c}return function(t){var e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=k));return n}(i)}a=c,p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,n){return d(t,e,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,n){return function(t,e,n){return g(t),t<=0?f(t):void 0!==e?"string"==typeof n?f(t).fill(e,n):f(t).fill(e):f(t)}(t,e,n)},p.allocUnsafe=function(t){return y(t)},p.allocUnsafeSlow=function(t){return y(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(H(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=p.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(H(o,Uint8Array))r+o.length>i.length?p.from(o).copy(i,r):Uint8Array.prototype.set.call(i,o,r);else{if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r)}r+=o.length}return i},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):x.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=s;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l&&(p.prototype[l]=p.prototype.inspect),p.prototype.compare=function(t,e,n,i,r){if(H(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(i,r),u=t.slice(e,n),l=0;l<a;++l)if(h[l]!==u[l]){o=h[l],s=u[l];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},p.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return S(this,t,e,n);case"utf8":case"utf-8":return I(this,t,e,n);case"ascii":case"latin1":case"binary":return C(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function T(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=X[t[o]];return r}function D(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function F(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,i,r,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function z(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,r){return e=+e,n>>>=0,r||z(t,0,n,4),u.write(t,e,n,i,23,4),n+4}function q(t,e,n,i,r){return e=+e,n>>>=0,r||z(t,0,n,8),u.write(t,e,n,i,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return Object.setPrototypeOf(i,p.prototype),i},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},p.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},p.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),u.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),u.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),u.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),u.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e>>>=0,n>>>=0,i)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e>>>=0,n>>>=0,i)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);B(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);B(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return q(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return q(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,i){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},p.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var r=t.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(t=r)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=p.isBuffer(t)?t:p.from(t,i),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function G(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return h.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}var X=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)e[i+r]=t[n]+t[r];return e}()})),r.register("kuxul",(function(e,n){var i,r;t(e.exports,"toByteArray",(()=>i),(t=>i=t)),t(e.exports,"fromByteArray",(()=>r),(t=>r=t)),i=function(t){var e,n,i=l(t),r=i[0],o=i[1],h=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,o)),u=0,c=o>0?r-4:r;for(n=0;n<c;n+=4)e=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],h[u++]=e>>16&255,h[u++]=e>>8&255,h[u++]=255&e;2===o&&(e=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,h[u++]=255&e);1===o&&(e=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,h[u++]=e>>8&255,h[u++]=255&e);return h},r=function(t){for(var e,n=t.length,i=n%3,r=[],s=16383,a=0,h=n-i;a<h;a+=s)r.push(c(t,a,a+s>h?h:a+s));1===i?(e=t[n-1],r.push(o[e>>2]+o[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],r.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"="));return r.join("")};for(var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0;u<64;++u)o[u]=h[u],s[h.charCodeAt(u)]=u;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,r,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(o[(r=i)>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63})),r.register("9NvM5",(function(e,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var i,r;t(e.exports,"read",(()=>i),(t=>i=t)),t(e.exports,"write",(()=>r),(t=>r=t)),i=function(t,e,n,i,r){var o,s,a=8*r-i-1,h=(1<<a)-1,u=h>>1,l=-7,c=n?r-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-u;else{if(o===h)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},r=function(t,e,n,i,r,o){var s,a,h,u=8*o-r-1,l=(1<<u)-1,c=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+c>=1?f/h:f*Math.pow(2,1-c))*h>=2&&(s++,h/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*h-1)*Math.pow(2,r),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*g}})),r.register("ioRHp",(function(t,e){t.exports=i;var n=r("7etJZ").EventEmitter;function i(){n.call(this)}r("dlqwk")(i,n),i.Readable=r("aBufs"),i.Writable=r("6XbcT"),i.Duplex=r("fFuzr"),i.Transform=r("k3Gr9"),i.PassThrough=r("6G2fH"),i.finished=r("hzqCm"),i.pipeline=r("coyuH"),i.Stream=i,i.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",h));var s=!1;function a(){s||(s=!0,t.end())}function h(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",a),i.removeListener("close",h),i.removeListener("error",u),t.removeListener("error",u),i.removeListener("end",l),i.removeListener("close",l),t.removeListener("close",l)}return i.on("error",u),t.on("error",u),i.on("end",l),i.on("close",l),t.on("close",l),t.emit("pipe",i),t}})),r.register("7etJZ",(function(t,e){var n,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,o),i(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,n)}(t,r,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function l(t,e,n,i){var r,o,s,a;if(h(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):g(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function y(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var h=o[t];if(void 0===h)return!1;if("function"==typeof h)r(h,this,e);else{var u=h.length,l=g(h,u);for(n=0;n<u;++n)r(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return l(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return l(this,t,e,!0)},s.prototype.once=function(t,e){return h(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,o,s;if(h(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),r.register("dlqwk",(function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}})),r.register("aBufs",(function(t,n){var i,o=r("hPtJY");t.exports=I,I.ReadableState=S;r("7etJZ").EventEmitter;var s=function(t,e){return t.listeners(e).length},a=r("jJj7p"),h=r("6ZWSX").Buffer,u=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=r("kjyEk");l=c&&c.debuglog?c.debuglog("stream"):function(){};var f,p,d,g=r("6aKSQ"),y=r("fnDgj"),m=r("5yyyA").getHighWaterMark,_=r("967Aq").codes,v=_.ERR_INVALID_ARG_TYPE,b=_.ERR_STREAM_PUSH_AFTER_EOF,x=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("dlqwk")(I,a);var E=y.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(t,e,n){i=i||r("fFuzr"),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",n),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=r("eNRCS").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function I(t){if(i=i||r("fFuzr"),!(this instanceof I))return new I(t);var e=this instanceof i;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function C(t,e,n,i,r){l("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}(t,s);else if(r||(o=function(t,e){var n;i=e,h.isBuffer(i)||i instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],e));var i;return n}(s,e)),o)E(t,o);else if(s.objectMode||e&&e.length>0)if("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),i)s.endEmitted?E(t,new w):P(t,s,e,!0);else if(s.ended)E(t,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?P(t,s,e,!1):A(t,s)):P(t,s,e,!1)}else i||(s.reading=!1,A(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&O(t)),A(t,e)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),I.prototype.destroy=y.destroy,I.prototype._undestroy=y.undestroy,I.prototype._destroy=function(t,e){e(t)},I.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=h.from(t,e),e=""),n=!0),C(this,t,e,!1,n)},I.prototype.unshift=function(t){return C(this,t,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){f||(f=r("eNRCS").StringDecoder);var e=new f(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var N=1073741824;function L(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=N?t=N:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,o.nextTick(k,t))}function k(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,B(t)}function A(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(R,t,e))}function R(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(l("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function T(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function D(t){l("readable nexttick read 0"),t.read(0)}function F(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function z(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function j(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,o.nextTick(q,e,t))}function q(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function U(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}I.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):O(this),null;if(0===(t=L(t,e))&&e.ended)return 0===e.length&&j(this),null;var i,r=e.needReadable;return l("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",r=!0),e.ended||e.reading?l("reading or ended",r=!1):r&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=L(n,e))),null===(i=t>0?z(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==i&&this.emit("data",i),i},I.prototype._read=function(t){E(this,new x("_read()"))},I.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,e);var r=(!e||!1!==e.end)&&t!==o.stdout&&t!==o.stderr?h:y;function a(e,r){l("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),t.removeListener("close",d),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",a),n.removeListener("end",h),n.removeListener("end",y),n.removeListener("data",f),c=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}function h(){l("onend"),t.end()}i.endEmitted?o.nextTick(r):n.once("end",r),t.on("unpipe",a);var u=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,B(t))}}(n);t.on("drain",u);var c=!1;function f(e){l("ondata");var r=t.write(e);l("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==U(i.pipes,t))&&!c&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(e){l("onerror",e),y(),t.removeListener("error",p),0===s(t,"error")&&E(t,e)}function d(){t.removeListener("finish",g),y()}function g(){l("onfinish"),t.removeListener("close",d),y()}function y(){l("unpipe"),n.unpipe(t)}return n.on("data",f),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",p),t.once("close",d),t.once("finish",g),t.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),t},I.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},I.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?O(this):i.reading||o.nextTick(D,this))),n},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&o.nextTick(T,this),n},I.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||o.nextTick(T,this),e},I.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(F,t,e))}(this,t)),t.paused=!1,this},I.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(t){var e=this,n=this._readableState,i=!1;for(var r in t.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(r){(l("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(e.push(r)||(i=!0,t.pause()))})),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){l("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r("3etzH")),p(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),I._fromList=z,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(t,e){return void 0===d&&(d=r("gN4Jr")),d(I,t,e)})})),r.register("hPtJY",(function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}})),r.register("jJj7p",(function(t,e){t.exports=r("7etJZ").EventEmitter})),r.register("6aKSQ",(function(t,e){function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function a(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var h=r("6ZWSX").Buffer,u=r("kjyEk").inspect,l=u&&u.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n,r;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return h.alloc(0);for(var e,n,i,r=h.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=r,i=s,h.prototype.copy.call(e,n,i),s+=o.data.length,o=o.next;return r}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,i=e.data;for(t-=i.length;e=e.next;){var r=e.data,o=t>r.length?r.length:t;if(o===r.length?i+=r:i+=r.slice(0,t),0==(t-=o)){o===r.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(t){var e=h.allocUnsafe(t),n=this.head,i=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var r=n.data,o=t>r.length?r.length:t;if(r.copy(e,e.length-t,0,o),0==(t-=o)){o===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,e}},{key:l,value:function(t,e){return u(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()})),r.register("fnDgj",(function(t,e){var n=r("hPtJY");function i(t,e){s(t,e),o(t)}function o(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,t)):n.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,t)):n.nextTick(i,r,t):e?(n.nextTick(o,r),e(t)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,i=t._writableState;n&&n.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}}})),r.register("5yyyA",(function(t,e){var n=r("967Aq").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,r){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,r,i);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(r?i:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}})),r.register("967Aq",(function(e,n){var i;t(e.exports,"codes",(()=>i),(t=>i=t));var r={};function o(t,e,n){n||(n=Error);var i=function(t){var n,i;function r(n,i,r){return t.call(this,function(t,n,i){return"string"==typeof e?e:e(t,n,i)}(n,i,r))||this}return i=t,(n=r).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,r}(n);i.prototype.name=n.name,i.prototype.code=t,r[t]=i}function s(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i,r,o,a;if("string"==typeof e&&(r="not ",e.substr(!o||o<0?0:+o,r.length)===r)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))a="The ".concat(t," ").concat(i," ").concat(s(e,"type"));else{var h=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(h," ").concat(i," ").concat(s(e,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i=r})),r.register("fFuzr",(function(t,e){var n=r("hPtJY"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var o=r("aBufs"),s=r("6XbcT");r("dlqwk")(l,o);for(var a=i(s.prototype),h=0;h<a.length;h++){var u=a[h];l.prototype[u]||(l.prototype[u]=s.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);o.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})})),r.register("6XbcT",(function(t,n){var i,o=r("hPtJY");function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=I,I.WritableState=S;var a={deprecate:r("39vsn")},h=r("jJj7p"),u=r("6ZWSX").Buffer,l=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,f=r("fnDgj"),p=r("5yyyA").getHighWaterMark,d=r("967Aq").codes,g=d.ERR_INVALID_ARG_TYPE,y=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,_=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,x=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,E=f.errorOrDestroy;function M(){}function S(t,e,n){i=i||r("fFuzr"),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if("function"!=typeof r)throw new m;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(o.nextTick(r,i),o.nextTick(k,t,e),t._writableState.errorEmitted=!0,E(t,i)):(r(i),t._writableState.errorEmitted=!0,E(t,i),k(t,e))}(t,n,i,e,r);else{var s=L(n)||t.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||N(t,n),i?o.nextTick(P,t,n,s,r):P(t,n,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function I(t){var e=this instanceof(i=i||r("fFuzr"));if(!e&&!c.call(I,this))return new I(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function C(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function P(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),k(t,e)}function N(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0,h=!0;n;)r[a]=n,n.isBuf||(h=!1),n=n.next,a+=1;r.allBuffers=h,C(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,c=n.callback;if(C(t,e,!1,e.objectMode?1:u.length,u,l,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function L(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(n){e.pendingcb--,n&&E(t,n),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var n=L(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,o.nextTick(O,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}r("dlqwk")(I,h),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===I&&(t&&t._writableState instanceof S)}})):c=function(t){return t instanceof this},I.prototype.pipe=function(){E(this,new _)},I.prototype.write=function(t,e,n){var i,r=this._writableState,s=!1,a=!r.objectMode&&(i=t,u.isBuffer(i)||i instanceof l);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=M),r.ending?function(t,e){var n=new x;E(t,n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,i){var r;return null===n?r=new b:"string"==typeof n||e.objectMode||(r=new g("chunk",["string","Buffer"],n)),!r||(E(t,r),o.nextTick(i,r),!1)}(this,r,t,n))&&(r.pendingcb++,s=function(t,e,n,i,r,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n));return e}(e,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=e.objectMode?1:i.length;e.length+=a;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else C(t,e,!1,a,i,r,o);return h}(this,r,a,t,e,n)),s},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||N(this,t))},I.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(t,e,n){n(new y("_write()"))},I.prototype._writev=null,I.prototype.end=function(t,e,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,n){e.ending=!0,k(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),I.prototype.destroy=f.destroy,I.prototype._undestroy=f.undestroy,I.prototype._destroy=function(t,e){e(t)}})),r.register("39vsn",(function(t,n){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}})),r.register("3etzH",(function(t,e){var n,i=r("hPtJY");function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=r("hzqCm"),a=Symbol("lastResolve"),h=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function d(t,e){return{value:t,done:e}}function g(t){var e=t[a];if(null!==e){var n=t[p].read();null!==n&&(t[c]=null,t[a]=null,t[h]=null,e(d(n,!1)))}}function y(t){i.nextTick(g,t)}var m=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((o(n={get stream(){return this[p]},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise((function(e,n){i.nextTick((function(){t[u]?n(t[u]):e(d(void 0,!0))}))}));var n,r=this[c];if(r)n=new Promise(function(t,e){return function(n,i){t.then((function(){e[l]?n(d(void 0,!0)):e[f](n,i)}),i)}}(r,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var t=this;return new Promise((function(e,n){t[p].destroy(null,(function(t){t?n(t):e(d(void 0,!0))}))}))})),n),m);t.exports=function(t){var e,n=Object.create(_,(o(e={},p,{value:t,writable:!0}),o(e,a,{value:null,writable:!0}),o(e,h,{value:null,writable:!0}),o(e,u,{value:null,writable:!0}),o(e,l,{value:t._readableState.endEmitted,writable:!0}),o(e,f,{value:function(t,e){var i=n[p].read();i?(n[c]=null,n[a]=null,n[h]=null,t(d(i,!1))):(n[a]=t,n[h]=e)},writable:!0}),e));return n[c]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[h];return null!==e&&(n[c]=null,n[a]=null,n[h]=null,e(t)),void(n[u]=t)}var i=n[a];null!==i&&(n[c]=null,n[a]=null,n[h]=null,i(d(void 0,!0))),n[l]=!0})),t.on("readable",y.bind(null,n)),n}})),r.register("hzqCm",(function(t,e){var n=r("967Aq").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(this,i)}}}(o||i);var s=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,h=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){a=!1,u=!0,s||o.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){s=!1,c=!0,a||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return s&&!c?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},g=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",h),e.on("close",h)):(e.on("complete",l),e.on("abort",d),e.req?g():e.on("request",g)),e.on("end",f),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",l),e.removeListener("abort",d),e.removeListener("request",g),e.req&&e.req.removeListener("finish",l),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}})),r.register("gN4Jr",(function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),r.register("k3Gr9",(function(t,e){t.exports=l;var n=r("967Aq").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,h=r("fFuzr");function u(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);h.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,n){f(t,e,n)}))}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}r("dlqwk")(l,h),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,n){n(new i("_transform()"))},l.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,(function(t){e(t)}))}})),r.register("6G2fH",(function(t,e){t.exports=i;var n=r("k3Gr9");function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r("dlqwk")(i,n),i.prototype._transform=function(t,e,n){n(null,t)}})),r.register("coyuH",(function(t,e){var n;var i=r("967Aq").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var l,c=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var f=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=r("hzqCm")),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);a=!0,o()}));var h=!1;return function(e){if(!a&&!h)return h=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}(t,o,i>0,(function(t){l||(l=t),t&&f.forEach(h),o||(f.forEach(h),c(l))}))}));return e.reduce(u)}}));var a,h={},u={};a=u,Object.defineProperty(a,"__esModule",{value:!0,configurable:!0}),t(u,"default",(()=>ei));var l=1,c=2,f=3,p=5,d=6378137,g=6356752.314,y=.0066943799901413165,m=484813681109536e-20,_=Math.PI/2,v=.16666666666666666,b=.04722222222222222,x=.022156084656084655,w=1e-10,E=.017453292519943295,M=57.29577951308232,S=Math.PI/4,I=2*Math.PI,C=3.14159265359,P={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},N={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},L=/[\s_\-\/\(\)]/g;function O(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(L,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(L,"")===r)return t[n]}function k(t){var e,n,i,r={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*E},lat_1:function(t){r.lat1=t*E},lat_2:function(t){r.lat2=t*E},lat_ts:function(t){r.lat_ts=t*E},lon_0:function(t){r.long0=t*E},lon_1:function(t){r.long1=t*E},lon_2:function(t){r.long2=t*E},alpha:function(t){r.alpha=parseFloat(t)*E},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*E},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=O(N,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*E},pm:function(t){var e=O(P,t);r.from_greenwich=(e||parseFloat(t))*E},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in o)n=o[e],e in s?"function"==typeof(i=s[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var A=function(t){return new j(t).output()},R=1,T=/\s/,D=/[A-Za-z]/,F=/[A-Za-z84_]/,B=/[,\]]/,z=/[\d\.E\-\+]/;function j(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=R}function q(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return U(e,t),t}),i);e&&(t[e]=r)}function U(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void U(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&U(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&U(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void q(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return U(t,e[n]);return q(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}j.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;T.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case R:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},j.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(B.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},j.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=R)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=R,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},j.prototype.number=function(t){if(!z.test(t)){if(B.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},j.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},j.prototype.keyword=function(t){if(F.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=R)}if(!B.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},j.prototype.neutral=function(t){if(D.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(z.test(t))return this.word=t,void(this.state=3);if(!B.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},j.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var G,V=.017453292519943295;function W(t){return t*V}function H(t){var e=A(t),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return U(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",W],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",W],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",W],["lat0","latitude_of_origin",W],["lat0","standard_parallel_1",W],["lat1","standard_parallel_1",W],["lat2","standard_parallel_2",W],["azimuth","Azimuth"],["alpha","azimuth",W],["srsCode","name"]].forEach((function(e){return n=t,r=(i=e)[0],o=i[1],void(!(r in n)&&o in n&&(n[r]=n[o],3===i.length&&(n[r]=i[2](n[r]))));var n,i,r,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=W(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function Y(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?Y[t]=k(arguments[1]):Y[t]=H(arguments[1]):Y[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Y.apply(e,t):Y(t)}));if("string"==typeof t){if(t in Y)return Y[t]}else"EPSG"in t?Y["EPSG:"+t.EPSG]=t:"ESRI"in t?Y["ESRI:"+t.ESRI]=t:"IAU2000"in t?Y["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(G=Y)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),G("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),G("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),G.WGS84=G["EPSG:4326"],G["EPSG:3785"]=G["EPSG:3857"],G.GOOGLE=G["EPSG:3857"],G["EPSG:900913"]=G["EPSG:3857"],G["EPSG:102113"]=G["EPSG:3857"];var X=Y;var Z=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var J=["3857","900913","3785","102113"];var K=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in X}(t))return X[t];if(function(t){return Z.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=H(t);if(function(t){var e=O(t,"authority");if(e){var n=O(e,"epsg");return n&&J.indexOf(n)>-1}}(e))return X["EPSG:3857"];var n=function(t){var e=O(t,"extension");if(e)return O(e,"proj4")}(e);return n?k(n):e}return function(t){return"+"===t[0]}(t)?k(t):void 0};function $(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function Q(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function tt(t){return t<0?-1:1}function et(t){return Math.abs(t)<=C?t:t-tt(t)*I}function nt(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(_-e))/i}function it(t,e){for(var n,i,r=.5*t,o=_-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=i=_-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999}function rt(t){return t}var ot=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Q(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*M>90&&r*M<-90&&i*M>180&&i*M<-180)return null;if(Math.abs(Math.abs(r)-_)<=w)return null;if(this.sphere)e=this.x0+this.a*this.k0*et(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(S+.5*r));else{var o=Math.sin(r),s=nt(this.e,r,o);e=this.x0+this.a*this.k0*et(i-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=_-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(n=it(this.e,o)))return null}return e=et(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:rt,inverse:rt,names:["longlat","identity"]}],st={},at=[];function ht(t,e){var n=at.length;return t.names?(at[n]=t,t.names.forEach((function(t){st[t.toLowerCase()]=n})),this):(console.log(e),!0)}var ut={start:function(){ot.forEach(ht)},add:ht,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==st[e]&&at[st[e]]?at[st[e]]:void 0}},lt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ct=lt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function ft(t,e,n,i){var r=t*t,o=e*e,s=(r-o)/r,a=0;return i?(r=(t*=1-s*(v+s*(b+s*x)))*t,s=0):a=Math.sqrt(s),{es:s,e:a,ep2:(r-o)/o}}function pt(t,e,n,i,r){if(!t){var o=O(lt,i);o||(o=ct),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<w)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}lt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dt={};dt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},dt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},dt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},dt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},dt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},dt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},dt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},dt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},dt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},dt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},dt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},dt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},dt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},dt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},dt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},dt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},dt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var gt=function(t,e,n,i,r,o,s){var a={};return a.datum_type=void 0===t||"none"===t?p:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=l),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=c,a.datum_params[3]*=m,a.datum_params[4]*=m,a.datum_params[5]*=m,a.datum_params[6]=a.datum_params[6]/1e6+1))),s&&(a.datum_type=f,a.grids=s),a.a=n,a.b=i,a.es=r,a.ep2=o,a},yt={};function mt(t){return void 0===t?null:t.split(",").map(_t)}function _t(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:yt[t]||null,isNull:!1}}function vt(t){return t/3600*Math.PI/180}function bt(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function xt(t){return t.map((function(t){return[vt(t.longitudeShift),vt(t.latitudeShift)]}))}function wt(t,e,n){return{name:bt(t,e+8,e+16).trim(),parent:bt(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Et(t,e,n,i){for(var r=e+176,o=[],s=0;s<n.gridNodeCount;s++){var a={latitudeShift:t.getFloat32(r+16*s,i),longitudeShift:t.getFloat32(r+16*s+4,i),latitudeAccuracy:t.getFloat32(r+16*s+8,i),longitudeAccuracy:t.getFloat32(r+16*s+12,i)};o.push(a)}return o}function Mt(t,e){if(!(this instanceof Mt))return new Mt(t);e=e||function(t){if(t)throw t};var n=K(t);if("object"==typeof n){var i=Mt.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=O(dt,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o=pt(n.a,n.b,n.rf,n.ellps,n.sphere),s=ft(o.a,o.b,o.rf,n.R_A),a=mt(n.nadgrids),h=n.datum||gt(n.datumCode,n.datum_params,o.a,o.b,s.es,s.ep2,a);$(this,n),$(this,i),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=h,this.init(),e(null,this)}else e(t)}else e(t)}Mt.projections=ut,Mt.projections.start();var St=Mt;function It(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===l?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==c||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function Ct(t,e,n){var i,r,o,s,a=t.x,h=t.y,u=t.z?t.z:0;if(h<-_&&h>-1.001*_)h=-_;else if(h>_&&h<1.001*_)h=_;else{if(h<-_)return{x:-1/0,y:-1/0,z:t.z};if(h>_)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(h),s=Math.cos(h),o=r*r,{x:((i=n/Math.sqrt(1-e*o))+u)*s*Math.cos(a),y:(i+u)*s*Math.sin(a),z:(i*(1-e)+u)*r}}function Pt(t,e,n,i){var r,o,s,a,h,u,l,c,f,p,d,g,y,m,v,b=1e-12,x=t.x,w=t.y,E=t.z?t.z:0;if(r=Math.sqrt(x*x+w*w),o=Math.sqrt(x*x+w*w+E*E),r/n<b){if(m=0,o/n<b)return _,v=-i,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(w,x);s=E/o,c=(a=r/o)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*a*a)),f=s*h,y=0;do{y++,u=e*(l=n/Math.sqrt(1-e*f*f))/(l+(v=r*c+E*f-l*(1-e*f*f))),g=(d=s*(h=1/Math.sqrt(1-u*(2-u)*a*a)))*c-(p=a*(1-u)*h)*f,c=p,f=d}while(g*g>1e-24&&y<30);return{x:m,y:Math.atan(d/Math.abs(p)),z:v}}function Nt(t,e,n){if(e===l)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===c){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6];return{x:u*(t.x-h*t.y+a*t.z)+i,y:u*(h*t.x+t.y-s*t.z)+r,z:u*(-a*t.x+s*t.y+t.z)+o}}}function Lt(t,e,n){if(e===l)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===c){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],f=(t.x-i)/u,p=(t.y-r)/u,d=(t.z-o)/u;return{x:f+h*p-a*d,y:-h*f+p+s*d,z:a*f-s*p+d}}}function Ot(t){return t===l||t===c}function kt(t,e,n){if(It(t,e))return n;if(t.datum_type===p||e.datum_type===p)return n;var i=t.a,r=t.es;if(t.datum_type===f){if(0!==At(t,!1,n))return;i=d,r=y}var o=e.a,s=e.b,a=e.es;if(e.datum_type===f&&(o=d,s=g,a=y),r===a&&i===o&&!Ot(t.datum_type)&&!Ot(e.datum_type))return n;if((n=Ct(n,r,i),Ot(t.datum_type)&&(n=Nt(n,t.datum_type,t.datum_params)),Ot(e.datum_type)&&(n=Lt(n,e.datum_type,e.datum_params)),n=Pt(n,a,o,s),e.datum_type===f)&&0!==At(e,!0,n))return;return n}function At(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},o=[],s=0;s<t.grids.length;s++){var a=t.grids[s];if(o.push(a.name),a.isNull){r=i;break}if(a.mandatory,null!==a.grid){var h=a.grid.subgrids[0],u=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,l=h.ll[0]-u,c=h.ll[1]-u,f=h.ll[0]+(h.lim[0]-1)*h.del[0]+u,p=h.ll[1]+(h.lim[1]-1)*h.del[1]+u;if(!(c>i.y||l>i.x||p<i.y||f<i.x||(r=Rt(i,e,h),isNaN(r.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*M+" "+i.y*M+" tried: '"+o+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function Rt(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=et(r.x-Math.PI)+Math.PI;var o=Tt(r,n);if(e){if(isNaN(o.x))return i;o.x=r.x-o.x,o.y=r.y-o.y;var s,a,h=9;do{if(a=Tt(o,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:r.x-(a.x+o.x),y:r.y-(a.y+o.y)},o.x+=s.x,o.y+=s.y}while(h--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=et(o.x+n.ll[0]),i.y=o.y+n.ll[1]}else isNaN(o.x)||(i.x=t.x+o.x,i.y=t.y+o.y);return i}function Tt(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),o=Math.floor(i.y),s=i.x-1*r,a=i.y-1*o,h={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return h;if(o<0||o>=e.lim[1])return h;n=o*e.lim[0]+r;var u=e.cvs[n][0],l=e.cvs[n][1];n++;var c=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],y=e.cvs[n][1],m=s*a,_=s*(1-a),v=(1-s)*(1-a),b=(1-s)*a;return h.x=v*u+_*c+b*g+m*p,h.y=v*l+_*f+b*y+m*d,h}function Dt(t,e,n){var i,r,o,s=n.x,a=n.y,h=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=s,r=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(i=a,r=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(i=h,r="z"),t.axis[o]){case"e":case"n":u[r]=i;break;case"w":case"s":u[r]=-i;break;case"u":void 0!==n[r]&&(u.z=i);break;case"d":void 0!==n[r]&&(u.z=-i);break;default:return null}return u}function Ft(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Bt(t){zt(t.x),zt(t.y)}function zt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function jt(t,e,n,i){var r,o=void 0!==(n=Array.isArray(n)?Ft(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(Bt(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===l||t.datum.datum_type===c||t.datum.datum_type===f)&&"WGS84"!==e.datumCode||(e.datum.datum_type===l||e.datum.datum_type===c||e.datum.datum_type===f)&&"WGS84"!==t.datumCode}(t,e)&&(n=jt(t,r=new St("WGS84"),n,i),t=r),i&&"enu"!==t.axis&&(n=Dt(t,!1,n)),"longlat"===t.projName)n={x:n.x*E,y:n.y*E,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=kt(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*M,y:n.y*M,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?Dt(e,!0,n):(o||delete n.z,n)}var qt=St("WGS84");function Ut(t,e,n,i){var r,o,s;return Array.isArray(n)?(r=jt(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(o=jt(t,e,n,i),2===(s=Object.keys(n)).length||s.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;o[i]=n[i]})),o)}function Gt(t){return t instanceof St?t:t.oProj?t.oProj:St(t)}var Vt=function(t,e,n){t=Gt(t);var i,r=!1;return void 0===e?(e=t,t=qt,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=qt,r=!0),e=Gt(e),n?Ut(t,e,n):(i={forward:function(n,i){return Ut(t,e,n,i)},inverse:function(n,i){return Ut(e,t,n,i)}},r&&(i.oProj=e),i)},Wt=6,Ht="AJSAJS",Yt="AFAFAF",Xt=65,Zt=73,Jt=79,Kt=86,$t=90,Qt={forward:te,inverse:function(t){var e=re(ae(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:ee};function te(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,g=t.zoneNumber,y=se(g),m=Math.floor(p/1e5),_=Math.floor(d/1e5)%20,r=m,o=_,s=y,a=s-1,h=Ht.charCodeAt(a),u=Yt.charCodeAt(a),l=h+r-1,c=u+o,f=!1,l>$t&&(l=l-$t+Xt-1,f=!0),(l===Zt||h<Zt&&l>Zt||(l>Zt||h<Zt)&&f)&&l++,(l===Jt||h<Jt&&l>Jt||(l>Jt||h<Jt)&&f)&&++l===Zt&&l++,l>$t&&(l=l-$t+Xt-1),c>Kt?(c=c-Kt+Xt-1,f=!0):f=!1,(c===Zt||u<Zt&&c>Zt||(c>Zt||u<Zt)&&f)&&c++,(c===Jt||u<Jt&&c>Jt||(c>Jt||u<Jt)&&f)&&++c===Zt&&c++,c>Kt&&(c=c-Kt+Xt-1),String.fromCharCode(l)+String.fromCharCode(c))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,o,s,a,h,u,l,c,f;var p,d,g,y,m,_}(function(t){var e,n,i,r,o,s,a,h,u=t.lat,l=t.lon,c=6378137,f=.00669438,p=.9996,d=ne(u),g=ne(l);h=Math.floor((l+180)/6)+1,180===l&&(h=60);u>=56&&u<64&&l>=3&&l<12&&(h=32);u>=72&&u<84&&(l>=0&&l<9?h=31:l>=9&&l<21?h=33:l>=21&&l<33?h=35:l>=33&&l<42&&(h=37));a=ne(6*(h-1)-180+3),e=f/(1-f),n=c/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),i=Math.tan(d)*Math.tan(d),r=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-a),s=c*((1-f/4-3*f*f/64-5*f*f*f/256)*d-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*d)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var y=p*n*(o+(1-i+r)*o*o*o/6+(5-18*i+i*i+72*r-58*e)*o*o*o*o*o/120)+5e5,m=p*(s+n*Math.tan(d)*(o*o/2+(5-i+9*r+4*r*r)*o*o*o*o/24+(61-58*i+i*i+600*r-330*e)*o*o*o*o*o*o/720));u<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(y),zoneNumber:h,zoneLetter:oe(u)}}({lat:t[1],lon:t[0]}),e)}function ee(t){var e=re(ae(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ne(t){return t*(Math.PI/180)}function ie(t){return t/Math.PI*180}function re(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,s,a,h,u,l,c,f,p,d=.9996,g=6378137,y=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),_=n-5e5,v=e;i<"N"&&(v-=1e7),c=6*(r-1)-180+3,o=.006739496752268451,p=(f=v/d/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*f)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*f)+151*m*m*m/96*Math.sin(6*f),s=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),h=o*Math.cos(p)*Math.cos(p),u=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),l=_/(s*d);var b=p-s*Math.tan(p)/u*(l*l/2-(5+3*a+10*h-4*h*h-9*o)*l*l*l*l/24+(61+90*a+298*h+45*a*a-1.6983531815716497-3*h*h)*l*l*l*l*l*l/720);b=ie(b);var x,w=(l-(1+2*a+h)*l*l*l/6+(5-2*h+28*a-3*h*h+8*o+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(w=c+ie(w),t.accuracy){var E=re({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:E.lat,right:E.lon,bottom:b,left:w}}else x={lat:b,lon:w};return x}function oe(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function se(t){var e=t%Wt;return 0===e&&(e=Wt),e}function ae(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var s=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(o,o+=2);for(var h=se(s),u=function(t,e){var n=Ht.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Zt&&n++,n===Jt&&n++,n>$t){if(r)throw"Bad character: "+t;n=Xt,r=!0}i+=1e5}return i}(i.charAt(0),h),l=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=Yt.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Zt&&n++,n===Jt&&n++,n>Kt){if(r)throw"Bad character: "+t;n=Xt,r=!0}i+=1e5}return i}(i.charAt(1),h);l<he(a);)l+=2e6;var c=n-o;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=c/2,y=0,m=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),m=parseFloat(d)*f),{easting:y+u,northing:m+l,zoneLetter:a,zoneNumber:s,accuracy:f}}function he(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function ue(t,e,n){if(!(this instanceof ue))return new ue(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ue.fromMGRS=function(t){return new ue(ee(t))},ue.prototype.toMGRS=function(t){return te([this.x,this.y],t)};var le=ue,ce=1,fe=.25,pe=.046875,de=.01953125,ge=.01068115234375,ye=.75,me=.46875,_e=.013020833333333334,ve=.007120768229166667,be=.3645833333333333,xe=.005696614583333333,we=.3076171875;function Ee(t){var e=[];e[0]=ce-t*(fe+t*(pe+t*(de+t*ge))),e[1]=t*(ye-t*(pe+t*(de+t*ge)));var n=t*t;return e[2]=n*(me-t*(_e+t*ve)),n*=t,e[3]=n*(be-t*xe),e[4]=n*t*we,e}function Me(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var Se=20;function Ie(t,e,n){for(var i=1/(1-e),r=t,o=Se;o;--o){var s=Math.sin(r),a=1-e*s*s;if(r-=a=(Me(r,s,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,Math.abs(a)<w)return r}return r}var Ce={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Ee(this.es),this.ml0=Me(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,o=t.y,s=et(r-this.long0),a=Math.sin(o),h=Math.cos(o);if(this.es){var u=h*s,l=Math.pow(u,2),c=this.ep2*Math.pow(h,2),f=Math.pow(c,2),p=Math.abs(h)>w?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var y=Me(o,a,h,this.en);n=this.a*(this.k0*u*(1+l/6*(1-d+c+l/20*(5-18*d+g+14*c-58*d*c+l/42*(61+179*g-g*d-479*d)))))+this.x0,i=this.a*(this.k0*(y-this.ml0+a*s*u/2*(1+l/12*(5-d+9*c+4*f+l/30*(61+g-58*d+270*c-330*d*c+l/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var m=h*Math.sin(s);if(Math.abs(Math.abs(m)-1)<w)return 93;if(n=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,i=h*Math.cos(s)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(i))>=1){if(m-1>w)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Ie(e=this.ml0+s/this.k0,this.es,this.en),Math.abs(n)<_){var a=Math.sin(n),h=Math.cos(n),u=Math.abs(h)>w?Math.tan(n):0,l=this.ep2*Math.pow(h,2),c=Math.pow(l,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);i=n-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*l*f+l-4*c-g/30*(61+90*f-252*l*f+45*p+46*l-g/56*(1385+3633*f+4095*p+1574*p*f)))),r=et(this.long0+d*(1-g/6*(1+2*f+l-g/20*(5+28*f+24*p+8*l*f+6*l-g/42*(61+662*f+1320*p+720*p*f))))/h)}else i=_*tt(s),r=0;else{var y=Math.exp(o/this.k0),m=.5*(y-1/y),v=this.lat0+s/this.k0,b=Math.cos(v);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(m,2))),i=Math.asin(e),s<0&&(i=-i),r=0===m&&0===b?0:et(Math.atan2(m,b)+this.long0)}return t.x=r,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Pe(t){var e=Math.exp(t);return e=(e-1/e)/2}function Ne(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function Le(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}function Oe(t){var e=Math.abs(t);return e=Le(e*(1+e/(Ne(1,e)+1))),t<0?-e:e}function ke(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],s=0;--r>=0;)n=i*o-s+t[r],s=o,o=n;return e+n*Math.sin(2*e)}function Ae(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],s=0;--r>=0;)n=i*o-s+t[r],s=o,o=n;return Math.sin(e)*n}function Re(t){var e=Math.exp(t);return e=(e+1/e)/2}function Te(t,e,n){for(var i,r,o=Math.sin(e),s=Math.cos(e),a=Pe(n),h=Re(n),u=2*s*h,l=-2*o*a,c=t.length-1,f=t[c],p=0,d=0,g=0;--c>=0;)i=d,r=p,f=u*(d=f)-i-l*(p=g)+t[c],g=l*d-r+u*p;return[(u=o*h)*f-(l=s*a)*g,u*g+l*f]}var De={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ce.init.apply(this),this.forward=Ce.forward,this.inverse=Ce.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=ke(this.cbg,this.lat0);this.Zb=-this.Qn*(i+Ae(this.gtu,2*i))},forward:function(t){var e=et(t.x-this.long0),n=t.y;n=ke(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(i,s*r),e=Math.atan2(o*r,Ne(i,r*s)),e=Oe(Math.tan(e));var a,h,u=Te(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,h=1/0),t.x=a,t.y=h,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=Te(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(Pe(i));var s=Math.sin(r),a=Math.cos(r),h=Math.sin(i),u=Math.cos(i);r=Math.atan2(s*u,Ne(h,u*a)),e=et((i=Math.atan2(h,u*a))+this.long0),n=ke(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};function Fe(t,e){if(void 0===t){if((t=Math.floor(30*(et(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}var Be={init:function(){var t=Fe(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*E,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,De.init.apply(this),this.forward=De.forward,this.inverse=De.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ze(t,e){return Math.pow((1-t)/(1+t),e)}var je={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+S)/(Math.pow(Math.tan(.5*this.lat0+S),this.C)*ze(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+S),this.C)*ze(this.e*Math.sin(n),this.ratexp))-_,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+S)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*ze(this.e*Math.sin(t.y),-.5*this.e))-_,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var qe={init:function(){je.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=et(t.x-this.long0),je.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),i=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,je.inverse.apply(this,[t]),t.x=et(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Ue={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=w&&(this.k0=.5*(1+tt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=w&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=w&&(this.k0=.5*this.cons*Q(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Q(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-_,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,o,s,a=t.x,h=t.y,u=Math.sin(h),l=Math.cos(h),c=et(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=w&&Math.abs(h+this.lat0)<=w?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*l*Math.cos(c)),t.x=this.a*e*l*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*l*Math.cos(c))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,u,this.e))-_,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=w?(o=nt(this.e,h*this.con,this.con*u),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<w?(e=2*this.a*this.k0/(1+r*Math.cos(c)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(c))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(c))+this.y0),t.x=e*r*Math.sin(c)+this.x0,t))},inverse:function(t){var e,n,i,r,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=w?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<w?this.lat0>0?et(this.long0+Math.atan2(t.x,-1*t.y)):et(this.long0+Math.atan2(t.x,t.y)):et(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=w){if(s<=w)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*it(this.e,i),e=this.con*et(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=w?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/s),e=et(this.long0+Math.atan2(t.x*Math.sin(r),s*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*it(this.e,Math.tan(.5*(_+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(_+t))*Math.pow((1-e)/(1+e),.5*n)}};var Ge={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,h=0,u=o,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]},Ve=1e-7;var We={init:function(){var t,e,n,i,r,o,s,a,h,u,l,c,f,p=0,d=0,g=0,y=0,m=0,v=0,b=0;this.no_off=(f="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),x&&(b=this.alpha),M&&(p=this.rectified_grid_angle*E),x||M)d=this.longc;else if(g=this.long1,m=this.lat1,y=this.long2,v=this.lat2,Math.abs(m-v)<=Ve||(t=Math.abs(m))<=Ve||Math.abs(t-_)<=Ve||Math.abs(Math.abs(this.lat0)-_)<=Ve||Math.abs(Math.abs(v)-_)<=Ve)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>w?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/t,(r=(i=this.B*e/(n*Math.sqrt(t)))*i-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(nt(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),x||M?(x?(l=Math.asin(Math.sin(b)/i),M||(p=b)):(l=p,b=Math.asin(i*Math.sin(l))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(l))/this.B):(o=Math.pow(nt(this.e,m,Math.sin(m)),this.B),s=Math.pow(nt(this.e,v,Math.sin(v)),this.B),r=this.E/o,h=(s-o)/(s+o),u=((u=this.E*this.E)-s*o)/(u+s*o),(t=g-y)<-Math.pi?y-=I:t>Math.pi&&(y+=I),this.lam0=et(.5*(g+y)-Math.atan(u*Math.tan(.5*this.B*(g-y))/h)/this.B),l=Math.atan(2*Math.sin(this.B*et(g-this.lam0))/(r-1/r)),p=b=Math.asin(i*Math.sin(l))),this.singam=Math.sin(l),this.cosgam=Math.cos(l),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*l,this.v_pole_n=this.ArB*Math.log(Math.tan(S-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(S+r))},forward:function(t){var e,n,i,r,o,s,a,h,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-_)>w){if(e=.5*((o=this.E/Math.pow(nt(this.e,t.y,Math.sin(t.y)),this.B))-(s=1/o)),n=.5*(o+s),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<w)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),s=Math.cos(this.B*t.x),a=Math.abs(s)<Ve?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,s)}else h=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(u.x=a,u.y=h):(a-=this.u_0,u.x=h*this.cosrot+a*this.sinrot,u.y=a*this.cosrot-h*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,n,i,r,o,s,a,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),o=.5*(i+1/i),a=((s=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(a)-1)<w)h.x=0,h.y=a<0?-_:_;else{if(h.y=this.E/Math.sqrt((1+a)/(1-a)),h.y=it(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var He={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<w)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Q(this.e,e,n),r=nt(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Q(this.e,o,s),h=nt(this.e,this.lat2,o),u=nt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>w?this.ns=Math.log(i/a)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=w&&(n=tt(n)*(_-2*w));var i,r,o=Math.abs(Math.abs(n)-_);if(o>w)i=nt(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((o=n*this.ns)<=0)return null;r=0}var s=this.ns*et(e-this.long0);return t.x=this.k0*(r*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,i,r,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),n=1):(e=-Math.sqrt(s*s+a*a),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*s,n*a)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=it(this.e,i)))return null}else r=-_;return o=et(h/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Ye={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,o,s,a,h=t.x,u=t.y,l=et(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),i=-l*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,o,s,a,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,u+=1}while(0===a&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Xe(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function Ze(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Je(t){return.375*t*(1+.25*t*(1+.46875*t))}function Ke(t){return.05859375*t*t*(1+.75*t)}function $e(t){return t*t*t*(35/3072)}function Qe(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function tn(t){return Math.abs(t)<_?t:t-tt(t)*Math.PI}function en(t,e,n,i,r){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}var nn={init:function(){this.sphere||(this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Ke(this.es),this.e3=$e(this.es),this.ml0=this.a*Xe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=et(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),s=Math.cos(r),a=Qe(this.a,this.e,o),h=Math.tan(r)*Math.tan(r),u=i*Math.cos(r),l=u*u,c=this.es*s*s/(1-this.es);e=a*u*(1-l*h*(1/6-(8-h+8*c)*l/120)),n=this.a*Xe(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*o/s*l*(.5+(5-h+6*c)*l/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var s=en(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-_)<=w)return t.x=this.long0,t.y=_,r<0&&(t.y*=-1),t;var a=Qe(this.a,this.e,Math.sin(s)),h=a*a*a/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),l=i*this.a/a,c=l*l;e=s-a*Math.tan(s)/h*l*l*(.5-(1+3*u)*l*l/24),n=l*(1-c*(u/3+(1+3*u)*u*c/15))/Math.cos(s)}return t.x=et(n+this.long0),t.y=tn(e),t},names:["Cassini","Cassini_Soldner","cass"]};function rn(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var on=.3333333333333333,sn=.17222222222222222,an=.10257936507936508,hn=.06388888888888888,un=.0664021164021164,ln=.016415012942191543;var cn={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-_)<w?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<w?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=rn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*on,e=t*t,n[0]+=e*sn,n[1]=e*hn,e*=t,n[0]+=e*an,n[1]+=e*un,n[2]=e*ln,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=rn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,o,s,a,h,u,l,c=t.x,f=t.y;if(c=et(c-this.long0),this.sphere){if(o=Math.sin(f),l=Math.cos(f),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+l*i:1+this.sinph0*o+this.cosph0*l*i)<=w)return null;e=(n=Math.sqrt(2/n))*l*Math.sin(c),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*l*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<w)return null;n=S-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(c),n*=i}}else{switch(a=0,h=0,u=0,i=Math.cos(c),r=Math.sin(c),o=Math.sin(f),s=rn(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*h*i;break;case this.EQUIT:u=1+h*i;break;case this.N_POLE:u=_+f,s=this.qp-s;break;case this.S_POLE:u=f-_,s=this.qp+s}if(Math.abs(u)<w)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*h*i):(u=Math.sqrt(2/(1+h*i)))*a*this.ymf,e=this.xmf*u*h*r;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(u=Math.sqrt(s))*r,n=i*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,o,s,a,h,u,l,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((n=.5*(p=Math.sqrt(c*c+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=w?0:Math.asin(f*g/p),c*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=w?this.lat0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),c*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=_-n;break;case this.S_POLE:n-=_}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,(s=Math.sqrt(c*c+f*f))<w)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*s/this.rq),i=Math.cos(r),c*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+f*r*this.cosb1/s,o=this.qp*a,f=s*this.cosb1*i-f*this.sinb1*r):(a=f*r/s,o=this.qp*a,f=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=c*c+f*f))return t.x=this.long0,t.y=this.lat0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(c,f),h=Math.asin(a),u=this.apa,l=h+h,n=h+u[0]*Math.sin(l)+u[1]*Math.sin(l+l)+u[2]*Math.sin(l+l+l)}return t.x=et(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function fn(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var pn={init:function(){Math.abs(this.lat1+this.lat2)<w||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Q(this.e3,this.sin_po,this.cos_po),this.qs1=rn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Q(this.e3,this.sin_po,this.cos_po),this.qs2=rn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=rn(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>w?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=rn(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*et(e-this.long0),s=r*Math.sin(o)+this.x0,a=this.rh-r*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),o=et(r/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,o,s=fn(.5*e);if(t<w)return s;for(var a=t*t,h=1;h<=25;h++)if(s+=o=.5*(r=1-(i=t*(n=Math.sin(s)))*i)*r/Math.cos(s)*(e/(1-a)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return s;return null}};var dn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,o,s,a,h=t.x,u=t.y;return i=et(h-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),1,(o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=w?(s=this.x0+1*this.a*n*Math.sin(i)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/o):(s=this.x0+this.infinity_dist*n*Math.sin(i),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),s=fn((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),o=et(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]};function gn(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*_:_;for(var i,r,o,s,a=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(a),o=Math.cos(a),s=t*r,a+=i=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return a;return NaN}var yn={init:function(){this.sphere||(this.k0=Q(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,o=et(i-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=rn(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=et(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=gn(this.e,2*t.y*this.k0/this.a),e=et(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var mn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=et(e-this.long0),r=tn(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=et(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=tn(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var _n={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Ke(this.es),this.e3=$e(this.es),this.ml0=this.a*Xe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,o=t.y,s=et(r-this.long0);if(i=s*Math.sin(o),this.sphere)Math.abs(o)<=w?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(tn(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=w)e=this.a*s,n=-1*this.ml0;else{var a=Qe(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(i),n=this.a*Xe(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,o,s,a,h,u;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=w)e=et(i/this.a+this.long0),n=0;else{var l;for(s=this.lat0+r/this.a,a=i*i/this.a/this.a+s*s,h=s,o=20;o;--o)if(h+=u=-1*(s*(h*(l=Math.tan(h))+1)-h-.5*(h*h+a)*l)/((h-s)/l-1),Math.abs(u)<=w){n=h;break}e=et(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=w)n=0,e=et(this.long0+i/this.a);else{var c,f,p,d,g;for(s=(this.ml0+r)/this.a,a=i*i/this.a/this.a+s*s,h=s,o=20;o;--o)if(g=this.e*Math.sin(h),c=Math.sqrt(1-g*g)*Math.tan(h),f=this.a*Xe(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=u=(s*(c*(d=f/this.a)+1)-d-.5*c*(d*d+a))/(this.es*Math.sin(2*h)*(d*d+a-2*s*d)/(4*c)+(s-d)*(c*p-2/Math.sin(2*h))-p),Math.abs(u)<=w){n=h;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=et(this.long0+Math.asin(i*c/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var vn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,o=i/m*1e-5,s=r,a=1,h=0;for(e=1;e<=10;e++)a*=o,h+=this.A[e]*a;var u,l=h,c=s,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)u=p*l+f*c,f=f*l-p*c,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,s=(r-this.y0)/this.a,a=o/this.a,h=1,u=0,l=0,c=0;for(e=1;e<=6;e++)n=u*s+h*a,h=h*s-u*a,u=n,l=l+this.C_re[e]*h-this.C_im[e]*u,c=c+this.C_im[e]*h+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=l,g=c,y=s,_=a;for(e=2;e<=6;e++)p=g*l+d*c,d=d*l-g*c,g=p,y+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var v=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=g*l+d*c,d=d*l-g*c,g=p,v+=e*(this.B_re[e]*d-this.B_im[e]*g),b+=e*(this.B_im[e]*d+this.B_re[e]*g);var x=v*v+b*b;l=(y*v+_*b)/x,c=(_*v-y*b)/x}var w=l,E=c,M=1,S=0;for(e=1;e<=9;e++)M*=w,S+=this.D[e]*M;var I=this.lat0+S*m*1e5,C=this.long0+E;return t.x=C,t.y=I,t},names:["New_Zealand_Map_Grid","nzmg"]};var bn={init:function(){},forward:function(t){var e=t.x,n=t.y,i=et(e-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=et(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var xn={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ee(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=et(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),s=20;s;--s){var a=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<w)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),u=Math.cos(r);n=this.a*Me(r,h,u,this.en),e=this.a*i*u/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=fn((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=fn(Math.sin(e)/this.n)),n=et(n+this.long0),e=tn(e)):(e=Ie(t.y/this.a,this.es,this.en),(i=Math.abs(e))<_?(i=Math.sin(e),n=et(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-w<_&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var wn={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=et(e-this.long0),r=n,o=Math.PI*Math.sin(n);;){var s=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=s,Math.abs(s)<w)break}r/=2,Math.PI/2-Math.abs(n)<w&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=h,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=et(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var En={init:function(){Math.abs(this.lat1+this.lat2)<w||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Ke(this.es),this.e3=$e(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Q(this.e,this.sinphi,this.cosphi),this.ml1=Xe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<w?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Q(this.e,this.sinphi,this.cosphi),this.ml2=Xe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Xe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=Xe(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*et(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=et(this.long0+o/this.ns),i=tn(this.g-n/this.a),t.x=r,t.y=i,t):(i=en(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=et(this.long0+o/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]};var Mn={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,o=et(i-this.long0);Math.abs(r)<=w&&(e=this.x0+this.R*o,n=this.y0);var s=fn(2*Math.abs(r/Math.PI));(Math.abs(o)<=w||Math.abs(Math.abs(r)-_)<=w)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),h=a*a,u=Math.sin(s),l=Math.cos(s),c=l/(u+l-1),f=c*c,p=c*(2/u-1),d=p*p,g=Math.PI*this.R*(a*(c-d)+Math.sqrt(h*(c-d)*(c-d)-(d+h)*(f-d)))/(d+h);o<0&&(g=-g),e=this.x0+g;var y=h+c;return g=Math.PI*this.R*(p*y-a*Math.sqrt((d+h)*(h+1)-y*y))/(d+h),n=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,o,s,a,h,u,l,c,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,o=(i=t.x/c)*i+(r=t.y/c)*r,c=3*(r*r/(h=-2*(s=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(a=s-2*r*r+i*i)*a*a/h/h/h-9*s*a/h/h)/27)/(u=(s-a*a/3/h)/h)/(l=2*Math.sqrt(-u/3)),Math.abs(c)>1&&(c=c>=0?1:-1),f=Math.acos(c)/3,n=t.y>=0?(-l*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI:-(-l*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI,e=Math.abs(i)<w?this.long0:et(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Sn={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,h,u,l,c,f,p,d,g,y,m,v,b,x,E,M,S=t.x,I=t.y,C=Math.sin(t.y),P=Math.cos(t.y),N=et(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=w?(t.x=this.x0+this.a*(_-I)*Math.sin(N),t.y=this.y0-this.a*(_-I)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=w?(t.x=this.x0+this.a*(_+I)*Math.sin(N),t.y=this.y0+this.a*(_+I)*Math.cos(N),t):(v=this.sin_p12*C+this.cos_p12*P*Math.cos(N),m=(y=Math.acos(v))?y/Math.sin(y):1,t.x=this.x0+this.a*m*P*Math.sin(N),t.y=this.y0+this.a*m*(this.cos_p12*C-this.sin_p12*P*Math.cos(N)),t):(e=Ze(this.es),n=Je(this.es),i=Ke(this.es),r=$e(this.es),Math.abs(this.sin_p12-1)<=w?(o=this.a*Xe(e,n,i,r,_),s=this.a*Xe(e,n,i,r,I),t.x=this.x0+(o-s)*Math.sin(N),t.y=this.y0-(o-s)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=w?(o=this.a*Xe(e,n,i,r,_),s=this.a*Xe(e,n,i,r,I),t.x=this.x0+(o+s)*Math.sin(N),t.y=this.y0+(o+s)*Math.cos(N),t):(a=C/P,h=Qe(this.a,this.e,this.sin_p12),u=Qe(this.a,this.e,C),l=Math.atan((1-this.es)*a+this.es*h*this.sin_p12/(u*P)),b=0===(c=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(N)))?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(c)-Math.PI)<=w?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(N)*Math.cos(l)/Math.sin(c)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=h*b*(1-(x=b*b)*(g=(p=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*p)*(1-g)/6+(E=x*b)/8*(d=f*p)*(1-2*g)+(M=E*b)/120*(g*(4-7*g)-3*f*f*(1-7*g))-M*b/48*d),t.x=this.x0+y*Math.sin(c),t.y=this.y0+y*Math.cos(c),t))},inverse:function(t){var e,n,i,r,o,s,a,h,u,l,c,f,p,d,g,y,m,v,b,x,E,M,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*_*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=w?s=this.lat0:(s=fn(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-_,o=Math.abs(a)<=w?this.lat0>=0?et(this.long0+Math.atan2(t.x,-t.y)):et(this.long0-Math.atan2(-t.x,t.y)):et(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=o,t.y=s,t}return h=Ze(this.es),u=Je(this.es),l=Ke(this.es),c=$e(this.es),Math.abs(this.sin_p12-1)<=w?(s=en(((f=this.a*Xe(h,u,l,c,_))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,u,l,c),o=et(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=s,t):Math.abs(this.sin_p12+1)<=w?(f=this.a*Xe(h,u,l,c,_),s=en(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,u,l,c),o=et(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=Qe(this.a,this.e,this.sin_p12),y=Math.cos(g),v=-(m=this.e*this.cos_p12*y)*m/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*y/(1-this.es),M=1-v*(E=(x=e/p)-v*(1+v)*Math.pow(x,3)/6-b*(1+3*v)*Math.pow(x,4)/24)*E/2-x*E*E*E/6,d=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*y),o=et(this.long0+Math.asin(Math.sin(g)*Math.sin(E)/Math.cos(d))),S=Math.sin(d),s=Math.atan2((S-this.es*M*this.sin_p12)*Math.tan(d),S*(1-this.es)),t.x=o,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var In={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,h=t.x,u=t.y;return i=et(h-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),1,((o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=w)&&(s=1*this.a*n*Math.sin(i),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s,a;return t.x-=this.x0,t.y-=this.y0,n=fn((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=w?(a=this.lat0,t.x=s,t.y=a,t):(a=fn(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.abs(this.lat0)-_,Math.abs(o)<=w?(s=this.lat0>=0?et(this.long0+Math.atan2(t.x,-t.y)):et(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=et(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=s,t.y=a,t))},names:["ortho"]},Cn=1,Pn=2,Nn=3,Ln=4,On=5,kn=6,An={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Rn(t,e,n,i){var r;return t<w?(i.value=An.AREA_0,r=0):(r=Math.atan2(e,n),Math.abs(r)<=S?i.value=An.AREA_0:r>S&&r<=_+S?(i.value=An.AREA_1,r-=_):r>_+S||r<=-(_+S)?(i.value=An.AREA_2,r=r>=0?r-C:r+C):(i.value=An.AREA_3,r+=_)),r}function Tn(t,e){var n=t+e;return n<-C?n+=I:n>+C&&(n-=I),n}var Dn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=_-S/2?this.face=On:this.lat0<=-(_-S/2)?this.face=kn:Math.abs(this.long0)<=S?this.face=Cn:Math.abs(this.long0)<=_+S?this.face=this.long0>0?Pn:Ln:this.face=Nn,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,o,s,a={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===On)r=_-e,n>=S&&n<=_+S?(h.value=An.AREA_0,i=n-_):n>_+S||n<=-(_+S)?(h.value=An.AREA_1,i=n>0?n-C:n+C):n>-(_+S)&&n<=-S?(h.value=An.AREA_2,i=n+_):(h.value=An.AREA_3,i=n);else if(this.face===kn)r=_+e,n>=S&&n<=_+S?(h.value=An.AREA_0,i=-n+_):n<S&&n>=-S?(h.value=An.AREA_1,i=-n):n<-S&&n>=-(_+S)?(h.value=An.AREA_2,i=-n-_):(h.value=An.AREA_3,i=n>0?-n+C:-n-C);else{var u,l,c,f,p,d;this.face===Pn?n=Tn(n,+_):this.face===Nn?n=Tn(n,+C):this.face===Ln&&(n=Tn(n,-_)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),u=p*Math.cos(n),l=p*d,c=f,this.face===Cn?i=Rn(r=Math.acos(u),c,l,h):this.face===Pn?i=Rn(r=Math.acos(l),c,-u,h):this.face===Nn?i=Rn(r=Math.acos(-u),c,-l,h):this.face===Ln?i=Rn(r=Math.acos(-l),c,u,h):(r=i=0,h.value=An.AREA_0)}return s=Math.atan(12/C*(i+Math.acos(Math.sin(i)*Math.cos(S))-_)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===An.AREA_1?s+=_:h.value===An.AREA_2?s+=C:h.value===An.AREA_3&&(s+=1.5*C),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,i,r,o,s,a,h,u,l,c,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=An.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=An.AREA_1,e-=_):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=An.AREA_2,e=e<0?e+C:e-C):(d.value=An.AREA_3,e+=_),u=C/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),this.face===On)h=Math.acos(a),p.phi=_-h,d.value===An.AREA_0?p.lam=s+_:d.value===An.AREA_1?p.lam=s<0?s+C:s-C:d.value===An.AREA_2?p.lam=s-_:p.lam=s;else if(this.face===kn)h=Math.acos(a),p.phi=h-_,d.value===An.AREA_0?p.lam=-s+_:d.value===An.AREA_1?p.lam=-s:d.value===An.AREA_2?p.lam=-s-_:p.lam=s<0?-s-C:-s+C;else{var g,y,m;u=(g=a)*g,y=(u+=(m=u>=1?0:Math.sqrt(1-u)*Math.sin(s))*m)>=1?0:Math.sqrt(1-u),d.value===An.AREA_1?(u=y,y=-m,m=u):d.value===An.AREA_2?(y=-y,m=-m):d.value===An.AREA_3&&(u=y,y=m,m=-u),this.face===Pn?(u=g,g=-y,y=u):this.face===Nn?(g=-g,y=-y):this.face===Ln&&(u=g,g=y,y=-u),p.phi=Math.acos(-m)-_,p.lam=Math.atan2(y,g),this.face===Pn?p.lam=Tn(p.lam,-_):this.face===Nn?p.lam=Tn(p.lam,-C):this.face===Ln&&(p.lam=Tn(p.lam,+_))}return 0!==this.es&&(l=p.phi<0?1:0,c=Math.tan(p.phi),f=this.b/Math.sqrt(c*c+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),l&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Fn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Bn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],zn=.8487,jn=1.3523,qn=M/5,Un=1/qn,Gn=18,Vn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Wn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=et(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*qn);i<0?i=0:i>=Gn&&(i=17);var r={x:Vn(Fn[i],n=M*(n-Un*i))*e,y:Vn(Bn[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*zn+this.x0,r.y=r.y*this.a*jn+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*zn),y:Math.abs(t.y-this.y0)/(this.a*jn)};if(e.y>=1)e.x/=Fn[18][0],e.y=t.y<0?-_:_;else{var n=Math.floor(e.y*Gn);for(n<0?n=0:n>=Gn&&(n=17);;)if(Bn[n][0]>e.y)--n;else{if(!(Bn[n+1][0]<=e.y))break;++n}var i=Bn[n],r=5*(e.y-i[0])/(Bn[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var o=t(r);if(r-=o,Math.abs(o)<n)break}return r}((function(t){return(Vn(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,w,100),e.x/=Vn(Fn[n],r),e.y=(5*n+r)*E,t.y<0&&(e.y=-e.y)}return e.x=et(e.x+this.long0),e},names:["Robinson","robin"]};var Hn={init:function(){this.name="geocent"},forward:function(t){return Ct(t,this.es,this.a)},inverse:function(t){return Pt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Yn=0,Xn=1,Zn=2,Jn=3,Kn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var $n={init:function(){if(Object.keys(Kn).forEach(function(t){if(void 0===this[t])this[t]=Kn[t].def;else{if(Kn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Kn[t].num&&(this[t]=parseFloat(this[t]))}Kn[t].degrees&&(this[t]=this[t]*E)}.bind(this)),Math.abs(Math.abs(this.lat0)-_)<w?this.mode=this.lat0<0?Xn:Yn:Math.abs(this.lat0)<w?this.mode=Zn:(this.mode=Jn,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,i,r,o=Math.sin(t.y),s=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case Jn:n=this.sinph0*o+this.cosph0*s*a;break;case Zn:n=s*a;break;case Xn:n=-o;break;case Yn:n=o}switch(e=(n=this.pn1/(this.p-n))*s*Math.sin(t.x),this.mode){case Jn:n*=this.cosph0*o-this.sinph0*s*a;break;case Zn:n*=o;break;case Yn:n*=-s*a;break;case Xn:n*=s*a}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=Ne(t.x,t.y);if(Math.abs(o)<w)r.x=0,r.y=t.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Jn:r.y=Math.asin(s*this.sinph0+t.y*a*this.cosph0/o),t.y=(s-this.sinph0*Math.sin(r.y))*o,t.x*=a*this.cosph0;break;case Zn:r.y=Math.asin(t.y*a/o),t.y=s*o,t.x*=a;break;case Yn:r.y=Math.asin(s),t.y=-t.y;break;case Xn:r.y=-Math.asin(s)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var Qn,ti={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,i,r,o=t.x,s=t.y;if(o-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var a=this.radius_p/Ne(this.radius_p*Math.cos(s),Math.sin(s));if(n=a*Math.cos(o)*Math.cos(s),i=a*Math.sin(o)*Math.cos(s),r=a*Math.sin(s),(this.radius_g-n)*n-i*i-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ne(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/Ne(i,e)))}else"sphere"===this.shape&&(e=Math.cos(s),n=Math.cos(o)*e,i=Math.sin(o)*e,r=Math.sin(s),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ne(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/Ne(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,r,o=-1,s=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Ne(1,a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Ne(1,s));var h=a/this.radius_p;if(e=s*s+h*h+o*o,(i=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),o=this.radius_g+r*o,s*=r,a*=r,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+a*a+o*o,(i=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),o=this.radius_g+r*o,s*=r,a*=r,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Vt.defaultDatum="WGS84",Vt.Proj=St,Vt.WGS84=new Vt.Proj("WGS84"),Vt.Point=le,Vt.toPoint=Ft,Vt.defs=X,Vt.nadgrid=function(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:bt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var i=176,r=[],o=0;o<e.nSubgrids;o++){var s=wt(t,i,n),a=Et(t,i,s,n),h=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),u=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);r.push({ll:[vt(s.lowerLongitude),vt(s.lowerLatitude)],del:[vt(s.longitudeInterval),vt(s.latitudeInterval)],lim:[h,u],count:s.gridNodeCount,cvs:xt(a)})}return r}(n,r,i),s={header:r,subgrids:o};return yt[t]=s,s},Vt.transform=jt,Vt.mgrs=Qt,Vt.version="__VERSION__",(Qn=Vt).Proj.projections.add(Ce),Qn.Proj.projections.add(De),Qn.Proj.projections.add(Be),Qn.Proj.projections.add(qe),Qn.Proj.projections.add(Ue),Qn.Proj.projections.add(Ge),Qn.Proj.projections.add(We),Qn.Proj.projections.add(He),Qn.Proj.projections.add(Ye),Qn.Proj.projections.add(nn),Qn.Proj.projections.add(cn),Qn.Proj.projections.add(pn),Qn.Proj.projections.add(dn),Qn.Proj.projections.add(yn),Qn.Proj.projections.add(mn),Qn.Proj.projections.add(_n),Qn.Proj.projections.add(vn),Qn.Proj.projections.add(bn),Qn.Proj.projections.add(xn),Qn.Proj.projections.add(wn),Qn.Proj.projections.add(En),Qn.Proj.projections.add(Mn),Qn.Proj.projections.add(Sn),Qn.Proj.projections.add(In),Qn.Proj.projections.add(Dn),Qn.Proj.projections.add(Wn),Qn.Proj.projections.add(Hn),Qn.Proj.projections.add($n),Qn.Proj.projections.add(ti);var ei=Vt,ni=u;ni.default&&(ni=ni.default);var ii,ri={},oi=r("6ZWSX").Buffer,si=r("hPtJY");ri=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var h=void 0;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return r(e[s][1][t]||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,s,a,h,u,l=[],c=0,f=t.length,p=f,d="string"!==i.getTypeOf(t);c<t.length;)p=f-c,r=d?(e=t[c++],n=c<f?t[c++]:0,c<f?t[c++]:0):(e=t.charCodeAt(c++),n=c<f?t.charCodeAt(c++):0,c<f?t.charCodeAt(c++):0),s=e>>2,a=(3&e)<<4|n>>4,h=1<p?(15&n)<<2|r>>6:64,u=2<p?63&r:64,l.push(o.charAt(s)+o.charAt(a)+o.charAt(h)+o.charAt(u));return l.join("")},n.decode=function(t){var e,n,i,s,a,h,u=0,l=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&p--,t.charAt(t.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=r.uint8array?new Uint8Array(0|p):new Array(0|p);u<t.length;)e=o.indexOf(t.charAt(u++))<<2|(s=o.indexOf(t.charAt(u++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(u++)))>>2,i=(3&a)<<6|(h=o.indexOf(t.charAt(u++))),f[l++]=e,64!==a&&(f[l++]=n),64!==h&&(f[l++]=i);return f}},{"./support":30,"./utils":32}],2:[function(t,e,n){var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=i?"uint8array":"array";function h(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(h,s),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},h.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new h("Deflate",t)},n.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,s,l){var c,f,p=t.file,d=t.compression,g=l!==a.utf8encode,y=o.transformTo("string",l(p.name)),m=o.transformTo("string",a.utf8encode(p.name)),_=p.comment,v=o.transformTo("string",l(_)),b=o.transformTo("string",a.utf8encode(_)),x=m.length!==p.name.length,w=b.length!==_.length,E="",M="",S="",I=p.dir,C=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(P.crc32=t.crc32,P.compressedSize=t.compressedSize,P.uncompressedSize=t.uncompressedSize);var N=0;e&&(N|=8),g||!x&&!w||(N|=2048);var L=0,O=0;I&&(L|=16),"UNIX"===s?(O=798,L|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,I)):(O=20,L|=function(t){return 63&(t||0)}(p.dosPermissions)),c=C.getUTCHours(),c<<=6,c|=C.getUTCMinutes(),c<<=5,c|=C.getUTCSeconds()/2,f=C.getUTCFullYear()-1980,f<<=4,f|=C.getUTCMonth()+1,f<<=5,f|=C.getUTCDate(),x&&(M=i(1,1)+i(h(y),4)+m,E+="up"+i(M.length,2)+M),w&&(S=i(1,1)+i(h(v),4)+b,E+="uc"+i(S.length,2)+S);var k="";return k+="\n\0",k+=i(N,2),k+=d.magic,k+=i(c,2),k+=i(f,2),k+=i(P.crc32,4),k+=i(P.compressedSize,4),k+=i(P.uncompressedSize,4),k+=i(y.length,2),k+=i(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+k+y+E,dirRecord:u.CENTRAL_FILE_HEADER+i(O,2)+k+i(v.length,2)+"\0\0\0\0"+i(L,4)+i(r,4)+y+E+v}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),h=t("../crc32"),u=t("../signature");function l(t,e,n,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,s){var a=o.transformTo("string",s(r));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},h=n.dir,u=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:t,dir:h,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){var i=t("./utils"),r=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function u(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new a);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(u(i[o]));return r.Promise.all(n)})).then((function(t){for(var r=t.shift(),o=r.files,s=0;s<o.length;s++){var a=o[s],h=a.fileNameStr,u=i.resolve(a.fileNameStr);n.file(u,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(n.file(u).unsafeOriginalName=h)}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){e.exports={isNode:void 0!==oi,newBufferFrom:function(t,e){if(oi.from&&oi.from!==Uint8Array.from)return oi.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new oi(t,e)},allocBuffer:function(t){if(oi.alloc)return oi.alloc(t);var e=new oi(t);return e.fill(0),e},isBuffer:function(t){return oi.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){function i(t,e,n){var i,r=o.getTypeOf(e),a=o.extend(n||{},h);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=g(t)),a.createFolders&&(i=d(t))&&y.call(this,i,!0);var c="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!c),(e instanceof u&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var m=null;m=e instanceof u||e instanceof s?e:f.isNode&&f.isStream(e)?new p(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var _=new l(t,m,a);this.files[t]=_}var r=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),h=t("./defaults"),u=t("./compressedObject"),l=t("./zipObject"),c=t("./generate"),f=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:h.createFolders,t=g(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(m(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=y.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=c.generateWorker(this,n,i)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new h(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,n){var i=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),s=t("../base64"),a=t("../support"),h=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function l(t,e){return new h.Promise((function(n,r){var o=[],a=t._internalType,h=t._outputType,u=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}(h,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return oi.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,o),u);n(t)}catch(t){r(t)}o=[]})).resume()}))}function c(t,e,n){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=n,i.checkSupport(s),this._worker=t.pipe(new r(s)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==oi,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),h=0;h<256;h++)a[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,s,a=t.length,h=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),o=s=0;s<h;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,s=t.length,h=new Array(2*s);for(e=n=0;e<s;)if((r=t[e++])<128)h[n++]=r;else if(4<(o=a[r]))h[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<s;)r=r<<6|63&t[e++],o--;1<o?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return h.length!==n&&(h.subarray?h=h.subarray(0,n):h.length=n),i.applyFromCharCode(h)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(u,s),u.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),h=e;s!==e.length&&(r.uint8array?(h=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(h=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(h),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,i.inherits(l,s),l.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),s=t("./external");function a(t){return t}function h(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function l(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=u.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=u.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return u.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return u.stringifyByChar(t)}function c(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=l;var f={};f.string={string:a,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,o.allocBuffer(t.length))}},f.array={string:l,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:a},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return f[i][t](e)},n.resolve=function(t){for(var e=t.split("/"),n=[],i=0;i<e.length;i++){var r=e[i];"."===r||""===r&&0!==i&&i!==e.length-1||(".."===r?n.pop():n.push(r))}return n.join("/")},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,a,u){return s.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var l=n.getTypeOf(e);return l?("arraybuffer"===l?e=n.transformTo("uint8array",e):"string"===l&&(u?e=r.decode(e):o&&!0!==a&&(e=function(t){return h(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=t("./support");function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),h=t("./compressions"),u=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(Object.prototype.hasOwnProperty.call(h,e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),h=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)i.prototype[u[c]]=l;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(t){var e,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,s=new r(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),e=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var h=new t.MessageChannel;h.port1.onmessage=l,e=function(){h.port2.postMessage(0)}}var u=[];function l(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}n.exports=function(t){1!==u.push(t)||i||e()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){var i=t("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],h=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(t,e,n){i((function(){var i;try{i=e(n)}catch(i){return o.reject(t,i)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=d((function(){e(r,i)}));"error"===s.status&&i(s.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);return this.state!==h?c(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){o.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},u.reject=function(t){var e=new this(r);return o.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,h=-1,u=new this(r);++h<n;)l(t[h],h);return u;function l(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(u,s))}),(function(t){i||(i=!0,o.reject(u,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s,a=-1,h=new this(r);++a<n;)s=t[a],e.resolve(s).then((function(t){i||(i=!0,o.resolve(h,t))}),(function(t){i||(i=!0,o.reject(h,t))}));return h}},{immediate:36}],38:[function(t,e,n){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),h=Object.prototype.toString,u=0,l=-1,c=0,f=8;function p(t){if(!(this instanceof p))return new p(t);this.options=r.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==u)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,d))!==u)throw new Error(s[n]);this._dict_set=!0}}function d(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}p.prototype.push=function(t,e){var n,s,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(l),a.next_out=0,a.avail_out=l),1!==(n=i.deflate(a,s))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==s||(this.onEnd(u),a.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=d,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),h=t("./zlib/zstream"),u=t("./zlib/gzheader"),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(t,e){var n,a,h,u,c,f,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(d),p.next_out=0,p.avail_out=d),(n=i.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(f="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,n=i.inflateSetDictionary(this.strm,f)),n===s.Z_BUF_ERROR&&!0===y&&(n=s.Z_OK,y=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==s.Z_STREAM_END&&(0!==p.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=o.utf8border(p.output,p.next_out),u=p.next_out-h,c=o.buf2string(p.output,h),p.next_out=u,p.avail_out=d-u,u&&r.arraySet(p.output,p.output,h,u,0),this.onData(c)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(y=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),p.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=f,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function h(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,h=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(h),o=s=0;s<h;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return h(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,a=e||t.length,u=new Array(2*a);for(n=i=0;n<a;)if((r=t[n++])<128)u[i++]=r;else if(4<(o=s[r]))u[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<a;)r=r<<6|63&t[n++],o--;1<o?u[i++]=65533:r<65536?u[i++]=r:(r-=65536,u[i++]=55296|r>>10&1023,u[i++]=56320|1023&r)}return h(u,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},{}],44:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){var i,r=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),h=t("./messages"),u=0,l=4,c=0,f=-2,p=-1,d=4,g=2,y=8,m=9,_=286,v=30,b=19,x=2*_+1,w=15,E=3,M=258,S=M+E+1,I=42,C=113,P=1,N=2,L=3,O=4;function k(t,e){return t.msg=h[e],e}function A(t){return(t<<1)-(4<t?9:0)}function R(t){for(var e=t.length;0<=--e;)t[e]=0}function T(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function D(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,T(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function B(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function z(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-S?t.strstart-(t.w_size-S):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+M,p=u[o+s-1],d=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(n=e)+s]===d&&u[n+s-1]===p&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(i=M-(f-o),o=f-M,s<i){if(t.match_start=e,a<=(s=i))break;p=u[o+s-1],d=u[o+s]}}}while((e=c[e&l])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead}function j(t){var e,n,i,o,h,u,l,c,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-S)){for(r.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;i=t.head[--e],t.head[e]=d<=i?i-d:0,--n;);for(e=n=d;i=t.prev[--e],t.prev[e]=d<=i?i-d:0,--n;);o+=d}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,c=t.strstart+t.lookahead,p=void 0,(f=o)<(p=u.avail_in)&&(p=f),n=0===p?0:(u.avail_in-=p,r.arraySet(l,u.input,u.next_in,p,c),1===u.state.wrap?u.adler=s(u.adler,l,p,c):2===u.state.wrap&&(u.adler=a(u.adler,l,p,c)),u.next_in+=p,u.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=E)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+E-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<S&&0!==t.strm.avail_in)}function q(t,e){for(var n,i;;){if(t.lookahead<S){if(j(t),t.lookahead<S&&e===u)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-S&&(t.match_length=z(t,n)),t.match_length>=E)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(D(t,!0),0===t.strm.avail_out?L:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:N}function U(t,e){for(var n,i,r;;){if(t.lookahead<S){if(j(t),t.lookahead<S&&e===u)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-S&&(t.match_length=z(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===E&&4096<t.strstart-t.match_start)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-E,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=E-1,t.strstart++,i&&(D(t,!1),0===t.strm.avail_out))return P}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&D(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return P}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(D(t,!0),0===t.strm.avail_out?L:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:N}function G(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*x),this.dyn_dtree=new r.Buf16(2*(2*v+1)),this.bl_tree=new r.Buf16(2*(2*b+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(w+1),this.heap=new r.Buf16(2*_+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*_+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?I:C,t.adler=2===e.wrap?0:1,e.last_flush=u,o._tr_init(e),c):k(t,f)}function H(t){var e=W(t);return e===c&&function(t){t.window_size=2*t.w_size,R(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=E-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,n,i,o,s){if(!t)return f;var a=1;if(e===p&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),o<1||m<o||n!==y||i<8||15<i||e<0||9<e||s<0||d<s)return k(t,f);8===i&&(i=9);var h=new V;return(t.state=h).strm=t,h.wrap=a,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+E-1)/E),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=n,H(t)}i=[new G(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&e===u)return P;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,D(t,!1),0===t.strm.avail_out))return P;if(t.strstart-t.block_start>=t.w_size-S&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?L:O):(t.strstart>t.block_start&&(D(t,!1),t.strm.avail_out),P)})),new G(4,4,8,4,q),new G(4,5,16,8,q),new G(4,6,32,32,q),new G(4,4,16,16,U),new G(8,16,32,32,U),new G(8,16,128,128,U),new G(8,32,128,256,U),new G(32,128,258,1024,U),new G(32,258,258,4096,U)],n.deflateInit=function(t,e){return Y(t,e,y,15,8,0)},n.deflateInit2=Y,n.deflateReset=H,n.deflateResetKeep=W,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,c):f},n.deflate=function(t,e){var n,r,s,h;if(!t||!t.state||5<e||e<0)return t?k(t,f):f;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==l)return k(t,0===t.avail_out?-5:f);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===I)if(2===r.wrap)t.adler=0,F(r,31),F(r,139),F(r,8),r.gzhead?(F(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),F(r,255&r.gzhead.time),F(r,r.gzhead.time>>8&255),F(r,r.gzhead.time>>16&255),F(r,r.gzhead.time>>24&255),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(F(r,255&r.gzhead.extra.length),F(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(F(r,0),F(r,0),F(r,0),F(r,0),F(r,0),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,3),r.status=C);else{var p=y+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=C,B(r,p),0!==r.strstart&&(B(r,t.adler>>>16),B(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),T(t),s=r.pending,r.pending!==r.pending_buf_size));)F(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),T(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,F(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),T(t),s=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,F(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===h&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&T(t),r.pending+2<=r.pending_buf_size&&(F(r,255&t.adler),F(r,t.adler>>8&255),t.adler=0,r.status=C)):r.status=C),0!==r.pending){if(T(t),0===t.avail_out)return r.last_flush=-1,c}else if(0===t.avail_in&&A(e)<=A(n)&&e!==l)return k(t,-5);if(666===r.status&&0!==t.avail_in)return k(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==u&&666!==r.status){var d=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===u)return P;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?L:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:N}(r,e):3===r.strategy?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=M){if(j(t),t.lookahead<=M&&e===u)return P;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&0<t.strstart&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+M;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=M-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=E?(n=o._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?L:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:N}(r,e):i[r.level].func(r,e);if(d!==L&&d!==O||(r.status=666),d===P||d===L)return 0===t.avail_out&&(r.last_flush=-1),c;if(d===N&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(R(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),T(t),0===t.avail_out))return r.last_flush=-1,c}return e!==l?c:r.wrap<=0?1:(2===r.wrap?(F(r,255&t.adler),F(r,t.adler>>8&255),F(r,t.adler>>16&255),F(r,t.adler>>24&255),F(r,255&t.total_in),F(r,t.total_in>>8&255),F(r,t.total_in>>16&255),F(r,t.total_in>>24&255)):(B(r,t.adler>>>16),B(r,65535&t.adler)),T(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?c:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==I&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?k(t,f):(t.state=null,e===C?k(t,-3):c):f},n.deflateSetDictionary=function(t,e){var n,i,o,a,h,u,l,p,d=e.length;if(!t||!t.state)return f;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==I||n.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new r.Buf8(n.w_size),r.arraySet(p,e,d-n.w_size,n.w_size,0),e=p,d=n.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,j(n);n.lookahead>=E;){for(i=n.strstart,o=n.lookahead-(E-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+E-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=E-1,j(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,n.wrap=a,c},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){e.exports=function(t,e){var n,i,r,o,s,a,h,u,l,c,f,p,d,g,y,m,_,v,b,x,w,E,M,S,I;n=t.state,i=t.next_in,S=t.input,r=i+(t.avail_in-5),o=t.next_out,I=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),h=n.dmax,u=n.wsize,l=n.whave,c=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{d<15&&(p+=S[i++]<<d,d+=8,p+=S[i++]<<d,d+=8),v=g[p&m];e:for(;;){if(p>>>=b=v>>>24,d-=b,0==(b=v>>>16&255))I[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=g[(65535&v)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&v,(b&=15)&&(d<b&&(p+=S[i++]<<d,d+=8),x+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=S[i++]<<d,d+=8,p+=S[i++]<<d,d+=8),v=y[p&_];n:for(;;){if(p>>>=b=v>>>24,d-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=y[(65535&v)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&v,d<(b&=15)&&(p+=S[i++]<<d,(d+=8)<b&&(p+=S[i++]<<d,d+=8)),h<(w+=p&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,(b=o-s)<w){if(l<(b=w-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(M=f,(E=0)===c){if(E+=u-b,b<x){for(x-=b;I[o++]=f[E++],--b;);E=o-w,M=I}}else if(c<b){if(E+=u+c-b,(b-=c)<x){for(x-=b;I[o++]=f[E++],--b;);if(E=0,c<x){for(x-=b=c;I[o++]=f[E++],--b;);E=o-w,M=I}}}else if(E+=c-b,b<x){for(x-=b;I[o++]=f[E++],--b;);E=o-w,M=I}for(;2<x;)I[o++]=M[E++],I[o++]=M[E++],I[o++]=M[E++],x-=3;x&&(I[o++]=M[E++],1<x&&(I[o++]=M[E++]))}else{for(E=o-w;I[o++]=I[E++],I[o++]=I[E++],I[o++]=I[E++],2<(x-=3););x&&(I[o++]=I[E++],1<x&&(I[o++]=I[E++]))}break}}break}}while(i<r&&o<a);i-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=d}},{}],49:[function(t,e,n){var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),h=1,u=2,l=0,c=-2,f=1,p=852,d=592;function g(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=f,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(p),e.distcode=e.distdyn=new i.Buf32(d),e.sane=1,e.back=-1,l):c}function _(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,m(t)):c}function v(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,_(t))):c}function b(t,e){var n,i;return t?(i=new y,(t.state=i).window=null,(n=v(t,e))!==l&&(t.state=null),n):c}var x,w,E=!0;function M(t){if(E){var e;for(x=new i.Buf32(512),w=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(h,t.lens,0,288,x,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(u,t.lens,0,32,w,0,t.work,{bits:5}),E=!1}t.lencode=x,t.lenbits=9,t.distcode=w,t.distbits=5}function S(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(o=s.wsize-s.wnext)&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=_,n.inflateReset2=v,n.inflateResetKeep=m,n.inflateInit=function(t){return b(t,15)},n.inflateInit2=b,n.inflate=function(t,e){var n,p,d,y,m,_,v,b,x,w,E,I,C,P,N,L,O,k,A,R,T,D,F,B,z=0,j=new i.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(n=t.state).mode&&(n.mode=13),m=t.next_out,d=t.output,v=t.avail_out,y=t.next_in,p=t.input,_=t.avail_in,b=n.hold,x=n.bits,w=_,E=v,D=l;t:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(2&n.wrap&&35615===b){j[n.check=0]=255&b,j[1]=b>>>8&255,n.check=o(n.check,j,2,0),x=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){t.msg="unknown compression method",n.mode=30;break}if(x-=4,T=8+(15&(b>>>=4)),0===n.wbits)n.wbits=T;else if(T>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<T,t.adler=n.check=1,n.mode=512&b?10:12,x=b=0;break;case 2:for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(n.flags=b,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=o(n.check,j,2,0)),x=b=0,n.mode=3;case 3:for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.head&&(n.head.time=b),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,j[2]=b>>>16&255,j[3]=b>>>24&255,n.check=o(n.check,j,4,0)),x=b=0,n.mode=4;case 4:for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=o(n.check,j,2,0)),x=b=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=o(n.check,j,2,0)),x=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(_<(I=n.length)&&(I=_),I&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,p,y,I,T)),512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,n.length-=I),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break t;for(I=0;T=p[y+I++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T)),T&&I<_;);if(512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,T)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break t;for(I=0;T=p[y+I++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T)),T&&I<_;);if(512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,T)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}x=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}t.adler=n.check=g(b),x=b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){b>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}switch(n.last=1&b,x-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(M(n),n.mode=20,6!==e)break;b>>>=2,x-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}b>>>=2,x-=2;break;case 14:for(b>>>=7&x,x-=7&x;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,x=b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(I=n.length){if(_<I&&(I=_),v<I&&(I=v),0===I)break t;i.arraySet(d,p,y,I,m),_-=I,y+=I,v-=I,m+=I,n.length-=I;break}n.mode=12;break;case 17:for(;x<14;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(n.nlen=257+(31&b),b>>>=5,x-=5,n.ndist=1+(31&b),b>>>=5,x-=5,n.ncode=4+(15&b),b>>>=4,x-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.lens[q[n.have++]]=7&b,b>>>=3,x-=3}for(;n.have<19;)n.lens[q[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},D=a(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,D){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;L=(z=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,O=65535&z,!((N=z>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(O<16)b>>>=N,x-=N,n.lens[n.have++]=O;else{if(16===O){for(B=N+2;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b>>>=N,x-=N,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}T=n.lens[n.have-1],I=3+(3&b),b>>>=2,x-=2}else if(17===O){for(B=N+3;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}x-=N,T=0,I=3+(7&(b>>>=N)),b>>>=3,x-=3}else{for(B=N+7;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}x-=N,T=0,I=11+(127&(b>>>=N)),b>>>=7,x-=7}if(n.have+I>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;I--;)n.lens[n.have++]=T}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},D=a(h,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,D){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},D=a(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,D){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=_&&258<=v){t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,s(t,E),m=t.next_out,d=t.output,v=t.avail_out,y=t.next_in,p=t.input,_=t.avail_in,b=n.hold,x=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;L=(z=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,O=65535&z,!((N=z>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(L&&0==(240&L)){for(k=N,A=L,R=O;L=(z=n.lencode[R+((b&(1<<k+A)-1)>>k)])>>>16&255,O=65535&z,!(k+(N=z>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}b>>>=k,x-=k,n.back+=k}if(b>>>=N,x-=N,n.back+=N,n.length=O,0===L){n.mode=26;break}if(32&L){n.back=-1,n.mode=12;break}if(64&L){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&L,n.mode=22;case 22:if(n.extra){for(B=n.extra;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;L=(z=n.distcode[b&(1<<n.distbits)-1])>>>16&255,O=65535&z,!((N=z>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(0==(240&L)){for(k=N,A=L,R=O;L=(z=n.distcode[R+((b&(1<<k+A)-1)>>k)])>>>16&255,O=65535&z,!(k+(N=z>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}b>>>=k,x-=k,n.back+=k}if(b>>>=N,x-=N,n.back+=N,64&L){t.msg="invalid distance code",n.mode=30;break}n.offset=O,n.extra=15&L,n.mode=24;case 24:if(n.extra){for(B=n.extra;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break t;if(I=E-v,n.offset>I){if((I=n.offset-I)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}C=I>n.wnext?(I-=n.wnext,n.wsize-I):n.wnext-I,I>n.length&&(I=n.length),P=n.window}else P=d,C=m-n.offset,I=n.length;for(v<I&&(I=v),v-=I,n.length-=I;d[m++]=P[C++],--I;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break t;d[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===_)break t;_--,b|=p[y++]<<x,x+=8}if(E-=v,t.total_out+=E,n.total+=E,E&&(t.adler=n.check=n.flags?o(n.check,d,E,m-E):r(n.check,d,E,m-E)),E=v,(n.flags?b:g(b))!==n.check){t.msg="incorrect data check",n.mode=30;break}x=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}x=b=0}n.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;default:return c}return t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,(n.wsize||E!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&S(t,t.output,t.next_out,E-t.avail_out)?(n.mode=31,-4):(w-=t.avail_in,E-=t.avail_out,t.total_in+=w,t.total_out+=E,n.total+=E,n.wrap&&E&&(t.adler=n.check=n.flags?o(n.check,d,E,t.next_out-E):r(n.check,d,E,t.next_out-E)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===E||4===e)&&D===l&&(D=-5),D)},n.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,l},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:((n.head=e).done=!1,l):c},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&r(1,e,i,0)!==n.check?-3:S(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,l):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,h,u,l,c,f){var p,d,g,y,m,_,v,b,x,w=f.bits,E=0,M=0,S=0,I=0,C=0,P=0,N=0,L=0,O=0,k=0,A=null,R=0,T=new i.Buf16(16),D=new i.Buf16(16),F=null,B=0;for(E=0;E<=15;E++)T[E]=0;for(M=0;M<h;M++)T[e[n+M]]++;for(C=w,I=15;1<=I&&0===T[I];I--);if(I<C&&(C=I),0===I)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(S=1;S<I&&0===T[S];S++);for(C<S&&(C=S),E=L=1;E<=15;E++)if(L<<=1,(L-=T[E])<0)return-1;if(0<L&&(0===t||1!==I))return-1;for(D[1]=0,E=1;E<15;E++)D[E+1]=D[E]+T[E];for(M=0;M<h;M++)0!==e[n+M]&&(c[D[e[n+M]]++]=M);if(_=0===t?(A=F=c,19):1===t?(A=r,R-=257,F=o,B-=257,256):(A=s,F=a,-1),E=S,m=l,N=M=k=0,g=-1,y=(O=1<<(P=C))-1,1===t&&852<O||2===t&&592<O)return 1;for(;;){for(v=E-N,x=c[M]<_?(b=0,c[M]):c[M]>_?(b=F[B+c[M]],A[R+c[M]]):(b=96,0),p=1<<E-N,S=d=1<<P;u[m+(k>>N)+(d-=p)]=v<<24|b<<16|x|0,0!==d;);for(p=1<<E-1;k&p;)p>>=1;if(0!==p?(k&=p-1,k+=p):k=0,M++,0==--T[E]){if(E===I)break;E=e[n+c[M]]}if(C<E&&(k&y)!==g){for(0===N&&(N=C),m+=S,L=1<<(P=E-N);P+N<I&&!((L-=T[P+N])<=0);)P++,L<<=1;if(O+=1<<P,1===t&&852<O||2===t&&592<O)return 1;u[g=k&y]=C<<24|P<<16|m-l|0}}return 0!==k&&(u[m+k]=E-N<<24|4194304),f.bits=C,0}},{"../utils/common":41}],51:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){var i=t("../utils/common"),r=0,o=1;function s(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,h=29,u=256,l=u+1+h,c=30,f=19,p=2*l+1,d=15,g=16,y=7,m=256,_=16,v=17,b=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(l+2));s(S);var I=new Array(2*c);s(I);var C=new Array(512);s(C);var P=new Array(256);s(P);var N=new Array(h);s(N);var L,O,k,A=new Array(c);function R(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function T(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function D(t){return t<256?C[t]:C[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,n){t.bi_valid>g-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>g-t.bi_valid,t.bi_valid+=n-g):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function z(t,e,n){B(t,n[2*e],n[2*e+1])}function j(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function q(t,e,n){var i,r,o=new Array(d+1),s=0;for(i=1;i<=d;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=j(o[a]++,a))}}function U(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<c;e++)t.dyn_dtree[2*e]=0;for(e=0;e<f;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function V(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function W(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&V(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!V(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function H(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?z(t,r,e):(z(t,(o=P[r])+u+1,e),0!==(s=x[o])&&B(t,r-=N[o],s),z(t,o=D(--i),n),0!==(s=w[o])&&B(t,i-=A[o],s)),a<t.last_lit;);z(t,m,e)}function Y(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=p,n=0;n<h;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)W(t,o,n);for(r=h;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],W(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,W(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,y=e.stat_desc.max_length,m=0;for(o=0;o<=d;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<p;n++)y<(o=h[2*h[2*(i=t.heap[n])+1]+1]+1)&&(o=y,m++),h[2*i+1]=o,u<i||(t.bl_count[o]++,s=0,g<=i&&(s=f[i-g]),a=h[2*i],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(l[2*i+1]+s)));if(0!==m){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,m-=2}while(0<m);for(o=y;0!==o;o--)for(i=t.bl_count[o];0!==i;)u<(r=t.heap[--n])||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),i--)}}(t,e),q(o,u,t.bl_count)}function X(t,e,n){var i,r,o=-1,s=e[1],a=0,h=7,u=4;for(0===s&&(h=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<h&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*_]++):a<=10?t.bl_tree[2*v]++:t.bl_tree[2*b]++,o=r,u=(a=0)===s?(h=138,3):r===s?(h=6,3):(h=7,4))}function Z(t,e,n){var i,r,o=-1,s=e[1],a=0,h=7,u=4;for(0===s&&(h=138,u=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<h&&r===s)){if(a<u)for(;z(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(z(t,r,t.bl_tree),a--),z(t,_,t.bl_tree),B(t,a-3,2)):a<=10?(z(t,v,t.bl_tree),B(t,a-3,3)):(z(t,b,t.bl_tree),B(t,a-11,7));o=r,u=(a=0)===s?(h=138,3):r===s?(h=6,3):(h=7,4)}}s(A);var J=!1;function K(t,e,n,r){B(t,(a<<1)+(r?1:0),3),function(t,e,n,r){G(t),r&&(F(t,n),F(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){J||(function(){var t,e,n,i,r,o=new Array(d+1);for(i=n=0;i<h-1;i++)for(N[i]=n,t=0;t<1<<x[i];t++)P[n++]=i;for(P[n-1]=i,i=r=0;i<16;i++)for(A[i]=r,t=0;t<1<<w[i];t++)C[r++]=i;for(r>>=7;i<c;i++)for(A[i]=r<<7,t=0;t<1<<w[i]-7;t++)C[256+r++]=i;for(e=0;e<=d;e++)o[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,o[8]++;for(;t<=255;)S[2*t+1]=9,t++,o[9]++;for(;t<=279;)S[2*t+1]=7,t++,o[7]++;for(;t<=287;)S[2*t+1]=8,t++,o[8]++;for(q(S,l+1,o),t=0;t<c;t++)I[2*t+1]=5,I[2*t]=j(t,5);L=new R(S,x,u+1,l,d),O=new R(I,w,0,c,d),k=new R(new Array(0),E,0,f,y)}(),J=!0),t.l_desc=new T(t.dyn_ltree,L),t.d_desc=new T(t.dyn_dtree,O),t.bl_desc=new T(t.bl_tree,k),t.bi_buf=0,t.bi_valid=0,U(t)},n._tr_stored_block=K,n._tr_flush_block=function(t,e,n,i){var s,a,h=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return o;return r}(t)),Y(t,t.l_desc),Y(t,t.d_desc),h=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=f-1;3<=e&&0===t.bl_tree[2*M[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),s=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==e?K(t,e,n,i):4===t.strategy||a===s?(B(t,2+(i?1:0),3),H(t,S,I)):(B(t,4+(i?1:0),3),function(t,e,n,i){var r;for(B(t,e-257,5),B(t,n-1,5),B(t,i-4,4),r=0;r<i;r++)B(t,t.bl_tree[2*M[r]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),H(t,t.dyn_ltree,t.dyn_dtree)),U(t),i&&G(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+u+1)]++,t.dyn_dtree[2*D(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){B(t,2,3),z(t,m,S),function(t){16===t.bi_valid?(F(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(t){!function(t,e){if(!t.setImmediate){var n,i,r,o,s=1,a={},h=!1,u=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,n="[object process]"==={}.toString.call(t.process)?function(t){si.nextTick((function(){f(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(o="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",p,!1):t.attachEvent("onmessage",p),function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){r.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,function(t){var e=u.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(f,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return a[s]=r,n(s),s++},l.clearImmediate=c}function c(t){delete a[t]}function f(t){if(h)setTimeout(f,0,t);else{var n=a[t];if(n){h=!0;try{!function(t){var n=t.callback,i=t.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(e,i)}}(n)}finally{c(t),h=!1}}}}function p(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10),ii=async t=>{const e=new ri;await e.loadAsync(t);const n=e.file(/.+/),i={};return await Promise.all(n.map((async t=>{let e;e="shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?await t.async("nodebuffer"):await t.async("text"),i[t.name]=e}))),i};var ai,hi,ui,li={},ci={},fi={},pi=e.MutationObserver||e.WebKitMutationObserver;if(pi){var di=0,gi=new pi(vi),yi=e.document.createTextNode("");gi.observe(yi,{characterData:!0}),hi=function(){yi.data=di=++di%2}}else if(e.setImmediate||void 0===e.MessageChannel)hi="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){vi(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(vi,0)};else{var mi=new e.MessageChannel;mi.port1.onmessage=vi,hi=function(){mi.port2.postMessage(0)}}var _i=[];function vi(){var t,e;ui=!0;for(var n=_i.length;n;){for(e=_i,_i=[],t=-1;++t<n;)e[t]();n=_i.length}ui=!1}function bi(){}fi=function(t){1!==_i.push(t)||ui||hi()};var xi={},wi=["REJECTED"],Ei=["FULFILLED"],Mi=["PENDING"];function Si(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=Mi,this.queue=[],this.outcome=void 0,t!==bi&&Ni(this,t)}function Ii(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function Ci(t,e,n){fi((function(){var i;try{i=e(n)}catch(e){return xi.reject(t,e)}i===t?xi.reject(t,new TypeError("Cannot resolve promise with itself")):xi.resolve(t,i)}))}function Pi(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function Ni(t,e){var n=!1;function i(e){n||(n=!0,xi.reject(t,e))}function r(e){n||(n=!0,xi.resolve(t,e))}var o=Li((function(){e(r,i)}));"error"===o.status&&i(o.value)}function Li(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}ci=Si,Si.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},Si.prototype.catch=function(t){return this.then(null,t)},Si.prototype.then=function(t,e){if("function"!=typeof t&&this.state===Ei||"function"!=typeof e&&this.state===wi)return this;var n=new this.constructor(bi);this.state!==Mi?Ci(n,this.state===Ei?t:e,this.outcome):this.queue.push(new Ii(n,t,e));return n},Ii.prototype.callFulfilled=function(t){xi.resolve(this.promise,t)},Ii.prototype.otherCallFulfilled=function(t){Ci(this.promise,this.onFulfilled,t)},Ii.prototype.callRejected=function(t){xi.reject(this.promise,t)},Ii.prototype.otherCallRejected=function(t){Ci(this.promise,this.onRejected,t)},xi.resolve=function(t,e){var n=Li(Pi,e);if("error"===n.status)return xi.reject(t,n.value);var i=n.value;if(i)Ni(t,i);else{t.state=Ei,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},xi.reject=function(t,e){t.state=wi,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},Si.resolve=function(t){return t instanceof this?t:xi.resolve(new this(bi),t)},Si.reject=function(t){var e=new this(bi);return xi.reject(e,t)},Si.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var r=new Array(n),o=0,s=-1,a=new this(bi);for(;++s<n;)h(t[s],s);return a;function h(t,s){e.resolve(t).then((function(t){r[s]=t,++o!==n||i||(i=!0,xi.resolve(a,r))}),(function(t){i||(i=!0,xi.reject(a,t))}))}},Si.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);var r=-1,o=new this(bi);for(;++r<n;)s=t[r],e.resolve(s).then((function(t){i||(i=!0,xi.resolve(o,t))}),(function(t){i||(i=!0,xi.reject(o,t))}));var s;return o};var Oi={};const ki=e.URL;Oi=(t,e)=>{if(!e)return t;const n=new ki(t);return n.pathname=`${n.pathname}.${e}`,n.href};var Ai=r("6ZWSX").Buffer;li=function(t,e){return new ci((function(n,i){const r=Oi(t,e),o=new XMLHttpRequest;o.open("GET",r,!0),"prj"!==e&&"cpg"!==e&&(o.responseType="arraybuffer"),o.addEventListener("load",(function(){return o.status>399?"prj"===e||"cpg"===e?n(!1):i(new Error(o.status)):n("prj"!==e&&"cpg"!==e?Ai.from(o.response):o.response)}),!1),o.send()}))};var Ri=r("6ZWSX").Buffer;ai=async function(t,n){if(!e.fetch)return li(t,n);const i=Oi(t,n),r="prj"===n||"cpg"===n;try{const t=await fetch(i);if(t.status>399)throw new Error(t.statusText);if(r)return t.text();const e=await t.arrayBuffer();return Ri.from(e)}catch(t){if(console.log("ERROR",t,n),r||"dbf"===n)return!1;throw t}};var Ti;function Di(t,e){return!function(t){let e=0,n=1;const i=t.length;let r,o;for(;n<i;)r=o||t[0],o=t[n],e+=(o[0]-r[0])*(o[1]+r[1]),n++;return e>0}(e)&&t.length?t[t.length-1].push(e):t.push([e]),t}Bi.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},Bi.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.readDoubleLE(16)),e},Bi.prototype.parsePointArray=function(t,e,n){const i=[];let r=0;for(;r<n;)i.push(this.parseCoord(t,e)),e+=16,r++;return i},Bi.prototype.parseZPointArray=function(t,e,n,i){let r=0;for(;r<n;)i[r].push(t.readDoubleLE(e)),r++,e+=8;return i},Bi.prototype.parseArrayGroup=function(t,e,n,i,r){const o=[];let s,a,h=0,u=0;for(;h<i;)h++,n+=4,s=u,u=h===i?r:t.readInt32LE(n),a=u-s,a&&(o.push(this.parsePointArray(t,e,a)),e+=a<<4);return o},Bi.prototype.parseZArrayGroup=function(t,e,n,i){let r=0;for(;r<n;)i[r]=this.parseZPointArray(t,e,i[r].length,i[r]),e+=i[r].length<<3,r++;return i},Bi.prototype.parseMultiPoint=function(t){const e={},n=t.readInt32LE(32,!0);if(!n)return null;const i=this.parseCoord(t,0),r=this.parseCoord(t,16);e.bbox=[i[0],i[1],r[0],r[1]];return 1===n?(e.type="Point",e.coordinates=this.parseCoord(t,36)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,36,n)),e},Bi.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let n;if("Point"===e.type)return e.coordinates.push(t.readDoubleLE(72)),e;n=e.coordinates.length;const i=52+(n<<4);return e.coordinates=this.parseZPointArray(t,i,n,e.coordinates),e},Bi.prototype.parsePolyline=function(t){const e={},n=t.readInt32LE(32);if(!n)return null;const i=this.parseCoord(t,0),r=this.parseCoord(t,16);e.bbox=[i[0],i[1],r[0],r[1]];const o=t.readInt32LE(36);let s,a;return 1===n?(e.type="LineString",s=44,e.coordinates=this.parsePointArray(t,s,o)):(e.type="MultiLineString",s=40+(n<<2),a=40,e.coordinates=this.parseArrayGroup(t,s,40,n,o)),e},Bi.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const n=e.coordinates.length;let i;if("LineString"===e.type)return i=60+(n<<4),e.coordinates=this.parseZPointArray(t,i,n,e.coordinates),e;{const r=e.coordinates.reduce((function(t,e){return t+e.length}),0);return i=56+(r<<4)+(n<<2),e.coordinates=this.parseZArrayGroup(t,i,n,e.coordinates),e}},Bi.prototype.polyFuncs=function(t){return t?"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(Di,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)):t},Bi.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},Bi.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const Fi={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function Bi(t,e){if(!(this instanceof Bi))return new Bi(t,e);this.buffer=t,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(e),this.rows=this.getRows()}Bi.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in Fi))throw new Error("I don't know that shp type");var n;this.parseFunc=this[Fi[e]],this.parseCoord=(n=t)?function(t,e){const i=[t.readDoubleLE(e),t.readDoubleLE(e+8)];return n.inverse(i)}:function(t,e){return[t.readDoubleLE(e),t.readDoubleLE(e+8)]}},Bi.prototype.getShpCode=function(){return this.parseHeader().shpCode},Bi.prototype.parseHeader=function(){const t=this.buffer.slice(0,100);return{length:t.readInt32BE(24)<<1,version:t.readInt32LE(28),shpCode:t.readInt32LE(32),bbox:[t.readDoubleLE(36),t.readDoubleLE(44),t.readDoubleLE(52),t.readDoubleLE(52)]}},Bi.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength,n=[];let i;for(;t<e&&(i=this.getRow(t),i);)t+=8,t+=i.len,i.type?n.push(this.parseFunc(i.data)):n.push(null);return n},Bi.prototype.getRow=function(t){const e=this.buffer.slice(t,t+12),n=e.readInt32BE(4)<<1,i=e.readInt32BE(0);return 0===n?{id:i,len:n,type:0}:{id:i,len:n,data:this.buffer.slice(t+12,t+n+8),type:e.readInt32LE(8)}},Ti=function(t,e){return new Bi(t,e).rows};var zi,ji={};r("jpov1");var qi=r("eNRCS").StringDecoder;function Ui(t){var e=new qi;return(e.write(t)+e.end()).replace(/\0/g,"").trim()}ji=function t(e,n){if(!e)return Ui;try{new TextDecoder(e.trim())}catch(r){var i=Gi.exec(e);return i&&!n?t("windows-"+i[1],!0):Ui}return function(t){var n=new TextDecoder(e);return(n.decode(t,{stream:!0})+n.decode()).replace(/\0/g,"").trim()}};var Gi=/^(?:ANSI\s)?(\d+)$/m;function Vi(t,e,n,i,r){var o=r(t.slice(e,e+n));switch(i){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return"y"===o.toLowerCase()||"t"===o.toLowerCase();default:return o}}function Wi(t,e,n,i){for(var r,o,s={},a=0,h=n.length;a<h;)r=Vi(t,e,(o=n[a]).len,o.dataType,i),e+=o.len,void 0!==r&&(s[o.name]=r),a++;return s}zi=function(t,e){for(var n=ji(e),i=function(t){var e={};return e.lastUpdated=new Date(t.readUInt8(1)+1900,t.readUInt8(2),t.readUInt8(3)),e.records=t.readUInt32LE(4),e.headerLen=t.readUInt16LE(8),e.recLen=t.readUInt16LE(10),e}(t),r=function(t,e,n){for(var i=[],r=32;r<e&&(i.push({name:n(t.slice(r,r+11)),dataType:String.fromCharCode(t.readUInt8(r+11)),len:t.readUInt8(r+16),decimal:t.readUInt8(r+17)}),13!==t.readUInt8(r+32));)r+=32;return i}(t,i.headerLen-1,n),o=2+(r.length+1<<5),s=i.recLen,a=i.records,h=[];a;)h.push(Wi(t,o,r,n)),o+=s,a--;return h};var Hi={};!function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function e(){return 1}Hi?Hi=r:this.LRUCache=r;var n=!1;function i(t){n||"string"==typeof t||"number"==typeof t||(n=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function r(t){if(!(this instanceof r))return new r(t);"number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||e,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=e),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,this.reset()}function o(t,e,n){i(e);var r=t._cache[e];return r&&(s(t,r)?(u(t,r),t._allowStale||(r=void 0)):n&&function(t,e){h(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}(t,r),r&&(r=r.value)),r}function s(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t._maxAge&&n>t._maxAge}function a(t){for(;t._lru<t._mru&&t._length>t._max;)u(t,t._lruList[t._lru])}function h(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function u(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],h(t,e))}function l(t,e,n,i,r,o){this.key=t,this.value=e,this.lu=n,this.length=i,this.now=r,o&&(this.maxAge=o)}Object.defineProperty(r.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this._max=t,this._length>this._max&&a(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(r.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t)for(var n in this._lengthCalculator=e,this._length=this._itemCount,this._cache)this._cache[n].length=1;else for(var n in this._lengthCalculator=t,this._length=0,this._cache)this._cache[n].length=this._lengthCalculator(this._cache[n].value),this._length+=this._cache[n].length;this._length>this._max&&a(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),r.prototype.forEach=function(t,e){e=e||this;for(var n=0,i=this._itemCount,r=this._mru-1;r>=0&&n<i;r--)if(this._lruList[r]){n++;var o=this._lruList[r];s(this,o)&&(u(this,o),this._allowStale||(o=void 0)),o&&t.call(e,o.value,o.key,this)}},r.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];t[e++]=i.key}return t},r.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];t[e++]=i.value}return t},r.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},r.prototype.dump=function(){for(var t=[],e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];s(this,i)||(++e,t.push({k:i.key,v:i.value,e:i.now+(i.maxAge||0)}))}return t},r.prototype.dumpLru=function(){return this._lruList},r.prototype.set=function(e,n,r){r=r||this._maxAge,i(e);var o=r?Date.now():0,s=this._lengthCalculator(n);if(t(this._cache,e))return s>this._max?(u(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=o,this._cache[e].maxAge=r,this._cache[e].value=n,this._length+=s-this._cache[e].length,this._cache[e].length=s,this.get(e),this._length>this._max&&a(this),!0);var h=new l(e,n,this._mru++,s,o,r);return h.length>this._max?(this._dispose&&this._dispose(e,n),!1):(this._length+=h.length,this._lruList[h.lu]=this._cache[e]=h,this._itemCount++,this._length>this._max&&a(this),!0)},r.prototype.has=function(e){return i(e),!!t(this._cache,e)&&!s(this,this._cache[e])},r.prototype.get=function(t){return i(t),o(this,t,!0)},r.prototype.peek=function(t){return i(t),o(this,t,!1)},r.prototype.pop=function(){var t=this._lruList[this._lru];return u(this,t),t||null},r.prototype.del=function(t){i(t),u(this,this._cache[t])},r.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n];i(r.k);var o=r.e||0;if(0===o)this.set(r.k,r.v);else{var s=o-e;s>0&&this.set(r.k,r.v,s)}}}}();var Yi=r("6ZWSX").Buffer;const Xi=e.URL,Zi=new Hi({max:20});function Ji(t){if(!t)throw new Error("forgot to pass buffer");return Yi.isBuffer(t)?t:Ki(t)?Yi.from(t):Ki(t.buffer)?1===t.BYTES_PER_ELEMENT?Yi.from(t):Yi.from(t.buffer):void 0}function Ki(t){return t instanceof e.ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t)}function $i(t,e){return"string"==typeof t&&Zi.has(t)?ci.resolve(Zi.get(t)):$i.getShapefile(t,e).then((function(e){return"string"==typeof t&&Zi.set(t,e),e}))}$i.combine=function([t,e]){const n={type:"FeatureCollection",features:[]};let i=0;const r=t.length;for(e||(e=[]);i<r;)n.features.push({type:"Feature",geometry:t[i],properties:e[i]||{}}),i++;return n},$i.parseZip=async function(t,e){let n;t=Ji(t);const i=await ii(t),r=[];for(n in e=e||[],i)-1===n.indexOf("__MACOSX")&&("shp"===n.slice(-3).toLowerCase()?(r.push(n.slice(0,-4)),i[n.slice(0,-3)+n.slice(-3).toLowerCase()]=i[n]):"prj"===n.slice(-3).toLowerCase()?i[n.slice(0,-3)+n.slice(-3).toLowerCase()]=ni(i[n]):"json"===n.slice(-4).toLowerCase()||e.indexOf(n.split(".").pop())>-1?r.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):"dbf"!==n.slice(-3).toLowerCase()&&"cpg"!==n.slice(-3).toLowerCase()||(i[n.slice(0,-3)+n.slice(-3).toLowerCase()]=i[n]));if(!r.length)throw new Error("no layers founds");const o=r.map((function(t){let n,r;const o=t.lastIndexOf(".");return o>-1&&t.slice(o).indexOf("json")>-1?(n=JSON.parse(i[t]),n.fileName=t.slice(0,o)):e.indexOf(t.slice(o+1))>-1?(n=i[t],n.fileName=t):(i[t+".dbf"]&&(r=zi(i[t+".dbf"],i[t+".cpg"])),n=$i.combine([Ti(i[t+".shp"],i[t+".prj"]),r]),n.fileName=t),n}));return 1===o.length?o[0]:o};const Qi=async t=>{const e=await ci.all([ai(t,"shp"),ai(t,"prj")]);let n=!1;try{e[1]&&(n=ni(e[1]))}catch(t){n=!1}return Ti(e[0],n)},tr=async t=>{const[e,n]=await ci.all([ai(t,"dbf"),ai(t,"cpg")]);if(e)return zi(e,n)};function er(t){return itowns.Fetcher.multiple(t,{arrayBuffer:["shp","dbf","shx"],text:["prj"]}).then((t=>Promise.all([t.shp,t.dbf]))).then((t=>{const e=t[0],n=t[1];return h.combine([h.parseShp(e),h.parseDbf(n)])}))}function nr(t,e,n,i,r,o){er(t).then((t=>{const o=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"});let s=new itowns.ColorLayer(e,{source:o,style:new itowns.Style({zoom:{min:0},fill:{color:i},stroke:{color:n,width:1}}),addLabelLayer:!0});return r.addLayer(s)})).then((t=>(o&&FeatureToolTip.addLayer(t,{filterAllProperties:!1}),t)))}function ir(t,e,n){var i=new n.LineSegments(new n.EdgesGeometry(t.geometry),new n.LineBasicMaterial({color:e}));t.add(i)}function rr(t,e,n,i,r,o,s=20){shapefile.open(t).then((t=>t.read().then((function a(h){if(!h.done){try{if(h.value.properties[e]==n){let t=new itowns.FileSource({fetchedData:{type:"FeatureCollection",features:[{type:"Feature",properties:h.value.properties,geometry:{type:"Polygon",coordinates:[h.value.geometry.coordinates[0]]}}]},crs:"EPSG:4326",format:"application/json"}),n=new itowns.FeatureGeometryLayer(h.value.properties[e]+i,{source:t,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:"yellow",extrusion_height:t=>t.hauteur?t.hauteur:t.HAUTEUR?t.HAUTEUR:s,base_altitude:t=>t.altitude_s?t.altitude_s:t.Z_MIN_SOL?t.Z_MIN_SOL:20}}),onMeshCreated:t=>{ir(t.children[0].children[0].children[0].children[0],"black",o)}});r.addLayer(n)}}catch(t){console.log(t)}return t.read().then(a)}})))).catch((t=>console.error(t.stack)))}$i.getShapefile=async function(t,e){if("string"!=typeof t)return $i.parseZip(t);if(((t,e)=>new Xi(t).pathname.slice(-4).toLowerCase()===e)(t,".zip"))return async function(t,e){const n=await ai(t);return $i.parseZip(n,e)}(t,e);const n=await ci.all([Qi(t),tr(t)]);return $i.combine(n)},$i.parseShp=function(t,e){if(t=Ji(t),Yi.isBuffer(e)&&(e=e.toString()),"string"==typeof e)try{e=ni(e)}catch(t){e=!1}return Ti(t,e)},$i.parseDbf=function(t,e){return t=Ji(t),zi(t,e)},h=$i;var or,sr={};
/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/async function ar(t){return await new Promise((e=>{sr.parse(t,{header:!0,download:!0,dynamicTyping:!0,complete:t=>{e(t.data)}})}))}
/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function hr(t){return t+.5|0}or=function t(){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=e.IS_PAPA_WORKER||!1,o={},s=0,a={parse:function(n,i){var r=(i=i||{}).dynamicTyping||!1;if(E(r)&&(i.dynamicTypingFunction=r,r={}),i.dynamicTyping=r,i.transform=!!E(i.transform)&&i.transform,i.worker&&a.WORKERS_SUPPORTED){var h=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,i,r=(n=e.URL||e.webkitURL||null,i=t.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"})))),h=new e.Worker(r);return h.onmessage=_,h.id=s++,o[h.id]=h,h}();return h.userStep=i.step,h.userChunk=i.chunk,h.userComplete=i.complete,h.userError=i.error,i.step=E(i.step),i.chunk=E(i.chunk),i.complete=E(i.complete),i.error=E(i.error),delete i.worker,void h.postMessage({input:n,config:i,workerId:h.id})}var u,g=null;return n===a.NODE_STREAM_INPUT&&"undefined"==typeof PAPA_BROWSER_CONTEXT?(g=new d(i)).getStream():("string"==typeof n?(n=65279===(u=n).charCodeAt(0)?u.slice(1):u,g=i.download?new l(i):new f(i)):!0===n.readable&&E(n.read)&&E(n.on)?g=new p(i):(e.File&&n instanceof File||n instanceof Object)&&(g=new c(i)),g.stream(n))},unparse:function(t,e){var n=!1,i=!0,r=",",o="\r\n",s='"',h=s+s,u=!1,l=null,c=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(h=e.escapeChar+s),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(c=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(y(s),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,u);if("object"==typeof t[0])return p(l||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&t.length>0,h=!Array.isArray(e[0]);if(a&&i){for(var u=0;u<t.length;u++)u>0&&(s+=r),s+=d(t[u],u);e.length>0&&(s+=o)}for(var l=0;l<e.length;l++){var c=a?t.length:e[l].length,f=!1,p=a?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!a&&(f="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&a){for(var g=[],y=0;y<c;y++){var m=h?t[y]:y;g.push(e[l][m])}f=""===g.join("").trim()}if(!f){for(var _=0;_<c;_++){_>0&&!p&&(s+=r);var v=a&&h?t[_]:_;s+=d(e[l][v],_)}l<e.length-1&&(!n||c>0&&!p)&&(s+=o)}}return s}function d(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var i=!1;c&&"string"==typeof t&&c.test(t)&&(t="'"+t,i=!0);var o=t.toString().replace(f,h);return i=i||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}(o,a.BAD_DELIMITERS)||o.indexOf(r)>-1||" "===o.charAt(0)||" "===o.charAt(o.length-1),i?s+o+s:o}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=g,a.NetworkStreamer=l,a.FileStreamer=c,a.StringStreamer=f,a.ReadableStreamStreamer=p,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(a.DuplexStreamStreamer=d),e.jQuery){var h=e.jQuery;h.fn.parse=function(t){var n=t.config||{},i=[];return this.each((function(t){if("INPUT"!==h(this).prop("tagName").toUpperCase()||"file"!==h(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:h.extend({},n)})})),r(),this;function r(){if(0!==i.length){var e=i[0];if(E(t.before)){var n=t.before(e.file,e.inputElem);if("object"==typeof n){if("abort"===n.action)return void function(e,n,i,r){E(t.error)&&t.error({name:e},n,i,r)}("AbortError",e.file,e.inputElem,n.reason);if("skip"===n.action)return void o();"object"==typeof n.config&&(e.instanceConfig=h.extend(e.instanceConfig,n.config))}else if("skip"===n)return void o()}var r=e.instanceConfig.complete;e.instanceConfig.complete=function(t){E(r)&&r(t,e.file,e.inputElem),o()},a.parse(e.file,e.instanceConfig)}else E(t.complete)&&t.complete()}function o(){i.splice(0,1),r()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=x(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new g(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var h=s.meta.cursor;this._finished||(this._partialLine=o.substring(h-this._baseIndex),this._baseIndex=h),s&&s.data&&(this._rowCount+=s.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:s,workerId:a.WORKER_ID,finished:u});else if(E(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!u||!E(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(t){E(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),u.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||e.status>=400?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function c(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),u.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var o=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;t=t||{},u.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function p(t){t=t||{},u.call(this,t);var e=[],n=!0,i=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(t){var e=r("ioRHp").Duplex,n=x(t),i=!0,o=!1,s=[],a=null;this._onCsvData=function(t){var e=t.data;a.push(e)||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){a.push(null)},n.step=w(this._onCsvData,this),n.complete=w(this._onCsvComplete,this),u.call(this,n),this._nextChunk=function(){o&&1===s.length&&(this._finished=!0),s.length?s.shift()():i=!0},this._addToParseQueue=function(t,e){s.push(w((function(){if(this.parseChunk("string"==typeof t?t:t.toString(n.encoding)),E(e))return e()}),this)),i&&(i=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(t,e,n){this._addToParseQueue(t,n)},this._onWriteComplete=function(){o=!0,this._addToParseQueue("")},this.getStream=function(){return a},(a=new e({readableObjectMode:!0,decodeStrings:!1,read:w(this._onRead,this),write:w(this._onWrite,this)})).once("finish",w(this._onWriteComplete,this))}function g(t){var e,n,i,r=Math.pow(2,53),o=-r,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,h=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,l=0,c=0,f=!1,p=!1,d=[],g={data:[],errors:[],meta:{}};if(E(t.step)){var _=t.step;t.step=function(e){if(g=e,w())b();else{if(b(),0===g.data.length)return;l+=e.data.length,t.preview&&l>t.preview?n.abort():(g.data=g.data[0],_(g,u))}}}function v(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function b(){return g&&i&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines&&(g.data=g.data.filter((function(t){return!v(t)}))),w()&&function(){if(g)if(Array.isArray(g.data[0])){for(var e=0;w()&&e<g.data.length;e++)g.data[e].forEach(n);g.data.splice(0,1)}else g.data.forEach(n);function n(e,n){E(t.transformHeader)&&(e=t.transformHeader(e,n)),d.push(e)}}(),function(){if(!g||!t.header&&!t.dynamicTyping&&!t.transform)return g;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var o=i,s=e[i];t.header&&(o=i>=d.length?"__parsed_extra":d[i]),t.transform&&(s=t.transform(s,o)),s=M(o,s),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(s)):r[o]=s}return t.header&&(i>d.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+d.length+" fields but parsed "+i,c+n):i<d.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+d.length+" fields but parsed "+i,c+n)),r}var n=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(e),n=g.data.length):g.data=e(g.data,0),t.header&&g.meta&&(g.meta.fields=d),c+=n,g}()}function w(){return t.header&&0===d.length}function M(e,n){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(s.test(t)){var e=parseFloat(t);if(e>o&&e<r)return!0}return!1}(n)?parseFloat(n):h.test(n)?new Date(n):""===n?null:n):n}function S(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),g.errors.push(r)}this.parse=function(r,o,s){var h=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(y(e)+"([^]*?)"+y(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n"),o=r.length>1&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var s=0,a=0;a<i.length;a++)"\n"===i[a][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,h)),i=!1,t.delimiter)E(t.delimiter)&&(t.delimiter=t.delimiter(r),g.meta.delimiter=t.delimiter);else{var u=function(e,n,i,r,o){var s,h,u,l;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var c=0;c<o.length;c++){var f=o[c],p=0,d=0,g=0;u=void 0;for(var y=new m({comments:r,delimiter:f,newline:n,preview:10}).parse(e),_=0;_<y.data.length;_++)if(i&&v(y.data[_]))g++;else{var b=y.data[_].length;d+=b,void 0!==u?b>0&&(p+=Math.abs(b-u),u=b):u=b}y.data.length>0&&(d/=y.data.length-g),(void 0===h||p<=h)&&(void 0===l||d>l)&&d>1.99&&(h=p,s=f,l=d)}return t.delimiter=s,{successful:!!s,bestDelimiter:s}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);u.successful?t.delimiter=u.bestDelimiter:(i=!0,t.delimiter=a.DefaultDelimiter),g.meta.delimiter=t.delimiter}var l=x(t);return t.preview&&t.header&&l.preview++,e=r,n=new m(l),g=n.parse(e,o,s),b(),f?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),e=E(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(f=!1,u.streamer.parseChunk(e,!0)):setTimeout(u.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),g.meta.aborted=!0,E(t.complete)&&t.complete(g),e=""}}function y(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,o=t.step,s=t.preview,h=t.fastMode,u=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof n||a.BAD_DELIMITERS.indexOf(n)>-1)&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||a.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var l=0,c=!1;this.parse=function(a,f,p){if("string"!=typeof a)throw new Error("Input must be a string");var d=a.length,g=n.length,m=i.length,_=r.length,v=E(o);l=0;var b=[],x=[],w=[],M=0;if(!a)return H();if(t.header&&!f){var S=a.split(i)[0].split(n),I=[],C={},P=!1;for(var N in S){var L=S[N];E(t.transformHeader)&&(L=t.transformHeader(L,N));var O=L,k=C[L]||0;for(k>0&&(P=!0,O=L+"_"+k),C[L]=k+1;I.includes(O);)O=O+"_"+k;I.push(O)}if(P){var A=a.split(i);A[0]=I.join(n),a=A.join(i)}}if(h||!1!==h&&-1===a.indexOf(e)){for(var R=a.split(i),T=0;T<R.length;T++){if(w=R[T],l+=w.length,T!==R.length-1)l+=i.length;else if(p)return H();if(!r||w.substring(0,_)!==r){if(v){if(b=[],U(w.split(n)),Y(),c)return H()}else U(w.split(n));if(s&&T>=s)return b=b.slice(0,s),H(!0)}}return H()}for(var D=a.indexOf(n,l),F=a.indexOf(i,l),B=new RegExp(y(u)+y(e),"g"),z=a.indexOf(e,l);;)if(a[l]!==e)if(r&&0===w.length&&a.substring(l,l+_)===r){if(-1===F)return H();l=F+m,F=a.indexOf(i,l),D=a.indexOf(n,l)}else if(-1!==D&&(D<F||-1===F))w.push(a.substring(l,D)),l=D+g,D=a.indexOf(n,l);else{if(-1===F)break;if(w.push(a.substring(l,F)),W(F+m),v&&(Y(),c))return H();if(s&&b.length>=s)return H(!0)}else for(z=l,l++;;){if(-1===(z=a.indexOf(e,z+1)))return p||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:l}),V();if(z===d-1)return V(a.substring(l,z).replace(B,e));if(e!==u||a[z+1]!==u){if(e===u||0===z||a[z-1]!==u){-1!==D&&D<z+1&&(D=a.indexOf(n,z+1)),-1!==F&&F<z+1&&(F=a.indexOf(i,z+1));var j=G(-1===F?D:Math.min(D,F));if(a.substr(z+1+j,g)===n){w.push(a.substring(l,z).replace(B,e)),l=z+1+j+g,a[z+1+j+g]!==e&&(z=a.indexOf(e,l)),D=a.indexOf(n,l),F=a.indexOf(i,l);break}var q=G(F);if(a.substring(z+1+q,z+1+q+m)===i){if(w.push(a.substring(l,z).replace(B,e)),W(z+1+q+m),D=a.indexOf(n,l),z=a.indexOf(e,l),v&&(Y(),c))return H();if(s&&b.length>=s)return H(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:l}),z++}}else z++}return V();function U(t){b.push(t),M=l}function G(t){var e=0;if(-1!==t){var n=a.substring(z+1,t);n&&""===n.trim()&&(e=n.length)}return e}function V(t){return p||(void 0===t&&(t=a.substring(l)),w.push(t),l=d,U(w),v&&Y()),H()}function W(t){l=t,U(w),w=[],F=a.indexOf(i,l)}function H(t){return{data:b,errors:x,meta:{delimiter:n,linebreak:i,aborted:c,truncated:!!t,cursor:M+(f||0)}}}function Y(){o(H()),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return l}}function _(t){var e=t.data,n=o[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(E(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},r),!i);s++);delete e.results}else E(n.userChunk)&&(n.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(t,e){var n=o[t];E(n.userComplete)&&n.userComplete(e),n.terminate(),delete o[t]}function b(){throw new Error("Not implemented.")}function x(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=x(t[n]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function E(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=a.parse(n.input,n.config);i&&e.postMessage({workerId:a.WORKER_ID,results:i,finished:!0})}}),l.prototype=Object.create(u.prototype),l.prototype.constructor=l,c.prototype=Object.create(u.prototype),c.prototype.constructor=c,f.prototype=Object.create(f.prototype),f.prototype.constructor=f,p.prototype=Object.create(u.prototype),p.prototype.constructor=p,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(d.prototype=Object.create(u.prototype),d.prototype.constructor=d),a},"function"==typeof define&&define.amd?define([],or):sr=or();const ur=(t,e,n)=>Math.max(Math.min(t,n),e);function lr(t){return ur(hr(2.55*t),0,255)}function cr(t){return ur(hr(255*t),0,255)}function fr(t){return ur(hr(t/2.55)/100,0,1)}function pr(t){return ur(hr(100*t),0,100)}const dr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gr=[..."0123456789ABCDEF"],yr=t=>gr[15&t],mr=t=>gr[(240&t)>>4]+gr[15&t],_r=t=>(240&t)>>4==(15&t);function vr(t){var e=(t=>_r(t.r)&&_r(t.g)&&_r(t.b)&&_r(t.a))(t)?yr:mr;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const br=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xr(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function wr(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Er(t,e,n){const i=xr(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Mr(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),s=(r+o)/2;let a,h,u;return r!==o&&(u=r-o,h=s>.5?u/(2-r-o):u/(r+o),a=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,u,r),a=60*a+.5),[0|a,h||0,s]}function Sr(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(cr)}function Ir(t,e,n){return Sr(xr,t,e,n)}function Cr(t){return(t%360+360)%360}function Pr(t){const e=br.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?lr(+e[5]):cr(+e[5]));const r=Cr(+e[2]),o=+e[3]/100,s=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Sr(Er,t,e,n)}(r,o,s):"hsv"===e[1]?function(t,e,n){return Sr(wr,t,e,n)}(r,o,s):Ir(r,o,s),{r:n[0],g:n[1],b:n[2],a:i}}const Nr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Or;function kr(t){Or||(Or=function(){const t={},e=Object.keys(Lr),n=Object.keys(Nr);let i,r,o,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],r=0;r<n.length;r++)o=n[r],a=a.replace(o,Nr[o]);o=parseInt(Lr[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),Or.transparent=[0,0,0,0]);const e=Or[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Ar=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Rr=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Tr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Dr(t,e,n){if(t){let i=Mr(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Ir(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Fr(t,e){return t?Object.assign(e||{},t):t}function Br(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=cr(t[3]))):(e=Fr(t,{r:0,g:0,b:0,a:1})).a=cr(e.a),e}function zr(t){return"r"===t.charAt(0)?function(t){const e=Ar.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?lr(t):ur(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?lr(n):ur(n,0,255)),i=255&(e[4]?lr(i):ur(i,0,255)),r=255&(e[6]?lr(r):ur(r,0,255)),{r:n,g:i,b:r,a:o}}}(t):Pr(t)}class jr{constructor(t){if(t instanceof jr)return t;const e=typeof t;let n;var i,r,o;"object"===e?n=Br(t):"string"===e&&(o=(i=t).length,"#"===i[0]&&(4===o||5===o?r={r:255&17*dr[i[1]],g:255&17*dr[i[2]],b:255&17*dr[i[3]],a:5===o?17*dr[i[4]]:255}:7!==o&&9!==o||(r={r:dr[i[1]]<<4|dr[i[2]],g:dr[i[3]]<<4|dr[i[4]],b:dr[i[5]]<<4|dr[i[6]],a:9===o?dr[i[7]]<<4|dr[i[8]]:255})),n=r||kr(t)||zr(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Fr(this._rgb);return t&&(t.a=fr(t.a)),t}set rgb(t){this._rgb=Br(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?vr(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Mr(t),n=e[0],i=pr(e[1]),r=pr(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${fr(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,s=2*o-1,a=n.a-i.a,h=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;r=1-h,n.r=255&h*n.r+r*i.r+.5,n.g=255&h*n.g+r*i.g+.5,n.b=255&h*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Tr(fr(t.r)),r=Tr(fr(t.g)),o=Tr(fr(t.b));return{r:cr(Rr(i+n*(Tr(fr(e.r))-i))),g:cr(Rr(r+n*(Tr(fr(e.g))-r))),b:cr(Rr(o+n*(Tr(fr(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new jr(this.rgb)}alpha(t){return this._rgb.a=cr(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=hr(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Dr(this._rgb,2,t),this}darken(t){return Dr(this._rgb,2,-t),this}saturate(t){return Dr(this._rgb,1,t),this}desaturate(t){return Dr(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Mr(t);n[0]=Cr(n[0]+e),n=Ir(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function qr(){}const Ur=(()=>{let t=0;return()=>t++})();function Gr(t){return null==t}function Vr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Wr(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Hr(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Yr(t,e){return Hr(t)?t:e}function Xr(t,e){return void 0===t?e:t}const Zr=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Jr(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function Kr(t,e,n,i){let r,o,s;if(Vr(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(Wr(t))for(s=Object.keys(t),o=s.length,r=0;r<o;r++)e.call(n,t[s[r]],s[r])}function $r(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Qr(t){if(Vr(t))return t.map(Qr);if(Wr(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Qr(t[n[r]]);return e}return t}function to(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function eo(t,e,n,i){if(!to(t))return;const r=e[t],o=n[t];Wr(r)&&Wr(o)?no(r,o,i):e[t]=Qr(o)}function no(t,e,n){const i=Vr(e)?e:[e],r=i.length;if(!Wr(t))return t;const o=(n=n||{}).merger||eo;let s;for(let e=0;e<r;++e){if(s=i[e],!Wr(s))continue;const r=Object.keys(s);for(let e=0,i=r.length;e<i;++e)o(r[e],t,s,n)}return t}function io(t,e){return no(t,e,{merger:ro})}function ro(t,e,n){if(!to(t))return;const i=e[t],r=n[t];Wr(i)&&Wr(r)?io(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Qr(r))}const oo={"":t=>t,x:t=>t.x,y:t=>t.y};function so(t,e){const n=oo[e]||(oo[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const t of e)i+=t,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ao(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ho=t=>void 0!==t,uo=t=>"function"==typeof t,lo=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function co(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const fo=Math.PI,po=2*fo,go=po+fo,yo=Number.POSITIVE_INFINITY,mo=fo/180,_o=fo/2,vo=fo/4,bo=2*fo/3,xo=Math.log10,wo=Math.sign;function Eo(t,e,n){return Math.abs(t-e)<n}function Mo(t){const e=Math.round(t);t=Eo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(xo(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function So(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}function Io(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Co(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Po(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function No(t){return t*(fo/180)}function Lo(t){return t*(180/fo)}function Oo(t){if(!Hr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ko(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*fo&&(o+=po),{angle:o,distance:r}}function Ao(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ro(t,e){return(t-e+go)%po-fo}function To(t){return(t%po+po)%po}function Do(t,e,n,i){const r=To(t),o=To(e),s=To(n),a=To(o-r),h=To(s-r),u=To(r-o),l=To(r-s);return r===o||r===s||i&&o===s||a>h&&u<l}function Fo(t,e,n){return Math.max(e,Math.min(n,t))}function Bo(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function zo(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const jo=(t,e,n,i)=>zo(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),qo=(t,e,n)=>zo(t,n,(i=>t[i][e]>=n));function Uo(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Go=["push","pop","shift","splice","unshift"];function Vo(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(Go.forEach((e=>{delete t[e]})),delete t._chartjs)}function Wo(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const Ho="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Yo(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Ho.call(window,(()=>{i=!1,t.apply(e,n)})))}}function Xo(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Zo=t=>"start"===t?"left":"end"===t?"right":"center",Jo=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,Ko=(t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e;function $o(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:s,_parsed:a}=t,h=s.axis,{min:u,max:l,minDefined:c,maxDefined:f}=s.getUserBounds();c&&(r=Fo(Math.min(jo(a,s.axis,u).lo,n?i:jo(e,h,s.getPixelForValue(u)).lo),0,i-1)),o=f?Fo(Math.max(jo(a,s.axis,l,!0).hi+1,n?0:jo(e,h,s.getPixelForValue(l),!0).hi+1),r,i)-r:i-r}return{start:r,count:o}}function Qo(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}const ts=t=>0===t||1===t,es=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*po/n),ns=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*po/n)+1,is={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*_o),easeOutSine:t=>Math.sin(t*_o),easeInOutSine:t=>-.5*(Math.cos(fo*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>ts(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ts(t)?t:es(t,.075,.3),easeOutElastic:t=>ts(t)?t:ns(t,.075,.3),easeInOutElastic(t){const e=.1125;return ts(t)?t:t<.5?.5*es(2*t,e,.45):.5+.5*ns(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-is.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*is.easeInBounce(2*t):.5*is.easeOutBounce(2*t-1)+.5};function rs(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function os(t){return rs(t)?t:new jr(t)}function ss(t){return rs(t)?t:new jr(t).saturate(.5).darken(.1).hexString()}const as=["x","y","borderWidth","radius","tension"],hs=["color","borderColor","backgroundColor"];const us=new Map;function ls(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=us.get(n);return i||(i=new Intl.NumberFormat(t,e),us.set(n,i)),i}(e,n).format(t)}const cs={values:t=>Vr(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const s=xo(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),h={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(h,this.options.ticks.format),ls(t,i,h)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(xo(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?cs.numeric.call(this,t,e,n):""}};var fs={formatters:cs};const ps=Object.create(null),ds=Object.create(null);function gs(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function ys(t,e,n){return"string"==typeof e?no(gs(t,e),n):no(gs(t,""),e)}class ms{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ss(e.backgroundColor),this.hoverBorderColor=(t,e)=>ss(e.borderColor),this.hoverColor=(t,e)=>ss(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ys(this,t,e)}get(t){return gs(this,t)}describe(t,e){return ys(ds,t,e)}override(t,e){return ys(ps,t,e)}route(t,e,n,i){const r=gs(this,t),o=gs(this,n),s="_"+e;Object.defineProperties(r,{[s]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[i];return Wr(t)?Object.assign({},e,t):Xr(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach((t=>t(this)))}}var _s=new ms({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:hs},numbers:{type:"number",properties:as}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fs.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function vs(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function bs(t,e,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const a=n.length;let h,u,l,c,f;for(h=0;h<a;h++)if(c=n[h],null!=c&&!0!==Vr(c))s=vs(t,r,o,s,c);else if(Vr(c))for(u=0,l=c.length;u<l;u++)f=c[u],null==f||Vr(f)||(s=vs(t,r,o,s,f));t.restore();const p=o.length/2;if(p>n.length){for(h=0;h<p;h++)delete r[o[h]];o.splice(0,p)}return s}function xs(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function ws(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Es(t,e,n,i){Ms(t,e,n,i,null)}function Ms(t,e,n,i,r){let o,s,a,h,u,l,c,f;const p=e.pointStyle,d=e.rotation,g=e.radius;let y=(d||0)*mo;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,i),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,i,r/2,g,0,0,po):t.arc(n,i,g,0,po),t.closePath();break;case"triangle":l=r?r/2:g,t.moveTo(n+Math.sin(y)*l,i-Math.cos(y)*g),y+=bo,t.lineTo(n+Math.sin(y)*l,i-Math.cos(y)*g),y+=bo,t.lineTo(n+Math.sin(y)*l,i-Math.cos(y)*g),t.closePath();break;case"rectRounded":u=.516*g,h=g-u,s=Math.cos(y+vo)*h,c=Math.cos(y+vo)*(r?r/2-u:h),a=Math.sin(y+vo)*h,f=Math.sin(y+vo)*(r?r/2-u:h),t.arc(n-c,i-a,u,y-fo,y-_o),t.arc(n+f,i-s,u,y-_o,y),t.arc(n+c,i+a,u,y,y+_o),t.arc(n-f,i+s,u,y+_o,y+fo),t.closePath();break;case"rect":if(!d){h=Math.SQRT1_2*g,l=r?r/2:h,t.rect(n-l,i-h,2*l,2*h);break}y+=vo;case"rectRot":c=Math.cos(y)*(r?r/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),t.moveTo(n-c,i-a),t.lineTo(n+f,i-s),t.lineTo(n+c,i+a),t.lineTo(n-f,i+s),t.closePath();break;case"crossRot":y+=vo;case"cross":c=Math.cos(y)*(r?r/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),t.moveTo(n-c,i-a),t.lineTo(n+c,i+a),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s);break;case"star":c=Math.cos(y)*(r?r/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),t.moveTo(n-c,i-a),t.lineTo(n+c,i+a),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s),y+=vo,c=Math.cos(y)*(r?r/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),t.moveTo(n-c,i-a),t.lineTo(n+c,i+a),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s);break;case"line":s=r?r/2:Math.cos(y)*g,a=Math.sin(y)*g,t.moveTo(n-s,i-a),t.lineTo(n+s,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(r?r/2:g),i+Math.sin(y)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Ss(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Is(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Cs(t){t.restore()}function Ps(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ns(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Ls(t,e,n,i,r,o={}){const s=Vr(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let h,u;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);Gr(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),h=0;h<s.length;++h)u=s[h],o.backdrop&&ks(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Gr(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(u,n,i,o.maxWidth)),t.fillText(u,n,i,o.maxWidth),Os(t,n,i,u,o),i+=r.lineHeight;t.restore()}function Os(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,h=n-o.actualBoundingBoxAscent,u=n+o.actualBoundingBoxDescent,l=r.strikethrough?(h+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,l),t.lineTo(a,l),t.stroke()}}function ks(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function As(t,e){const{x:n,y:i,w:r,h:o,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,-_o,fo,!0),t.lineTo(n,i+o-s.bottomLeft),t.arc(n+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,fo,_o,!0),t.lineTo(n+r-s.bottomRight,i+o),t.arc(n+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,_o,0,!0),t.lineTo(n+r,i+s.topRight),t.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-_o,!0),t.lineTo(n+s.topLeft,i)}const Rs=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ts=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ds(t,e){const n=(""+t).match(Rs);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Fs=t=>+t||0;function Bs(t,e){const n={},i=Wr(e),r=i?Object.keys(e):e,o=Wr(t)?i?n=>Xr(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=Fs(o(t));return n}function zs(t){return Bs(t,{top:"y",right:"x",bottom:"y",left:"x"})}function js(t){return Bs(t,["topLeft","topRight","bottomLeft","bottomRight"])}function qs(t){const e=zs(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Us(t,e){t=t||{},e=e||_s.font;let n=Xr(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=Xr(t.style,e.style);i&&!(""+i).match(Ts)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Xr(t.family,e.family),lineHeight:Ds(Xr(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Xr(t.weight,e.weight),string:""};return r.string=function(t){return!t||Gr(t.size)||Gr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Gs(t,e,n,i){let r,o,s,a=!0;for(r=0,o=t.length;r<o;++r)if(s=t[r],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==n&&Vr(s)&&(s=s[n%s.length],a=!1),void 0!==s))return i&&!a&&(i.cacheable=!1),s}function Vs(t,e,n){const{min:i,max:r}=t,o=Zr(e,(r-i)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(i,-Math.abs(o)),max:s(r,o)}}function Ws(t,e){return Object.assign(Object.create(t),e)}function Hs(t,e=[""],n=t,i,r=(()=>t[0])){ho(i)||(i=ia("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>Hs([r,...t],e,n,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Ks(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=ia(Zs(o,t),n),ho(r))return Js(t,r)?ea(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>ra(t).includes(e),ownKeys:t=>ra(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function Ys(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Xs(t,i),setContext:e=>Ys(t,e,n,i),override:r=>Ys(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Ks(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=t;let a=i[e];uo(a)&&s.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(o,s||i),a.delete(t),Js(t,e)&&(e=ea(r._scopes,r,t,e));return e}(e,a,t,n));Vr(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=n;if(ho(o.index)&&i(t))e=e[o.index%e.length];else if(Wr(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const h of n){const n=ea(i,r,t,h);e.push(Ys(n,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));Js(e,a)&&(a=Ys(a,r,o&&o[e],s));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Xs(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:uo(n)?n:()=>n,isIndexable:uo(i)?i:()=>i}}const Zs=(t,e)=>t?t+ao(e):e,Js=(t,e)=>Wr(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ks(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function $s(t,e,n){return uo(t)?t(e,n):t}const Qs=(t,e)=>!0===t?e:"string"==typeof t?so(e,t):void 0;function ta(t,e,n,i,r){for(const o of e){const e=Qs(n,o);if(e){t.add(e);const o=$s(e._fallback,n,r);if(ho(o)&&o!==n&&o!==i)return o}else if(!1===e&&ho(i)&&n!==i)return null}return!1}function ea(t,e,n,i){const r=e._rootScopes,o=$s(e._fallback,n,i),s=[...t,...r],a=new Set;a.add(i);let h=na(a,s,n,o||n,i);return null!==h&&((!ho(o)||o===n||(h=na(a,s,o,h,i),null!==h))&&Hs(Array.from(a),[""],r,o,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Vr(r)&&Wr(n)?n:r||{}}(e,n,i))))}function na(t,e,n,i,r){for(;n;)n=ta(t,e,n,i,r);return n}function ia(t,e){for(const n of e){if(!n)continue;const e=n[t];if(ho(e))return e}}function ra(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function oa(t,e,n,i){const{iScale:r}=t,{key:o="r"}=this._parsing,s=new Array(i);let a,h,u,l;for(a=0,h=i;a<h;++a)u=a+n,l=e[u],s[a]={r:r.parse(so(l,o),u)};return s}const sa=Number.EPSILON||1e-14,aa=(t,e)=>e<t.length&&!t[e].skip&&t[e],ha=t=>"x"===t?"y":"x";function ua(t,e,n,i){const r=t.skip?e:t,o=e,s=n.skip?e:n,a=Ao(o,r),h=Ao(s,o);let u=a/(a+h),l=h/(a+h);u=isNaN(u)?0:u,l=isNaN(l)?0:l;const c=i*u,f=i*l;return{previous:{x:o.x-c*(s.x-r.x),y:o.y-c*(s.y-r.y)},next:{x:o.x+f*(s.x-r.x),y:o.y+f*(s.y-r.y)}}}function la(t,e="x"){const n=ha(e),i=t.length,r=Array(i).fill(0),o=Array(i);let s,a,h,u=aa(t,0);for(s=0;s<i;++s)if(a=h,h=u,u=aa(t,s+1),h){if(u){const t=u[e]-h[e];r[s]=0!==t?(u[n]-h[n])/t:0}o[s]=a?u?wo(r[s-1])!==wo(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}!function(t,e,n){const i=t.length;let r,o,s,a,h,u=aa(t,0);for(let l=0;l<i-1;++l)h=u,u=aa(t,l+1),h&&u&&(Eo(e[l],0,sa)?n[l]=n[l+1]=0:(r=n[l]/e[l],o=n[l+1]/e[l],a=Math.pow(r,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[l]=r*s*e[l],n[l+1]=o*s*e[l])))}(t,r,o),function(t,e,n="x"){const i=ha(n),r=t.length;let o,s,a,h=aa(t,0);for(let u=0;u<r;++u){if(s=a,a=h,h=aa(t,u+1),!a)continue;const r=a[n],l=a[i];s&&(o=(r-s[n])/3,a[`cp1${n}`]=r-o,a[`cp1${i}`]=l-o*e[u]),h&&(o=(h[n]-r)/3,a[`cp2${n}`]=r+o,a[`cp2${i}`]=l+o*e[u])}}(t,o,e)}function ca(t,e,n){return Math.max(Math.min(t,n),e)}function fa(t,e,n,i,r){let o,s,a,h;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)la(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],h=ua(n,a,t[Math.min(o+1,s-(i?0:1))%s],e.tension),a.cp1x=h.previous.x,a.cp1y=h.previous.y,a.cp2x=h.next.x,a.cp2y=h.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,o,s,a=Ss(t[0],e);for(n=0,i=t.length;n<i;++n)s=o,o=a,a=n<i-1&&Ss(t[n+1],e),o&&(r=t[n],s&&(r.cp1x=ca(r.cp1x,e.left,e.right),r.cp1y=ca(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=ca(r.cp2x,e.left,e.right),r.cp2y=ca(r.cp2y,e.top,e.bottom)))}(t,n)}function pa(){return"undefined"!=typeof window&&"undefined"!=typeof document}function da(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ga(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const ya=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const ma=["top","right","bottom","left"];function _a(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=ma[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const va=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ba(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=ya(n),o="border-box"===r.boxSizing,s=_a(r,"padding"),a=_a(r,"border","width"),{x:h,y:u,box:l}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:o}=i;let s,a,h=!1;if(va(r,o,t.target))s=r,a=o;else{const t=e.getBoundingClientRect();s=i.clientX-t.left,a=i.clientY-t.top,h=!0}return{x:s,y:a,box:h}}(t,n),c=s.left+(l&&a.left),f=s.top+(l&&a.top);let{width:p,height:d}=e;return o&&(p-=s.width+a.width,d-=s.height+a.height),{x:Math.round((h-c)/p*n.width/i),y:Math.round((u-f)/d*n.height/i)}}const xa=t=>Math.round(10*t)/10;function wa(t,e,n,i){const r=ya(t),o=_a(r,"margin"),s=ga(r.maxWidth,t,"clientWidth")||yo,a=ga(r.maxHeight,t,"clientHeight")||yo,h=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=da(t);if(o){const t=o.getBoundingClientRect(),s=ya(o),a=_a(s,"border","width"),h=_a(s,"padding");e=t.width-h.width-a.width,n=t.height-h.height-a.height,i=ga(s.maxWidth,o,"clientWidth"),r=ga(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||yo,maxHeight:r||yo}}(t,e,n);let{width:u,height:l}=h;if("content-box"===r.boxSizing){const t=_a(r,"border","width"),e=_a(r,"padding");u-=e.width+t.width,l-=e.height+t.height}u=Math.max(0,u-o.width),l=Math.max(0,i?u/i:l-o.height),u=xa(Math.min(u,s,h.maxWidth)),l=xa(Math.min(l,a,h.maxHeight)),u&&!l&&(l=xa(u/2));return(void 0!==e||void 0!==n)&&i&&h.height&&l>h.height&&(l=h.height,u=xa(Math.floor(l*i))),{width:u,height:l}}function Ea(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||s.height!==r||s.width!==o)&&(t.currentDevicePixelRatio=i,s.height=r,s.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Ma=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Sa(t,e){const n=function(t,e){return ya(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ia(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ca(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Pa(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=Ia(t,r,n),a=Ia(r,o,n),h=Ia(o,e,n),u=Ia(s,a,n),l=Ia(a,h,n);return Ia(u,l,n)}function Na(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function La(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Oa(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ka(t){return"angle"===t?{between:Do,compare:Ro,normalize:To}:{between:Bo,compare:(t,e)=>t-e,normalize:t=>t}}function Aa({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function Ra(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,s=e.length,{compare:a,between:h,normalize:u}=ka(i),{start:l,end:c,loop:f,style:p}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:s,normalize:a}=ka(i),h=e.length;let u,l,{start:c,end:f,loop:p}=t;if(p){for(c+=h,f+=h,u=0,l=h;u<l&&s(a(e[c%h][i]),r,o);++u)c--,f--;c%=h,f%=h}return f<c&&(f+=h),{start:c,end:f,loop:p,style:t.style}}(t,e,n),d=[];let g,y,m,_=!1,v=null;const b=()=>_||h(r,m,g)&&0!==a(r,m),x=()=>!_||0===a(o,g)||h(o,m,g);for(let t=l,n=l;t<=c;++t)y=e[t%s],y.skip||(g=u(y[i]),g!==m&&(_=h(g,r,o),null===v&&b()&&(v=0===a(g,r)?t:n),null!==v&&x()&&(d.push(Aa({start:v,end:t,loop:f,count:s,style:p})),v=null),n=t,m=g));return null!==v&&d.push(Aa({start:v,end:c,loop:f,count:s,style:p})),d}function Ta(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=Ra(i[r],t.points,e);o.length&&n.push(...o)}return n}function Da(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);if(!0===i)return Fa(t,[{start:s,end:a,loop:o}],n,e);return Fa(t,function(t,e,n,i){const r=t.length,o=[];let s,a=e,h=t[e];for(s=e+1;s<=n;++s){const n=t[s%r];n.skip||n.stop?h.skip||(i=!1,o.push({start:e%r,end:(s-1)%r,loop:i}),e=a=n.stop?s:null):(a=s,h.skip&&(e=s)),h=n}return null!==a&&o.push({start:e%r,end:a%r,loop:i}),o}(n,s,a<s?a+r:a,!!t._fullLoop&&0===s&&a===r-1),n,e)}function Fa(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=Ba(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,h=n.length,u=[];let l=o,c=e[0].start,f=c;function p(t,e,i,r){const o=a?-1:1;if(t!==e){for(t+=h;n[t%h].skip;)t-=o;for(;n[e%h].skip;)e+=o;t%h!=e%h&&(u.push({start:t%h,end:e%h,loop:i,style:r}),l=r,c=e%h)}}for(const t of e){c=a?c:t.start;let e,o=n[c%h];for(f=c+1;f<=t.end;f++){const a=n[f%h];e=Ba(i.setContext(Ws(r,{type:"segment",p0:o,p1:a,p0DataIndex:(f-1)%h,p1DataIndex:f%h,datasetIndex:s}))),za(e,l)&&p(c,f-1,t.loop,l),o=a,l=e}c<f-1&&p(c,f-1,t.loop,l)}return u}(t,e,n,i):e}function Ba(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function za(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}class ja{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Ho.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,s=r.length-1,a=!1;for(;s>=0;--s)o=r[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),a=!0):(r[s]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var qa=new ja;const Ua="transparent",Ga={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=os(t||Ua),r=i.valid&&os(e||Ua);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Va{constructor(t,e,n,i){const r=e[n];i=Gs([t.to,i,r,t.from]);const o=Gs([t.from,r,i]);this._active=!0,this._fn=t.fn||Ga[t.type||typeof o],this._easing=is[t.easing]||is.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Gs([t.to,e,i,t.from]),this._from=Gs([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,s=this._to;let a;if(this._active=r!==s&&(o||e<n),!this._active)return this._target[i]=s,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Wa{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Wr(t))return;const e=Object.keys(_s.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const r=t[i];if(!Wr(r))return;const o={};for(const t of e)o[t]=r[t];(Vr(r.properties)&&r.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,o)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const h=o[a];if("$"===h.charAt(0))continue;if("options"===h){i.push(...this._animateOptions(t,e));continue}const u=e[h];let l=r[h];const c=n.get(h);if(l){if(c&&l.active()){l.update(c,u,s);continue}l.cancel()}c&&c.duration?(r[h]=l=new Va(c,t,h,u),i.push(l)):t[h]=u}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(qa.add(this._chart,n),!0):void 0}}function Ha(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function Ya(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function Xa(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let s,a,h,u;if(null!==e){for(s=0,a=r.length;s<a;++s){if(h=+r[s],h===n){if(i.all)continue;break}u=t.values[h],Hr(u)&&(o||0===e||wo(e)===wo(u))&&(e+=u)}return e}}function Za(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Ja(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Ka(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function $a(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=i,h=o.axis,u=s.axis,l=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,s,i),c=e.length;let f;for(let t=0;t<c;++t){const n=e[t],{[h]:o,[u]:c}=n;f=(n._stacks||(n._stacks={}))[u]=Ja(r,l,o),f[a]=c,f._top=Ka(f,s,!0,i.type),f._bottom=Ka(f,s,!1,i.type);(f._visualValues||(f._visualValues={}))[a]=c}}function Qa(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function th(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const eh=t=>"reset"===t||"none"===t,nh=(t,e)=>e?t:Object.assign({},t);class ih{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Za(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&th(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=Xr(n.xAxisID,Qa(t,"x")),o=e.yAxisID=Xr(n.yAxisID,Qa(t,"y")),s=e.rAxisID=Xr(n.rAxisID,Qa(t,"r")),a=e.indexAxis,h=e.iAxisID=i(a,r,o,s),u=e.vAxisID=i(a,o,r,s);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Vo(this._data,this),t._stacked&&th(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Wr(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){Vo(n,this);const t=this._cachedMeta;th(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Go.forEach((t=>{const e="_onData"+ao(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),r}})})))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Za(e.vScale,e),e.stack!==n.stack&&(i=!0,th(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&$a(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,s=r.axis;let a,h,u,l=0===t&&e===i.length||n._sorted,c=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,u=i;else{u=Vr(i[t])?this.parseArrayData(n,i,t,e):Wr(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===h[s]||c&&h[s]<c[s];for(a=0;a<e;++a)n._parsed[a+t]=h=u[a],l&&(r()&&(l=!1),c=h);n._sorted=l}o&&$a(this,u)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,s=r.axis,a=o.axis,h=r.getLabels(),u=r===o,l=new Array(i);let c,f,p;for(c=0,f=i;c<f;++c)p=c+n,l[c]={[s]:u||r.parse(h[p],p),[a]:o.parse(e[p],p)};return l}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,s=new Array(i);let a,h,u,l;for(a=0,h=i;a<h;++a)u=a+n,l=e[u],s[a]={x:r.parse(l[0],u),y:o.parse(l[1],u)};return s}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,h=new Array(i);let u,l,c,f;for(u=0,l=i;u<l;++u)c=u+n,f=e[c],h[u]={x:r.parse(so(f,s),c),y:o.parse(so(f,a),c)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return Xa({keys:Ya(i,!0),values:e._stacks[t.axis]._visualValues},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const s=i&&n._stacks[e.axis];i&&s&&(i.values=s,o=Xa(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,s=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ya(n,!0),values:null})(e,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:l}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(s);let c,f;function p(){f=i[c];const e=f[s.axis];return!Hr(f[t.axis])||u>e||l<e}for(c=0;c<o&&(p()||(this.updateRangeFromParsed(h,t,f,a),!r));++c);if(r)for(c=o-1;c>=0;--c)if(!p()){this.updateRangeFromParsed(h,t,f,a);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],Hr(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Wr(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Xr(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Ha(t,n),r=Ha(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||i.length-s,h=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,r,s,a),u=s;u<s+a;++u){const e=i[u];e.hidden||(e.active&&h?o.push(e):e.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Ws(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Ws(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,s=r[o],a=this.enableOptionSharing&&ho(n);if(s)return nh(s,a);const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,t),l=i?[`${t}Hover`,"hover",t,""]:[t,""],c=h.getOptionScopes(this.getDataset(),u),f=Object.keys(_s.elements[t]),p=h.resolveNamedOptions(c,f,(()=>this.getContext(n,i,e)),l);return p.$shared&&(p.$shared=a,r[o]=Object.freeze(nh(p,a))),p}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,s=r[o];if(s)return s;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(o,this.getContext(t,n,e))}const h=new Wa(i,a&&a.animations);return a&&a._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||eh(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,i){eh(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!eh(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(r),s=t;s<o;++s)r[s]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&th(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function rh(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Wo(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,s,a=e._length;const h=()=>{32767!==o&&-32768!==o&&(ho(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),h();for(s=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),h();return a}function oh(t,e,n,i){return Vr(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),s=Math.min(r,o),a=Math.max(r,o);let h=s,u=a;Math.abs(s)>Math.abs(a)&&(h=a,u=s),e[n.axis]=u,e._custom={barStart:h,barEnd:u,start:r,end:o,min:s,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function sh(t,e,n,i){const r=t.iScale,o=t.vScale,s=r.getLabels(),a=r===o,h=[];let u,l,c,f;for(u=n,l=n+i;u<l;++u)f=e[u],c={},c[r.axis]=a||r.parse(s[u],u),h.push(oh(f,c,o,u));return h}function ah(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function hh(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:h,top:u,bottom:l}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=u:(n._bottom||0)===i?r=l:(o[uh(l,s,a,h)]=!0,r=u)),o[uh(r,s,a,h)]=!0,t.borderSkipped=o}function uh(t,e,n,i){var r,o,s;return i?(s=n,t=lh(t=(r=t)===(o=e)?s:r===s?o:r,n,e)):t=lh(t,e,n),t}function lh(t,e,n){return"start"===t?e:"end"===t?n:t}function ch(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class fh extends ih{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,s=t=>+n[t];if(Wr(n[t])){const{key:t="value"}=this._parsing;s=e=>+so(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=s(r)}}_getRotation(){return No(this.options.rotation-90)}_getCircumference(){return No(this.options.circumference)}_getRotationExtents(){let t=po,e=-po;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((h=this.options.cutout,u=s,"string"==typeof h&&h.endsWith("%")?parseFloat(h)/100:+h/u),1);var h,u;const l=this._getRingWeight(this.index),{circumference:c,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:d,offsetX:g,offsetY:y}=function(t,e,n){let i=1,r=1,o=0,s=0;if(e<po){const a=t,h=a+e,u=Math.cos(a),l=Math.sin(a),c=Math.cos(h),f=Math.sin(h),p=(t,e,i)=>Do(t,a,h,!0)?1:Math.max(e,e*n,i,i*n),d=(t,e,i)=>Do(t,a,h,!0)?-1:Math.min(e,e*n,i,i*n),g=p(0,u,c),y=p(_o,l,f),m=d(fo,u,c),_=d(fo+_o,l,f);i=(g-m)/2,r=(y-_)/2,o=-(g+m)/2,s=-(y+_)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:s}}(f,c,a),m=(n.width-o)/p,_=(n.height-o)/d,v=Math.max(Math.min(m,_)/2,0),b=Zr(this.options.radius,v),x=(b-Math.max(b*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=y*b,i.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/po)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,s=o.chartArea,a=o.options.animation,h=(s.left+s.right)/2,u=(s.top+s.bottom)/2,l=r&&a.animateScale,c=l?0:this.innerRadius,f=l?0:this.outerRadius,{sharedOptions:p,includeOptions:d}=this._getSharedOptions(e,i);let g,y=this._getRotation();for(g=0;g<e;++g)y+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],o={x:h+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:f,innerRadius:c};d&&(o.options=p||this.resolveDataElementOptions(g,n.active?"active":i)),y+=e,this.updateElement(n,g,o,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?po*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ls(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,s,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,s=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=s.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Xr(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ph extends ih{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ls(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return oa.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,h=a.xCenter,u=a.yCenter,l=a.getIndexAngle(0)-.5*fo;let c,f=l;const p=360/this.countVisibleElements();for(c=0;c<e;++c)f+=this._computeAngle(c,i,p);for(c=e;c<e+n;c++){const e=t[c];let n=f,d=f+this._computeAngle(c,i,p),g=o.getDataVisibility(c)?a.getDistanceFromCenterForValue(this.getParsed(c).r):0;f=d,r&&(s.animateScale&&(g=0),s.animateRotate&&(n=d=l));const y={x:h,y:u,innerRadius:0,outerRadius:g,startAngle:n,endAngle:d,options:this.resolveDataElementOptions(c,e.active?"active":i)};this.updateElement(e,c,y,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?No(this.resolveDataElementOptions(t,e).angle||n):0}}var dh=Object.freeze({__proto__:null,BarController:class extends ih{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return sh(t,e,n,i)}parseArrayData(t,e,n,i){return sh(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,h="x"===r.axis?s:a,u="x"===o.axis?s:a,l=[];let c,f,p,d;for(c=n,f=n+i;c<f;++c)d=e[c],p={},p[r.axis]=r.parse(so(d,h),c),l.push(oh(so(d,u),p,o,c));return l}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,s=ah(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),h=s.isHorizontal(),u=this._getRuler(),{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i);for(let f=e;f<e+n;f++){const e=this.getParsed(f),n=r||Gr(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),d=(e._stacks||{})[s.axis],g={horizontal:h,base:n.base,enableBorderRadius:!d||ah(e._custom)||o===d._top||o===d._bottom,x:h?n.head:p.center,y:h?p.center:n.head,height:h?p.size:Math.abs(n.size),width:h?Math.abs(n.size):p.size};c&&(g.options=l||this.resolveDataElementOptions(f,t[f].active?"active":i));const y=g.options||t[f].options;hh(g,y,d,o),ch(g,y,u.ratio),this.updateElement(t[f],f,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),r=n.options.stacked,o=[],s=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if(Gr(i)||isNaN(i))return!0};for(const n of i)if((void 0===e||!s(n))&&((!1===r||-1===o.indexOf(n.stack)||void 0===r&&void 0===n.stack)&&o.push(n.stack),n.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const s=t.barThickness;return{min:s||rh(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,s=r||0,a=this.getParsed(t),h=a._custom,u=ah(h);let l,c,f=a[e.axis],p=0,d=n?this.applyStack(e,a,n):f;d!==f&&(p=d-f,d=f),u&&(f=h.barStart,d=h.barEnd-h.barStart,0!==f&&wo(f)!==wo(h.barEnd)&&(p=0),p+=f);const g=Gr(r)||u?p:r;let y=e.getPixelForValue(g);if(l=this.chart.getDataVisibility(t)?e.getPixelForValue(p+d):y,c=l-y,Math.abs(c)<o){c=function(t,e,n){return 0!==t?wo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(c,e,s)*o,f===s&&(y-=c/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),h=Math.min(t,r),p=Math.max(t,r);y=Math.max(Math.min(y,p),h),l=y+c,n&&!u&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(l)-e.getValueForPixel(y))}if(y===e.getPixelForValue(s)){const t=wo(c)*e.getLineWidthForValue(s)/2;y+=t,c-=t}return{size:c,base:y,head:l,center:l+c/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=Xr(i.maxBarThickness,1/0);let s,a;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,h="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const h=n.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const u=o-(o-Math.min(s,a))/2*h;return{chunk:Math.abs(a-s)/2*h/i,ratio:n.barPercentage,start:u}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,s;return Gr(r)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=r*i,s=1),{chunk:o/i,ratio:s,start:e.pixels[t]-o/2}}(t,e,i,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);s=h.start+h.chunk*u+h.chunk/2,a=Math.min(o,h.chunk*h.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}},BubbleController:class extends ih{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Xr(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Xr(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),s=i.getLabelForValue(o.x),a=r.getLabelForValue(o.y),h=o._custom;return{label:n[t]||"",value:"("+s+", "+a+(h?", "+h:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:h}=this._getSharedOptions(e,i),u=o.axis,l=s.axis;for(let c=e;c<e+n;c++){const e=t[c],n=!r&&this.getParsed(c),f={},p=f[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[u]),d=f[l]=r?s.getBasePixel():s.getPixelForValue(n[l]);f.skip=isNaN(p)||isNaN(d),h&&(f.options=a||this.resolveDataElementOptions(c,e.active?"active":i),r&&(f.options.radius=0)),this.updateElement(e,c,f,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Xr(n&&n._custom,r),i}},DoughnutController:fh,LineController:class extends ih{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=$o(e,i,o);this._drawStart=s,this._drawCount=a,Qo(e)&&(s=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(i,s,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:s,_stacked:a,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:l}=this._getSharedOptions(e,i),c=o.axis,f=s.axis,{spanGaps:p,segment:d}=this.options,g=Io(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i,m=e+n,_=t.length;let v=e>0&&this.getParsed(e-1);for(let n=0;n<_;++n){const p=t[n],_=y?p:{};if(n<e||n>=m){_.skip=!0;continue}const b=this.getParsed(n),x=Gr(b[f]),w=_[c]=o.getPixelForValue(b[c],n),E=_[f]=r||x?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,b,a):b[f],n);_.skip=isNaN(w)||isNaN(E)||x,_.stop=n>0&&Math.abs(b[c]-v[c])>g,d&&(_.parsed=b,_.raw=h.data[n]),l&&(_.options=u||this.resolveDataElementOptions(n,p.active?"active":i)),y||this.updateElement(p,n,_,i),v=b}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PolarAreaController:ph,PieController:class extends fh{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},RadarController:class extends ih{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return oa.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,o="reset"===i;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":i),a=r.getPointPositionForValue(s,this.getParsed(s).r),h=o?r.xCenter:a.x,u=o?r.yCenter:a.y,l={x:h,y:u,angle:a.angle,skip:isNaN(h)||isNaN(u),options:n};this.updateElement(e,s,l,i)}}},ScatterController:class extends ih{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),s=i.getLabelForValue(o.x),a=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=$o(e,n,i);if(this._drawStart=r,this._drawCount=o,Qo(e)&&(r=0,o=n.length),this.options.showLine){const{dataset:r,_dataset:o}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=n;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:s},t)}this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:s,_stacked:a,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),l=this.getSharedOptions(u),c=this.includeOptions(i,l),f=o.axis,p=s.axis,{spanGaps:d,segment:g}=this.options,y=Io(d)?d:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i;let _=e>0&&this.getParsed(e-1);for(let u=e;u<e+n;++u){const e=t[u],n=this.getParsed(u),d=m?e:{},v=Gr(n[p]),b=d[f]=o.getPixelForValue(n[f],u),x=d[p]=r||v?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[p],u);d.skip=isNaN(b)||isNaN(x)||v,d.stop=u>0&&Math.abs(n[f]-_[f])>y,g&&(d.parsed=n,d.raw=h.data[u]),c&&(d.options=l||this.resolveDataElementOptions(u,e.active?"active":i)),m||this.updateElement(e,u,d,i),_=n}this.updateSharedOptions(l,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}});function gh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yh{static override(t){Object.assign(yh.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return gh()}parse(){return gh()}format(){return gh()}add(){return gh()}diff(){return gh()}startOf(){return gh()}endOf(){return gh()}}var mh=yh;function _h(t,e,n,i){const{controller:r,data:o,_sorted:s}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&s&&o.length){const t=a._reversePixels?qo:jo;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),s=t(o,e,n+r);return{lo:i.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function vh(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:a}=o[t],{lo:h,hi:u}=_h(o[t],e,s,r);for(let t=h;t<=u;++t){const e=a[t];e.skip||i(e,n,t)}}}function bh(t,e,n,i,r){const o=[];if(!r&&!t.isPointInArea(e))return o;return vh(t,n,e,(function(n,s,a){(r||Ss(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function xh(t,e,n,i,r,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let h=Number.POSITIVE_INFINITY;return vh(t,n,e,(function(n,u,l){const c=n.inRange(e.x,e.y,r);if(i&&!c)return;const f=n.getCenterPoint(r);if(!(!!o||t.isPointInArea(f))&&!c)return;const p=a(e,f);p<h?(s=[{element:n,datasetIndex:u,index:l}],h=p):p===h&&s.push({element:n,datasetIndex:u,index:l})})),s}function wh(t,e,n,i,r,o){return o||t.isPointInArea(e)?"r"!==n||i?xh(t,e,n,i,r,o):function(t,e,n,i){let r=[];return vh(t,n,e,(function(t,n,o){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:h}=ko(t,{x:e.x,y:e.y});Do(h,s,a)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function Eh(t,e,n,i,r){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return vh(t,n,e,((t,i,h)=>{t[s](e[n],r)&&(o.push({element:t,datasetIndex:i,index:h}),a=a||t.inRange(e.x,e.y,r))})),i&&!a?[]:o}var Mh={evaluateInteractionItems:vh,modes:{index(t,e,n,i){const r=ba(e,t),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?bh(t,r,o,i,s):wh(t,r,o,!1,i,s),h=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&h.push({element:n,datasetIndex:t.index,index:e})})),h):[]},dataset(t,e,n,i){const r=ba(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?bh(t,r,o,i,s):wh(t,r,o,!1,i,s);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>bh(t,ba(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=ba(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return wh(t,r,o,n.intersect,i,s)},x:(t,e,n,i)=>Eh(t,ba(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Eh(t,ba(e,t),"y",n.intersect,i)}};const Sh=["left","top","right","bottom"];function Ih(t,e){return t.filter((t=>t.pos===e))}function Ch(t,e){return t.filter((t=>-1===Sh.indexOf(t.pos)&&t.box.axis===e))}function Ph(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Nh(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Sh.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,h=n[a.stack],u=h&&a.stackWeight/h.weight;a.horizontal?(a.width=u?u*i:s&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:s&&e.availableHeight)}return n}function Lh(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Oh(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function kh(t,e,n,i){const{pos:r,box:o}=n,s=t.maxPadding;if(!Wr(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&Oh(s,o.getPadding());const a=Math.max(0,e.outerWidth-Lh(s,t,"left","right")),h=Math.max(0,e.outerHeight-Lh(s,t,"top","bottom")),u=a!==t.w,l=h!==t.h;return t.w=a,t.h=h,n.horizontal?{same:u,other:l}:{same:l,other:u}}function Ah(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function Rh(t,e,n,i){const r=[];let o,s,a,h,u,l;for(o=0,s=t.length,u=0;o<s;++o){a=t[o],h=a.box,h.update(a.width||e.w,a.height||e.h,Ah(a.horizontal,e));const{same:s,other:c}=kh(e,n,a,i);u|=s&&r.length,l=l||c,h.fullSize||r.push(a)}return u&&Rh(r,e,n,i)||l}function Th(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Dh(t,e,n,i){const r=n.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,h=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/h.weight||1;if(a.horizontal){const i=e.w*u,o=h.size||t.height;ho(h.start)&&(s=h.start),t.fullSize?Th(t,r.left,s,n.outerWidth-r.right-r.left,o):Th(t,e.left+h.placed,s,i,o),h.start=s,h.placed+=i,s=t.bottom}else{const i=e.h*u,s=h.size||t.width;ho(h.start)&&(o=h.start),t.fullSize?Th(t,o,r.top,s,n.outerHeight-r.bottom-r.top):Th(t,o,e.top+h.placed,s,i),h.start=o,h.placed+=i,o=t.right}}e.x=o,e.y=s}var Fh={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=qs(t.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,o,s,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:s,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}(t),n=Ph(e.filter((t=>t.box.fullSize)),!0),i=Ph(Ih(e,"left"),!0),r=Ph(Ih(e,"right")),o=Ph(Ih(e,"top"),!0),s=Ph(Ih(e,"bottom")),a=Ch(e,"x"),h=Ch(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(h).concat(s).concat(a),chartArea:Ih(e,"chartArea"),vertical:i.concat(r).concat(h),horizontal:o.concat(s).concat(a)}}(t.boxes),h=a.vertical,u=a.horizontal;Kr(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const l=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,c=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/l,hBoxMaxHeight:s/2}),f=Object.assign({},r);Oh(f,qs(i));const p=Object.assign({maxPadding:f,w:o,h:s,x:r.left,y:r.top},r),d=Nh(h.concat(u),c);Rh(a.fullSize,p,c,d),Rh(h,p,c,d),Rh(u,p,c,d)&&Rh(h,p,c,d),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(p),Dh(a.leftAndTop,p,c,d),p.x+=p.w,p.y+=p.h,Dh(a.rightAndBottom,p,c,d),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Kr(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class Bh{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class zh extends Bh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jh="$chartjs",qh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uh=t=>null===t||""===t;const Gh=!!Ma&&{passive:!0};function Vh(t,e,n){t.canvas.removeEventListener(e,n,Gh)}function Wh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Hh(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Wh(n.addedNodes,i),e=e&&!Wh(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Yh(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Wh(n.removedNodes,i),e=e&&!Wh(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Xh=new Map;let Zh=0;function Jh(){const t=window.devicePixelRatio;t!==Zh&&(Zh=t,Xh.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Kh(t,e,n){const i=t.canvas,r=i&&da(i);if(!r)return;const o=Yo(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),s=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return s.observe(r),function(t,e){Xh.size||window.addEventListener("resize",Jh),Xh.set(t,e)}(t,o),s}function $h(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Xh.delete(t),Xh.size||window.removeEventListener("resize",Jh)}(t)}function Qh(t,e,n){const i=t.canvas,r=Yo((e=>{null!==t.ctx&&n(function(t,e){const n=qh[t.type]||t.type,{x:i,y:r}=ba(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t);return function(t,e,n){t.addEventListener(e,n,Gh)}(i,e,r),r}class tu extends Bh{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[jh]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Uh(r)){const e=Sa(t,"width");void 0!==e&&(t.width=e)}if(Uh(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Sa(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[jh])return!1;const n=e[jh].initial;["height","width"].forEach((t=>{const i=n[t];Gr(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[jh],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Hh,detach:Yh,resize:Kh}[e]||Qh;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:$h,detach:$h,resize:$h}[e]||Vh)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return wa(t,e,n,i)}isAttached(t){const e=da(t);return!(!e||!e.isConnected)}}class eu{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Io(this.x)&&Io(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function nu(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],s=o.length,a=o[0],h=o[s-1],u=[];if(s>r)return function(t,e,n,i){let r,o=0,s=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===s&&(e.push(t[r]),o++,s=n[o*i])}(e,u,o,s/r),u;const l=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=So(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(o,e,r);if(s>0){let t,n;const i=s>1?Math.round((h-a)/(s-1)):null;for(iu(e,u,l,Gr(i)?0:a-i,a),t=0,n=s-1;t<n;t++)iu(e,u,l,o[t],o[t+1]);return iu(e,u,l,h,Gr(i)?e.length:h+i),u}return iu(e,u,l),u}function iu(t,e,n,i,r){const o=Xr(i,0),s=Math.min(Xr(r,t.length),t.length);let a,h,u,l=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),u=o;u<0;)l++,u=Math.round(o+l*n);for(h=Math.max(o,0);h<s;h++)h===u&&(e.push(t[h]),l++,u=Math.round(o+l*n))}const ru=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,ou=(t,e)=>Math.min(e||t,t);function su(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function au(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,s=t._endPixel,a=1e-6;let h,u=t.getPixelForTick(r);if(!(n&&(h=1===i?Math.max(u-o,s-u):0===e?(t.getPixelForTick(1)-u)/2:(u-t.getPixelForTick(r-1))/2,u+=r<e?h:-h,u<o-a||u>s+a)))return u}function hu(t){return t.drawTicks?t.tickLength:0}function uu(t,e){if(!t.display)return 0;const n=Us(t.font,e),i=qs(t.padding);return(Vr(t.text)?t.text.length:1)*n.lineHeight+i.height}function lu(t,e,n){let i=Zo(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class cu extends eu{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Yr(t,Number.POSITIVE_INFINITY),e=Yr(e,Number.NEGATIVE_INFINITY),n=Yr(n,Number.POSITIVE_INFINITY),i=Yr(i,Number.NEGATIVE_INFINITY),{min:Yr(t,n),max:Yr(e,i),minDefined:Hr(t),maxDefined:Hr(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const s=this.getMatchingVisibleMetas();for(let a=0,h=s.length;a<h;++a)e=s[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:Yr(n,Yr(i,n)),max:Yr(i,Yr(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Jr(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Vs(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?su(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=nu(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Jr(this.options.afterUpdate,[this])}beforeSetDimensions(){Jr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Jr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Jr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Jr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Jr(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Jr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Jr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=ou(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o,s,a,h=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const u=this._getLabelSizes(),l=u.widest.width,c=u.highest.height,f=Fo(this.chart.width-l,0,this.maxWidth);o=t.offset?this.maxWidth/n:f/(n-1),l+6>o&&(o=f/(n-(t.offset?.5:1)),s=this.maxHeight-hu(t.grid)-e.padding-uu(t.title,this.chart.options.font),a=Math.sqrt(l*l+c*c),h=Lo(Math.min(Math.asin(Fo((u.highest.height+6)/o,-1,1)),Math.asin(Fo(s/a,-1,1))-Math.asin(Fo(c/a,-1,1)))),h=Math.max(i,Math.min(r,h))),this.labelRotation=h}afterCalculateLabelRotation(){Jr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Jr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=uu(i,e.options.font);if(s?(t.width=this.maxWidth,t.height=hu(r)+o):(t.height=this.maxHeight,t.width=hu(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),a=2*n.padding,h=No(this.labelRotation),u=Math.cos(h),l=Math.sin(h);if(s){const e=n.mirror?0:l*r.width+u*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:u*r.width+l*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,l,u)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:s}=this.options,a=0!==this.labelRotation,h="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let l=0,c=0;a?h?(l=i*t.width,c=n*e.height):(l=n*t.height,c=i*e.width):"start"===r?c=e.width:"end"===r?l=t.width:"inner"!==r&&(l=t.width/2,c=e.width/2),this.paddingLeft=Math.max((l-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((c-u+o)*this.width/(this.width-u),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Jr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Gr(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=su(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,o=[],s=[],a=Math.floor(e/ou(e,n));let h,u,l,c,f,p,d,g,y,m,_,v=0,b=0;for(h=0;h<e;h+=a){if(c=t[h].label,f=this._resolveTickFontOptions(h),i.font=p=f.string,d=r[p]=r[p]||{data:{},gc:[]},g=f.lineHeight,y=m=0,Gr(c)||Vr(c)){if(Vr(c))for(u=0,l=c.length;u<l;++u)_=c[u],Gr(_)||Vr(_)||(y=vs(i,d.data,d.gc,y,_),m+=g)}else y=vs(i,d.data,d.gc,y,c),m=g;o.push(y),s.push(m),v=Math.max(y,v),b=Math.max(m,b)}!function(t,e){Kr(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(r,e);const x=o.indexOf(v),w=s.indexOf(b),E=t=>({width:o[t]||0,height:s[t]||0});return{first:E(0),last:E(e-1),widest:E(x),highest:E(w),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Fo(this._alignToPixels?xs(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Ws(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Ws(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=No(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,s=r?r.widest.width+o:0,a=r?r.highest.height+o:0;return this.isHorizontal()?a*n>s*i?s/n:a/i:a*i<s*n?a/n:s/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:s}=i,a=r.offset,h=this.isHorizontal(),u=this.ticks.length+(a?1:0),l=hu(r),c=[],f=s.setContext(this.getContext()),p=f.display?f.width:0,d=p/2,g=function(t){return xs(n,t,p)};let y,m,_,v,b,x,w,E,M,S,I,C;if("top"===o)y=g(this.bottom),x=this.bottom-l,E=y-d,S=g(t.top)+d,C=t.bottom;else if("bottom"===o)y=g(this.top),S=t.top,C=g(t.bottom)-d,x=y+d,E=this.top+l;else if("left"===o)y=g(this.right),b=this.right-l,w=y-d,M=g(t.left)+d,I=t.right;else if("right"===o)y=g(this.left),M=t.left,I=g(t.right)-d,b=y+d,w=this.left+l;else if("x"===e){if("center"===o)y=g((t.top+t.bottom)/2+.5);else if(Wr(o)){const t=Object.keys(o)[0],e=o[t];y=g(this.chart.scales[t].getPixelForValue(e))}S=t.top,C=t.bottom,x=y+d,E=x+l}else if("y"===e){if("center"===o)y=g((t.left+t.right)/2);else if(Wr(o)){const t=Object.keys(o)[0],e=o[t];y=g(this.chart.scales[t].getPixelForValue(e))}b=y-d,w=b-l,M=t.left,I=t.right}const P=Xr(i.ticks.maxTicksLimit,u),N=Math.max(1,Math.ceil(u/P));for(m=0;m<u;m+=N){const t=this.getContext(m),e=r.setContext(t),i=s.setContext(t),o=e.lineWidth,u=e.color,l=i.dash||[],f=i.dashOffset,p=e.tickWidth,d=e.tickColor,g=e.tickBorderDash||[],y=e.tickBorderDashOffset;_=au(this,m,a),void 0!==_&&(v=xs(n,_,o),h?b=w=M=I=v:x=E=S=C=v,c.push({tx1:b,ty1:x,tx2:w,ty2:E,x1:M,y1:S,x2:I,y2:C,width:o,color:u,borderDash:l,borderDashOffset:f,tickWidth:p,tickColor:d,tickBorderDash:g,tickBorderDashOffset:y}))}return this._ticksLength=u,this._borderValue=y,c}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:h,padding:u,mirror:l}=r,c=hu(n.grid),f=c+u,p=l?-u:f,d=-No(this.labelRotation),g=[];let y,m,_,v,b,x,w,E,M,S,I,C,P="middle";if("top"===i)x=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===i)x=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(c);w=t.textAlign,b=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(c);w=t.textAlign,b=t.x}else if("x"===e){if("center"===i)x=(t.top+t.bottom)/2+f;else if(Wr(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)+f}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)b=(t.left+t.right)/2-f;else if(Wr(i)){const t=Object.keys(i)[0],e=i[t];b=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(c).textAlign}"y"===e&&("start"===a?P="top":"end"===a&&(P="bottom"));const N=this._getLabelSizes();for(y=0,m=s.length;y<m;++y){_=s[y],v=_.label;const t=r.setContext(this.getContext(y));E=this.getPixelForTick(y)+r.labelOffset,M=this._resolveTickFontOptions(y),S=M.lineHeight,I=Vr(v)?v.length:1;const e=I/2,n=t.color,a=t.textStrokeColor,u=t.textStrokeWidth;let c,f=w;if(o?(b=E,"inner"===w&&(f=y===m-1?this.options.reverse?"left":"right":0===y?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===h||0!==d?-I*S+S/2:"center"===h?-N.highest.height/2-e*S+S:-N.highest.height+S/2:"near"===h||0!==d?S/2:"center"===h?N.highest.height/2-e*S:N.highest.height-I*S,l&&(C*=-1),0===d||t.showLabelBackdrop||(b+=S/2*Math.sin(d))):(x=E,C=(1-I)*S/2),t.showLabelBackdrop){const e=qs(t.backdropPadding),n=N.heights[y],i=N.widths[y];let r=C-e.top,o=0-e.left;switch(P){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":o-=i/2;break;case"right":o-=i}c={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:v,font:M,textOffset:C,options:{rotation:d,color:n,strokeColor:a,strokeWidth:u,textAlign:f,textBaseline:P,translation:[b,x],backdrop:c}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-No(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,s=this._getLabelSizes().widest.width;let a,h;return"left"===e?i?(h=this.right+r,"near"===n?a="left":"center"===n?(a="center",h+=s/2):(a="right",h+=s)):(h=this.right-o,"near"===n?a="right":"center"===n?(a="center",h-=s/2):(a="left",h=this.left)):"right"===e?i?(h=this.left+r,"near"===n?a="right":"center"===n?(a="center",h-=s/2):(a="left",h-=s)):(h=this.left+o,"near"===n?a="left":"center"===n?(a="center",h+=s/2):(a="right",h=this.right)):a="right",{textAlign:a,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const s=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const s=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let h,u,l,c;this.isHorizontal()?(h=xs(t,this.left,o)-o/2,u=xs(t,this.right,s)+s/2,l=c=a):(l=xs(t,this.top,o)-o/2,c=xs(t,this.bottom,s)+s/2,h=u=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(h,l),e.lineTo(u,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Is(e,n);const i=this.getLabelItems(t);for(const t of i){const n=t.options,i=t.font;Ls(e,t.label,0,t.textOffset,i,n)}n&&Cs(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Us(n.font),o=qs(n.padding),s=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||Wr(e)?(a+=o.bottom,Vr(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:h,titleY:u,maxWidth:l,rotation:c}=function(t,e,n,i){const{top:r,left:o,bottom:s,right:a,chart:h}=t,{chartArea:u,scales:l}=h;let c,f,p,d=0;const g=s-r,y=a-o;if(t.isHorizontal()){if(f=Jo(i,o,a),Wr(n)){const t=Object.keys(n)[0],i=n[t];p=l[t].getPixelForValue(i)+g-e}else p="center"===n?(u.bottom+u.top)/2+g-e:ru(t,n,e);c=a-o}else{if(Wr(n)){const t=Object.keys(n)[0],i=n[t];f=l[t].getPixelForValue(i)-y+e}else f="center"===n?(u.left+u.right)/2-y+e:ru(t,n,e);p=Jo(i,s,r),d="left"===n?-_o:_o}return{titleX:f,titleY:p,maxWidth:c,rotation:d}}(this,a,e,s);Ls(t,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:lu(s,e,i),textBaseline:"middle",translation:[h,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Xr(t.grid&&t.grid.z,-1),i=Xr(t.border&&t.border.z,0);return this._isVisible()&&this.draw===cu.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return Us(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class fu{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=no(Object.create(null),[n?_s.get(n):{},_s.get(e),t.defaults]);_s.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),s=e[n].split("."),a=s.pop(),h=s.join(".");_s.route(o,r,h,a)}))}(e,t.defaultRoutes);t.descriptors&&_s.describe(e,t.descriptors)}(t,o,n),this.override&&_s.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in _s[i]&&(delete _s[i][n],this.override&&delete ps[n])}}class pu{constructor(){this.controllers=new fu(ih,"datasets",!0),this.elements=new fu(eu,"elements"),this.plugins=new fu(Object,"plugins"),this.scales=new fu(cu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):Kr(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=ao(t);Jr(n["before"+i],[],n),e[t](n),Jr(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var du=new pu;class gu{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===Jr(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Gr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Xr(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(du.plugins.items);for(let t=0;t<i.length;t++)n.push(du.getPlugin(i[t]));const r=t.plugins||[];for(let t=0;t<r.length;t++){const i=r[t];-1===n.indexOf(i)&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,r){const o=[],s=t.getContext();for(const a of e){const e=a.id,h=yu(i[e],r);null!==h&&o.push({plugin:a,options:mu(t.config,{plugin:a,local:n[e]},h,s)})}return o}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function yu(t,e){return e||!1!==t?!0===t?{}:t:null}function mu(t,{plugin:e,local:n},i,r){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(i,o);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _u(t,e){const n=_s.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vu(t,e){if("x"===t||"y"===t||"r"===t)return t;var n;if(t=e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.length>1&&vu(t[0].toLowerCase(),e))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function bu(t){const e=t.options||(t.options={});e.plugins=Xr(e.plugins,{}),e.scales=function(t,e){const n=ps[t.type]||{scales:{}},i=e.scales||{},r=_u(t.type,e),o=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!Wr(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const s=vu(t,e),a=function(t,e){return t===e?"_index_":"_value_"}(s,r),h=n.scales||{};o[t]=io(Object.create(null),[{axis:s},e,h[s],h[a]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,s=n.indexAxis||_u(r,e),a=(ps[r]||{}).scales||{};Object.keys(a).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,s),r=n[e+"AxisID"]||e;o[r]=o[r]||Object.create(null),io(o[r],[{axis:e},i[r],a[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];io(e,[_s.scales[e.type],_s.scale])})),o}(t,e)}function xu(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const wu=new Map,Eu=new Set;function Mu(t,e){let n=wu.get(t);return n||(n=e(),wu.set(t,n),Eu.add(n)),n}const Su=(t,e,n)=>{const i=so(e,n);void 0!==i&&t.add(i)};class Iu{constructor(t){this._config=function(t){return(t=t||{}).data=xu(t.data),bu(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=xu(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bu(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Mu(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Mu(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Mu(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Mu(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),s=o.get(e);if(s)return s;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>Su(a,t,e)))),e.forEach((t=>Su(a,i,t))),e.forEach((t=>Su(a,ps[r]||{},t))),e.forEach((t=>Su(a,_s,t))),e.forEach((t=>Su(a,ds,t)))}));const h=Array.from(a);return 0===h.length&&h.push(Object.create(null)),Eu.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,ps[e]||{},_s.datasets[e]||{},{type:e},_s,ds]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:s}=Cu(this._resolverCache,t,i);let a=o;if(function(t,e){const{isScriptable:n,isIndexable:i}=Xs(t);for(const r of e){const e=n(r),o=i(r),s=(o||e)&&t[r];if(e&&(uo(s)||Pu(s))||o&&Vr(s))return!0}return!1}(o,e)){r.$shared=!1;a=Ys(o,n=uo(n)?n():n,this.createResolver(t,n,s))}for(const t of e)r[t]=a[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Cu(this._resolverCache,t,n);return Wr(e)?Ys(r,e,void 0,i):r}}function Cu(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:Hs(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)}return o}const Pu=t=>Wr(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||uo(t[n])),!1);const Nu=["top","bottom","left","right","chartArea"];function Lu(t,e){return"top"===t||"bottom"===t||-1===Nu.indexOf(t)&&"x"===e}function Ou(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function ku(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Jr(n&&n.onComplete,[t],e)}function Au(t){const e=t.chart,n=e.options.animation;Jr(n&&n.onProgress,[t],e)}function Ru(t){return pa()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Tu={},Du=t=>{const e=Ru(t);return Object.values(Tu).filter((t=>t.canvas===e)).pop()};function Fu(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}class Bu{static defaults=_s;static instances=Tu;static overrides=ps;static registry=du;static version="4.2.1";static getChart=Du;static register(...t){du.add(...t),zu()}static unregister(...t){du.remove(...t),zu()}constructor(t,e){const n=this.config=new Iu(e),i=Ru(t),r=Du(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!pa()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?zh:tu}(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,o.aspectRatio),a=s&&s.canvas,h=a&&a.height,u=a&&a.width;this.id=Ur(),this.ctx=s,this.canvas=a,this.width=u,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Xo((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],Tu[this.id]=this,s&&a?(qa.listen(this,"complete",ku),qa.listen(this,"progress",Au),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Gr(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return du}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ea(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ws(this.canvas,this.ctx),this}stop(){return qa.stop(this),this}resize(t,e){qa.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ea(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),Jr(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Kr(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=vu(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),Kr(r,(e=>{const r=e.options,o=r.id,s=vu(o,r),a=Xr(r.type,e.dtype);void 0!==r.position&&Lu(r.position,s)===Lu(e.dposition)||(r.position=e.dposition),i[o]=!0;let h=null;if(o in n&&n[o].type===a)h=n[o];else{h=new(du.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(r,t)})),Kr(i,((t,e)=>{t||delete n[e]})),Kr(n,(t=>{Fh.configure(this,t,t.options),Fh.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ou("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||_u(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=du.getController(o),{datasetElementType:i,dataElementType:s}=_s.datasets[o];Object.assign(e,{dataElementType:du.getElement(s),datasetElementType:i&&du.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Kr(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||Kr(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ou("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Kr(this.scales,(t=>{Fh.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);lo(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){Fu(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!lo(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Fh.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Kr(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,uo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(qa.has(this)?this.attached&&!qa.running(this)&&qa.start(this):(this.draw(),ku({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=function(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Is(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Cs(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Ss(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Mh.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);ho(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),qa.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ws(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Tu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Kr(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{i("attach",s),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){Kr(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},Kr(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,s,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!$r(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),s=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,s=this._getActiveElements(t,i,n,o),a=co(t),h=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Jr(r.onHover,[t,s,this],this),a&&Jr(r.onClick,[t,s,this],this));const u=!$r(s,i);return(u||e)&&(this._active=s,this._updateHoverStyles(s,i,e)),this._lastEvent=h,u}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function zu(){return Kr(Bu.instances,(t=>t._plugins.invalidate()))}function ju(t,e,n,i){const r=Bs(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,s=Math.min(o,i*e/2),a=t=>{const e=(n-Math.min(o,t))*i/2;return Fo(t,0,Math.min(o,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Fo(r.innerStart,0,s),innerEnd:Fo(r.innerEnd,0,s)}}function qu(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Uu(t,e,n,i,r,o){const{x:s,y:a,startAngle:h,pixelMargin:u,innerRadius:l}=e,c=Math.max(e.outerRadius+i+n-u,0),f=l>0?l+i+n+u:0;let p=0;const d=r-h;if(i){const t=((l>0?l-i:0)+(c>0?c-i:0))/2;p=(d-(0!==t?d*t/(t+i):d))/2}const g=(d-Math.max(.001,d*c-n/fo)/c)/2,y=h+g+p,m=r-g-p,{outerStart:_,outerEnd:v,innerStart:b,innerEnd:x}=ju(e,f,c,m-y),w=c-_,E=c-v,M=y+_/w,S=m-v/E,I=f+b,C=f+x,P=y+b/I,N=m-x/C;if(t.beginPath(),o){const e=(M+S)/2;if(t.arc(s,a,c,M,e),t.arc(s,a,c,e,S),v>0){const e=qu(E,S,s,a);t.arc(e.x,e.y,v,S,m+_o)}const n=qu(C,m,s,a);if(t.lineTo(n.x,n.y),x>0){const e=qu(C,N,s,a);t.arc(e.x,e.y,x,m+_o,N+Math.PI)}const i=(m-x/f+(y+b/f))/2;if(t.arc(s,a,f,m-x/f,i,!0),t.arc(s,a,f,i,y+b/f,!0),b>0){const e=qu(I,P,s,a);t.arc(e.x,e.y,b,P+Math.PI,y-_o)}const r=qu(w,y,s,a);if(t.lineTo(r.x,r.y),_>0){const e=qu(w,M,s,a);t.arc(e.x,e.y,_,y-_o,M)}}else{t.moveTo(s,a);const e=Math.cos(M)*c+s,n=Math.sin(M)*c+a;t.lineTo(e,n);const i=Math.cos(S)*c+s,r=Math.sin(S)*c+a;t.lineTo(i,r)}t.closePath()}function Gu(t,e,n,i,r){const{fullCircles:o,startAngle:s,circumference:a,options:h}=e,{borderWidth:u,borderJoinStyle:l}=h,c="inner"===h.borderAlign;if(!u)return;c?(t.lineWidth=2*u,t.lineJoin=l||"round"):(t.lineWidth=u,t.lineJoin=l||"bevel");let f=e.endAngle;if(o){Uu(t,e,n,i,f,r);for(let e=0;e<o;++e)t.stroke();isNaN(a)||(f=s+(a%po||po))}c&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:h}=e;let u=r/a;t.beginPath(),t.arc(o,s,a,i-u,n+u),h>r?(u=r/h,t.arc(o,s,h,n+u,i-u,!0)):t.arc(o,s,r,n+_o,i-_o),t.closePath(),t.clip()}(t,e,f),o||(Uu(t,e,n,i,f,r),t.stroke())}function Vu(t,e,n=e){t.lineCap=Xr(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Xr(n.borderDash,e.borderDash)),t.lineDashOffset=Xr(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Xr(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Xr(n.borderWidth,e.borderWidth),t.strokeStyle=Xr(n.borderColor,e.borderColor)}function Wu(t,e,n){t.lineTo(n.x,n.y)}function Hu(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:s,end:a}=e,h=Math.max(r,s),u=Math.min(o,a),l=r<s&&o<s||r>a&&o>a;return{count:i,start:h,loop:e.loop,ilen:u<h&&!l?i+u-h:u-h}}function Yu(t,e,n,i){const{points:r,options:o}=e,{count:s,start:a,loop:h,ilen:u}=Hu(r,n,i),l=function(t){return t.stepped?Ps:t.tension||"monotone"===t.cubicInterpolationMode?Ns:Wu}(o);let c,f,p,{move:d=!0,reverse:g}=i||{};for(c=0;c<=u;++c)f=r[(a+(g?u-c:c))%s],f.skip||(d?(t.moveTo(f.x,f.y),d=!1):l(t,p,f,g,o.stepped),p=f);return h&&(f=r[(a+(g?u:0))%s],l(t,p,f,g,o.stepped)),!!h}function Xu(t,e,n,i){const r=e.points,{count:o,start:s,ilen:a}=Hu(r,n,i),{move:h=!0,reverse:u}=i||{};let l,c,f,p,d,g,y=0,m=0;const _=t=>(s+(u?a-t:t))%o,v=()=>{p!==d&&(t.lineTo(y,d),t.lineTo(y,p),t.lineTo(y,g))};for(h&&(c=r[_(0)],t.moveTo(c.x,c.y)),l=0;l<=a;++l){if(c=r[_(l)],c.skip)continue;const e=c.x,n=c.y,i=0|e;i===f?(n<p?p=n:n>d&&(d=n),y=(m*y+e)/++m):(v(),t.lineTo(e,n),f=i,m=0,p=d=n),g=n}v()}function Zu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Xu:Yu}const Ju="function"==typeof Path2D;function Ku(t,e,n,i){Ju&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Vu(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,s=Zu(e);for(const a of r)Vu(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class $u extends eu{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;fa(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Da(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=Ta(this,{property:e,start:i,end:i});if(!o.length)return;const s=[],a=function(t){return t.stepped?Ca:t.tension||"monotone"===t.cubicInterpolationMode?Pa:Ia}(n);let h,u;for(h=0,u=o.length;h<u;++h){const{start:u,end:l}=o[h],c=r[u],f=r[l];if(c===f){s.push(c);continue}const p=a(c,f,Math.abs((i-c[e])/(f[e]-c[e])),n.stepped);p[e]=t[e],s.push(p)}return 1===s.length?s[0]:s}pathSegment(t,e,n){return Zu(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=Zu(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const s of i)o&=r(t,this,s,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Ku(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Qu(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}function tl(t,e){const{x:n,y:i,base:r,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,h,u,l,c;return t.horizontal?(c=s/2,a=Math.min(n,r),h=Math.max(n,r),u=i-c,l=i+c):(c=o/2,a=n-c,h=n+c,u=Math.min(i,r),l=Math.max(i,r)),{left:a,top:u,right:h,bottom:l}}function el(t,e,n,i){return t?0:Fo(e,n,i)}function nl(t){const e=tl(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=zs(i);return{t:el(r.top,o.top,0,n),r:el(r.right,o.right,0,e),b:el(r.bottom,o.bottom,0,n),l:el(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=js(r),s=Math.min(e,n),a=t.borderSkipped,h=i||Wr(r);return{topLeft:el(!h||a.top||a.left,o.topLeft,0,s),topRight:el(!h||a.top||a.right,o.topRight,0,s),bottomLeft:el(!h||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:el(!h||a.bottom||a.right,o.bottomRight,0,s)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function il(t,e,n,i){const r=null===e,o=null===n,s=t&&!(r&&o)&&tl(t,i);return s&&(r||Bo(e,s.left,s.right))&&(o||Bo(n,s.top,s.bottom))}function rl(t,e){t.rect(e.x,e.y,e.w,e.h)}function ol(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+s,radius:t.radius}}var sl=Object.freeze({__proto__:null,ArcElement:class extends eu{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=ko(i,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:h,outerRadius:u,circumference:l}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),c=this.options.spacing/2,f=Xr(l,a-s)>=po||Do(r,s,a),p=Bo(o,h+c,u+c);return f&&p}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:h}=this.options,u=(i+r)/2,l=(o+s+h+a)/2;return{x:e+Math.cos(u)*l,y:n+Math.sin(u)*l}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>po?Math.floor(n/po):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*i,Math.sin(s)*i);const a=i*(1-Math.sin(Math.min(fo,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:o,startAngle:s,circumference:a}=e;let h=e.endAngle;if(o){Uu(t,e,n,i,h,r);for(let e=0;e<o;++e)t.fill();isNaN(a)||(h=s+(a%po||po))}Uu(t,e,n,i,h,r),t.fill()}(t,this,a,r,o),Gu(t,this,a,r,o),t.restore()}},LineElement:$u,PointElement:class extends eu{static id="point";static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Qu(this,t,"x",e)}inYRange(t,e){return Qu(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Ss(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Es(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}},BarElement:class extends eu{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=nl(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?As:rl;var a;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),s(t,ol(o,e,r)),t.clip(),s(t,ol(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),s(t,ol(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return il(this,t,e,n)}inXRange(t,e){return il(this,t,null,e)}inYRange(t,e){return il(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}});const al=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],hl=al.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function ul(t){return al[t%al.length]}function ll(t){return hl[t%hl.length]}function cl(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof fh?e=function(t,e){return t.backgroundColor=t.data.map((()=>ul(e++))),e}(n,e):r instanceof ph?e=function(t,e){return t.backgroundColor=t.data.map((()=>ll(e++))),e}(n,e):r&&(e=function(t,e){return t.borderColor=ul(e),t.backgroundColor=ll(e),++e}(n,e))}}function fl(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var pl={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:o}=r;if(!n.forceOverride&&(fl(i)||(s=r)&&(s.borderColor||s.backgroundColor)||o&&fl(o)))return;var s;const a=cl(t);i.forEach(a)}};function dl(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function gl(t){t.data.datasets.forEach((t=>{dl(t)}))}var yl={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void gl(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:s}=e,a=t.getDatasetMeta(r),h=o||e.data;if("y"===Gs([s,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const u=t.scales[a.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let{start:l,count:c}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:s,max:a,minDefined:h,maxDefined:u}=o.getUserBounds();return h&&(r=Fo(jo(e,o.axis,s).lo,0,n-1)),i=u?Fo(jo(e,o.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,h);if(c<=(n.threshold||4*i))return void dl(e);let f;switch(Gr(o)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":f=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const s=[],a=(n-2)/(o-2);let h=0;const u=e+n-1;let l,c,f,p,d,g=e;for(s[h++]=t[g],l=0;l<o-2;l++){let i,r=0,o=0;const u=Math.floor((l+1)*a)+1+e,y=Math.min(Math.floor((l+2)*a)+1,n)+e,m=y-u;for(i=u;i<y;i++)r+=t[i].x,o+=t[i].y;r/=m,o/=m;const _=Math.floor(l*a)+1+e,v=Math.min(Math.floor((l+1)*a)+1,n)+e,{x:b,y:x}=t[g];for(f=p=-1,i=_;i<v;i++)p=.5*Math.abs((b-r)*(t[i].y-x)-(b-t[i].x)*(o-x)),p>f&&(f=p,c=t[i],d=i);s[h++]=c,g=d}return s[h++]=t[u],s}(h,l,c,i,n);break;case"min-max":f=function(t,e,n,i){let r,o,s,a,h,u,l,c,f,p,d=0,g=0;const y=[],m=e+n-1,_=t[e].x,v=t[m].x-_;for(r=e;r<e+n;++r){o=t[r],s=(o.x-_)/v*i,a=o.y;const e=0|s;if(e===h)a<f?(f=a,u=r):a>p&&(p=a,l=r),d=(g*d+o.x)/++g;else{const n=r-1;if(!Gr(u)&&!Gr(l)){const e=Math.min(u,l),i=Math.max(u,l);e!==c&&e!==n&&y.push({...t[e],x:d}),i!==c&&i!==n&&y.push({...t[i],x:d})}r>0&&n!==c&&y.push(t[n]),y.push(o),h=e,g=0,f=p=a,u=l=c=r}}return y}(h,l,c,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=f}))},destroy(t){gl(t)}};function ml(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=To(r),o=To(o)),{property:t,start:r,end:o}}function _l(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function vl(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function bl(t,e){let n=[],i=!1;return Vr(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=_l(t,e,r);const s=r[t],a=r[e];null!==i?(o.push({x:s.x,y:i}),o.push({x:a.x,y:i})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:a.y}))})),o}(t,e),n.length?new $u({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function xl(t){return t&&!1!==t.fill}function wl(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Hr(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function El(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=Xr(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);return!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(Wr(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Hr(r)&&Math.floor(r)===r?function(t,e,n,i){"-"!==t&&"+"!==t||(n=e+n);return!(n===e||n<0||n>=i)&&n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Ml(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:s,last:a,point:h}=Sl(o,e,"x");if(!(!h||s&&a))if(s)i.unshift(h);else if(t.push(h),!a)break}t.push(...i)}function Sl(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,s=t.points;let a=!1,h=!1;for(let t=0;t<o.length;t++){const e=o[t],i=s[e.start][n],u=s[e.end][n];if(Bo(r,i,u)){a=r===i,h=r===u;break}}return{first:a,last:h,point:i}}class Il{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:po},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Cl(t){const{chart:e,fill:n,line:i}=t;if(Hr(n))return function(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,s=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);a.push(bl({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Ml(r,s[t],a)}return new $u({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){const e=t.scale||{};return e.getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=i.reverse?e.max:e.min,s=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Wr(t)?t.value:e.getBaseValue(),i}(n,e,o),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,o);return new Il({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let t=0;t<r;++t)a.push(e.getPointPositionForValue(t,s));return a}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Wr(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Hr(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return r instanceof Il?r:bl(r,i)}function Pl(t,e,n){const i=Cl(e),{line:r,scale:o,axis:s}=e,a=r.options,h=a.fill,u=a.backgroundColor,{above:l=u,below:c=u}=h||{};i&&r.points.length&&(Is(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:s,scale:a}=e,h=n._loop?"angle":e.axis;t.save(),"x"===h&&o!==r&&(Nl(t,i,s.top),Ll(t,{line:n,target:i,color:r,scale:a,property:h}),t.restore(),t.save(),Nl(t,i,s.bottom));Ll(t,{line:n,target:i,color:o,scale:a,property:h}),t.restore()}(t,{line:r,target:i,above:l,below:c,area:n,scale:o,axis:s}),Cs(t))}function Nl(t,e,n){const{segments:i,points:r}=e;let o=!0,s=!1;t.beginPath();for(const a of i){const{start:i,end:h}=a,u=r[i],l=r[_l(i,h,r)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(l.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Ll(t,e){const{line:n,target:i,property:r,color:o,scale:s}=e,a=function(t,e,n){const i=t.segments,r=t.points,o=e.points,s=[];for(const t of i){let{start:i,end:a}=t;a=_l(i,a,r);const h=ml(n,r[i],r[a],t.loop);if(!e.segments){s.push({source:t,target:h,start:r[i],end:r[a]});continue}const u=Ta(e,h);for(const e of u){const i=ml(n,o[e.start],o[e.end],e.loop),a=Ra(t,r,i);for(const t of a)s.push({source:t,target:e,start:{[n]:vl(h,i,"start",Math.max)},end:{[n]:vl(h,i,"end",Math.min)}})}}return s}(n,i,r);for(const{source:e,target:h,start:u,end:l}of a){const{style:{backgroundColor:a=o}={}}=e,c=!0!==i;t.save(),t.fillStyle=a,Ol(t,s,c&&ml(r,u,l)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(c){f?t.closePath():kl(t,i,l,r);const e=!!i.pathSegment(t,h,{move:f,reverse:!0});p=f&&e,p||kl(t,i,u,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Ol(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(t.beginPath(),t.rect(s,i,a-s,r-i),t.clip())}function kl(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var Al={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,s,a,h;for(s=0;s<i;++s)o=t.getDatasetMeta(s),a=o.dataset,h=null,a&&a.options&&a instanceof $u&&(h={visible:t.isDatasetVisible(s),index:s,fill:El(a,s,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=h,r.push(h);for(s=0;s<i;++s)h=r[s],h&&!1!==h.fill&&(h.fill=wl(r,s,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&n.fill&&Pl(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;xl(n)&&Pl(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;xl(i)&&"beforeDatasetDraw"===n.drawTime&&Pl(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Rl=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Tl extends eu{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Jr(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Us(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=Rl(n,r);let h,u;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(o,r,s,a)+10):(u=this.maxHeight,h=this._fitCols(o,i,s,a)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],h=this.lineWidths=[0],u=i+s;let l=t;r.textAlign="left",r.textBaseline="middle";let c=-1,f=-u;return this.legendItems.forEach(((t,p)=>{const d=n+e/2+r.measureText(t.text).width;(0===p||h[h.length-1]+d+2*s>o)&&(l+=u,h[h.length-(p>0?0:1)]=0,f+=u,c++),a[p]={left:0,top:f,row:c,width:d,height:i},h[h.length-1]+=d+s})),l}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],h=this.columnSizes=[],u=o-t;let l=s,c=0,f=0,p=0,d=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:y}=function(t,e,n,i,r){const o=function(t,e,n,i){let r=t.text;r&&"string"!=typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+i.measureText(r).width}(i,t,e,n),s=function(t,e,n){let i=t;"string"!=typeof e.text&&(i=Dl(e,n));return i}(r,i,e.lineHeight);return{itemWidth:o,itemHeight:s}}(n,e,r,t,i);o>0&&f+y+2*s>u&&(l+=c+s,h.push({width:c,height:f}),p+=c+s,d++,c=f=0),a[o]={left:p,top:f,col:d,width:g,height:y},c=Math.max(c,g),f+=y+s})),l+=c,h.push({width:c,height:f}),l}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=Na(r,this.left,this.width);if(this.isHorizontal()){let r=0,s=Jo(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,s=Jo(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+i}else{let r=0,s=Jo(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,s=Jo(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=s,a.left+=this.left+i,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Is(t,this),this._draw(),Cs(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,s=_s.color,a=Na(t.rtl,this.left,this.width),h=Us(o.font),{padding:u}=o,l=h.size,c=l/2;let f;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:p,boxHeight:d,itemHeight:g}=Rl(o,l),y=this.isHorizontal(),m=this._computeTitleHeight();f=y?{x:Jo(r,this.left+u,this.right-n[0]),y:this.top+u+m,line:0}:{x:this.left+u,y:Jo(r,this.top+m+u,this.bottom-e[0].height),line:0},La(this.ctx,t.textDirection);const _=g+u;this.legendItems.forEach(((v,b)=>{i.strokeStyle=v.fontColor,i.fillStyle=v.fontColor;const x=i.measureText(v.text).width,w=a.textAlign(v.textAlign||(v.textAlign=o.textAlign)),E=p+c+x;let M=f.x,S=f.y;a.setWidth(this.width),y?b>0&&M+E+u>this.right&&(S=f.y+=_,f.line++,M=f.x=Jo(r,this.left+u,this.right-n[f.line])):b>0&&S+_>this.bottom&&(M=f.x=M+e[f.line].width+u,f.line++,S=f.y=Jo(r,this.top+m+u,this.bottom-e[f.line].height));if(function(t,e,n){if(isNaN(p)||p<=0||isNaN(d)||d<0)return;i.save();const r=Xr(n.lineWidth,1);if(i.fillStyle=Xr(n.fillStyle,s),i.lineCap=Xr(n.lineCap,"butt"),i.lineDashOffset=Xr(n.lineDashOffset,0),i.lineJoin=Xr(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Xr(n.strokeStyle,s),i.setLineDash(Xr(n.lineDash,[])),o.usePointStyle){const s={radius:d*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},h=a.xPlus(t,p/2);Ms(i,s,h,e+c,o.pointStyleWidth&&p)}else{const o=e+Math.max((l-d)/2,0),s=a.leftForLtr(t,p),h=js(n.borderRadius);i.beginPath(),Object.values(h).some((t=>0!==t))?As(i,{x:s,y:o,w:p,h:d,radius:h}):i.rect(s,o,p,d),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(M),S,v),M=Ko(w,M+p+c,y?M+E:this.right,t.rtl),function(t,e,n){Ls(i,n.text,t,e+g/2,h,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(M),S,v),y)f.x+=E+u;else if("string"!=typeof v.text){const t=h.lineHeight;f.y+=Dl(v,t)}else f.y+=_})),Oa(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Us(e.font),i=qs(e.padding);if(!e.display)return;const r=Na(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=n.size/2,h=i.top+a;let u,l=this.left,c=this.width;if(this.isHorizontal())c=Math.max(...this.lineWidths),u=this.top+h,l=Jo(t.align,l,this.right-c);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);u=h+Jo(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const f=Jo(s,l,l+c);o.textAlign=r.textAlign(Zo(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Ls(o,e.text,f,u,n)}_computeTitleHeight(){const t=this.options.title,e=Us(t.font),n=qs(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Bo(t,this.left,this.right)&&Bo(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Bo(t,i.left,i.left+i.width)&&Bo(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&Jr(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Jr(e.onHover,[t,n,this],this)}else n&&Jr(e.onClick,[t,n,this],this)}}function Dl(t,e){return e*(t.text?t.text.length+.5:0)}var Fl={id:"legend",_element:Tl,start(t,e,n){const i=t.legend=new Tl({ctx:t.ctx,options:n,chart:t});Fh.configure(t,i,n),Fh.addBox(t,i)},stop(t){Fh.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Fh.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const h=t.controller.getStyle(n?0:void 0),u=qs(h.borderWidth);return{text:e[t.index].label,fillStyle:h.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:s&&(a||h.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Bl extends eu{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Vr(n.text)?n.text.length:1;this._padding=qs(n.padding);const r=i*Us(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,s=o.align;let a,h,u,l=0;return this.isHorizontal()?(h=Jo(s,n,r),u=e+t,a=r-n):("left"===o.position?(h=n+t,u=Jo(s,i,e),l=-.5*fo):(h=r-t,u=Jo(s,e,i),l=.5*fo),a=i-e),{titleX:h,titleY:u,maxWidth:a,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Us(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(i);Ls(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:a,textAlign:Zo(e.align),textBaseline:"middle",translation:[r,o]})}}var zl={id:"title",_element:Bl,start(t,e,n){!function(t,e){const n=new Bl({ctx:t.ctx,options:e,chart:t});Fh.configure(t,n,e),Fh.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Fh.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Fh.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jl=new WeakMap;var ql={id:"subtitle",start(t,e,n){const i=new Bl({ctx:t.ctx,options:n,chart:t});Fh.configure(t,i,n),Fh.addBox(t,i),jl.set(t,i)},stop(t){Fh.removeBox(t,jl.get(t)),jl.delete(t)},beforeUpdate(t,e,n){const i=jl.get(t);Fh.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ul={average(t){if(!t.length)return!1;let e,n,i=0,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++o}}return{x:i/o,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Ao(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function Gl(t,e){return e&&(Vr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Vl(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Wl(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:t,label:s,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Hl(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:s,boxHeight:a}=e,h=Us(e.bodyFont),u=Us(e.titleFont),l=Us(e.footerFont),c=o.length,f=r.length,p=i.length,d=qs(e.padding);let g=d.height,y=0,m=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(m+=t.beforeBody.length+t.afterBody.length,c&&(g+=c*u.lineHeight+(c-1)*e.titleSpacing+e.titleMarginBottom),m){g+=p*(e.displayColors?Math.max(a,h.lineHeight):h.lineHeight)+(m-p)*h.lineHeight+(m-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*l.lineHeight+(f-1)*e.footerSpacing);let _=0;const v=function(t){y=Math.max(y,n.measureText(t).width+_)};return n.save(),n.font=u.string,Kr(t.title,v),n.font=h.string,Kr(t.beforeBody.concat(t.afterBody),v),_=e.displayColors?s+2+e.boxPadding:0,Kr(i,(t=>{Kr(t.before,v),Kr(t.lines,v),Kr(t.after,v)})),_=0,n.font=l.string,Kr(t.footer,v),n.restore(),y+=d.width,{width:y,height:g}}function Yl(t,e,n,i){const{x:r,width:o}=n,{width:s,chartArea:{left:a,right:h}}=t;let u="center";return"center"===i?u=r<=(a+h)/2?"left":"right":r<=o/2?u="left":r>=s-o/2&&(u="right"),function(t,e,n,i){const{x:r,width:o}=i,s=n.caretSize+n.caretPadding;return"left"===t&&r+o+s>e.width||"right"===t&&r-o-s<0||void 0}(u,t,e,n)&&(u="center"),u}function Xl(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Yl(t,e,n,i),yAlign:i}}function Zl(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:h}=n,u=r+o,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=js(s);let d=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,h,u);return"center"===h?"left"===a?d+=u:"right"===a&&(d-=u):"left"===a?d-=Math.max(l,f)+r:"right"===a&&(d+=Math.max(c,p)+r),{x:Fo(d,0,i.width-e.width),y:Fo(g,0,i.height-e.height)}}function Jl(t,e,n){const i=qs(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Kl(t){return Gl([],Vl(t))}function $l(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ql={beforeTitle:qr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:qr,beforeBody:qr,beforeLabel:qr,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Gr(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:qr,afterBody:qr,beforeFooter:qr,footer:qr,afterFooter:qr};function tc(t,e,n,i){const r=t[e].call(n,i);return void 0===r?Ql[e].call(n,i):r}class ec extends eu{static positioners=Ul;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Wa(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Ws(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=tc(n,"beforeTitle",this,t),r=tc(n,"title",this,t),o=tc(n,"afterTitle",this,t);let s=[];return s=Gl(s,Vl(i)),s=Gl(s,Vl(r)),s=Gl(s,Vl(o)),s}getBeforeBody(t,e){return Kl(tc(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return Kr(t,(t=>{const e={before:[],lines:[],after:[]},r=$l(n,t);Gl(e.before,Vl(tc(r,"beforeLabel",this,t))),Gl(e.lines,tc(r,"label",this,t)),Gl(e.after,Vl(tc(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return Kl(tc(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=tc(n,"beforeFooter",this,t),r=tc(n,"footer",this,t),o=tc(n,"afterFooter",this,t);let s=[];return s=Gl(s,Vl(i)),s=Gl(s,Vl(r)),s=Gl(s,Vl(o)),s}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let s,a,h=[];for(s=0,a=e.length;s<a;++s)h.push(Wl(this.chart,e[s]));return t.filter&&(h=h.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(h=h.sort(((e,i)=>t.itemSort(e,i,n)))),Kr(h,(e=>{const n=$l(t.callbacks,e);i.push(tc(n,"labelColor",this,e)),r.push(tc(n,"labelPointStyle",this,e)),o.push(tc(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=h,h}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=Ul[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=Hl(this,n),s=Object.assign({},t,e),a=Xl(this.chart,n,s),h=Zl(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:h.x,y:h.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:h,bottomLeft:u,bottomRight:l}=js(s),{x:c,y:f}=t,{width:p,height:d}=e;let g,y,m,_,v,b;return"center"===r?(v=f+d/2,"left"===i?(g=c,y=g-o,_=v+o,b=v-o):(g=c+p,y=g+o,_=v-o,b=v+o),m=g):(y="left"===i?c+Math.max(a,u)+o:"right"===i?c+p-Math.max(h,l)-o:this.caretX,"top"===r?(_=f,v=_-o,g=y-o,m=y+o):(_=f+d,v=_+o,g=y+o,m=y-o),b=_),{x1:g,x2:y,x3:m,y1:_,y2:v,y3:b}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,s,a;if(r){const h=Na(n.rtl,this.x,this.width);for(t.x=Jl(this,n.titleAlign,n),e.textAlign=h.textAlign(n.titleAlign),e.textBaseline="middle",o=Us(n.titleFont),s=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===r&&(t.y+=n.titleMarginBottom-s)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:h,boxPadding:u}=r,l=Us(r.bodyFont),c=Jl(this,"left",r),f=i.x(c),p=a<l.lineHeight?(l.lineHeight-a)/2:0,d=e.y+p;if(r.usePointStyle){const e={radius:Math.min(h,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(f,h)+h/2,u=d+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Es(t,e,n,u),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Es(t,e,n,u)}else{t.lineWidth=Wr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(f,h-u),n=i.leftForLtr(i.xPlus(f,1),h-u-2),s=js(o.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,As(t,{x:e,y:d,w:h,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),As(t,{x:n,y:d+1,w:h-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,d,h,a),t.strokeRect(e,d,h,a),t.fillStyle=o.backgroundColor,t.fillRect(n,d+1,h-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:h,boxPadding:u}=n,l=Us(n.bodyFont);let c=l.lineHeight,f=0;const p=Na(n.rtl,this.x,this.width),d=function(n){e.fillText(n,p.x(t.x+f),t.y+c/2),t.y+=c+r},g=p.textAlign(o);let y,m,_,v,b,x,w;for(e.textAlign=o,e.textBaseline="middle",e.font=l.string,t.x=Jl(this,g,n),e.fillStyle=n.bodyColor,Kr(this.beforeBody,d),f=s&&"right"!==g?"center"===o?h/2+u:h+2+u:0,v=0,x=i.length;v<x;++v){for(y=i[v],m=this.labelTextColors[v],e.fillStyle=m,Kr(y.before,d),_=y.lines,s&&_.length&&(this._drawColorBox(e,t,v,p,n),c=Math.max(l.lineHeight,a)),b=0,w=_.length;b<w;++b)d(_[b]),c=l.lineHeight;Kr(y.after,d)}f=0,c=l.lineHeight,Kr(this.afterBody,d),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,s;if(r){const a=Na(n.rtl,this.x,this.width);for(t.x=Jl(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",o=Us(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:s,y:a}=t,{width:h,height:u}=n,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=js(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(s+l,a),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(s+h-c,a),e.quadraticCurveTo(s+h,a,s+h,a+c),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(s+h,a+u-p),e.quadraticCurveTo(s+h,a+u,s+h-p,a+u),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(s+f,a+u),e.quadraticCurveTo(s,a+u,s,a+u-f),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(s,a+l),e.quadraticCurveTo(s,a,s+l,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Ul[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Hl(this,t),s=Object.assign({},n,this._size),a=Xl(e,t,s),h=Zl(t,s,a,e);i._to===h.x&&r._to===h.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=qs(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),La(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Oa(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!$r(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),s=this._positionChanged(o,t),a=e||!$r(o,r)||s;return a&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=Ul[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}var nc={id:"tooltip",_element:ec,positioners:Ul,afterInit(t,e,n){n&&(t.tooltip=new ec({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ql},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ic=Object.freeze({__proto__:null,Colors:pl,Decimation:yl,Filler:Al,Legend:Fl,SubTitle:ql,Title:zl,Tooltip:nc});function rc(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function oc(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function sc(t,e){const n=[],{bounds:i,step:r,min:o,max:s,precision:a,count:h,maxTicks:u,maxDigits:l,includeBounds:c}=t,f=r||1,p=u-1,{min:d,max:g}=e,y=!Gr(o),m=!Gr(s),_=!Gr(h),v=(g-d)/(l+1);let b,x,w,E,M=Mo((g-d)/p/f)*f;if(M<1e-14&&!y&&!m)return[{value:d},{value:g}];E=Math.ceil(g/M)-Math.floor(d/M),E>p&&(M=Mo(E*M/p/f)*f),Gr(a)||(b=Math.pow(10,a),M=Math.ceil(M*b)/b),"ticks"===i?(x=Math.floor(d/M)*M,w=Math.ceil(g/M)*M):(x=d,w=g),y&&m&&r&&Co((s-o)/r,M/1e3)?(E=Math.round(Math.min((s-o)/M,u)),M=(s-o)/E,x=o,w=s):_?(x=y?o:x,w=m?s:w,E=h-1,M=(w-x)/E):(E=(w-x)/M,E=Eo(E,Math.round(E),M/1e3)?Math.round(E):Math.ceil(E));const S=Math.max(Oo(M),Oo(x));b=Math.pow(10,Gr(a)?S:a),x=Math.round(x*b)/b,w=Math.round(w*b)/b;let I=0;for(y&&(c&&x!==o?(n.push({value:o}),x<o&&I++,Eo(Math.round((x+I*M)*b)/b,o,ac(o,v,t))&&I++):x<o&&I++);I<E;++I)n.push({value:Math.round((x+I*M)*b)/b});return m&&c&&w!==s?n.length&&Eo(n[n.length-1].value,s,ac(s,v,t))?n[n.length-1].value=s:n.push({value:s}):m&&w!==s||n.push({value:w}),n}function ac(t,e,{horizontal:n,minRotation:i}){const r=No(i),o=(n?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}class hc extends cu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Gr(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,s=t=>r=n?r:t;if(t){const t=wo(i),e=wo(r);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);s(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=sc({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Po(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return ls(t,this.chart.options.locale,this.options.ticks.format)}}class uc extends hc{static id="linear";static defaults={ticks:{callback:fs.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Hr(t)?t:0,this.max=Hr(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=No(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const lc=t=>Math.floor(xo(t)),cc=(t,e)=>Math.pow(10,lc(t)+e);function fc(t){return 1===t/Math.pow(10,lc(t))}function pc(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function dc(t,{min:e,max:n}){e=Yr(t.min,e);const i=[],r=lc(e);let o=function(t,e){let n=lc(e-t);for(;pc(t,e,n)>10;)n++;for(;pc(t,e,n)<10;)n--;return Math.min(n,lc(t))}(e,n),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),h=r>o?Math.pow(10,r):0,u=Math.round((e-h)*s)/s,l=Math.floor((e-h)/a/10)*a*10;let c=Math.floor((u-l)/Math.pow(10,o)),f=Yr(t.min,Math.round((h+l+c*Math.pow(10,o))*s)/s);for(;f<n;)i.push({value:f,major:fc(f),significand:c}),c>=10?c=c<15?15:20:c++,c>=20&&(o++,c=2,s=o>=0?1:s),f=Math.round((h+l+c*Math.pow(10,o))*s)/s;const p=Yr(t.max,f);return i.push({value:p,major:fc(p),significand:c}),i}class gc extends cu{static id="logarithmic";static defaults={ticks:{callback:fs.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=hc.prototype.parse.apply(this,[t,e]);if(0!==n)return Hr(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Hr(t)?Math.max(0,t):null,this.max=Hr(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Hr(this._userMin)&&(this.min=t===cc(this.min,0)?cc(this.min,-1):cc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t;n===i&&(n<=0?(r(1),o(10)):(r(cc(n,-1)),o(cc(i,1)))),n<=0&&r(cc(i,-1)),i<=0&&o(cc(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=dc({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Po(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ls(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=xo(t),this._valueRange=xo(this.max)-xo(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(xo(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function yc(t){const e=t.ticks;if(e.display&&t.display){const t=qs(e.backdropPadding);return Xr(e.font&&e.font.size,_s.font.size)+t.height}return 0}function mc(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function _c(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?fo/o:0;for(let c=0;c<o;c++){const o=s.setContext(t.getPointLabelContext(c));r[c]=o.padding;const f=t.getPointPosition(c,t.drawingArea+r[c],a),p=Us(o.font),d=(h=t.ctx,u=p,l=Vr(l=t._pointLabels[c])?l:[l],{w:bs(h,u.string,l),h:l.length*u.lineHeight});i[c]=d;const g=To(t.getIndexAngle(c)+a),y=Math.round(Lo(g));vc(n,e,g,mc(y,f.x,d.w,0,180),mc(y,f.y,d.h,90,270))}var h,u,l;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,s=yc(o)/2,a=t.drawingArea,h=o.pointLabels.centerPointLabels?fo/r:0;for(let o=0;o<r;o++){const r=t.getPointPosition(o,a+s+n[o],h),u=Math.round(Lo(To(r.angle+_o))),l=e[o],c=wc(r.y,l.h,u),f=bc(u),p=xc(r.x,l.w,f);i.push({x:r.x,y:c,textAlign:f,left:p,top:c,right:p+l.w,bottom:c+l.h})}return i}(t,i,r)}function vc(t,e,n,i,r){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,h=0;i.start<e.l?(a=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(h=(e.t-r.start)/s,t.t=Math.min(t.t,e.t-h)):r.end>e.b&&(h=(r.end-e.b)/s,t.b=Math.max(t.b,e.b+h))}function bc(t){return 0===t||180===t?"center":t<180?"left":"right"}function xc(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function wc(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function Ec(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,po);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}class Mc extends hc{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fs.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=qs(yc(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Hr(t)&&!isNaN(t)?t:0,this.max=Hr(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yc(this.options))}generateTickLabels(t){hc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=Jr(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?_c(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return To(t*(po/(this._pointLabels.length||1))+No(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Gr(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Gr(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Ws(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-_o+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Ec(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,o=this._pointLabels.length;let s,a,h;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),o=Us(e.font),{x:s,y:a,textAlign:h,left:u,top:l,right:c,bottom:f}=t._pointLabelItems[r],{backdropColor:p}=e;if(!Gr(p)){const t=js(e.borderRadius),i=qs(e.backdropPadding);n.fillStyle=p;const r=u-i.left,o=l-i.top,s=c-u+i.width,a=f-l+i.height;Object.values(t).some((t=>0!==t))?(n.beginPath(),As(n,{x:r,y:o,w:s,h:a,radius:t}),n.fill()):n.fillRect(r,o,s,a)}Ls(n,t._pointLabels[r],s,a+o.lineHeight/2,o,{color:e.color,textAlign:h,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),s=i.setContext(n),h=r.setContext(n);!function(t,e,n,i,r){const o=t.ctx,s=e.circular,{color:a,lineWidth:h}=e;!s&&!i||!a||!h||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=h,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),Ec(t,n,s,i),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,h)}})),n.display){for(t.save(),s=o-1;s>=0;s--){const i=n.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:o}=i;o&&r&&(t.lineWidth=o,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,s)=>{if(0===s&&!e.reverse)return;const a=n.setContext(this.getContext(s)),h=Us(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=h.string,o=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=qs(a.backdropPadding);t.fillRect(-o/2-e.left,-r-h.size/2-e.top,o+e.width,h.size+e.height)}Ls(t,i.label,0,-r,h,{color:a.color})})),t.restore()}drawTitle(){}}const Sc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ic=Object.keys(Sc);function Cc(t,e){return t-e}function Pc(t,e){if(Gr(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let s=e;return"function"==typeof i&&(s=i(s)),Hr(s)||(s="string"==typeof i?n.parse(s,i):n.parse(s)),null===s?null:(r&&(s="week"!==r||!Io(o)&&!0!==o?n.startOf(s,r):n.startOf(s,"isoWeek",o)),+s)}function Nc(t,e,n,i){const r=Ic.length;for(let o=Ic.indexOf(t);o<r-1;++o){const t=Sc[Ic[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Ic[o]}return Ic[r-1]}function Lc(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=zo(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Oc(t,e,n){const i=[],r={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,i.push({value:a,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),s=e[e.length-1].value;let a,h;for(a=o;a<=s;a=+r.add(a,1,i))h=n[a],h>=0&&(e[h].major=!0);return e}(t,i,r,n):i}class kc extends cu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new mh(t.adapters.date);i.init(e),io(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Pc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(r=Math.max(r,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=Hr(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Hr(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=Uo(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Nc(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=Ic.length-1;o>=Ic.indexOf(n);o--){const n=Ic[o];if(Sc[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Ic[n?Ic.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Ic.indexOf(t)+1,n=Ic.length;e<n;++e)if(Sc[Ic[e]].common)return Ic[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Oc(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=Fo(i,0,o),r=Fo(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Nc(r.minUnit,e,n,this._getLabelCapacity(e)),s=Xr(i.ticks.stepSize,1),a="week"===o&&r.isoWeekday,h=Io(a)||!0===a,u={};let l,c,f=e;if(h&&(f=+t.startOf(f,"isoWeek",a)),f=+t.startOf(f,h?"day":o),t.diff(n,e,o)>1e5*s)throw new Error(e+" and "+n+" are too far apart with stepSize of "+s+" "+o);const p="data"===i.ticks.source&&this.getDataTimestamps();for(l=f,c=0;l<n;l=+t.add(l,s,o),c++)Lc(u,l,p);return l!==n&&"ticks"!==i.bounds&&1!==c||Lc(u,l,p),Object.keys(u).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.ticks.callback;if(o)return Jr(o,[t,e,n],this);const s=r.time.displayFormats,a=this._unit,h=this._majorUnit,u=a&&s[a],l=h&&s[h],c=n[e],f=h&&l&&c&&c.major;return this._adapter.format(t,i||(f?l:u))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=No(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*r+s*o,h:n*o+s*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Oc(this,[t],this._majorUnit),i),o=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Pc(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Wo(t.sort(Cc))}}function Ac(t,e,n){let i,r,o,s,a=0,h=t.length-1;n?(e>=t[a].pos&&e<=t[h].pos&&({lo:a,hi:h}=jo(t,"pos",e)),({pos:i,time:o}=t[a]),({pos:r,time:s}=t[h])):(e>=t[a].time&&e<=t[h].time&&({lo:a,hi:h}=jo(t,"time",e)),({time:i,pos:o}=t[a]),({time:r,pos:s}=t[h]));const u=r-i;return u?o+(s-o)*(e-i)/u:o}const Rc=[dh,sl,ic,Object.freeze({__proto__:null,CategoryScale:class extends cu{static id="category";static defaults={ticks:{callback:oc}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Gr(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Fo(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:rc(n,t,Xr(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){return oc.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:uc,LogarithmicScale:gc,RadialLinearScale:Mc,TimeScale:kc,TimeSeriesScale:class extends kc{static id="timeseries";static defaults=kc.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ac(e,this.min),this._tableRange=Ac(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,s,a,h,u;for(o=0,s=t.length;o<s;++o)h=t[o],h>=e&&h<=n&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,s=i.length;o<s;++o)u=i[o+1],a=i[o-1],h=i[o],Math.round((u+a)/2)!==h&&r.push({time:h,pos:o/(s-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ac(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ac(this._table,n*this._tableRange+this._minPos,!0)}}})];Bu.register(...Rc);var Tc=Bu;function Dc(t,e,n,i,r){return new Tc(document.getElementById(t),{type:"bar",data:{labels:e.map((t=>t[n])),datasets:[{label:r,data:e.map((t=>t[i]))}]}})}function Fc(t,e){let n='<div class="accordion-item">';return n+='<h2 class="accordion-header" id="panelsStayOpen-heading'+t+'">',n+='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse'+t+'" aria-expanded="false" aria-controls="panelsStayOpen-collapse'+t+'">',n+=t,n+="</button></h2>",n+='<div id="panelsStayOpen-collapse'+t+'" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-heading'+t+'">',n+='<div class="accordion-body" style="width:100%;"><canvas id="'+e+'"></canvas></div></div></div>',n}function Bc(t,e,n){let i=function(t){let e=document.createElement("div");return e.className="accordion",e.id=t,e}(t),r=function(t,e,n){let i=document.createElement("div");return i.className="accordion-item",i.id=t,i.id=t,i.innerHTML+=`<h2 class="accordion-header" id="panelsStayOpen-heading${t}">\n    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"\n        data-bs-target="#panelsStayOpen-collapse${t}" aria-expanded="false"\n        aria-controls="panelsStayOpen-collapse${t}">\n        ${e}\n    </button>\n</h2>\n<div id="panelsStayOpen-collapse${t}" class="accordion-collapse collapse"\n    aria-labelledby="panelsStayOpen-heading${t}">\n    <div class="accordion-body">\n    ${n}\n    </div>\n</div>`,i}(t+"child",e,n);return i.appendChild(r),i}function zc(t,e,n=!1){let i="";return t.forEach((t=>{t&&(i+=n?t.name4User+": "+t.val+"<br>":Bc(t.attribut+e,t.name4User,t.val).outerHTML)})),i}function jc(t,e,n){return t.then((t=>{let i=t.filter((t=>t[e]===n))[0];if(console.log(i),i){const t=Object.entries(i).filter((([t,e])=>""!==e&&null!==e&&null!==t));return Object.fromEntries(t)}}))}var qc={};si=r("hPtJY");function Uc(t){const e=[...new Set(t)],n={};for(let t=0;t<e.length;t++)n[e[t]]="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}));return n}function Gc(t){let e="<div>";for(const[n,i]of Object.entries(t))e+=`<div style="display:flex;flex-direction:row"> <div style="background-color:${i};width: 31px;height: 16px; margin-right: 20px;"></div><div>${n}</div></div>`;e+="</div>",document.getElementById("legend").innerHTML=e}function Vc(t,e,n,i,r,o,s="",a="",h="red"){let u=Uc(t.features.reduce(((t,n)=>{const i=n.properties[e];return t.includes(i)||t.push(i),t}),[]));document.getElementById("exampleModalLabel").innerText=e;let l=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"}),c=new itowns.FeatureGeometryLayer(n,{source:l,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:t=>{if(i)return h;return u[t[e]]},extrusion_height:t=>""!==s?t[s]:t.hauteur?t.hauteur:t.bdtopo_bat_hauteur_mean?t.bdtopo_bat_hauteur_mean:t.HAUTEUR?t.HAUTEUR:20,base_altitude:t=>""!==a?t[a]:t.altitude_s?t.altitude_s:t.bdtopo_bat_altitude_sol_mean?t.bdtopo_bat_altitude_sol_mean:t.Z_MIN_SOL?t.Z_MIN_SOL:100}}),onMeshCreated:t=>{ir(t.children[0].children[0].children[0].children[0],"black",o)}});r.addLayer(c),Gc(u)}!function(t){var e=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},r={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function s(t,e,n){switch(t){case"Point":return a(e).geometry;case"LineString":return c(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return d(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(t[0])||!C(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return a(t,e)})),n)}function u(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return u(t,e)})),n)}function c(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return c(t,e)})),n)}function p(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function d(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function v(t,e){void 0===e&&(e="kilometers");var i=n[e];if(!i)throw new Error(e+" units is invalid");return t*i}function b(t,e){void 0===e&&(e="kilometers");var i=n[e];if(!i)throw new Error(e+" units is invalid");return t/i}function x(t,e){return E(b(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function M(t){return t%360*Math.PI/180}function S(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return v(b(t,e),n)}function I(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=r[e];if(!i)throw new Error("invalid original units");var o=r[n];if(!o)throw new Error("invalid final units");return t/i*o}function C(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function P(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!C(t))throw new Error("bbox must only contain numbers")}))}function L(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:e,factors:n,unitsFactors:i,areaFactors:r,feature:o,geometry:s,point:a,points:h,polygon:u,polygons:l,lineString:c,lineStrings:f,featureCollection:p,multiLineString:d,multiPoint:g,multiPolygon:y,geometryCollection:m,round:_,radiansToLength:v,lengthToRadians:b,lengthToDegrees:x,bearingToAzimuth:w,radiansToDegrees:E,degreesToRadians:M,convertLength:S,convertArea:I,isNumber:C,isObject:P,validateBBox:N,validateId:L});function k(t,e,n){if(null!==t)for(var i,r,o,s,a,h,u,l,c=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(u=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<a;_++){var v=0,b=0;if(null!==(s=l?u.geometries[_]:u)){h=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(h,f,m,v,b))return!1;f++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===e(h[i],f,m,v,b))return!1;f++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(r=0;r<h[i].length-c;r++){if(!1===e(h[i][r],f,m,v,b))return!1;f++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(b=0,r=0;r<h[i].length;r++){for(o=0;o<h[i][r].length-c;o++){if(!1===e(h[i][r][o],f,m,v,b))return!1;f++}b++}v++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===k(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(t,e,n,i){var r=n;return k(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),i),r}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function T(t,e,n){var i=n;return R(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var i=n;return D(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function B(t){var e=[];return k(t,(function(t){e.push(t)})),e}function z(t,e){var n,i,r,o,s,a,h,u,l,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(h=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=h?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,l,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,u,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,l,c))return!1;f++}}function j(t,e,n){var i=n;return z(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i}function q(t,e){z(t,(function(t,n,i,r,s){var a,h=null===t?null:t.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==e(o(t,i,{bbox:r,id:s}),n,0)&&void 0}switch(h){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(o({type:a,coordinates:l},i),n,u))return!1}}))}function U(t,e,n){var i=n;return q(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i}function G(t,e){q(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,h=0,u=0;return!1!==k(t,(function(o,l,f,p,d){if(void 0===s||n>a||p>h||d>u)return s=o,a=n,h=p,u=d,void(r=0);var g=c([s,o],t.properties);if(!1===e(g,n,i,d,r))return!1;r++,s=o}))&&void 0}}}))}function V(t,e,n){var i=n,r=!1;return G(t,(function(t,o,s,a,h){i=!1===r&&void 0===n?t:e(i,t,o,s,a,h),r=!0})),i}function W(t,e){if(!t)throw new Error("geojson is required");q(t,(function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(c(o[s],t.properties),n,i,s))return!1}}}))}function H(t,e,n){var i=n;return W(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i}function Y(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),c([h[s],h[s+1]],a,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),c([h[o][s],h[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=h.length+r),s<0&&(s=h[r].length+s-1),c([h[r][s],h[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=h.length+r),o<0&&(o=h[r].length+o),s<0&&(s=h[r][o].length-s-1),c([h[r][o][s],h[r][o][s+1]],a,e)}throw new Error("geojson is invalid")}function X(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,h=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":h=h||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return a(u,h,e);case"MultiPoint":return r<0&&(r=u.length+r),a(u[r],h,e);case"LineString":return s<0&&(s=u.length+s),a(u[s],h,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a(u[o][s],h,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s),a(u[r][s],h,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s),a(u[r][o][s],h,e)}throw new Error("geojson is invalid")}var Z=Object.freeze({__proto__:null,coordAll:B,coordEach:k,coordReduce:A,featureEach:D,featureReduce:F,findPoint:X,findSegment:Y,flattenEach:q,flattenReduce:U,geomEach:z,geomReduce:j,lineEach:W,lineReduce:H,propEach:R,propReduce:T,segmentEach:G,segmentReduce:V});function J(t){var e=[1/0,1/0,-1/0,-1/0];return k(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Q(t){if(t.length>1&&C(t[0])&&C(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Q(t[0]);throw new Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function et(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function rt(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var ot=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:Q,geojsonType:tt,featureOf:et,collectionOf:nt,getGeom:it,getType:rt}),st=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ut(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var lt=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,i,r=ut(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))at.call(n,s)&&(r[s]=n[s]);if(st){i=st(n);for(var a=0;a<i.length;a++)ht.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},ct={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function pt(t,e,n){n=n||{};for(var i=Object.keys(ct),r=0;r<i.length;r++){var o=i[r],s=n[o];s=null!=s?s:ct[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0,i=1e-7;return t.cells.forEach((function(r,o){r.forEach((function(r,s){if(void 0!==r&&5!==(p=r).cval&&10!==p.cval&&!gt(r)){var a=function(t,e,n){var i,r,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],h=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],f=c.cval,p=u[f],d=mt(c,p);s.push([n+d[0],e+d[1]]),d=mt(c,p=l[f]),s.push([n+d[0],e+d[1]]),yt(c);for(var g=n+a[f],y=e+h[f],m=f;g>=0&&y>=0&&y<o&&(g!=n||y!=e)&&void 0!==(c=t[y][g]);){if(0===(f=c.cval)||15===f)return{path:s,info:"mergeable"};p=l[f],i=a[f],r=h[f],5!==f&&10!==f||(5===f?c.flipped?-1===h[m]?(p="left",i=-1,r=0):(p="right",i=1,r=0):-1===a[m]&&(p="bottom",i=0,r=-1):10===f&&(c.flipped?-1===a[m]?(p="top",i=0,r=1):(p="bottom",i=0,r=-1):1===h[m]&&(p="left",i=-1,r=0))),d=mt(c,p),s.push([g+d[0],y+d[1]]),yt(c),g+=i,y+=r,m=f}return{path:s,info:"closed"}}(t.cells,o,s),h=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=i&&Math.abs(e[c][0][1]-l)<=i){for(var f=a.path.length-2;f>=0;--f)e[c].unshift(a.path[f]);h=!0;break}h||(e[n++]=a.path)}var p}))})),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var s=0;s<i;++s){var a=0,h=t[o+1][s],u=t[o+1][s+1],l=t[o][s+1],c=t[o][s];if(!(isNaN(h)||isNaN(u)||isNaN(l)||isNaN(c))){a|=h>=e?8:0,a|=u>=e?4:0,a|=l>=e?2:0;var f,p,d,g,y=!1;if(5==(a|=c>=e?1:0)||10===a){var m=(h+u+l+c)/4;5===a&&m<e?(a=10,y=!0):10===a&&m<e&&(a=5,y=!0)}0!==a&&15!==a&&(f=p=d=g=.5,1===a?(d=1-dt(e,h,c),p=1-dt(e,l,c)):2===a?(p=dt(e,c,l),g=1-dt(e,u,l)):3===a?(d=1-dt(e,h,c),g=1-dt(e,u,l)):4===a?(f=dt(e,h,u),g=dt(e,l,u)):5===a?(f=dt(e,h,u),g=dt(e,l,u),p=1-dt(e,l,c),d=1-dt(e,h,c)):6===a?(p=dt(e,c,l),f=dt(e,h,u)):7===a?(d=1-dt(e,h,c),f=dt(e,h,u)):8===a?(d=dt(e,c,h),f=1-dt(e,u,h)):9===a?(p=1-dt(e,l,c),f=1-dt(e,u,h)):10===a?(f=1-dt(e,u,h),g=1-dt(e,u,l),p=dt(e,c,l),d=dt(e,c,h)):11===a?(f=1-dt(e,u,h),g=1-dt(e,u,l)):12===a?(d=dt(e,c,h),g=dt(e,l,u)):13===a?(p=1-dt(e,l,c),g=dt(e,l,u)):14===a?(d=dt(e,c,h),p=dt(e,c,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:y,top:f,right:g,bottom:p,left:d})}}}return r}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(a),a}function dt(t,e,n){return(t-e)/(n-e)}function gt(t){return 0===t.cval||15===t.cval}function yt(t){gt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}(t,i),s=[],a=0;a<o.length;a++){for(var h=o[a],u=[],l=0;l<h.length;l++){var c=h[l];c.properties[n]?u.push(c.properties[n]):u.push(0),!0===r&&(c.properties.matrixPosition=[a,l])}s.push(u)}return s}var vt=xt,bt=xt;function xt(t,e,n,i,r){wt(t,e,n||0,i||t.length-1,r||Mt)}function wt(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,s=e-n+1,a=Math.log(o),h=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*h*(o-h)/o)*(s-o/2<0?-1:1);wt(t,e,Math.max(n,Math.floor(e-s*h/o+u)),Math.min(i,Math.floor(e+(o-s)*h/o+u)),r)}var l=t[e],c=n,f=i;for(Et(t,n,e),r(t[i],l)>0&&Et(t,n,i);c<f;){for(Et(t,c,f),c++,f--;r(t[c],l)<0;)c++;for(;r(t[f],l)>0;)f--}0===r(t[n],l)?Et(t,n,f):Et(t,++f,i),f<=e&&(n=f+1),e<=f&&(i=f-1)}}function Et(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Mt(t,e){return t<e?-1:t>e?1:0}vt.default=bt;var St=Ct,It=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pt(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Nt(t,e){Lt(t,0,t.children.length,e,t)}function Lt(t,e,n,i,r){r||(r=Bt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Ot(r,t.leaf?i(o):o);return r}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function kt(t,e){return t.minX-e.minX}function At(t,e){return t.minY-e.minY}function Rt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Tt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Bt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zt(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,vt(t,o,e,n,r),s.push(e,o,o,n))}function jt(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!Ft(t,e))return n;for(var r,o,s,a,h=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],Ft(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):Dt(t,a)?this._all(s,n):h.push(s));e=h.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ft(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],Ft(t,s=e.leaf?n(o):o)){if(e.leaf||Dt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),h=[],u=[];s||h.length;){if(s||(s=h.pop(),i=h[h.length-1],n=u.pop(),o=!0),s.leaf&&-1!==(r=Pt(t,s.children,e)))return s.children.splice(r,1),h.push(s),this._condense(h),this;o||s.leaf||!Dt(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(h.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:kt,compareMinY:At,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return Nt(r=Bt(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=Bt([])).leaf=!1,r.height=i;var a,h,u,l,c=Math.ceil(o/s),f=c*Math.ceil(Math.sqrt(s));for(zt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(zt(t,a,u=Math.min(a+f-1,n),c,this.compareMinY),h=a;h<=u;h+=c)l=Math.min(h+c-1,u),r.children.push(this._build(t,h,l,i-1));return Nt(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,h,u,l,c,f,p;i.push(e),!e.leaf&&i.length-1!==n;){for(l=c=1/0,r=0,o=e.children.length;r<o;r++)h=Rt(s=e.children[r]),f=t,p=s,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h)<c?(c=u,l=h<l?h:l,a=s):u===c&&h<l&&(l=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),Ot(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=Bt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Nt(n,this.toBBox),Nt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Bt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Nt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,h,u,l,c,f,p,d,g,y;for(h=u=1/0,i=e;i<=n-e;i++)c=r=Lt(t,0,i,this.toBBox),f=o=Lt(t,i,n,this.toBBox),p=void 0,d=void 0,g=void 0,y=void 0,p=Math.max(c.minX,f.minX),d=Math.max(c.minY,f.minY),g=Math.min(c.maxX,f.maxX),y=Math.min(c.maxY,f.maxY),s=Math.max(0,g-p)*Math.max(0,y-d),a=Rt(r)+Rt(o),s<h?(h=s,l=i,u=a<u?a:u):s===h&&a<u&&(u=a,l=i);return l},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:kt,r=t.leaf?this.compareMinY:At;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=Lt(t,0,e,s),h=Lt(t,n-e,n,s),u=Tt(a)+Tt(h);for(r=e;r<n-e;r++)o=t.children[r],Ot(a,t.leaf?s(o):o),u+=Tt(a);for(r=n-e-1;r>=e;r--)o=t.children[r],Ot(h,t.leaf?s(o):o),u+=Tt(h);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Ot(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Nt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},St.default=It;var qt=function(t,e,n){var i=t*e,r=Ut*t,o=r-(r-t),s=t-o,a=Ut*e,h=a-(a-e),u=e-h,l=s*u-(i-o*h-s*h-o*u);return n?(n[0]=l,n[1]=i,n):[l,i]},Ut=+(Math.pow(2,27)+1),Gt=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,s=new Array(n+i),a=0,h=0,u=0,l=Math.abs,c=t[h],f=l(c),p=e[u],d=l(p);f<d?(o=c,(h+=1)<n&&(f=l(c=t[h]))):(o=p,(u+=1)<i&&(d=l(p=e[u]))),h<n&&f<d||u>=i?(r=c,(h+=1)<n&&(f=l(c=t[h]))):(r=p,(u+=1)<i&&(d=l(p=e[u])));for(var g,y,m=r+o,_=m-r,v=o-_,b=v,x=m;h<n&&u<i;)f<d?(r=c,(h+=1)<n&&(f=l(c=t[h]))):(r=p,(u+=1)<i&&(d=l(p=e[u]))),(v=(o=b)-(_=(m=r+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;h<n;)(v=(o=b)-(_=(m=(r=c)+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(h+=1)<n&&(c=t[h]);for(;u<i;)(v=(o=b)-(_=(m=(r=p)+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<i&&(p=e[u]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Vt=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);return n?(n[0]=s+o,n[1]=i,n):[s+o,i]},Wt=function(t,e){var n=t.length;if(1===n){var i=qt(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;qt(t[0],e,o),o[0]&&(r[a++]=o[0]);for(var h=1;h<n;++h){qt(t[h],e,s);var u=o[1];Vt(u,s[0],o),o[0]&&(r[a++]=o[0]);var l=s[1],c=o[1],f=l+c,p=c-(f-l);o[1]=f,p&&(r[a++]=p)}return o[1]&&(r[a++]=o[1]),0===a&&(r[a++]=0),r.length=a,r},Ht=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,s=new Array(n+i),a=0,h=0,u=0,l=Math.abs,c=t[h],f=l(c),p=-e[u],d=l(p);f<d?(o=c,(h+=1)<n&&(f=l(c=t[h]))):(o=p,(u+=1)<i&&(d=l(p=-e[u]))),h<n&&f<d||u>=i?(r=c,(h+=1)<n&&(f=l(c=t[h]))):(r=p,(u+=1)<i&&(d=l(p=-e[u])));for(var g,y,m=r+o,_=m-r,v=o-_,b=v,x=m;h<n&&u<i;)f<d?(r=c,(h+=1)<n&&(f=l(c=t[h]))):(r=p,(u+=1)<i&&(d=l(p=-e[u]))),(v=(o=b)-(_=(m=r+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;h<n;)(v=(o=b)-(_=(m=(r=c)+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(h+=1)<n&&(c=t[h]);for(;u<i;)(v=(o=b)-(_=(m=(r=p)+o)-r))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<i&&(p=-e[u]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Yt=jt((function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var r=[],o=0;o<t.length;++o)r.push(["scale(",n(i(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));var s;return r}function r(t){for(var r=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),a=[],h=0;h<t;++h)0==(1&h)?r.push.apply(r,i(e(s,h))):o.push.apply(o,i(e(s,h))),a.push("m"+h);var u=n(r),l=n(o),c="orientation"+t+"Exact",f=["function ",c,"(",a.join(),"){var p=",u,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return new Function("sum","prod","scale","sub",f)(Gt,qt,Wt,Ht)}var o=r(3),s=r(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=r-s;if(r>0){if(s<=0)return a;i=r+s}else{if(!(r<0))return a;if(s>=0)return a;i=-(r+s)}var h=33306690738754716e-32*i;return a>=h||a<=-h?a:o(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],h=t[1]-i[1],u=e[1]-i[1],l=n[1]-i[1],c=t[2]-i[2],f=e[2]-i[2],p=n[2]-i[2],d=o*l,g=a*u,y=a*h,m=r*l,_=r*u,v=o*h,b=c*(d-g)+f*(y-m)+p*(_-v),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(c)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(_)+Math.abs(v))*Math.abs(p));return b>x||-b>x?b:s(t,e,n,i)}];function h(t){var e=a[t.length];return e||(e=a[t.length]=r(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(r(a.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)o.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[h].concat(a)),i=0;i<=5;++i)t.exports[i]=a[i]}()})),Xt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[r[0],r[1]],s=[r[0],r[1]];for(i=2;i<e;++i){for(var a=r[i],h=t[a],u=o.length;u>1&&Zt(t[o[u-2]],t[o[u-1]],h)<=0;)u-=1,o.pop();for(o.push(a),u=s.length;u>1&&Zt(t[s[u-2]],t[s[u-1]],h)>=0;)u-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var l=0,c=(i=0,o.length);i<c;++i)n[l++]=o[i];for(var f=s.length-2;f>0;--f)n[l++]=s[f];return n},Zt=Yt[3],Jt=$t,Kt=$t;function $t(t,e){if(!(this instanceof $t))return new $t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Qt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Qt(t,e){return t<e?-1:t>e?1:0}$t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r}},Jt.default=Kt;var te=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],h=e[o][1],u=e[s][0],l=e[s][1];h>i!=l>i&&n<(u-a)*(i-h)/(l-h)+a&&(r=!r)}return r},ee=Yt[3],ne=re,ie=re;function re(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>i[0]&&(i=s),s[1]<n[1]&&(n=s),s[1]>r[1]&&(r=s)}var a=[e,n,i,r],h=a.slice();for(o=0;o<t.length;o++)te(t[o],a)||h.push(t[o]);var u=Xt(h),l=[];for(o=0;o<u.length;o++)l.push(h[u[o]]);return l}(t),o=St(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<r.length;a++){var h=r[a];o.remove(h),i=ce(h,i),s.push(i)}var u=St(16);for(a=0;a<s.length;a++)u.insert(le(s[a]));for(var l=e*e,c=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,g=fe(p,d);if(!(g<c)){var y=g/l;(h=oe(o,f.prev.p,p,d,f.next.next.p,y,u))&&Math.min(fe(h,p),fe(h,d))<=y&&(s.push(f),s.push(ce(h,f)),o.remove(h),u.remove(f),u.insert(le(f)),u.insert(le(f.next)))}}f=i;var m=[];do{m.push(f.p),f=f.next}while(f!==i);return m.push(f.p),m}function oe(t,e,n,i,r,o,s){for(var a=new Jt(null,se),h=t.data;h;){for(var u=0;u<h.children.length;u++){var l=h.children[u],c=h.leaf?pe(l,n,i):ae(n,i,l);c>o||a.push({node:l,dist:c})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=pe(p,e,n),g=pe(p,i,r);if(f.dist<d&&f.dist<g&&ue(n,p,s)&&ue(i,p,s))return p}(h=a.pop())&&(h=h.node)}return null}function se(t,e){return t.dist-e.dist}function ae(t,e,n){if(he(t,n)||he(e,n))return 0;var i=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=de(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=de(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function he(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ue(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),h=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),c=n.search({minX:a,minY:h,maxX:u,maxY:l}),f=0;f<c.length;f++)if(i=c[f].p,r=c[f].next.p,o=t,i!==(s=e)&&r!==o&&ee(i,r,o)>0!=ee(i,r,s)>0&&ee(o,s,i)>0!=ee(o,s,r)>0)return!1;return!0}function le(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function ce(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function pe(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function de(t,e,n,i,r,o,s,a){var h,u,l,c,f=n-t,p=i-e,d=s-r,g=a-o,y=t-r,m=e-o,_=f*f+p*p,v=f*d+p*g,b=d*d+g*g,x=f*y+p*m,w=d*y+g*m,E=_*b-v*v,M=E,S=E;0===E?(u=0,M=1,c=w,S=b):(c=_*w-v*x,(u=v*w-b*x)<0?(u=0,c=w,S=b):u>M&&(u=M,c=w+v,S=b)),c<0?(c=0,-x<0?u=0:-x>_?u=M:(u=-x,M=_)):c>S&&(c=S,-x+v<0?u=0:-x+v>_?u=M:(u=-x+v,M=_));var I=(1-(l=0===c?0:c/S))*r+l*s-((1-(h=0===u?0:u/M))*t+h*n),C=(1-l)*o+l*a-((1-h)*e+h*i);return I*I+C*C}function ge(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(k(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=ne(n,e.concavity);return i.length>3?u([i]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=K(t),r=it(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var h=!1,u=0;u<a.length&&!h;u++)if(me(i,a[u][0],n.ignoreBoundary)){for(var l=!1,c=1;c<a[u].length&&!l;)me(i,a[u][c],!n.ignoreBoundary)&&(l=!0),c++;l||(h=!0)}return h}function me(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],h=e[o][0],u=e[o][1];if(t[1]*(s-h)+a*(h-t[0])+u*(t[0]-s)==0&&(s-t[0])*(h-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n;a>t[1]!=u>t[1]&&t[0]<(h-s)*(t[1]-a)/(u-a)+s&&(i=!i)}return i}function _e(t,e){var n=[];return D(t,(function(t){var i=!1;if("Point"===t.geometry.type)z(e,(function(e){ye(t,e)&&(i=!0)})),i&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var r=[];z(e,(function(e){k(t,(function(t){ye(t,e)&&(i=!0,r.push(t))}))})),i&&n.push(g(r))}})),p(n)}function ve(t,e,n){void 0===n&&(n={});var i=K(t),r=K(e),o=M(r[1]-i[1]),s=M(r[0]-i[0]),a=M(i[1]),h=M(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(h);return v(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function be(t,e){var n=!1;return p(function(t){if(t.length<3)return[];t.sort(we);for(var e,n,i,r,o,s,a=t.length-1,h=t[a].x,u=t[0].x,l=t[a].y,c=l,f=1e-12;a--;)t[a].y<l&&(l=t[a].y),t[a].y>c&&(c=t[a].y);var p,d=u-h,g=c-l,y=d>g?d:g,m=.5*(u+h),_=.5*(c+l),v=[new xe({__sentinel:!0,x:m-20*y,y:_-y},{__sentinel:!0,x:m,y:_+20*y},{__sentinel:!0,x:m+20*y,y:_-y})],b=[],x=[];for(a=t.length;a--;){for(x.length=0,p=v.length;p--;)(d=t[a].x-v[p].x)>0&&d*d>v[p].r?(b.push(v[p]),v.splice(p,1)):d*d+(g=t[a].y-v[p].y)*g>v[p].r||(x.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1));for(Ee(x),p=x.length;p;)n=x[--p],e=x[--p],i=t[a],r=n.x-e.x,o=n.y-e.y,s=2*(r*(i.y-n.y)-o*(i.x-n.x)),Math.abs(s)>f&&v.push(new xe(e,n,i))}for(Array.prototype.push.apply(b,v),a=b.length;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},u([[e,i,r,e]],o)})))}ne.default=ie;var xe=function(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,h=n.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+n.x)+h*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(h*u-s*l)/c,this.y=(o*l-a*u)/c,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r};function we(t,e){return e.x-t.x}function Ee(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function Me(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Se(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Se(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ce(t);default:throw new Error("unknown GeoJSON type")}}function Se(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ie(t.properties),e.geometry=Ce(t.geometry),e}function Ie(t){var e={};return t?(Object.keys(t).forEach((function(n){var i=t[n];"object"==typeof i?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map((function(t){return t})):e[n]=Ie(i):e[n]=i})),e):e}function Ce(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ce(t)})),e):(e.coordinates=Pe(t.coordinates),e)}function Pe(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Pe(t)}))}function Ne(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==rt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var i=[],r=H(t,(function(t,e){var n=function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=Le(i[0]),s=Le(i[i.length-1]),a=Le(r[0]),h=Le(r[r.length-1]);if(o===h)n=r.concat(i.slice(1));else if(a===s)n=i.concat(r.slice(1));else if(o===a)n=i.slice(1).reverse().concat(r);else{if(s!==h)return null;n=i.concat(r.reverse().slice(1))}return c(n)}(t,e);return n||(i.push(t),e)}));return r&&i.push(r),i.length?1===i.length?i[0]:d(i.map((function(t){return t.coordinates}))):null}function Le(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function ke(t,e){var n=function(t){if(null==t)return Oe;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var h=2,u=t.length,l=new Array(u);for(l[0]=(e+=t[0])*i+o,l[1]=(n+=t[1])*r+s;h<u;)l[h]=t[h],++h;return l}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function h(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=h(e.arcs);break;case"MultiPolygon":n=e.arcs.map(h);break;default:return null}return{type:i,coordinates:n}}(e)}function Ae(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],h=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=h,o=i[h]){delete i[o.start];var u=o===n?n:n.concat(o);i[u.start=n.start]=r[u.end=o.end]=u}else i[n.start]=r[n.end]=n;else if(n=i[h])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var l=o===n?n:o.concat(n);i[l.start=o.start]=r[l.end=n.end]=l}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=h]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Re(t,e){var n={},i=[],r=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(ke(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),i.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),i.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=Ae(t,r)).length)>1)for(var o,a,h=1,u=s(r[0]);h<i;++h)(o=s(r[h]))>u&&(a=r[0],r[0]=r[h],r[h]=a,u=o);return r})).filter((function(t){return t.length>0}))}}var Te=Object.prototype.hasOwnProperty;function De(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),h=t-1,u=0;u<t;++u)s[u]=r;function l(i,o){for(var u=e(i)&h,l=s[u],c=0;l!=r;){if(n(l,i))return a[u]=o;if(++c>=t)throw new Error("full hashmap");l=s[u=u+1&h]}return s[u]=i,a[u]=o,o}function c(i,o){for(var u=e(i)&h,l=s[u],c=0;l!=r;){if(n(l,i))return a[u];if(++c>=t)throw new Error("full hashmap");l=s[u=u+1&h]}return s[u]=i,a[u]=o,o}function f(i,o){for(var u=e(i)&h,l=s[u],c=0;l!=r;){if(n(l,i))return a[u];if(++c>=t)break;l=s[u=u+1&h]}return o}function p(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}return{set:l,maybeSet:c,get:f,keys:p}}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]}var Be=new ArrayBuffer(16),ze=new Float64Array(Be),je=new Uint32Array(Be);function qe(t){ze[0]=t[0],ze[1]=t[1];var e=je[0]^je[1];return 2147483647&(e<<5^e>>7^je[2]^je[3])}function Ue(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,h=function(){for(var t=De(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,i=o.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),l=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)u[e]=l[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],g=d[0],y=d[1];for(i=h[g],r=h[++g],++p,f[i]=1;++g<=y;)b(e,i,i=r,r=h[g]);++p,f[r]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=a.length;e<n;++e){var m=a[e],_=m[0]+1,v=m[1];for(b(e,h[v-1],i=h[_-1],r=h[_]);++_<=v;)b(e,i,i=r,r=h[_])}function b(t,e,n,i){if(u[n]!==t){u[n]=t;var r=l[n];if(r>=0){var o=c[n];r===e&&o===i||r===i&&o===e||(++p,f[n]=1)}else l[n]=e,c[n]=i}}function x(t){return qe(o[t])}function w(t,e){return Fe(o[t],o[e])}u=l=c=null;var E,M=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;function h(i){for(var a=e(i)&s,h=o[a],u=0;h!=r;){if(n(h,i))return!0;if(++u>=t)throw new Error("full hashset");h=o[a=a+1&s]}return o[a]=i,!0}function u(i){for(var a=e(i)&s,h=o[a],u=0;h!=r;){if(n(h,i))return!0;if(++u>=t)break;h=o[a=a+1&s]}return!1}function l(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}return{add:h,has:u,values:l}}(1.4*p,qe,Fe);for(e=0,n=o.length;e<n;++e)f[E=h[e]]&&M.add(o[E]);return M}function Ge(t,e,n,i){Ve(t,e,n),Ve(t,e,e+i),Ve(t,e+i,n)}function Ve(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function We(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?He:"Feature"===n.type?Ye:Xe)(n);return i}function He(t){var e={type:"GeometryCollection",geometries:t.features.map(Ye)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ye(t){var e,n=Xe(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Xe(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Xe)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ze(t,e){var n=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;function o(t){null!=t&&Te.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){h(t.arcs)},MultiLineString:function(t){t.arcs.forEach(h)},Polygon:function(t){t.arcs.forEach(h)},MultiPolygon:function(t){t.arcs.forEach(u)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>i&&(i=o),s<n&&(n=s),s>r&&(r=s)}function h(t){t.forEach(a)}function u(t){t.forEach(h)}for(var l in t)o(t[l]);return i>=e&&r>=n?[e,n,i,r]:void 0}(t=We(t)),i=e>0&&n&&function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=o-i?(n-1)/(o-i):1,h=s-r?(n-1)/(s-r):1;function u(t){return[Math.round((t[0]-i)*a),Math.round((t[1]-r)*h)]}function l(t,e){for(var n,o,s,u,l,c=-1,f=0,p=t.length,d=new Array(p);++c<p;)n=t[c],u=Math.round((n[0]-i)*a),l=Math.round((n[1]-r)*h),u===o&&l===s||(d[f++]=[o=u,s=l]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function c(t){return l(t,2)}function f(t){return l(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Te.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=u(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(u)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var y in t)d(t[y]);return{scale:[1/a,1/h],translate:[i,r]}}(t,n,e),r=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,h=s.length+a.length;for(delete t.lines,delete t.rings,i=0,r=s.length;i<r;++i)for(e=s[i];e=e.next;)++h;for(i=0,r=a.length;i<r;++i)for(n=a[i];n=n.next;)++h;var u=De(2*h*1.4,qe,Fe),l=t.arcs=[];for(i=0,r=s.length;i<r;++i){e=s[i];do{c(e)}while(e=e.next)}for(i=0,r=a.length;i<r;++i)if((n=a[i]).next)do{c(n)}while(n=n.next);else f(n);function c(t){var e,n,i,r,s,a,h,c;if(i=u.get(e=o[t[0]]))for(h=0,c=i.length;h<c;++h)if(p(r=i[h],t))return t[0]=r[0],void(t[1]=r[1]);if(s=u.get(n=o[t[1]]))for(h=0,c=s.length;h<c;++h)if(d(a=s[h],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):u.set(e,[t]),s?s.push(t):u.set(n,[t]),l.push(t)}function f(t){var e,n,i,r,s;if(n=u.get(o[t[0]]))for(r=0,s=n.length;r<s;++r){if(g(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(y(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=u.get(e=o[t[0]+m(t)]))for(r=0,s=n.length;r<s;++r){if(g(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(y(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):u.set(e,[t]),l.push(t)}function p(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!Fe(o[n],o[i]))return!1;return!0}function d(t,e){var n=t[0],i=e[0],r=t[1],s=e[1];if(n-r!=i-s)return!1;for(;n<=r;++n,--s)if(!Fe(o[n],o[s]))return!1;return!0}function g(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var s=m(t),a=m(e),h=0;h<r;++h)if(!Fe(o[n+(h+s)%r],o[i+(h+a)%r]))return!1;return!0}function y(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],a=r-n;if(a!==s-i)return!1;for(var h=m(t),u=a-m(e),l=0;l<a;++l)if(!Fe(o[n+(l+h)%a],o[s-(l+u)%a]))return!1;return!0}function m(t){for(var e=t[0],n=t[1],i=e,r=i,s=o[i];++i<n;){var a=o[i];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(r=i,s=a)}return r-e}return t}(function(t){var e,n,i,r=Ue(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,i=s.length;n<i;++n)for(var h=s[n],u=h[0],l=h[1];++u<l;)r.has(o[u])&&(e={0:u,1:h[1]},h[1]=u,h=h.next=e);for(n=0,i=a.length;n<i;++n)for(var c=a[n],f=c[0],p=f,d=c[1],g=r.has(o[f]);++p<d;)r.has(o[p])&&(g?(e={0:p,1:c[1]},c[1]=p,c=c.next=e):(Ge(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],i=[],r=[];function o(t){t&&Te.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(h)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function a(t){for(var i=0,o=t.length;i<o;++i)r[++e]=t[i];var s={0:e-o+1,1:e};return n.push(s),s}function h(t){for(var n=0,o=t.length;n<o;++n)r[++e]=t[n];var s={0:e-o+1,1:e};return i.push(s),s}function u(t){return t.map(h)}for(var l in t)o(t[l]);return{type:"Topology",coordinates:r,lines:n,rings:i,objects:t}}(t))),o=r.coordinates,s=De(1.4*r.arcs.length,Je,Ke);function a(t){t&&Te.call(h,t.type)&&h[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map((function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)})),delete r.coordinates,o=null;var h={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function u(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(u)}for(var c in t)a(t[c]);return i&&(r.transform=i,r.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],s=0,a=1,h=o.length,u=o[0],l=u[0],c=u[1];++s<h;)i=(u=o[s])[0],r=u[1],i===l&&r===c||(o[a++]=[i-l,r-c],l=i,c=r);1===a&&(o[a++]=[0,0]),o.length=a}return t}(r.arcs)),r}function Je(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function Ke(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}function $e(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==rt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Me(t));var n=[];q(t,(function(t){n.push(t.geometry)}));var i=Ze({geoms:m(n).geometry});return function(t){return ke(t,Re.apply(this,arguments))}(i,i.objects.geoms.geometries)}function Qe(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==rt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var i=function(t){var e={};q(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var r=t;switch(i){case"LineString":return Ne(r,e);case"Polygon":return $e(r,e);default:throw new Error(i+" is not supported")}}function tn(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var i=rt(t),r=[];switch(i){case"LineString":r=en(t);break;case"MultiLineString":case"Polygon":$(t).forEach((function(t){r.push(en(t))}));break;case"MultiPolygon":$(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(en(t))})),r.push(e)}));break;case"Point":return t;case"MultiPoint":var s={};$(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(s,e)||(r.push(t),s[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=r,t):{type:i,coordinates:r}:!0===n?(t.geometry.coordinates=r,t):o({type:i,coordinates:r},t.properties,{bbox:t.bbox,id:t.id})}function en(t){var e=$(t);if(2===e.length&&!nn(e[0],e[1]))return e;var n=[],i=e.length-1,r=n.length;n.push(e[0]);for(var o=1;o<i;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(r=n.length)>2&&rn(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),r=n.length,nn(e[0],e[e.length-1])&&r<4)throw new Error("invalid polygon");return rn(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1),n}function nn(t,e){return t[0]===e[0]&&t[1]===e[1]}function rn(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],h=e[1],u=a-o,l=h-s;return 0==(i-o)*l-(r-s)*u&&(Math.abs(u)>=Math.abs(l)?u>0?o<=i&&i<=a:a<=i&&i<=o:l>0?s<=r&&r<=h:h<=r&&r<=s)}function on(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return(o=t.x-i)*o+(s=t.y-r)*s}function sn(t,e,n,i,r){for(var o,s=i,a=e+1;a<n;a++){var h=on(t[a],t[e],t[n]);h>s&&(o=a,s=h)}s>i&&(o-e>1&&sn(t,e,o,i,r),r.push(t[o]),n-o>1&&sn(t,o,n,i,r))}function an(t,e){var n=t.length-1,i=[t[0]];return sn(t,0,n,e,i),i.push(t[n]),i}function hn(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return an(t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],h=[a],u=1,l=t.length;u<l;u++)r=a,o=void 0,s=void 0,(o=(i=n=t[u]).x-r.x)*o+(s=i.y-r.y)*s>e&&(h.push(n),a=n);return a!==n&&h.push(n),h}(t,i),i)}function un(t,e,n){return hn(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ln(t,e,n){return t.map((function(t){var i=t.map((function(t){return{x:t[0],y:t[1]}}));if(i.length<4)throw new Error("invalid polygon");for(var r=hn(i,e,n).map((function(t){return[t.x,t.y]}));!cn(r);)r=hn(i,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function cn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fn=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t}();function pn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,i=e.sharpness||.85,r=[],o=it(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new fn({duration:n,points:o,sharpness:i}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&r.push([e.x,e.y])},h=0;h<s.duration;h+=10)a(h);return a(s.duration),c(r,e.properties)}function dn(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return u([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function gn(t){return dn(J(t))}function yn(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(ve(t.slice(0,2),[i,n])>=ve(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(r-n)/2,n,s+(r-n)/2,r]}function mn(t,e,n,i){void 0===i&&(i={});var r=K(t),o=M(r[0]),s=M(r[1]),h=M(n),u=b(e,i.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(h));return a([E(o+Math.atan2(Math.sin(h)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),E(l)],i.properties)}function _n(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(mn(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),u([o],r)}function vn(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=vn(e,t);return(n+180)%360}(t,e);var i=K(t),r=K(e),o=M(i[0]),s=M(r[0]),a=M(i[1]),h=M(r[1]),u=Math.sin(s-o)*Math.cos(h),l=Math.cos(a)*Math.sin(h)-Math.sin(a)*Math.cos(h)*Math.cos(s-o);return E(Math.atan2(u,l))}function bn(t,e){void 0===e&&(e={});var n=J(t);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function xn(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return k(t,(function(t){n+=t[0],i+=t[1],r++}),!0),a([n/r,i/r],e.properties)}function wn(t){var e=[];return"FeatureCollection"===t.type?D(t,(function(t){k(t,(function(n){e.push(a(n,t.properties))}))})):k(t,(function(n){e.push(a(n,t.properties))})),p(e)}var En=Sn,Mn=Sn;function Sn(t,e,n){n=n||2;var i,r,o,s,a,h,u,l=e&&e.length,c=l?e[0]*n:t.length,f=In(t,0,c,n,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,n,i){var r,o,s,a=[];for(r=0,o=e.length;r<o;r++)(s=In(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(Dn(s));for(a.sort(An),r=0;r<a.length;r++)Rn(a[r],n),n=Cn(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var d=n;d<c;d+=n)(a=t[d])<i&&(i=a),(h=t[d+1])<r&&(r=h),a>o&&(o=a),h>s&&(s=h);u=0!==(u=Math.max(o-i,s-r))?1/u:0}return Pn(f,p,n,i,r,u),p}function In(t,e,n,i,r){var o,s;if(r===Yn(t,e,n,i)>0)for(o=e;o<n;o+=i)s=Vn(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=Vn(o,t[o],t[o+1],s);return s&&jn(s,s.next)&&(Wn(s),s=s.next),s}function Cn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!jn(i,i.next)&&0!==zn(i.prev,i,i.next))i=i.next;else{if(Wn(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Pn(t,e,n,i,r,o,s){if(t){!s&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Tn(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,h,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,h--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(t,i,r,o);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?Ln(t,i,r,o):Nn(t))e.push(a.i/n),e.push(t.i/n),e.push(h.i/n),Wn(t),t=h.next,u=h.next;else if((t=h)===u){s?1===s?Pn(t=On(t,e,n),e,n,i,r,o,2):2===s&&kn(t,e,n,i,r,o):Pn(Cn(t),e,n,i,r,o,1);break}}}function Nn(t){var e=t.prev,n=t,i=t.next;if(zn(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Fn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&zn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ln(t,e,n,i){var r=t.prev,o=t,s=t.next;if(zn(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,h=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=Tn(a,h,e,n,i),f=Tn(u,l,e,n,i),p=t.prevZ,d=t.nextZ;p&&p.z>=c&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Fn(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&zn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Fn(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&zn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&Fn(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&zn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Fn(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&zn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function On(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!jn(r,o)&&qn(r,i,i.next,o)&&Un(r,o)&&Un(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Wn(i),Wn(i.next),i=t=o),i=i.next}while(i!==t);return i}function kn(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Bn(s,a)){var h=Gn(s,a);return s=Cn(s,s.next),h=Cn(h,h.next),Pn(s,e,n,i,r,o),void Pn(h,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function An(t,e){return t.x-e.x}function Rn(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var h,u=n,l=n.x,c=n.y,f=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=l&&r!==i.x&&Fn(o<c?r:s,o,l,c,o<c?s:r,o,i.x,i.y)&&((h=Math.abs(o-i.y)/(r-i.x))<f||h===f&&i.x>n.x)&&Un(i,t)&&(n=i,f=h),i=i.next;return n}(t,e)){var n=Gn(e,t);Cn(n,n.next)}}function Tn(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Fn(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Bn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&qn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Un(t,e)&&Un(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function zn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function jn(t,e){return t.x===e.x&&t.y===e.y}function qn(t,e,n,i){return!!(jn(t,e)&&jn(n,i)||jn(t,i)&&jn(n,e))||zn(t,e,n)>0!=zn(t,e,i)>0&&zn(n,i,t)>0!=zn(n,i,e)>0}function Un(t,e){return zn(t.prev,t,t.next)<0?zn(t,e,t.next)>=0&&zn(t,t.prev,e)>=0:zn(t,e,t.prev)<0||zn(t,t.next,e)<0}function Gn(t,e){var n=new Hn(t.i,t.x,t.y),i=new Hn(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Vn(t,e,n,i){var r=new Hn(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Hn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yn(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function Xn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=En(e.vertices,e.holes,2),i=[],r=[];n.forEach((function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<r.length;o+=3){var s=r.slice(o,o+3);s.push(r[o]),i.push(u([s]))}return i}function Zn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0,r=0;return D(e,(function(e,n){var o=ve(t,e);o<i&&(r=n,i=o)})),(n=Me(e.features[r])).properties.featureIndex=r,n.properties.distanceToPoint=i,n}function Jn(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,(function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=$(i);break;case"LineString":n=[$(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r=c([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),p(e)}Sn.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(Yn(t,0,o,n));if(r)for(var a=0,h=e.length;a<h;a++){var u=e[a]*n,l=a<h-1?e[a+1]*n:t.length;s-=Math.abs(Yn(t,u,l,n))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,p=i[a+1]*n,d=i[a+2]*n;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},Sn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},En.default=Mn;var Kn=jt((function(t,e){function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function h(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function l(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function c(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return h(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=h,e.multiPolygon=u,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return f(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(c(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function $n(t,e,n){if(null!==t)for(var i,r,o,s,a,h,u,l,c=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(u=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<a;_++){var v=0,b=0;if(null!==(s=l?u.geometries[_]:u)){h=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(h,f,m,v,b))return!1;f++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===e(h[i],f,m,v,b))return!1;f++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(r=0;r<h[i].length-c;r++){if(!1===e(h[i][r],f,m,v,b))return!1;f++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(b=0,r=0;r<h[i].length;r++){for(o=0;o<h[i][r].length-c;o++){if(!1===e(h[i][r][o],f,m,v,b))return!1;f++}b++}v++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===$n(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function ti(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function ei(t,e){var n,i,r,o,s,a,h,u,l,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(h=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=h?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,l,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,u,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,l,c))return!1;f++}}function ni(t,e){ei(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Kn.feature(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var h=0;h<t.coordinates.length;h++){var u={type:s,coordinates:t.coordinates[h]};if(!1===e(Kn.feature(u,i),n,h))return!1}}))}function ii(t,e){ni(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,h=0,u=0;return!1!==$n(t,(function(o,l,c,f,p){if(void 0===s||n>a||f>h||p>u)return s=o,a=n,h=f,u=p,void(r=0);var d=Kn.lineString([s,o],t.properties);if(!1===e(d,n,i,p,r))return!1;r++,s=o}))&&void 0}}}))}function ri(t,e){if(!t)throw new Error("geojson is required");ni(t,(function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Kn.lineString(o[s],t.properties),n,i,s))return!1}}}))}var oi=function(t){var e=[];return $n(t,(function(t){e.push(t)})),e},si=$n,ai=function(t,e,n,i){var r=n;return $n(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),i),r},hi=ti,ui=function(t,e,n){var i=n;return ti(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},li=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":return Kn.point(h,a,e);case"MultiPoint":return r<0&&(r=h.length+r),Kn.point(h[r],a,e);case"LineString":return s<0&&(s=h.length+s),Kn.point(h[s],a,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),Kn.point(h[o][s],a,e);case"MultiLineString":return r<0&&(r=h.length+r),s<0&&(s=h[r].length+s),Kn.point(h[r][s],a,e);case"MultiPolygon":return r<0&&(r=h.length+r),o<0&&(o=h[r].length+o),s<0&&(s=h[r][o].length-s),Kn.point(h[r][o][s],a,e)}throw new Error("geojson is invalid")},ci=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),Kn.lineString([h[s],h[s+1]],a,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),Kn.lineString([h[o][s],h[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=h.length+r),s<0&&(s=h[r].length+s-1),Kn.lineString([h[r][s],h[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=h.length+r),o<0&&(o=h[r].length+o),s<0&&(s=h[r][o].length-s-1),Kn.lineString([h[r][o][s],h[r][o][s+1]],a,e)}throw new Error("geojson is invalid")},fi=ni,pi=function(t,e,n){var i=n;return ni(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},di=ei,gi=function(t,e,n){var i=n;return ei(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},yi=ri,mi=function(t,e,n){var i=n;return ri(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},_i=Qn,vi=function(t,e,n){var i=n;return Qn(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},bi=ii,xi=function(t,e,n){var i=n,r=!1;return ii(t,(function(t,o,s,a,h){i=!1===r&&void 0===n?t:e(i,t,o,s,a,h),r=!0})),i},wi=Object.defineProperty({coordAll:oi,coordEach:si,coordReduce:ai,featureEach:hi,featureReduce:ui,findPoint:li,findSegment:ci,flattenEach:fi,flattenReduce:pi,geomEach:di,geomReduce:gi,lineEach:yi,lineReduce:mi,propEach:_i,propReduce:vi,segmentEach:bi,segmentReduce:xi},"__esModule",{value:!0});function Ei(t){var e=[1/0,1/0,-1/0,-1/0];return wi.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Ei.default=Ei;var Mi=Ei,Si=Object.defineProperty({default:Mi},"__esModule",{value:!0}).default,Ii=wi.featureEach,Ci=(wi.coordEach,Kn.polygon,Kn.featureCollection);function Pi(t){var e=St(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Si(t),St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Si(t),e.push(t)})):Ii(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Si(t),e.push(t)})),St.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Si(t),St.prototype.remove.call(this,t,e)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){var e=St.prototype.search.call(this,this.toBBox(t));return Ci(e)},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=St.prototype.all.call(this);return Ci(t)},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Si(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Si(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Ni=Pi,Li=Pi;function Oi(t,e){var n={},i=[];if("LineString"===t.type&&(t=o(t)),"LineString"===e.type&&(e=o(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=ki(t,e);return r&&i.push(r),p(i)}var s=Ni();return s.load(Jn(e)),D(Jn(t),(function(t){D(s.search(t),(function(e){var r=ki(t,e);if(r){var o=$(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),p(i)}function ki(t,e){var n=$(t),i=$(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],h=n[1][1],u=i[0][0],l=i[0][1],c=i[1][0],f=i[1][1],p=(f-l)*(s-r)-(c-u)*(h-o);if(0===p)return null;var d=((c-u)*(o-l)-(f-l)*(r-u))/p,g=((s-r)*(o-l)-(h-o)*(r-u))/p;return d>=0&&d<=1&&g>=0&&g<=1?a([r+d*(s-r),o+d*(h-o)]):null}function Ai(t,e,n){void 0===n&&(n={});var i=a([1/0,1/0],{dist:1/0}),r=0;return q(t,(function(t){for(var o=$(t),s=0;s<o.length-1;s++){var h=a(o[s]);h.properties.dist=ve(e,h,n);var u=a(o[s+1]);u.properties.dist=ve(e,u,n);var l=ve(h,u,n),f=Math.max(h.properties.dist,u.properties.dist),p=vn(h,u),d=mn(e,f,p+90,n),g=mn(e,f,p-90,n),y=Oi(c([d.geometry.coordinates,g.geometry.coordinates]),c([h.geometry.coordinates,u.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=ve(e,m,n),m.properties.location=r+ve(h,m,n)),h.properties.dist<i.properties.dist&&((i=h).properties.index=s,i.properties.location=r),u.properties.dist<i.properties.dist&&((i=u).properties.index=s+1,i.properties.location=r+l),m&&m.properties.dist<i.properties.dist&&((i=m).properties.index=s),r+=l}})),i}function Ri(t,n,i){void 0===i&&(i={});var r=K(t),o=K(n);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,S(function(t,n,i){var r=i=void 0===i?e:Number(i),o=t[1]*Math.PI/180,s=n[1]*Math.PI/180,a=s-o,h=Math.abs(n[0]-t[0])*Math.PI/180;h>Math.PI&&(h-=2*Math.PI);var u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(o);return Math.sqrt(a*a+l*l*h*h)*r}(r,o),"meters",i.units)}function Ti(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=a(t):"Point"===t.type?t=o(t):et(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=c(e):"LineString"===e.type?e=o(e):et(e,"LineString","line");var i=1/0,r=t.geometry.coordinates;return G(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,i){var r=[n[0]-e[0],n[1]-e[1]],o=Di([t[0]-e[0],t[1]-e[1]],r);if(o<=0)return Fi(t,e,{method:i.method,units:"degrees"});var s=Di(r,r);if(s<=o)return Fi(t,n,{method:i.method,units:"degrees"});var a=o/s;return Fi(t,[e[0]+a*r[0],e[1]+a*r[1]],{method:i.method,units:"degrees"})}(r,e,o,n);s<i&&(i=s)})),S(i,"degrees",n.units)}function Di(t,e){return t[0]*e[0]+t[1]*e[1]}function Fi(t,e,n){return"planar"===n.method?Ri(t,e,n):ve(t,e,n)}function Bi(t,e,n,i,r,o,s,a){var h,u,l,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(h=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(u=e-o)-(i-e)*(l=t-r),u=((s-r)*u-(a-o)*l)/h,l=c/h,f.x=t+u*(n-t),f.y=e+u*(i-e),u>=0&&u<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function zi(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?p([o(t)]):p([t]):t}(t),n=bn(e),i=!1,r=0;!i&&r<e.features.length;){var s,h=e.features[r].geometry,u=!1;if("Point"===h.type)n.geometry.coordinates[0]===h.coordinates[0]&&n.geometry.coordinates[1]===h.coordinates[1]&&(i=!0);else if("MultiPoint"===h.type){var l=!1;for(s=0;!l&&s<h.coordinates.length;)n.geometry.coordinates[0]===h.coordinates[s][0]&&n.geometry.coordinates[1]===h.coordinates[s][1]&&(i=!0,l=!0),s++}else if("LineString"===h.type)for(s=0;!u&&s<h.coordinates.length-1;)ji(n.geometry.coordinates[0],n.geometry.coordinates[1],h.coordinates[s][0],h.coordinates[s][1],h.coordinates[s+1][0],h.coordinates[s+1][1])&&(u=!0,i=!0),s++;else if("MultiLineString"===h.type)for(var c=0;c<h.coordinates.length;){u=!1,s=0;for(var f=h.coordinates[c];!u&&s<f.length-1;)ji(n.geometry.coordinates[0],n.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(u=!0,i=!0),s++;c++}else"Polygon"!==h.type&&"MultiPolygon"!==h.type||ye(n,h)&&(i=!0);r++}if(i)return n;var d=p([]);for(r=0;r<e.features.length;r++)d.features=d.features.concat(wn(e.features[r]).features);return a(Zn(n,d).geometry.coordinates)}function ji(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}Ni.default=Li;var qi=6378137;function Ui(t){return j(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Gi(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Gi(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Gi(t){var e=0;if(t&&t.length>0){e+=Math.abs(Vi(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Vi(t[n]))}return e}function Vi(t){var e,n,i,r,o,s,a=0,h=t.length;if(h>2){for(s=0;s<h;s++)s===h-2?(i=h-2,r=h-1,o=0):s===h-1?(i=h-1,r=0,o=1):(i=s,r=s+1,o=s+2),e=t[i],n=t[r],a+=(Wi(t[o][0])-Wi(e[0]))*Math.sin(Wi(n[1]));a=a*qi*qi/2}return a}function Wi(t){return t*Math.PI/180}function Hi(t,e){return void 0===e&&(e={}),V(t,(function(t,n){var i=n.geometry.coordinates;return t+ve(i[0],i[1],e)}),0)}function Yi(t,e,n,i){if(!P(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var s,a,h,u=r.length,l=0,f=0;f<r.length&&!(e>=l&&f===r.length-1);f++){if(l>e&&0===o.length){if(!(s=e-l))return o.push(r[f]),c(o);a=vn(r[f],r[f-1])-180,h=mn(r[f],s,a,i),o.push(h.geometry.coordinates)}if(l>=n)return(s=n-l)?(a=vn(r[f],r[f-1])-180,h=mn(r[f],s,a,i),o.push(h.geometry.coordinates),c(o)):(o.push(r[f]),c(o));if(l>=e&&o.push(r[f]),f===r.length-1)return c(o);l+=ve(r[f],r[f+1],i)}if(l<e&&r.length===u)throw new Error("Start position is beyond line");var p=r[r.length-1];return c([p,p])}function Xi(t,e,n){void 0===n&&(n={});for(var i=K(t),r=$(e),o=0;o<r.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),Zi(r[o],r[o+1],i,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Zi(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],h=t[1],u=e[0],l=e[1],c=u-a,f=l-h,p=(n[0]-a)*f-(n[1]-h)*c;if(null!==r){if(Math.abs(p)>r)return!1}else if(0!==p)return!1;return i?"start"===i?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=u:u<=o&&o<a:f>0?h<s&&s<=l:l<=s&&s<h:"end"===i?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<u:u<o&&o<=a:f>0?h<=s&&s<l:l<s&&s<=h:"both"===i&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<u:u<o&&o<a:f>0?h<s&&s<l:l<s&&s<h):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=u:u<=o&&o<=a:f>0?h<=s&&s<=l:l<=s&&s<=h}function Ji(t,e){var n=it(t),i=it(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if($i(e.coordinates[n],t.coordinates)){i=!0;break}return i}(n,i);case"LineString":return Xi(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)$i(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(n,i);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!Xi(t.coordinates[i],e))return!1;n||(n=Xi(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=ye(t.coordinates[1],e))){n=!1;break}i=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Xi(t.coordinates[n],e))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){if(!Ki(J(e),J(t)))return!1;for(var n=!1,i=0;i<t.coordinates.length-1;i++){if(!ye(t.coordinates[i],e))return!1;n||(n=ye(t.coordinates[i],e,{ignoreBoundary:!0})),n||(n=ye(Qi(t.coordinates[i],t.coordinates[i+1]),e,{ignoreBoundary:!0}))}return n}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!Ki(J(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!ye(t.coordinates[0][i],e))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function Ki(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function $i(t,e){return t[0]===e[0]&&t[1]===e[1]}function Qi(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function tr(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var i=[],r=t[0],o=t[1],s=t[2],h=t[3],u=e/ve([r,o],[s,o],n)*(s-r),l=e/ve([r,o],[r,h],n)*(h-o),c=s-r,f=h-o,d=Math.floor(c/u),g=(f-Math.floor(f/l)*l)/2,y=r+(c-d*u)/2;y<=s;){for(var m=o+g;m<=h;){var _=a([y,m],n.properties);n.mask?Ji(_,n.mask)&&i.push(_):i.push(_),m+=l}y+=u}return p(i)}function er(t,e){void 0===e&&(e={});var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return k(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)})),t}function nr(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,(function(t){e.push(t)})),p(e)}function ir(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var s=[],a=0;a<i.length;a++)for(var h=0;h<i[a].length-1;h++)s.push(g(a,h));var u=St();u.load(s)}for(var l=0;l<i.length;l++)for(var c=0;c<i[l].length-1;c++)if(n)u.search(g(l,c)).forEach((function(t){var e=t.ring,n=t.edge;d(l,c,e,n)}));else for(var f=0;f<i.length;f++)for(var p=0;p<i[f].length-1;p++)d(l,c,f,p);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function d(t,n,s,a){var h,u,l=i[t][n],c=i[t][n+1],f=i[s][a],p=i[s][a+1],d=function(t,e,n,i){if(rr(t,n)||rr(t,i)||rr(e,n)||rr(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],h=n[0],u=n[1],l=i[0],c=i[1],f=(r-s)*(u-c)-(o-a)*(h-l);return 0===f?null:[((r*a-o*s)*(h-l)-(r-s)*(h*c-u*l))/f,((r*a-o*s)*(u-c)-(o-a)*(h*c-u*l))/f]}(l,c,f,p);if(null!==d&&(h=c[0]!==l[0]?(d[0]-l[0])/(c[0]-l[0]):(d[1]-l[1])/(c[1]-l[1]),u=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(h>=1||h<=0||u>=1||u<=0))){var g=d,y=!o[g];y&&(o[g]=!0),e?r.push(e(d,t,n,l,c,h,s,a,f,p,u,y)):r.push(d)}}function g(t,e){var n,r,o,s,a=i[t][e],h=i[t][e+1];return a[0]<h[0]?(n=a[0],r=h[0]):(n=h[0],r=a[0]),a[1]<h[1]?(o=a[1],s=h[1]):(o=h[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}function rr(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!rr(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function or(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var r=t.geometry.coordinates[i];lr(r[0],r[r.length-1])||r.push(r[0]),n.push.apply(n,r.slice(0,r.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){n=0;break}e[t[i]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=ir(t,(function(t,e,n,i,r,o,s,a,h,u,l,c){return[t,e,n,i,r,o,s,a,h,u,l,c]})),a=s.length;if(0==a){var h=[];for(i=0;i<e;i++)h.push(u([t.geometry.coordinates[i]],{parent:-1,winding:ur(t.geometry.coordinates[i])}));var l=p(h);return B(),z(),l}var c=[],f=[];for(i=0;i<e;i++){c.push([]);for(var d=0;d<t.geometry.coordinates[i].length-1;d++)c[i].push([new sr(t.geometry.coordinates[i][cr(d+1,t.geometry.coordinates[i].length-1)],1,[i,d],[i,cr(d+1,t.geometry.coordinates[i].length-1)],void 0)]),f.push(new ar(t.geometry.coordinates[i][d],[i,cr(d-1,t.geometry.coordinates[i].length-1)],[i,d],void 0,void 0,!1,!0))}for(i=0;i<a;i++)c[s[i][1]][s[i][2]].push(new sr(s[i][0],s[i][5],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0)),s[i][11]&&f.push(new ar(s[i][0],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0,void 0,!0,!0));var g=f.length;for(i=0;i<c.length;i++)for(d=0;d<c[i].length;d++)c[i][d].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(i=0;i<g;i++)y.push({minX:f[i].coord[0],minY:f[i].coord[1],maxX:f[i].coord[0],maxY:f[i].coord[1],index:i});var m=St();for(m.load(y),i=0;i<c.length;i++)for(d=0;d<c[i].length;d++)for(var _=0;_<c[i][d].length;_++){b=_==c[i][d].length-1?c[i][cr(d+1,t.geometry.coordinates[i].length-1)][0].coord:c[i][d][_+1].coord;var v=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];c[i][d][_].nxtIsectAlongEdgeIn=v.index}for(i=0;i<c.length;i++)for(d=0;d<c[i].length;d++)for(_=0;_<c[i][d].length;_++){var b=c[i][d][_].coord,x=(v=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?f[x].nxtIsectAlongRingAndEdge2=c[i][d][_].nxtIsectAlongEdgeIn:lr(f[x].ringAndEdge1,c[i][d][_].ringAndEdgeIn)?f[x].nxtIsectAlongRingAndEdge1=c[i][d][_].nxtIsectAlongEdgeIn:f[x].nxtIsectAlongRingAndEdge2=c[i][d][_].nxtIsectAlongEdgeIn}var w=[];for(i=0,d=0;d<e;d++){var E=i;for(_=0;_<t.geometry.coordinates[d].length-1;_++)f[i].coord[0]<f[E].coord[0]&&(E=i),i++;var M=f[E].nxtIsectAlongRingAndEdge2;for(_=0;_<f.length;_++)if(f[_].nxtIsectAlongRingAndEdge1==E||f[_].nxtIsectAlongRingAndEdge2==E){var S=_;break}var I=hr([f[S].coord,f[E].coord,f[M].coord],!0)?1:-1;w.push({isect:E,parent:-1,winding:I})}for(w.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),h=[];w.length>0;){var C=w.pop(),P=C.isect,N=C.parent,L=C.winding,O=h.length,k=[f[P].coord],A=P;if(f[P].ringAndEdge1Walkable)var R=f[P].ringAndEdge1,T=f[P].nxtIsectAlongRingAndEdge1;else R=f[P].ringAndEdge2,T=f[P].nxtIsectAlongRingAndEdge2;for(;!lr(f[P].coord,f[T].coord);){k.push(f[T].coord);var D=void 0;for(i=0;i<w.length;i++)if(w[i].isect==T){D=i;break}if(null!=D&&w.splice(D,1),lr(R,f[T].ringAndEdge1)){if(R=f[T].ringAndEdge2,f[T].ringAndEdge2Walkable=!1,f[T].ringAndEdge1Walkable){var F={isect:T};hr([f[A].coord,f[T].coord,f[f[T].nxtIsectAlongRingAndEdge2].coord],1==L)?(F.parent=N,F.winding=-L):(F.parent=O,F.winding=L),w.push(F)}A=T,T=f[T].nxtIsectAlongRingAndEdge2}else R=f[T].ringAndEdge1,f[T].ringAndEdge1Walkable=!1,f[T].ringAndEdge2Walkable&&(F={isect:T},hr([f[A].coord,f[T].coord,f[f[T].nxtIsectAlongRingAndEdge1].coord],1==L)?(F.parent=N,F.winding=-L):(F.parent=O,F.winding=L),w.push(F)),A=T,T=f[T].nxtIsectAlongRingAndEdge1}k.push(f[T].coord),h.push(u([k],{index:O,parent:N,winding:L,netWinding:void 0}))}function B(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<l.features.length;i++)t[e]!=i&&ye(l.features[t[e]].geometry.coordinates[0][0],l.features[i],{ignoreBoundary:!0})&&Ui(l.features[i])<1/0&&(n=i);l.features[t[e]].properties.parent=n}}function z(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,j(t,e)}}function j(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var i=e+l.features[n].properties.winding;l.features[n].properties.netWinding=i,j(n,i)}}return l=p(h),B(),z(),l}var sr=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},ar=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function hr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ur(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(hr([t[cr(e-1,t.length-1)],t[e],t[cr(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function lr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!lr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function cr(t,e){return(t%e+e)%e}var fr=Math.PI/180,pr=180/Math.PI,dr=function(t,e){this.lon=t,this.lat=e,this.x=fr*t,this.y=fr*e};dr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},dr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new dr(e,t)};var gr=function(){this.coords=[],this.length=0};gr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var yr=function(t){this.properties=t||{},this.geometries=[]};yr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},yr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var mr=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new dr(t.x,t.y),this.end=new dr(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function _r(t,e){var n=[],i=Ni();return q(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e);if(r.features.length){var o=br(e,r);n=n.filter((function(t){return t.id!==o.id})),i.remove(o),D(vr(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=vr(t,e).features).forEach((function(t){t.bbox||(t.bbox=yn(J(t)))})),i.load(p(n))})),p(n)}function vr(t,e){var n=[],i=$(t)[0],r=$(t)[t.geometry.coordinates.length-1];if(xr(i,K(e))||xr(r,K(e)))return p([t]);var o=Ni(),s=Jn(t);o.load(s);var a=o.search(e);if(!a.features.length)return p([t]);var h=br(e,a),u=F(s,(function(t,i,r){var o=$(i)[1],s=K(e);return r===h.id?(t.push(s),n.push(c(t)),xr(s,o)?[s]:[s,o]):(t.push(o),t)}),[i]);return u.length>1&&n.push(c(u)),p(n)}function br(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return D(e,(function(e){var r=Ai(e,t).properties.dist;r<i&&(n=e,i=r)})),n}function xr(t,e){return t[0]===e[0]&&t[1]===e[1]}function wr(t,e,n,i,r){void 0===r&&(r={});var o=r.steps||64,s=Er(n),a=Er(i),h=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return c(_n(t,e,r).geometry.coordinates[0],h);for(var u=s,l=s<a?a:a+360,f=u,p=[],d=0;f<l;)p.push(mn(t,e,f,r).geometry.coordinates),f=u+360*++d/o;return f>l&&p.push(mn(t,e,l,r).geometry.coordinates),c(p,h)}function Er(t){var e=t%360;return e<0&&(e+=360),e}function Mr(t,e){void 0===e&&(e={});var n=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Sr(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=it(t).coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},r=[];return n.forEach((function(t){r.push(Ir(t,i))})),p(r)}(n,e);default:throw new Error("invalid poly")}}function Sr(t,e){return void 0===e&&(e={}),Ir(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ir(t,e){return t.length>1?d(t,e):c(t[0],e)}function Cr(t,e){var n,i,r;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(i=e.orderCoords)||void 0===i||i;if("FeatureCollection"===(null!==(r=e.mutate)&&void 0!==r&&r||(t=Me(t)),t.type)){var h=[];return t.features.forEach((function(t){h.push($(Pr(t,{},s,a)))})),y(h,o)}return Pr(t,o,s,a)}function Pr(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var r=it(t),o=r.coordinates,s=r.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Nr(o)),u([o],e);case"MultiLineString":var a=[],h=0;return o.forEach((function(t){if(n&&(t=Nr(t)),i){var e=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.abs(e-i)*Math.abs(n-r)}(J(c(t)));e>h?(a.unshift(t),h=e):a.push(t)}else a.push(t)})),u(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Nr(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}function Lr(t,e){var n,i,r,o,s,a,h;for(i=1;i<=8;i*=2){for(n=[],o=!(kr(r=t[t.length-1],e)&i),s=0;s<t.length;s++)(h=!(kr(a=t[s],e)&i))!==o&&n.push(Or(r,a,i,e)),h&&n.push(a),r=a,o=h;if(!(t=n).length)break}return n}function Or(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function kr(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ar(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=Lr(r[i],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}mr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=pr*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[pr*Math.atan2(r,i),s]},mr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,h=0,u=e&&e.offset?e.offset:10,l=180-u,c=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],y=Math.abs(g-d);y>f&&(g>l&&d<c||d>l&&g<c)?a=!0:y>h&&(h=y)}var m=[];if(a&&h<u){var _=[];m.push(_);for(var v=0;v<n.length;++v){var b=parseFloat(n[v][0]);if(v>0&&Math.abs(b-n[v-1][0])>f){var x=parseFloat(n[v-1][0]),w=parseFloat(n[v-1][1]),E=parseFloat(n[v][0]),M=parseFloat(n[v][1]);if(x>-180&&x<c&&180===E&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<c){_.push([-180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(x>l&&x<180&&-180===E&&v+1<n.length&&n[v-1][0]>l&&n[v-1][0]<180){_.push([180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(x<c&&E>l){var S=x;x=E,E=S;var I=w;w=M,M=I}if(x>l&&E<c&&(E+=360),x<=180&&E>=180&&x<E){var C=(180-x)/(E-x),P=C*M+(1-C)*w;_.push([n[v-1][0]>l?180:-180,P]),(_=[]).push([n[v-1][0]>l?-180:180,P]),m.push(_)}else _=[],m.push(_);_.push([b,n[v][1]])}else _.push([n[v][0],n[v][1]])}}else{var N=[];m.push(N);for(var L=0;L<n.length;++L)N.push([n[L][0],n[L][1]])}for(var O=new yr(this.properties),k=0;k<m.length;++k){var A=new gr;O.geometries.push(A);for(var R=m[k],T=0;T<R.length;++T)A.move_to(R[T])}return O};var Rr=jt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Tr=jt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r})),Dr=jt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,h;if(i(t)||i(o))return!1;if(t.prototype!==o.prototype)return!1;if(Tr(t))return!!Tr(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(r(t)){if(!r(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var u=Rr(t),l=Rr(o)}catch(t){return!1}if(u.length!=l.length)return!1;for(u.sort(),l.sort(),a=u.length-1;a>=0;a--)if(u[a]!=l[a])return!1;for(a=u.length-1;a>=0;a--)if(h=u[a],!n(t[h],o[h],s))return!1;return typeof t==typeof o}(t,o,s))};function i(t){return null==t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function Fr(t,e,n){if(void 0===n&&(n={}),!P(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=Ni(),a=Jn(t);return s.load(a),G(e,(function(t){var e=!1;t&&(D(s.search(t),(function(n){if(!1===e){var o=$(t).sort(),s=$(n).sort();Dr(o,s)||(0===r?Xi(o[0],n)&&Xi(o[1],n):Ai(n,o[0]).properties.dist<=r&&Ai(n,o[1]).properties.dist<=r)?(e=!0,i=i?Br(i,t):t):(0===r?Xi(s[0],t)&&Xi(s[1],t):Ai(t,s[0]).properties.dist<=r&&Ai(t,s[1]).properties.dist<=r)&&(i=i?Br(i,n):n)}})),!1===e&&i&&(o.push(i),i=void 0))})),i&&o.push(i),p(o)}function Br(t,e){var n=$(e),i=$(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return Dr(n[0],r)?s.unshift(n[1]):Dr(n[0],o)?s.push(n[1]):Dr(n[1],r)?s.unshift(n[0]):Dr(n[1],o)&&s.push(n[0]),t}function zr(t){var e=t%360;return e<0&&(e+=360),e}function jr(t,e,n){var i;return void 0===n&&(n={}),(i=n.final?qr(K(e),K(t)):qr(K(t),K(e)))>180?-(360-i):i}function qr(t,e){var n=M(t[1]),i=M(e[1]),r=M(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(r,o))+360)%360}function Ur(t,n,i,r){void 0===r&&(r={});var o=n<0,s=S(Math.abs(n),r.units,"meters");o&&(s=-Math.abs(s));var h=K(t),u=function(t,n,i,r){var o=n/(r=void 0===r?e:Number(r)),s=t[0]*Math.PI/180,a=M(t[1]),h=M(i),u=o*Math.cos(h),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(c)>1e-11?u/c:Math.cos(a);return[(180*(s+o*Math.sin(h)/f)/Math.PI+540)%360-180,180*l/Math.PI]}(h,s,i);return u[0]+=u[0]-h[0]>180?-360:h[0]-u[0]>180?360:0,a(u,r.properties)}function Gr(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=t[s],h=t[s+1];s===t.length-1&&(h=t[0]),i=Wr(a,h,e),n<=0&&i>0?Wr(e,a,r)<0||(r=a):n>0&&i<=0&&(Vr(e,a,o)||(o=a)),n=i}return[r,o]}function Vr(t,e,n){return Wr(t,e,n)>0}function Wr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Hr(t){for(var e,n,i=$(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function Yr(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){Yr(t,e)})),t;case"LineString":return Xr($(t),e),t;case"Polygon":return Zr($(t),e),t;case"MultiLineString":return $(t).forEach((function(t){Xr(t,e)})),t;case"MultiPolygon":return $(t).forEach((function(t){Zr(t,e)})),t;case"Point":case"MultiPoint":return t}}function Xr(t,e){Hr(t)===e&&t.reverse()}function Zr(t,e){Hr(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Hr(t[n])===e&&t[n].reverse()}function Jr(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}(t,i),s=[],a=0;a<o.length;a++){for(var h=o[a],u=[],l=0;l<h.length;l++){var c=h[l];c.properties[n]?u.push(c.properties[n]):u.push(0),!0===r&&(c.properties.matrixPosition=[a,l])}s.push(u)}return s}var Kr={successCallback:null,verbose:!1,polygons:!1},$r={};function Qr(t,e,n,i){i=i||{};for(var r=Object.keys(Kr),o=0;o<r.length;o++){var s=r[o],a=i[s];a=null!=a?a:Kr[s],$r[s]=a}$r.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var h,u=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},s=e+Math.abs(n),a=0;a<i;++a){o.cells[a]=[];for(var h=0;h<r;++h){var u=0,l=t[a+1][h],c=t[a+1][h+1],f=t[a][h+1],p=t[a][h];if(!(isNaN(l)||isNaN(c)||isNaN(f)||isNaN(p))){u|=l<e?0:l>s?128:64,u|=c<e?0:c>s?32:16,u|=f<e?0:f>s?8:4;var d=+(u|=p<e?0:p>s?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var y=(l+c+f+p)/4;g=y>s?2:y<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var m,_,v,b,x,w,E,M;m=_=v=b=x=w=E=M=.5;var S=[];1===u?(v=1-Vo(e,f,p),M=1-Vo(e,l,p),S.push(Bo[u])):169===u?(v=Vo(s,p,f),M=Vo(s,p,l),S.push(Bo[u])):4===u?(w=1-Vo(e,c,f),b=Vo(e,p,f),S.push(Do[u])):166===u?(w=Vo(s,f,c),b=1-Vo(s,f,p),S.push(Do[u])):16===u?(x=Vo(e,f,c),_=Vo(e,l,c),S.push(To[u])):154===u?(x=1-Vo(s,c,f),_=1-Vo(s,c,l),S.push(To[u])):64===u?(E=Vo(e,p,l),m=1-Vo(e,c,l),S.push(jo[u])):106===u?(E=1-Vo(s,l,p),m=Vo(s,l,c),S.push(jo[u])):168===u?(b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),S.push(Fo[u]),S.push(Bo[u])):2===u?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(Fo[u]),S.push(Bo[u])):162===u?(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),S.push(Fo[u]),S.push(Bo[u])):8===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),S.push(To[u]),S.push(Do[u])):138===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(To[u]),S.push(Do[u])):32===u?(x=Vo(s,f,c),w=Vo(e,f,c),m=Vo(e,l,c),_=Vo(s,l,c),S.push(To[u]),S.push(Do[u])):42===u?(M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(zo[u]),S.push(jo[u])):128===u&&(M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(zo[u]),S.push(jo[u])),5===u?(w=1-Vo(e,c,f),M=1-Vo(e,l,p),S.push(Do[u])):165===u?(w=Vo(s,f,c),M=Vo(s,p,l),S.push(Do[u])):20===u?(b=Vo(e,p,f),_=Vo(e,l,c),S.push(Fo[u])):150===u?(b=1-Vo(s,f,p),_=1-Vo(s,c,l),S.push(Fo[u])):80===u?(x=Vo(e,f,c),E=Vo(e,p,l),S.push(To[u])):90===u?(x=1-Vo(s,c,f),E=1-Vo(s,l,p),S.push(To[u])):65===u?(v=1-Vo(e,f,p),m=1-Vo(e,c,l),S.push(Bo[u])):105===u?(v=Vo(s,p,f),m=Vo(s,l,c),S.push(Bo[u])):160===u?(x=Vo(s,f,c),w=Vo(e,f,c),M=Vo(e,p,l),E=Vo(s,p,l),S.push(To[u]),S.push(Do[u])):10===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(To[u]),S.push(Do[u])):130===u?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Fo[u]),S.push(Bo[u])):40===u?(b=Vo(s,p,f),v=Vo(e,p,f),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Fo[u]),S.push(Bo[u])):101===u?(w=Vo(s,f,c),m=Vo(s,l,c),S.push(Do[u])):69===u?(w=1-Vo(e,c,f),m=1-Vo(e,c,l),S.push(Do[u])):149===u?(M=Vo(s,p,l),_=1-Vo(s,c,l),S.push(zo[u])):21===u?(M=1-Vo(e,l,p),_=Vo(e,l,c),S.push(zo[u])):86===u?(b=1-Vo(s,f,p),E=1-Vo(s,l,p),S.push(Fo[u])):84===u?(b=Vo(e,p,f),E=Vo(e,p,l),S.push(Fo[u])):89===u?(x=1-Vo(s,c,f),v=Vo(s,p,f),S.push(Bo[u])):81===u?(x=Vo(e,f,c),v=1-Vo(e,f,p),S.push(Bo[u])):96===u?(x=Vo(s,f,c),w=Vo(e,f,c),E=Vo(e,p,l),m=Vo(s,l,c),S.push(To[u]),S.push(Do[u])):74===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(To[u]),S.push(Do[u])):24===u?(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),_=Vo(e,l,c),S.push(To[u]),S.push(Bo[u])):146===u?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),_=1-Vo(s,c,l),S.push(To[u]),S.push(Bo[u])):6===u?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(Do[u]),S.push(Fo[u])):164===u?(w=Vo(s,f,c),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),S.push(Do[u]),S.push(Fo[u])):129===u?(v=1-Vo(e,f,p),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Bo[u]),S.push(zo[u])):41===u?(v=Vo(s,p,f),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Bo[u]),S.push(zo[u])):66===u?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(Fo[u]),S.push(Bo[u])):104===u?(b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=Vo(s,l,c),S.push(Bo[u]),S.push(qo[u])):144===u?(x=Vo(e,f,c),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l),S.push(To[u]),S.push(jo[u])):26===u?(x=1-Vo(s,c,f),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c),S.push(To[u]),S.push(jo[u])):36===u?(w=Vo(s,f,c),b=Vo(e,p,f),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Do[u]),S.push(Fo[u])):134===u?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Do[u]),S.push(Fo[u])):9===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=1-Vo(e,l,p),S.push(To[u]),S.push(Do[u])):161===u?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=Vo(s,p,l),S.push(To[u]),S.push(Do[u])):37===u?(w=Vo(s,f,c),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Do[u]),S.push(zo[u])):133===u?(w=1-Vo(e,c,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Do[u]),S.push(zo[u])):148===u?(b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l),S.push(Fo[u]),S.push(jo[u])):22===u?(b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c),S.push(Fo[u]),S.push(jo[u])):82===u?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),S.push(To[u]),S.push(Bo[u])):88===u?(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),S.push(To[u]),S.push(Bo[u])):73===u?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),m=1-Vo(e,c,l),S.push(To[u]),S.push(Do[u])):97===u?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),m=Vo(s,l,c),S.push(To[u]),S.push(Do[u])):145===u?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=Vo(s,p,l),_=1-Vo(s,c,l),S.push(To[u]),S.push(zo[u])):25===u?(x=1-Vo(s,c,f),v=Vo(s,p,f),M=1-Vo(e,l,p),_=Vo(e,l,c),S.push(To[u]),S.push(zo[u])):70===u?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(Do[u]),S.push(Fo[u])):100===u?(w=Vo(s,f,c),b=Vo(e,p,f),E=Vo(e,p,l),m=Vo(s,l,c),S.push(Do[u]),S.push(Fo[u])):34===u?(0===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(To[u]),S.push(Do[u]),S.push(zo[u]),S.push(jo[u])):35===u?(4===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(To[u]),S.push(Do[u]),S.push(Bo[u]),S.push(jo[u])):136===u?(0===g?(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[u]),S.push(Do[u]),S.push(zo[u]),S.push(jo[u])):153===u?(0===g?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[u]),S.push(Bo[u])):102===u?(0===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(Do[u]),S.push(jo[u])):155===u?(4===g?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[u]),S.push(zo[u])):103===u?(4===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(Do[u]),S.push(Fo[u])):152===u?(0===g?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[u]),S.push(Fo[u]),S.push(Bo[u])):156===u?(4===g?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[u]),S.push(Bo[u]),S.push(jo[u])):137===u?(0===g?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[u]),S.push(Do[u]),S.push(Bo[u])):139===u?(4===g?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[u]),S.push(Do[u]),S.push(zo[u])):98===u?(0===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(To[u]),S.push(Do[u]),S.push(jo[u])):99===u?(4===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(To[u]),S.push(Do[u]),S.push(Bo[u])):38===u?(0===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(Do[u]),S.push(zo[u]),S.push(jo[u])):39===u?(4===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(Do[u]),S.push(Fo[u]),S.push(jo[u])):85===u&&(x=1,w=0,b=1,v=0,M=0,E=1,m=0,_=1),(m<0||m>1||_<0||_>1||x<0||x>1||b<0||b>1||M<0||M>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+l+","+c+","+f+","+p+" "+g+" "+m+" "+_+" "+x+" "+w+" "+b+" "+v+" "+M+" "+E),o.cells[a][h]={cval:u,cval_real:d,flipped:g,topleft:m,topright:_,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:M,lefttop:E,edges:S}}}}}return o}(t,e,n);return $r.polygons?($r.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),h=function(t){var e=[],n=0;return t.cells.forEach((function(t,i){t.forEach((function(t,r){if(void 0!==t){var o=Go[t.cval](t);"object"==typeof o&&Wo(o)?"object"==typeof o[0]&&Wo(o[0])?"object"==typeof o[0][0]&&Wo(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):($r.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),h=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Yo(t.cells[o][s]),h=null,u=s,l=o;null!==a&&r.push([a.p[0]+u,a.p[1]+l]);do{if(null===(h=Xo(t.cells[l][u],a.x,a.y,a.o)))break;if(r.push([h.p[0]+u,h.p[1]+l]),u+=h.x,a=h,(l+=h.y)<0||l>=n||u<0||u>=i||void 0===t.cells[l][u]){var c=Ho(t,u-=h.x,l-=h.y,h.x,h.y,h.o);if(null===c)break;c.path.forEach((function(t){r.push(t)})),u=c.i,l=c.j,a=c}}while(void 0!==t.cells[l][u]&&t.cells[l][u].edges.length>0);e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(u)),"function"==typeof $r.successCallback&&$r.successCallback(h),h}var to=64,eo=16,no=[],io=[],ro=[],oo=[],so=[],ao=[],ho=[],uo=[],lo=[],co=[],fo=[],po=[],go=[],yo=[],mo=[],_o=[],vo=[],bo=[],xo=[],wo=[],Eo=[],Mo=[],So=[],Io=[];ho[85]=co[85]=-1,uo[85]=fo[85]=0,lo[85]=po[85]=1,xo[85]=Mo[85]=1,wo[85]=So[85]=0,Eo[85]=Io[85]=1,no[85]=oo[85]=0,io[85]=so[85]=-1,ro[85]=mo[85]=0,_o[85]=go[85]=0,vo[85]=yo[85]=1,ao[85]=bo[85]=1,Mo[1]=Mo[169]=0,So[1]=So[169]=-1,Io[1]=Io[169]=0,go[1]=go[169]=-1,yo[1]=yo[169]=0,mo[1]=mo[169]=0,co[4]=co[166]=0,fo[4]=fo[166]=-1,po[4]=po[166]=1,_o[4]=_o[166]=1,vo[4]=vo[166]=0,bo[4]=bo[166]=0,ho[16]=ho[154]=0,uo[16]=uo[154]=1,lo[16]=lo[154]=1,oo[16]=oo[154]=1,so[16]=so[154]=0,ao[16]=ao[154]=1,xo[64]=xo[106]=0,wo[64]=wo[106]=1,Eo[64]=Eo[106]=0,no[64]=no[106]=-1,io[64]=io[106]=0,ro[64]=ro[106]=1,xo[2]=xo[168]=0,wo[2]=wo[168]=-1,Eo[2]=Eo[168]=1,Mo[2]=Mo[168]=0,So[2]=So[168]=-1,Io[2]=Io[168]=0,go[2]=go[168]=-1,yo[2]=yo[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,vo[2]=vo[168]=0,bo[2]=bo[168]=1,ho[8]=ho[162]=0,uo[8]=uo[162]=-1,lo[8]=lo[162]=0,co[8]=co[162]=0,fo[8]=fo[162]=-1,po[8]=po[162]=1,go[8]=go[162]=1,yo[8]=yo[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,vo[8]=vo[162]=0,bo[8]=bo[162]=0,ho[32]=ho[138]=0,uo[32]=uo[138]=1,lo[32]=lo[138]=1,co[32]=co[138]=0,fo[32]=fo[138]=1,po[32]=po[138]=0,no[32]=no[138]=1,io[32]=io[138]=0,ro[32]=ro[138]=0,oo[32]=oo[138]=1,so[32]=so[138]=0,ao[32]=ao[138]=1,Mo[128]=Mo[42]=0,So[128]=So[42]=1,Io[128]=Io[42]=1,xo[128]=xo[42]=0,wo[128]=wo[42]=1,Eo[128]=Eo[42]=0,no[128]=no[42]=-1,io[128]=io[42]=0,ro[128]=ro[42]=1,oo[128]=oo[42]=-1,so[128]=so[42]=0,ao[128]=ao[42]=0,co[5]=co[165]=-1,fo[5]=fo[165]=0,po[5]=po[165]=0,Mo[5]=Mo[165]=1,So[5]=So[165]=0,Io[5]=Io[165]=0,_o[20]=_o[150]=0,vo[20]=vo[150]=1,bo[20]=bo[150]=1,oo[20]=oo[150]=0,so[20]=so[150]=-1,ao[20]=ao[150]=1,ho[80]=ho[90]=-1,uo[80]=uo[90]=0,lo[80]=lo[90]=1,xo[80]=xo[90]=1,wo[80]=wo[90]=0,Eo[80]=Eo[90]=1,go[65]=go[105]=0,yo[65]=yo[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,io[65]=io[105]=-1,ro[65]=ro[105]=0,ho[160]=ho[10]=-1,uo[160]=uo[10]=0,lo[160]=lo[10]=1,co[160]=co[10]=-1,fo[160]=fo[10]=0,po[160]=po[10]=0,Mo[160]=Mo[10]=1,So[160]=So[10]=0,Io[160]=Io[10]=0,xo[160]=xo[10]=1,wo[160]=wo[10]=0,Eo[160]=Eo[10]=1,_o[130]=_o[40]=0,vo[130]=vo[40]=1,bo[130]=bo[40]=1,go[130]=go[40]=0,yo[130]=yo[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,io[130]=io[40]=-1,ro[130]=ro[40]=0,oo[130]=oo[40]=0,so[130]=so[40]=-1,ao[130]=ao[40]=1,co[37]=co[133]=0,fo[37]=fo[133]=1,po[37]=po[133]=1,Mo[37]=Mo[133]=0,So[37]=So[133]=1,Io[37]=Io[133]=0,no[37]=no[133]=-1,io[37]=io[133]=0,ro[37]=ro[133]=0,oo[37]=oo[133]=1,so[37]=so[133]=0,ao[37]=ao[133]=0,_o[148]=_o[22]=-1,vo[148]=vo[22]=0,bo[148]=bo[22]=0,Mo[148]=Mo[22]=0,So[148]=So[22]=-1,Io[148]=Io[22]=1,xo[148]=xo[22]=0,wo[148]=wo[22]=1,Eo[148]=Eo[22]=1,oo[148]=oo[22]=-1,so[148]=so[22]=0,ao[148]=ao[22]=1,ho[82]=ho[88]=0,uo[82]=uo[88]=-1,lo[82]=lo[88]=1,_o[82]=_o[88]=1,vo[82]=vo[88]=0,bo[82]=bo[88]=1,go[82]=go[88]=-1,yo[82]=yo[88]=0,mo[82]=mo[88]=1,xo[82]=xo[88]=0,wo[82]=wo[88]=-1,Eo[82]=Eo[88]=0,ho[73]=ho[97]=0,uo[73]=uo[97]=1,lo[73]=lo[97]=0,co[73]=co[97]=0,fo[73]=fo[97]=-1,po[73]=po[97]=0,go[73]=go[97]=1,yo[73]=yo[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,io[73]=io[97]=0,ro[73]=ro[97]=1,ho[145]=ho[25]=0,uo[145]=uo[25]=-1,lo[145]=lo[25]=0,go[145]=go[25]=1,yo[145]=yo[25]=0,mo[145]=mo[25]=1,Mo[145]=Mo[25]=0,So[145]=So[25]=1,Io[145]=Io[25]=1,oo[145]=oo[25]=-1,so[145]=so[25]=0,ao[145]=ao[25]=0,co[70]=co[100]=0,fo[70]=fo[100]=1,po[70]=po[100]=0,_o[70]=_o[100]=-1,vo[70]=vo[100]=0,bo[70]=bo[100]=1,xo[70]=xo[100]=0,wo[70]=wo[100]=-1,Eo[70]=Eo[100]=1,no[70]=no[100]=1,io[70]=io[100]=0,ro[70]=ro[100]=0,co[101]=co[69]=0,fo[101]=fo[69]=1,po[101]=po[69]=0,no[101]=no[69]=1,io[101]=io[69]=0,ro[101]=ro[69]=0,Mo[149]=Mo[21]=0,So[149]=So[21]=1,Io[149]=Io[21]=1,oo[149]=oo[21]=-1,so[149]=so[21]=0,ao[149]=ao[21]=0,_o[86]=_o[84]=-1,vo[86]=vo[84]=0,bo[86]=bo[84]=1,xo[86]=xo[84]=0,wo[86]=wo[84]=-1,Eo[86]=Eo[84]=1,ho[89]=ho[81]=0,uo[89]=uo[81]=-1,lo[89]=lo[81]=0,go[89]=go[81]=1,yo[89]=yo[81]=0,mo[89]=mo[81]=1,ho[96]=ho[74]=0,uo[96]=uo[74]=1,lo[96]=lo[74]=0,co[96]=co[74]=-1,fo[96]=fo[74]=0,po[96]=po[74]=1,xo[96]=xo[74]=1,wo[96]=wo[74]=0,Eo[96]=Eo[74]=0,no[96]=no[74]=1,io[96]=io[74]=0,ro[96]=ro[74]=1,ho[24]=ho[146]=0,uo[24]=uo[146]=-1,lo[24]=lo[146]=1,_o[24]=_o[146]=1,vo[24]=vo[146]=0,bo[24]=bo[146]=1,go[24]=go[146]=0,yo[24]=yo[146]=1,mo[24]=mo[146]=1,oo[24]=oo[146]=0,so[24]=so[146]=-1,ao[24]=ao[146]=0,co[6]=co[164]=-1,fo[6]=fo[164]=0,po[6]=po[164]=1,_o[6]=_o[164]=-1,vo[6]=vo[164]=0,bo[6]=bo[164]=0,Mo[6]=Mo[164]=0,So[6]=So[164]=-1,Io[6]=Io[164]=1,xo[6]=xo[164]=1,wo[6]=wo[164]=0,Eo[6]=Eo[164]=0,go[129]=go[41]=0,yo[129]=yo[41]=1,mo[129]=mo[41]=1,Mo[129]=Mo[41]=0,So[129]=So[41]=1,Io[129]=Io[41]=0,no[129]=no[41]=-1,io[129]=io[41]=0,ro[129]=ro[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=-1,ao[129]=ao[41]=0,_o[66]=_o[104]=0,vo[66]=vo[104]=1,bo[66]=bo[104]=0,go[66]=go[104]=-1,yo[66]=yo[104]=0,mo[66]=mo[104]=1,xo[66]=xo[104]=0,wo[66]=wo[104]=-1,Eo[66]=Eo[104]=0,no[66]=no[104]=0,io[66]=io[104]=-1,ro[66]=ro[104]=1,ho[144]=ho[26]=-1,uo[144]=uo[26]=0,lo[144]=lo[26]=0,Mo[144]=Mo[26]=1,So[144]=So[26]=0,Io[144]=Io[26]=1,xo[144]=xo[26]=0,wo[144]=wo[26]=1,Eo[144]=Eo[26]=1,oo[144]=oo[26]=-1,so[144]=so[26]=0,ao[144]=ao[26]=1,co[36]=co[134]=0,fo[36]=fo[134]=1,po[36]=po[134]=1,_o[36]=_o[134]=0,vo[36]=vo[134]=1,bo[36]=bo[134]=0,no[36]=no[134]=0,io[36]=io[134]=-1,ro[36]=ro[134]=1,oo[36]=oo[134]=1,so[36]=so[134]=0,ao[36]=ao[134]=0,ho[9]=ho[161]=-1,uo[9]=uo[161]=0,lo[9]=lo[161]=0,co[9]=co[161]=0,fo[9]=fo[161]=-1,po[9]=po[161]=0,go[9]=go[161]=1,yo[9]=yo[161]=0,mo[9]=mo[161]=0,Mo[9]=Mo[161]=1,So[9]=So[161]=0,Io[9]=Io[161]=1,ho[136]=0,uo[136]=1,lo[136]=1,co[136]=0,fo[136]=1,po[136]=0,_o[136]=-1,vo[136]=0,bo[136]=1,go[136]=-1,yo[136]=0,mo[136]=0,Mo[136]=0,So[136]=-1,Io[136]=0,xo[136]=0,wo[136]=-1,Eo[136]=1,no[136]=1,io[136]=0,ro[136]=0,oo[136]=1,so[136]=0,ao[136]=1,ho[34]=0,uo[34]=-1,lo[34]=0,co[34]=0,fo[34]=-1,po[34]=1,_o[34]=1,vo[34]=0,bo[34]=0,go[34]=1,yo[34]=0,mo[34]=1,Mo[34]=0,So[34]=1,Io[34]=1,xo[34]=0,wo[34]=1,Eo[34]=0,no[34]=-1,io[34]=0,ro[34]=1,oo[34]=-1,so[34]=0,ao[34]=0,ho[35]=0,uo[35]=1,lo[35]=1,co[35]=0,fo[35]=-1,po[35]=1,_o[35]=1,vo[35]=0,bo[35]=0,go[35]=-1,yo[35]=0,mo[35]=0,Mo[35]=0,So[35]=-1,Io[35]=0,xo[35]=0,wo[35]=1,Eo[35]=0,no[35]=-1,io[35]=0,ro[35]=1,oo[35]=1,so[35]=0,ao[35]=1,ho[153]=0,uo[153]=1,lo[153]=1,go[153]=-1,yo[153]=0,mo[153]=0,Mo[153]=0,So[153]=-1,Io[153]=0,oo[153]=1,so[153]=0,ao[153]=1,co[102]=0,fo[102]=-1,po[102]=1,_o[102]=1,vo[102]=0,bo[102]=0,xo[102]=0,wo[102]=1,Eo[102]=0,no[102]=-1,io[102]=0,ro[102]=1,ho[155]=0,uo[155]=-1,lo[155]=0,go[155]=1,yo[155]=0,mo[155]=1,Mo[155]=0,So[155]=1,Io[155]=1,oo[155]=-1,so[155]=0,ao[155]=0,co[103]=0,fo[103]=1,po[103]=0,_o[103]=-1,vo[103]=0,bo[103]=1,xo[103]=0,wo[103]=-1,Eo[103]=1,no[103]=1,io[103]=0,ro[103]=0,ho[152]=0,uo[152]=1,lo[152]=1,_o[152]=-1,vo[152]=0,bo[152]=1,go[152]=-1,yo[152]=0,mo[152]=0,Mo[152]=0,So[152]=-1,Io[152]=0,xo[152]=0,wo[152]=-1,Eo[152]=1,oo[152]=1,so[152]=0,ao[152]=1,ho[156]=0,uo[156]=-1,lo[156]=1,_o[156]=1,vo[156]=0,bo[156]=1,go[156]=-1,yo[156]=0,mo[156]=0,Mo[156]=0,So[156]=-1,Io[156]=0,xo[156]=0,wo[156]=1,Eo[156]=1,oo[156]=-1,so[156]=0,ao[156]=1,ho[137]=0,uo[137]=1,lo[137]=1,co[137]=0,fo[137]=1,po[137]=0,go[137]=-1,yo[137]=0,mo[137]=0,Mo[137]=0,So[137]=-1,Io[137]=0,no[137]=1,io[137]=0,ro[137]=0,oo[137]=1,so[137]=0,ao[137]=1,ho[139]=0,uo[139]=1,lo[139]=1,co[139]=0,fo[139]=-1,po[139]=0,go[139]=1,yo[139]=0,mo[139]=0,Mo[139]=0,So[139]=1,Io[139]=0,no[139]=-1,io[139]=0,ro[139]=0,oo[139]=1,so[139]=0,ao[139]=1,ho[98]=0,uo[98]=-1,lo[98]=0,co[98]=0,fo[98]=-1,po[98]=1,_o[98]=1,vo[98]=0,bo[98]=0,go[98]=1,yo[98]=0,mo[98]=1,xo[98]=0,wo[98]=1,Eo[98]=0,no[98]=-1,io[98]=0,ro[98]=1,ho[99]=0,uo[99]=1,lo[99]=0,co[99]=0,fo[99]=-1,po[99]=1,_o[99]=1,vo[99]=0,bo[99]=0,go[99]=-1,yo[99]=0,mo[99]=1,xo[99]=0,wo[99]=-1,Eo[99]=0,no[99]=1,io[99]=0,ro[99]=1,co[38]=0,fo[38]=-1,po[38]=1,_o[38]=1,vo[38]=0,bo[38]=0,Mo[38]=0,So[38]=1,Io[38]=1,xo[38]=0,wo[38]=1,Eo[38]=0,no[38]=-1,io[38]=0,ro[38]=1,oo[38]=-1,so[38]=0,ao[38]=0,co[39]=0,fo[39]=1,po[39]=1,_o[39]=-1,vo[39]=0,bo[39]=0,Mo[39]=0,So[39]=-1,Io[39]=1,xo[39]=0,wo[39]=1,Eo[39]=0,no[39]=-1,io[39]=0,ro[39]=1,oo[39]=1,so[39]=0,ao[39]=0;var Co=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Po=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},No=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Lo=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ko=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ao=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ro=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},To=[],Do=[],Fo=[],Bo=[],zo=[],jo=[],qo=[],Uo=[];Bo[1]=zo[1]=18,Bo[169]=zo[169]=18,Fo[4]=Do[4]=12,Fo[166]=Do[166]=12,To[16]=Uo[16]=4,To[154]=Uo[154]=4,jo[64]=qo[64]=22,jo[106]=qo[106]=22,Fo[2]=jo[2]=17,Bo[2]=zo[2]=18,Fo[168]=jo[168]=17,Bo[168]=zo[168]=18,To[8]=Bo[8]=9,Do[8]=Fo[8]=12,To[162]=Bo[162]=9,Do[162]=Fo[162]=12,To[32]=Uo[32]=4,Do[32]=qo[32]=1,To[138]=Uo[138]=4,Do[138]=qo[138]=1,zo[128]=Uo[128]=21,jo[128]=qo[128]=22,zo[42]=Uo[42]=21,jo[42]=qo[42]=22,Do[5]=zo[5]=14,Do[165]=zo[165]=14,Fo[20]=Uo[20]=6,Fo[150]=Uo[150]=6,To[80]=jo[80]=11,To[90]=jo[90]=11,Bo[65]=qo[65]=3,Bo[105]=qo[105]=3,To[160]=jo[160]=11,Do[160]=zo[160]=14,To[10]=jo[10]=11,Do[10]=zo[10]=14,Fo[130]=Uo[130]=6,Bo[130]=qo[130]=3,Fo[40]=Uo[40]=6,Bo[40]=qo[40]=3,Do[101]=qo[101]=1,Do[69]=qo[69]=1,zo[149]=Uo[149]=21,zo[21]=Uo[21]=21,Fo[86]=jo[86]=17,Fo[84]=jo[84]=17,To[89]=Bo[89]=9,To[81]=Bo[81]=9,To[96]=qo[96]=0,Do[96]=jo[96]=15,To[74]=qo[74]=0,Do[74]=jo[74]=15,To[24]=Fo[24]=8,Bo[24]=Uo[24]=7,To[146]=Fo[146]=8,Bo[146]=Uo[146]=7,Do[6]=jo[6]=15,Fo[6]=zo[6]=16,Do[164]=jo[164]=15,Fo[164]=zo[164]=16,Bo[129]=Uo[129]=7,zo[129]=qo[129]=20,Bo[41]=Uo[41]=7,zo[41]=qo[41]=20,Fo[66]=qo[66]=2,Bo[66]=jo[66]=19,Fo[104]=qo[104]=2,Bo[104]=jo[104]=19,To[144]=zo[144]=10,jo[144]=Uo[144]=23,To[26]=zo[26]=10,jo[26]=Uo[26]=23,Do[36]=Uo[36]=5,Fo[36]=qo[36]=2,Do[134]=Uo[134]=5,Fo[134]=qo[134]=2,To[9]=zo[9]=10,Do[9]=Bo[9]=13,To[161]=zo[161]=10,Do[161]=Bo[161]=13,Do[37]=Uo[37]=5,zo[37]=qo[37]=20,Do[133]=Uo[133]=5,zo[133]=qo[133]=20,Fo[148]=zo[148]=16,jo[148]=Uo[148]=23,Fo[22]=zo[22]=16,jo[22]=Uo[22]=23,To[82]=Fo[82]=8,Bo[82]=jo[82]=19,To[88]=Fo[88]=8,Bo[88]=jo[88]=19,To[73]=qo[73]=0,Do[73]=Bo[73]=13,To[97]=qo[97]=0,Do[97]=Bo[97]=13,To[145]=Bo[145]=9,zo[145]=Uo[145]=21,To[25]=Bo[25]=9,zo[25]=Uo[25]=21,Do[70]=qo[70]=1,Fo[70]=jo[70]=17,Do[100]=qo[100]=1,Fo[100]=jo[100]=17,To[34]=Bo[34]=9,Do[34]=Fo[34]=12,zo[34]=Uo[34]=21,jo[34]=qo[34]=22,To[136]=Uo[136]=4,Do[136]=qo[136]=1,Fo[136]=jo[136]=17,Bo[136]=zo[136]=18,To[35]=Uo[35]=4,Do[35]=Fo[35]=12,Bo[35]=zo[35]=18,jo[35]=qo[35]=22,To[153]=Uo[153]=4,Bo[153]=zo[153]=18,Do[102]=Fo[102]=12,jo[102]=qo[102]=22,To[155]=Bo[155]=9,zo[155]=Uo[155]=23,Do[103]=qo[103]=1,Fo[103]=jo[103]=17,To[152]=Uo[152]=4,Fo[152]=jo[152]=17,Bo[152]=zo[152]=18,To[156]=Fo[156]=8,Bo[156]=zo[156]=18,jo[156]=Uo[156]=23,To[137]=Uo[137]=4,Do[137]=qo[137]=1,Bo[137]=zo[137]=18,To[139]=Uo[139]=4,Do[139]=Bo[139]=13,zo[139]=qo[139]=20,To[98]=Bo[98]=9,Do[98]=Fo[98]=12,jo[98]=qo[98]=22,To[99]=qo[99]=0,Do[99]=Fo[99]=12,Bo[99]=jo[99]=19,Do[38]=Fo[38]=12,zo[38]=Uo[38]=21,jo[38]=qo[38]=22,Do[39]=Uo[39]=5,Fo[39]=zo[39]=16,jo[39]=qo[39]=22;var Go=[];function Vo(t,e,n){return(t-e)/(n-e)}function Wo(t){return t.constructor.toString().indexOf("Array")>-1}function Ho(t,e,n,i,r,o){for(var s=t.cells[n][e],a=s.cval_real,h=e+i,u=n+r,l=[],c=!1;!c;){if(void 0===t.cells[u]||void 0===t.cells[u][h])if(u-=r,h-=i,a=(s=t.cells[u][h]).cval_real,-1===r)if(0===o)if(1&a)l.push([h,u]),i=-1,r=0,o=0;else{if(!(4&a)){l.push([h+s.bottomright,u]),i=0,r=1,o=1,c=!0;break}l.push([h+1,u]),i=1,r=0,o=0}else{if(!(1&a)){if(4&a){l.push([h+s.bottomright,u]),i=0,r=1,o=1,c=!0;break}l.push([h+s.bottomleft,u]),i=0,r=1,o=0,c=!0;break}l.push([h,u]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&eo)){if(a&to){l.push([h+s.topleft,u+1]),i=0,r=-1,o=0,c=!0;break}l.push([h+s.topright,u+1]),i=0,r=-1,o=1,c=!0;break}l.push([h+1,u+1]),i=1,r=0,o=1}else l.push([h+1,u+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(a&to)){if(1&a){l.push([h,u+s.leftbottom]),i=1,r=0,o=0,c=!0;break}l.push([h,u+s.lefttop]),i=1,r=0,o=1,c=!0;break}l.push([h,u+1]),i=0,r=1,o=0}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([h,u+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){l.push([h+1,u+s.rightbottom]),i=-1,r=0,o=0,c=!0;break}l.push([h+1,u]),i=0,r=-1,o=1}else{if(!(4&a)){if(a&eo){l.push([h+1,u+s.righttop]),i=-1,r=0,o=1;break}l.push([h+1,u+s.rightbottom]),i=-1,r=0,o=0,c=!0;break}l.push([h+1,u]),i=0,r=-1,o=1}}else if(a=(s=t.cells[u][h]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][h])i=0,r=-1,o=1;else{if(!(1&a)){l.push([h+s.bottomright,u]),i=0,r=1,o=1,c=!0;break}l.push([h,u])}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+h+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][h])i=0,r=1,o=0;else{if(!(a&eo)){l.push([h+s.topleft,u+1]),i=0,r=-1,o=0,c=!0;break}l.push([h+1,u+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][h+1])i=1,r=0,o=1;else{if(!(4&a)){l.push([h+1,u+s.righttop]),i=-1,r=0,o=1,c=!0;break}l.push([h+1,u]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][h-1])i=-1,r=0,o=0;else{if(!(a&to)){l.push([h,u+s.leftbottom]),i=1,r=0,o=0,c=!0;break}l.push([h,u+1]),i=0,r=1,o=0}}if(u+=r,(h+=i)===e&&u===n)break}return{path:l,i:h,j:u,x:i,y:r,o:o}}function Yo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&to?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&to?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&to?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&to?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&eo?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&eo?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Xo(t,e,n,i){var r,o,s,a,h,u=t.cval;switch(e){case-1:0===i?(r=Do[u],s=co[u],a=fo[u],h=po[u]):(r=To[u],s=ho[u],a=uo[u],h=lo[u]);break;case 1:0===i?(r=zo[u],s=Mo[u],a=So[u],h=Io[u]):(r=jo[u],s=xo[u],a=wo[u],h=Eo[u]);break;default:switch(n){case-1:0===i?(r=qo[u],s=no[u],a=io[u],h=ro[u]):(r=Uo[u],s=oo[u],a=so[u],h=ao[u]);break;case 1:0===i?(r=Bo[u],s=go[u],a=yo[u],h=mo[u]):(r=Fo[u],s=_o[u],a=vo[u],h=bo[u])}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,r){case 0:u&eo?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&u?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&u?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&u?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&eo?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&u?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&u?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&u?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&u?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&u?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&u?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&to?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&u?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&u?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&u?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&to?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&u?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&to?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&u?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&to?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&to?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&eo?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&to?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&eo?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==h||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+h)),{p:[e,n],x:s,y:a,o:h}}function Zo(t){var e=[],n=[];t.forEach((function(t){var i=Ui(u([t]));n.push(i),e.push({ring:t,area:i})})),n.sort((function(t,e){return e-t}));var i=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}})),i}function Jo(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!$o(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=u([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||Ko(u([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}function Ko(t,e){for(var n=wn(t),i=0;i<n.features.length;i++)if(!ye(n.features[i],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Qo(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=xn(t)),!1!==r&&void 0!==r||(t=Me(t)),k(t,(function(t){var n=jr(i,t)+e,r=Ri(i,t),o=$(Ur(i,r,n));t[0]=o[0],t[1]=o[1]}))),t}function ts(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=Me(t)),"FeatureCollection"!==t.type||o?es(t,e,i):(D(t,(function(n,r){t.features[r]=es(n,e,i)})),t)}function es(t,e,n){var i="Point"===rt(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return K(e);var n=t.bbox?t.bbox:J(t),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return a([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return a([o,s]);case"center":return bn(t);case void 0:case null:case"centroid":return xn(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||k(t,(function(t){var i=Ri(n,t),r=jr(n,t),o=$(Ur(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ns(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function is(t,e){return t[0]*e[1]-e[0]*t[1]}function rs(t,e){return!function(t,e){return 0===is(ns(t),ns(e))}(t,e)&&function(t,e){var n,i,r=t[0],o=ns(t),s=e[0],a=ns(e),h=is(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(is((i=r,[(n=s)[0]-i[0],n[1]-i[1]]),a)/h,o))}(t,e)}function os(t,e,n){var i=[],r=x(e,n),o=$(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(u=t,l=o[e+1],c=r,f=Math.sqrt((u[0]-l[0])*(u[0]-l[0])+(u[1]-l[1])*(u[1]-l[1])),p=u[0]+c*(l[1]-u[1])/f,d=l[0]+c*(l[1]-u[1])/f,[[p,u[1]+c*(u[0]-l[0])/f],[d,l[1]+c*(u[0]-l[0])/f]]);if(i.push(n),e>0){var a=i[e-1],h=rs(n,a);!1!==h&&(a[1]=h,n[0]=h),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var u,l,c,f,p,d})),c(s,t.properties)}function ss(t,e,n){var i=e[0]-t[0],r=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(i*(n[1]-e[1])-o*r)}function as(t,e){return e.geometry.coordinates[0].every((function(e){return ye(a(e),t)}))}Go[1]=Go[169]=Co,Go[4]=Go[166]=Po,Go[16]=Go[154]=No,Go[64]=Go[106]=Lo,Go[168]=Go[2]=Oo,Go[162]=Go[8]=ko,Go[138]=Go[32]=Ao,Go[42]=Go[128]=Ro,Go[5]=Go[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Go[20]=Go[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Go[80]=Go[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Go[65]=Go[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Go[160]=Go[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Go[130]=Go[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Go[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Go[101]=Go[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Go[149]=Go[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Go[86]=Go[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Go[89]=Go[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Go[96]=Go[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Go[24]=Go[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Go[6]=Go[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Go[129]=Go[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Go[66]=Go[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Go[144]=Go[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Go[36]=Go[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Go[9]=Go[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Go[37]=Go[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Go[148]=Go[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Go[82]=Go[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Go[73]=Go[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Go[145]=Go[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Go[70]=Go[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Go[34]=function(t){return[Ro(t),ko(t)]},Go[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Go[136]=function(t){return[Ao(t),Oo(t)]},Go[153]=function(t){return[No(t),Co(t)]},Go[102]=function(t){return[Po(t),Lo(t)]},Go[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Go[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Go[152]=function(t){return[No(t),Oo(t)]},Go[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Go[137]=function(t){return[Ao(t),Co(t)]},Go[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Go[98]=function(t){return[ko(t),Lo(t)]},Go[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Go[38]=function(t){return[Po(t),Ro(t)]},Go[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var hs=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=ss(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),us=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return c([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return ss(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),ls=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=ss(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return g(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=u([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=gn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,r=t.getEnvelope();return e.forEach((function(e){var o,s,h,u,l,c,f=e.getEnvelope();if(i&&(n=i.getEnvelope()),s=r,h=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),u=o.geometry.coordinates[0].map((function(t){return t[1]})),l=s.geometry.coordinates[0].map((function(t){return t[0]})),c=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,h)!==Math.max.apply(null,l)||Math.max.apply(null,u)!==Math.max.apply(null,c)||Math.min.apply(null,h)!==Math.min.apply(null,l)||Math.min.apply(null,u)!==Math.min.apply(null,c))&&as(f,r)){for(var p=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){var n,i;return n=t,i=e.from.coordinates,n[0]===i[0]&&n[1]===i[1]}))||(d=t)},y=0,m=p;y<m.length;y++)g(m[y]);d&&e.inside(a(d))&&(i&&!as(n,f)||(i=e))}})),i},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),cs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return q(e,(function(t){et(t,"LineString","Graph::fromGeoJson"),A(t,(function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e}))})),n},t.prototype.getNode=function(t){var e=hs.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new hs(t)),n},t.prototype.addEdge=function(t,e){var n=new us(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,h=void 0,u=void 0;s.label===e&&(h=s),a.label===e&&(u=a),h&&u&&(u&&(i=u),h&&(i&&(i.next=h,i=void 0),n||(n=h)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new ls;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function fs(t,e){var n=!0;return q(t,(function(t){q(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,i=e.coordinates,!(n[0]===i[0]&&n[1]===i[1]);case"LineString":return!ps(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!ps(t,e);case"LineString":return!function(t,e){return Oi(t,e).features.length>0}(t,e);case"Polygon":return!ds(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!ds(t,e);case"Polygon":return!function(t,e){for(var n=0,i=t.coordinates[0];n<i.length;n++)if(ye(i[n],e))return!0;for(var r=0,o=e.coordinates[0];r<o.length;r++)if(ye(o[r],t))return!0;return Oi(Mr(t),Mr(e)).features.length>0}(e,t)}}var n,i;return!1}(t.geometry,e.geometry)}))})),n}function ps(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(gs(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ds(t,e){for(var n=0,i=e.coordinates;n<i.length;n++)if(ye(i[n],t))return!0;return Oi(e,Mr(t)).features.length>0}function gs(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ys(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function _s(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function vs(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),ws(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function bs(t,e){return Oi(t,Sr(e)).features.length>0}function xs(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)ye(a(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function ws(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Es=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Is};function Ms(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ss(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Is(t,e){return Dr(t,e,{strict:!0})}Es.prototype.compare=function(t,e){if(t.type!==e.type||!Ss(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=Ms(t),r=Ms(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},Es.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Es.prototype.compareLine=function(t,e,n,i){if(!Ss(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},Es.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},Es.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Es.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},Es.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Es.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Es.prototype.removePseudo=function(t){return t};var Cs=Es;function Ps(t,e){var n=!1;return q(t,(function(t){q(e,(function(e){if(!0===n)return!0;n=!fs(t.geometry,e.geometry)}))})),n}var Ns=jt((function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ls=jt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,h=0;h<l;h++)s[h]=0;for(var u=0;u<n;u++){var l=this.dataset[u].length;if(o===this.assignments[u]){for(h=0;h<l;h++)s[h]+=this.dataset[u][h];a++}}if(a>0){for(h=0;h<l;h++)s[h]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Os=jt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),ks=jt((function(t){if(t.exports)var e=Os;function n(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}n.prototype.run=function(t,n,i,r){this._init(t,n,i,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var h=new e(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,h),this._expandCluster(a,h))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},n.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},n.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),As=jt((function(t){t.exports&&(t.exports={DBSCAN:Ns,KMEANS:Ls,OPTICS:ks,PriorityQueue:Os})})),Rs=function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},Ts=Rs,Ds=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},Fs=Rs,Bs=function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],h=s?a.join("_"):""+a;n[h]||(n[h]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i},zs=function(t,e){var n=t[0].length?Ts:Ds,i=[],r=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*r)];for(o&&s.join("_"),i.push(s);i.length<e;){for(var a=[],h=i.length,u=0,l=[],c=0;c<r;c++){for(var f=1/0,p=0;p<h;p++){var d=n(t[c],i[p]);d<=f&&(f=d)}a[c]=f}for(var g=0;g<r;g++)u+=a[g];for(var y=0;y<r;y++)l[y]={i:y,v:t[y],pr:a[y]/u,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var m=1;m<r;m++)l[m].cs=l[m-1].cs+l[m].pr;for(var _=Math.random(),v=0;v<r-1&&l[v++].cs<_;);i.push(l[v-1].v)}return i};function js(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}var qs=function(t,e,n,i){var r=[],o=[],s=[],a=[],h=!1,u=i||1e4,l=t.length,c=t[0].length,f=c>0,p=[];if(n)r="kmrand"==n?Bs(t,e):"kmpp"==n?zs(t,e):n;else for(var d={};r.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,r.push(t[g]))}do{js(e,0,p);for(var y=0;y<l;y++){for(var m=1/0,_=0,v=0;v<e;v++)(a=f?Fs(t[y],r[v]):Math.abs(t[y]-r[v]))<=m&&(m=a,_=v);s[y]=_,p[_]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?js(c,0,b[x]):0,o[x]=r[x];if(f){for(var w=0;w<e;w++)r[w]=[];for(var E=0;E<l;E++)for(var M=b[s[E]],S=t[E],I=0;I<c;I++)M[I]+=S[I];h=!0;for(var C=0;C<e;C++){for(var P=r[C],N=b[C],L=o[C],O=p[C],k=0;k<c;k++)P[k]=N[k]/O||0;if(h)for(var A=0;A<c;A++)if(L[A]!=P[A]){h=!1;break}}}else{for(var R=0;R<l;R++)b[s[R]]+=t[R];for(var T=0;T<e;T++)r[T]=b[T]/p[T]||0;h=!0;for(var D=0;D<e;D++)if(o[D]!=r[D]){h=!1;break}}h=h||--u<=0}while(!h);return{it:1e4-u,k:e,idxs:s,centroids:r}};function Us(t,e){return w(jr(t[0],t[1]))===w(jr(e[0],e[1]))}function Gs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Vs(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Ws={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||Ws.heuristics.manhattan,o=i.closest||!1,s=new Xs((function(t){return t.f})),a=e;for(e.h=r(e,n),s.push(e);s.size()>0;){var h=s.pop();if(h===n)return Vs(h);h.closed=!0;for(var u=t.neighbors(h),l=0,c=u.length;l<c;++l){var f=u[l];if(!f.closed&&!f.isWall()){var p=h.g+f.getCost(h),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=h,f.h=f.h||r(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Vs(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Hs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new Ys(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function Ys(t,e,n){this.x=t,this.y=e,this.weight=n}function Xs(t){this.content=[],this.scoreFunction=t}function Zs(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function Js(t){return function(){return t}}function Ks(t){return t[0]}function $s(t){return t[1]}function Qs(){this._=null}function ta(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ea(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function na(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ia(t){for(;t.L;)t=t.L;return t}function ra(t,e,n,i){var r=[null,null],o=Pa.push(r)-1;return r.left=t,r.right=e,n&&sa(r,t,e,n),i&&sa(r,e,t,i),Ia[t.index].halfedges.push(o),Ia[e.index].halfedges.push(o),r}function oa(t,e,n){var i=[e,n];return i.left=t,i}function sa(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function aa(t,e,n,i,r){var o,s=t[0],a=t[1],h=s[0],u=s[1],l=0,c=1,f=a[0]-h,p=a[1]-u;if(o=e-h,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=i-h,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>l&&(l=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<c&&(c=o)}return!(l>0||c<1)||(l>0&&(t[0]=[h+l*f,u+l*p]),c<1&&(t[1]=[h+c*f,u+c*p]),!0)}}}}}function ha(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,h=t[0],u=t.left,l=t.right,c=u[0],f=u[1],p=l[0],d=l[1],g=(c+p)/2,y=(f+d)/2;if(d===f){if(g<e||g>=i)return;if(c>p){if(h){if(h[1]>=r)return}else h=[g,n];o=[g,r]}else{if(h){if(h[1]<n)return}else h=[g,r];o=[g,n]}}else if(a=y-(s=(c-p)/(d-f))*g,s<-1||s>1)if(c>p){if(h){if(h[1]>=r)return}else h=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(h){if(h[1]<n)return}else h=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<d){if(h){if(h[0]>=i)return}else h=[e,s*e+a];o=[i,s*i+a]}else{if(h){if(h[0]<e)return}else h=[i,s*i+a];o=[e,s*e+a]}return t[0]=h,t[1]=o,!0}function ua(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function la(t,e){return e[+(e.left!==t.site)]}function ca(t,e){return e[+(e.left===t.site)]}Hs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ws.cleanNode(this.nodes[t])},Hs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ws.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Hs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Hs.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Hs.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},Ys.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ys.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ys.prototype.isWall=function(){return 0===this.weight},Xs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var h=this.content[s];(r=this.scoreFunction(h))<i&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Qs.prototype={constructor:Qs,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ia(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ea(this,n),n=(t=n).U),n.C=!1,i.C=!0,na(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(na(this,n),n=(t=n).U),n.C=!1,i.C=!0,ea(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?ia(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,ea(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ea(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,na(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ea(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,na(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var fa,pa=[];function da(){ta(this),this.x=this.y=this.arc=this.site=this.cy=null}function ga(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],h=i[0]-s,u=i[1]-a,l=o[0]-s,c=o[1]-a,f=2*(h*c-u*l);if(!(f>=-La)){var p=h*h+u*u,d=l*l+c*c,g=(c*p-u*d)/f,y=(h*d-l*p)/f,m=pa.pop()||new da;m.arc=t,m.site=r,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var _=null,v=Ca._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}Ca.insert(_,m),_||(fa=m)}}}}function ya(t){var e=t.circle;e&&(e.P||(fa=e.N),Ca.remove(e),pa.push(e),ta(e),t.circle=null)}var ma=[];function _a(){ta(this),this.edge=this.site=this.circle=null}function va(t){var e=ma.pop()||new _a;return e.site=t,e}function ba(t){ya(t),Sa.remove(t),ma.push(t),ta(t)}function xa(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];ba(t);for(var h=o;h.circle&&Math.abs(n-h.circle.x)<Na&&Math.abs(i-h.circle.cy)<Na;)o=h.P,a.unshift(h),ba(h),h=o;a.unshift(h),ya(h);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<Na&&Math.abs(i-u.circle.cy)<Na;)s=u.N,a.push(u),ba(u),u=s;a.push(u),ya(u);var l,c=a.length;for(l=1;l<c;++l)u=a[l],h=a[l-1],sa(u.edge,h.site,u.site,r);h=a[0],(u=a[c-1]).edge=ra(h.site,u.site,null,r),ga(h),ga(u)}function wa(t){for(var e,n,i,r,o=t[0],s=t[1],a=Sa._;a;)if((i=Ea(a,s)-o)>Na)a=a.L;else{if(!((r=o-Ma(a,s))>Na)){i>-Na?(e=a.P,n=a):r>-Na?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ia[t.index]={site:t,halfedges:[]}}(t);var h=va(t);if(Sa.insert(e,h),e||n){if(e===n)return ya(e),n=va(e.site),Sa.insert(h,n),h.edge=n.edge=ra(e.site,h.site),ga(e),void ga(n);if(n){ya(e),ya(n);var u=e.site,l=u[0],c=u[1],f=t[0]-l,p=t[1]-c,d=n.site,g=d[0]-l,y=d[1]-c,m=2*(f*y-p*g),_=f*f+p*p,v=g*g+y*y,b=[(y*_-p*v)/m+l,(f*v-g*_)/m+c];sa(n.edge,u,d,b),h.edge=ra(u,t,null,b),n.edge=ra(t,d,null,b),ga(e),ga(n)}else h.edge=ra(e.site,h.site)}}function Ea(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],h=n[1],u=h-e;if(!u)return a;var l=a-i,c=1/o-1/u,f=l/u;return c?(-f+Math.sqrt(f*f-2*c*(l*l/(-2*u)-h+u/2+r-o/2)))/c+i:(i+a)/2}function Ma(t,e){var n=t.N;if(n)return Ea(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Sa,Ia,Ca,Pa,Na=1e-6,La=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function ka(t,e){var n,i,r,o=t.sort(Oa).pop();for(Pa=[],Ia=new Array(t.length),Sa=new Qs,Ca=new Qs;;)if(r=fa,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(wa(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;xa(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Ia.length;r<o;++r)if((t=Ia[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=ua(t,Pa[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],h=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,o=Pa.length;o--;)ha(r=Pa[o],t,e,n,i)&&aa(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>Na||Math.abs(r[0][1]-r[1][1])>Na)||delete Pa[o]}(s,a,h,u),function(t,e,n,i){var r,o,s,a,h,u,l,c,f,p,d,g,y=Ia.length,m=!0;for(r=0;r<y;++r)if(o=Ia[r]){for(s=o.site,a=(h=o.halfedges).length;a--;)Pa[h[a]]||h.splice(a,1);for(a=0,u=h.length;a<u;)d=(p=ca(o,Pa[h[a]]))[0],g=p[1],c=(l=la(o,Pa[h[++a%u]]))[0],f=l[1],(Math.abs(d-c)>Na||Math.abs(g-f)>Na)&&(h.splice(a,0,Pa.push(oa(s,p,Math.abs(d-t)<Na&&i-g>Na?[t,Math.abs(c-t)<Na?f:i]:Math.abs(g-i)<Na&&n-d>Na?[Math.abs(f-i)<Na?c:n,i]:Math.abs(d-n)<Na&&g-e>Na?[n,Math.abs(c-n)<Na?f:e]:Math.abs(g-e)<Na&&d-t>Na?[Math.abs(f-e)<Na?c:t,e]:null))-1),++u);u&&(m=!1)}if(m){var _,v,b,x=1/0;for(r=0,m=null;r<y;++r)(o=Ia[r])&&(b=(_=(s=o.site)[0]-t)*_+(v=s[1]-e)*v)<x&&(x=b,m=o);if(m){var w=[t,e],E=[t,i],M=[n,i],S=[n,e];m.halfedges.push(Pa.push(oa(s=m.site,w,E))-1,Pa.push(oa(s,E,M))-1,Pa.push(oa(s,M,S))-1,Pa.push(oa(s,S,w))-1)}}for(r=0;r<y;++r)(o=Ia[r])&&(o.halfedges.length||delete Ia[r])}(s,a,h,u)}this.edges=Pa,this.cells=Ia,Sa=Ca=Pa=Ia=null}function Aa(t){return(t=t.slice()).push(t[0]),u([t])}function Ra(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,h=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!P(i))throw new Error("options must be an object");if(!C(r))throw new Error("steps must be a number");if(!C(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var c=M(s);else e=Ur(t,e,90,{units:o}),n=Ur(t,n,0,{units:o}),e=K(e)[0]-l[0],n=K(n)[1]-l[1];for(var f=[],p=0;p<r;p+=1){var d=-360*p/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ta(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ta(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===o){var m=g*Math.cos(c)+y*Math.sin(c),_=y*Math.cos(c)-g*Math.sin(c);g=m,y=_}f.push([g+l[0],y+l[1]])}return f.push(f[0]),"degrees"===o?u([f],h):Qo(u([f],h),s,{pivot:a})}function Ta(t){var e=t*Math.PI/180;return Math.tan(e)}function Da(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return z(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!C(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&k(t,(function(t){n+=t[0]*a,i+=t[1]*a,r+=a}))})),a([n/r,i/r],e.properties,e)}function Fa(t,e,n,i,r){var o=i.tolerance||.001,s=0,h=0,u=0,l=0;if(D(n,(function(e){var n,i=null===(n=e.properties)||void 0===n?void 0:n.weight,r=null==i?1:i;if(!C(r=Number(r)))throw new Error("weight value must be a number");if(r>0){l+=1;var o=r*ve(e,t);0===o&&(o=1);var a=r/o;s+=e.geometry.coordinates[0]*a,h+=e.geometry.coordinates[1]*a,u+=a}})),l<1)throw new Error("no features to measure");var c=s/u,f=h/u;return 1===l||0===r||Math.abs(c-e[0])<o&&Math.abs(f-e[1])<o?a([c,f],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([c,f]),Fa([c,f],t,n,i,r-1))}function Ba(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function za(t,e){var n=0,i=0;k(t,(function(r,o,s,a,h){h>n&&(n=h,i=o,e.push([]));var u=o-i,l=t.coordinates[h][u+1],c=r[0],f=r[1],p=l[0],d=l[1];e[h].push([.75*c+.25*p,.75*f+.25*d]),e[h].push([.25*c+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function ja(t,e){var n=0,i=0,r=0;k(t,(function(o,s,a,h,u){h>r&&(r=h,i=s,e.push([[]])),u>n&&(n=u,i=s,e[h].push([]));var l=s-i,c=t.coordinates[h][u][l+1],f=o[0],p=o[1],d=c[0],g=c[1];e[h][u].push([.75*f+.25*d,.75*p+.25*g]),e[h][u].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function qa(t,e,n){void 0===n&&(n=2);var i=K(t),r=K(e),o=i[0]-r[0],s=i[1]-r[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Ua(t,e){var n=(e=e||{}).threshold||1e4,i=e.p||2,r=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];D(t,(function(t){a.push(xn(t))}));for(var h=[],u=0;u<a.length;u++)h[u]=[];for(u=0;u<a.length;u++)for(var l=u;l<a.length;l++){u===l&&(h[u][l]=0);var c=qa(a[u],a[l],i);h[u][l]=c,h[l][u]=c}for(u=0;u<a.length;u++)for(l=0;l<a.length;l++)0!==(c=h[u][l])&&(h[u][l]=r?c<=n?1:0:c<=n?Math.pow(c,o):0);if(s)for(u=0;u<a.length;u++){var f=h[u].reduce((function(t,e){return t+e}),0);for(l=0;l<a.length;l++)h[u][l]=h[u][l]/f}return h}function Ga(t){for(var e=0,n=0,i=t;n<i.length;n++)e+=i[n];return e/t.length}function Va(t,e){return void 0===e&&(e={}),Ha(t,"mercator",e)}function Wa(t,e){return void 0===e&&(e={}),Ha(t,"wgs84",e)}function Ha(t,e,n){void 0===n&&(n={});var i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&C(t[0])?t="mercator"===e?Ya(t):Xa(t):(!0!==i&&(t=Me(t)),k(t,(function(t){var n="mercator"===e?Ya(t):Xa(t);t[0]=n[0],t[1]=n[1]}))),t}function Ya(t){var e=Math.PI/180,n=6378137,i=20037508.342789244,r=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function Xa(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}ka.prototype={constructor:ka,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return la(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,h,u,l=n.site,c=-1,f=e[r[o-1]],p=f.left===l?f.right:f.left;++c<o;)s=p,p=(f=e[r[c]]).left===l?f.right:f.left,s&&p&&i<s.index&&i<p.index&&(h=s,u=p,((a=l)[0]-u[0])*(h[1]-a[1])-(a[0]-h[0])*(u[1]-a[1])<0)&&t.push([l.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var h=t-r.site[0],u=e-r.site[1],l=h*h+u*u;do{r=o.cells[i=s],s=null,r.halfedges.forEach((function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var h=t-a[0],u=e-a[1],c=h*h+u*u;c<l&&(l=c,s=a.index)}}))}while(null!==s);return o._found=i,null==n||l<=n*n?r.site:null}};var Za=Object.freeze({__proto__:null,toMercator:Va,toWgs84:Wa}),Ja=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};function Ka(t){return Array.isArray(t)?nh(t):t&&t.bbox?nh(t.bbox):[360*eh(),180*eh()]}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(a(Ka(e.bbox)));return p(n)}function Qa(t,e){void 0===e&&(e={}),null==t&&(t=1),C(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),C(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],i=function(t){var i,r=[],o=Ja(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();r.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),r[r.length-1]=r[0],r=r.map((i=Ka(e.bbox),function(t){return[t[0]+i[0],t[1]+i[1]]})),n.push(u([r]))},r=0;r<t;r++)i();return p(n)}function th(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;null==t&&(t=1),(!C(i)||void 0===i||i<2)&&(i=10),C(r)&&void 0!==r||(r=1e-4),C(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var h=[Ka(n)],u=0;u<i-1;u++){var l=(0===u?2*Math.random()*Math.PI:Math.tan((h[u][1]-h[u-1][1])/(h[u][0]-h[u-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*r;h.push([h[u][0]+f*Math.cos(l),h[u][1]+f*Math.sin(l)])}s.push(c(h))}return p(s)}function eh(){return Math.random()-.5}function nh(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var ih=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:$a,randomPolygon:Qa,randomLineString:th});function rh(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return D(t,(function(t){hh(t.properties,e)&&n.push(t)})),p(n)}function oh(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=ah(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var s=r[o],a=i[s],h=[],u=0;u<a.length;u++)h.push(t.features[a[u]]);n(p(h),s,o)}}function sh(t,e,n,i){var r=i;return oh(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r}function ah(t,e){var n={};return D(t,(function(t,i){var r=t.properties||{};if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(i):n[o]=[i]}})),n}function hh(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!hh(t,e[i]))return!1;return!0}return uh(t,e)}function uh(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function lh(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}var ch=Object.freeze({__proto__:null,getCluster:rh,clusterEach:oh,clusterReduce:sh,createBins:ah,applyFilter:hh,propertiesContainsFilter:uh,filterProperties:lh}),fh=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function ph(t,e){return t>e?1:t<e?-1:0}function dh(t,e,n){for(var i=new fh(null,null),r=i,o=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;r.right=e,r=e,e=e.right}}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function gh(t,e,n,i){var r=new fh(t,e);if(null===n)return r.left=r.right=null,r;var o=i(t,(n=dh(t,n,i)).key);return o<0?(r.left=n.left,r.right=n,n.left=null):o>=0&&(r.right=n.right,r.left=n,n.right=null),r}function yh(t,e,n){var i=null,r=null;if(e){var o=n((e=dh(t,e,n)).key,t);0===o?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function mh(t,e,n,i,r){if(t){i(e+(n?"└── ":"├── ")+r(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&mh(t.left,o,!1,i,r),t.right&&mh(t.right,o,!0,i,r)}}var _h=function(){function t(t){void 0===t&&(t=ph),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=gh(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new fh(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,r=dh(t,this._root,i),o=i(t,r.key);return 0===o?this._root=r:(o<0?(n.left=r.left,n.right=r,r.left=null):o>0&&(n.right=r.right,n.left=r,r.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=dh(t,e,n)).key)?(null===e.left?i=e.right:(i=dh(t,e.left,n)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=dh(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=dh(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],i=!1,r=new fh(null,null),o=r;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:i=!0;return o.next=null,r.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,r=this._comparator;if(n&&xh(t,e,0,i-1,r),null===this._root)this._root=vh(t,e,0,i),this._size=i;else{var o=function(t,e,n){for(var i=new fh(null,null),r=i,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(r.next=o,o=o.next):(r.next=s,s=s.next),r=r.next;return null!==o?r.next=o:null!==s&&(r.next=s),i.next}(this.toList(),function(t,e){for(var n=new fh(null,null),i=n,r=0;r<t.length;r++)i=i.next=new fh(t[r],e[r]);return i.next=null,n.next}(t,e),r);i=this._size+i,this._root=bh({head:o},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return mh(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=yh(t,this._root,i),o=r.left,s=r.right;i(t,e)<0?s=gh(e,n,s,i):o=gh(e,n,o,i),this._root=function(t,e,n){return null===e?t:(null===t||((e=dh(t.key,e,n)).left=t),e)}(o,s,i)},t.prototype.split=function(t){return yh(t,this._root,this._comparator)},t}();function vh(t,e,n,i){var r=i-n;if(r>0){var o=n+Math.floor(r/2),s=t[o],a=e[o],h=new fh(s,a);return h.left=vh(t,e,n,o),h.right=vh(t,e,o+1,i),h}return null}function bh(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=bh(t,e,r),s=t.head;return s.left=o,t.head=t.head.next,s.right=bh(t,r+1,n),s}return null}function xh(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],s=n-1,a=i+1;;){do{s++}while(r(t[s],o)<0);do{a--}while(r(t[a],o)>0);if(s>=a)break;var h=t[s];t[s]=t[a],t[a]=h,h=e[s],e[s]=e[a],e[a]=h}xh(t,e,n,a,r),xh(t,e,a+1,i,r)}}function wh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mh(t,e,n){return e&&Eh(t.prototype,e),n&&Eh(t,n),t}var Sh=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Ih=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Ch=Number.EPSILON;void 0===Ch&&(Ch=Math.pow(2,-52));var Ph=Ch*Ch,Nh=function(t,e){if(-Ch<t&&t<Ch&&-Ch<e&&e<Ch)return 0;var n=t-e;return n*n<Ph*t*e?0:t<e?-1:1},Lh=function(){function t(){wh(this,t),this.reset()}return Mh(t,[{key:"reset",value:function(){this.xRounder=new Oh,this.yRounder=new Oh}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Oh=function(){function t(){wh(this,t),this.tree=new _h,this.round(0)}return Mh(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Nh(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===Nh(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),t}(),kh=new Lh,Ah=function(t,e){return t.x*e.y-t.y*e.x},Rh=function(t,e){return t.x*e.x+t.y*e.y},Th=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},o=Ah(i,r);return Nh(o,0)},Dh=function(t){return Math.sqrt(Rh(t,t))},Fh=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return Rh(r,i)/Dh(r)/Dh(i)},Bh=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},zh=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},jh=function(){function t(e,n){wh(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Mh(t,null,[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Uh.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Mh(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,s,a,h,u=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,s=u.point,a={x:o.x-r.x,y:o.y-r.y},h={x:s.x-r.x,y:s.y-r.y},Ah(h,a)/Dh(h)/Dh(a)),cosine:Fh(e.point,t.point,u.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),h=a.sine,u=a.cosine;return o>=0&&h>=0?s<u?1:s>u?-1:0:o<0&&h<0?s<u?-1:s>u?1:0:h<o?-1:h>o?1:0}}}]),t}(),qh=0,Uh=function(){function t(e,n,i,r){wh(this,t),this.id=++qh,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=r}return Mh(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,h=t.rightSE.point.y,u=e.rightSE.point.y;if(n<i){if(a<s&&a<h)return 1;if(a>s&&a>h)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n>i){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(r>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var y=h-s,m=r-n,_=u-a,v=o-i;if(y>m&&_<v)return 1;if(y<m&&_>v)return-1}return r>o?1:r<o||h<u?-1:h>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Mh(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;var s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=Ih(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,h=Sh(e,s)&&0===this.comparePoint(s),u=Sh(n,r)&&0===t.comparePoint(r),l=Sh(e,a)&&0===this.comparePoint(a),c=Sh(n,o)&&0===t.comparePoint(o);if(u&&h)return c&&!l?o:!c&&l?a:null;if(u)return l&&r.x===a.x&&r.y===a.y?null:r;if(h)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&l)return null;if(c)return o;if(l)return a;var f=function(t,e,n,i){if(0===e.x)return zh(n,i,t.x);if(0===i.x)return zh(t,e,n.x);if(0===e.y)return Bh(n,i,t.y);if(0===i.y)return Bh(t,e,n.y);var r=Ah(e,i);if(0==r)return null;var o={x:n.x-t.x,y:n.y-t.y},s=Ah(o,e)/r,a=Ah(o,i)/r;return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}}(r,this.vector(),s,t.vector());return null===f?null:Sh(i,f)?kh.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new jh(e,!0),o=new jh(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new t(r,s,this.rings.slice(),this.windings.slice());return jh.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),jh.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,h=i.rings.length;a<h;a++){var u=i.rings[a],l=i.windings[a],c=n.rings.indexOf(u);-1===c?(n.rings.push(u),n.windings.push(l)):n.windings[c]+=l}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],h=e.indexOf(s);-1===h?(e.push(s),n.push(a)):n[h]+=a}for(var u=[],l=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var p=e[c],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)u.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=u.indexOf(p.poly);-1!==g&&u.splice(g,1)}}for(var y=0,m=u.length;y<m;y++){var _=u[y].multiPoly;-1===i.indexOf(_)&&i.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($h.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===$h.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat($h.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var r,o,s,a=jh.comparePoints(e,n);if(a<0)r=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,s=-1}return new t(new jh(r,!0),new jh(o,!1),[i],[s])}}]),t}(),Gh=function(){function t(e,n,i){if(wh(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=kh.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=kh.round(e[s][0],e[s][1]);h.x===o.x&&h.y===o.y||(this.segments.push(Uh.fromRing(o,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),o=h)}r.x===o.x&&r.y===o.y||this.segments.push(Uh.fromRing(o,r,this))}return Mh(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),t}(),Vh=function(){function t(e,n){if(wh(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Gh(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new Gh(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Mh(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),Wh=function(){function t(e,n){if(wh(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new Vh(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Mh(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),Hh=function(){function t(e){wh(this,t),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return Mh(t,null,[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,h=o.rightSE,u=[a],l=a.point,c=[];s=a,a=h,u.push(a),a.point!==l;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){h=f[0].otherSE;break}for(var g=null,y=0,m=c.length;y<m;y++)if(c[y].point===a.point){g=y;break}if(null===g){c.push({index:u.length,point:a.point});var _=a.getLeftmostComparator(s);h=f.sort(_)[0].otherSE;break}var v=c.splice(g)[0],b=u.splice(v.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),Mh(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==Th(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===Th(s,t,a)&&e.shift(),e.push(e[0]);for(var h=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,c=[],f=u;f!=l;f+=h)c.push([e[f].x,e[f].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];jh.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),t}(),Yh=function(){function t(e){wh(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Mh(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),t}(),Xh=function(){function t(e){wh(this,t),this.rings=e,this.polys=this._composePolys(e)}return Mh(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new Yh(r));else{var o=r.enclosingRing();o.poly||e.push(new Yh(o)),o.poly.addInterior(r)}}return e}}]),t}(),Zh=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh.compare;wh(this,t),this.queue=e,this.tree=new _h(n),this.segments=[]}return Mh(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,s=void 0,a=void 0;void 0===s;)null===(r=this.tree.prev(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var h=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(h=u),!s.isAnEndpoint(u)))for(var l=this._splitSafely(s,u),c=0,f=l.length;c<f;c++)n.push(l[c])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,m=g.length;y<m;y++)n.push(g[y])}if(null!==h||null!==p){var _=null;_=null===h?p:null===p||jh.comparePoints(h,p)<=0?h:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(_),b=0,x=v.length;b<x;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),M=0,S=E.length;M<S;M++)n.push(E[M]);if(!a.isAnEndpoint(w))for(var I=this._splitSafely(a,w),C=0,P=I.length;C<P;C++)n.push(I[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),t}(),Jh=1e6,Kh=1e6,$h=new(function(){function t(){wh(this,t)}return Mh(t,[{key:"run",value:function(t,e,n){$h.type=t,kh.reset();for(var i=[new Wh(e,!0)],r=0,o=n.length;r<o;r++)i.push(new Wh(n[r],!1));if($h.numMultiPolys=i.length,"difference"===$h.type)for(var s=i[0],a=1;a<i.length;)null!==Ih(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===$h.type)for(var h=0,u=i.length;h<u;h++)for(var l=i[h],c=h+1,f=i.length;c<f;c++)if(null===Ih(l.bbox,i[c].bbox))return[];for(var p=new _h(jh.compare),d=0,g=i.length;d<g;d++)for(var y=i[d].getSweepEvents(),m=0,_=y.length;m<_;m++)if(p.insert(y[m]),p.size>Jh)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var v=new Zh(p),b=p.size,x=p.pop();x;){var w=x.key;if(p.size===b){var E=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Jh)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(v.segments.length>Kh)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=v.process(w),S=0,I=M.length;S<I;S++){var C=M[S];void 0===C.consumedBy&&p.insert(C)}b=p.size,x=p.pop()}kh.reset();var P=Hh.factory(v.segments);return new Xh(P).getGeom()}}]),t}()),Qh={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $h.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $h.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $h.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $h.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var tu=function(){};tu.prototype.interfaces_=function(){return[]},tu.prototype.getClass=function(){return tu},tu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var eu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nu=function(){},iu={MAX_VALUE:{configurable:!0}};nu.isNaN=function(t){return Number.isNaN(t)},nu.doubleToLongBits=function(t){return t},nu.longBitsToDouble=function(t){return t},nu.isInfinite=function(t){return!Number.isFinite(t)},iu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nu,iu);var ru=function(){},ou=function(){},su=function(){};function au(){}var hu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},uu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};hu.prototype.setOrdinate=function(t,e){switch(t){case hu.X:this.x=e;break;case hu.Y:this.y=e;break;case hu.Z:this.z=e;break;default:throw new eu("Invalid ordinate index: "+t)}},hu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!tu.equalsWithTolerance(this.x,e.x,n)&&!!tu.equalsWithTolerance(this.y,e.y,n)}},hu.prototype.getOrdinate=function(t){switch(t){case hu.X:return this.x;case hu.Y:return this.y;case hu.Z:return this.z}throw new eu("Invalid ordinate index: "+t)},hu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nu.isNaN(this.z))&&nu.isNaN(t.z)},hu.prototype.equals=function(t){return t instanceof hu&&this.equals2D(t)},hu.prototype.equalInZ=function(t,e){return tu.equalsWithTolerance(this.z,t.z,e)},hu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},hu.prototype.clone=function(){},hu.prototype.copy=function(){return new hu(this)},hu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},hu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},hu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+hu.hashCode(this.x))+hu.hashCode(this.y)},hu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},hu.prototype.interfaces_=function(){return[ru,ou,au]},hu.prototype.getClass=function(){return hu},hu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},uu.DimensionalComparator.get=function(){return lu},uu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},uu.NULL_ORDINATE.get=function(){return nu.NaN},uu.X.get=function(){return 0},uu.Y.get=function(){return 1},uu.Z.get=function(){return 2},Object.defineProperties(hu,uu);var lu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new eu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};lu.prototype.compare=function(t,e){var n=t,i=e,r=lu.compare(n.x,i.x);if(0!==r)return r;var o=lu.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:lu.compare(n.z,i.z)},lu.prototype.interfaces_=function(){return[su]},lu.prototype.getClass=function(){return lu},lu.compare=function(t,e){return t<e?-1:t>e?1:nu.isNaN(t)?nu.isNaN(e)?0:-1:nu.isNaN(e)?1:0};var cu=function(){};cu.prototype.create=function(){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var fu=function(){},pu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.toLocationSymbol=function(t){switch(t){case fu.EXTERIOR:return"e";case fu.BOUNDARY:return"b";case fu.INTERIOR:return"i";case fu.NONE:return"-"}throw new eu("Unknown location value: "+t)},pu.INTERIOR.get=function(){return 0},pu.BOUNDARY.get=function(){return 1},pu.EXTERIOR.get=function(){return 2},pu.NONE.get=function(){return-1},Object.defineProperties(fu,pu);var du=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},gu=function(){},yu={LOG_10:{configurable:!0}};gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu},gu.log10=function(t){var e=Math.log(t);return nu.isInfinite(e)||nu.isNaN(e)?e:e/gu.LOG_10},gu.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},gu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},gu.wrap=function(t,e){return t<0?e- -t%e:t%e},gu.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}},gu.average=function(t,e){return(t+e)/2},yu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(gu,yu);var mu=function(t){this.str=t};mu.prototype.append=function(t){this.str+=t},mu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},mu.prototype.toString=function(t){return this.str};var _u=function(t){this.value=t};_u.prototype.intValue=function(){return this.value},_u.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},_u.isNaN=function(t){return Number.isNaN(t)};var vu=function(){};vu.isWhitespace=function(t){return t<=32&&t>=0||127===t},vu.toUpperCase=function(t){return t.toUpperCase()};var bu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},xu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};bu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},bu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=bu.magnitude(n._hi),r=bu.TEN.pow(i);(n=n.divide(r)).gt(bu.TEN)?(n=n.divide(bu.TEN),i+=1):n.lt(bu.ONE)&&(n=n.multiply(bu.TEN),i-=1);for(var o=i+1,s=new mu,a=bu.MAX_PRINT_DIGITS-1,h=0;h<=a;h++){t&&h===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var l=!1,c=0;u>9?(l=!0,c="9"):c="0"+u,s.append(c),n=n.subtract(bu.valueOf(u)).multiply(bu.TEN),l&&n.selfAdd(bu.TEN);var f=!0,p=bu.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-h&&(f=!1),!f)break}return e[0]=i,s.toString()},bu.prototype.sqr=function(){return this.multiply(this)},bu.prototype.doubleValue=function(){return this._hi+this._lo},bu.prototype.subtract=function(){if(arguments[0]instanceof bu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},bu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},bu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},bu.prototype.selfSubtract=function(){if(arguments[0]instanceof bu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},bu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},bu.prototype.min=function(t){return this.le(t)?this:t},bu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,h=null,u=null,l=null,c=null;return h=this._hi/n,c=(r=(u=bu.SPLIT*h)-(r=u-h))*(s=(c=bu.SPLIT*n)-(s=c-n))-(l=h*n)+r*(a=n-s)+(o=h-r)*s+o*a,c=h+(u=(this._hi-l-c+this._lo-h*i)/n),this._hi=c,this._lo=h-c+u,this}},bu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},bu.prototype.divide=function(){if(arguments[0]instanceof bu){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,h=null;n=(o=this._hi/t._hi)-(e=(s=bu.SPLIT*o)-(e=s-o)),h=e*(i=(h=bu.SPLIT*t._hi)-(i=h-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r;var u=h=o+(s=(this._hi-a-h+this._lo-o*t._lo)/t._hi);return new bu(u,o-h+s)}if("number"==typeof arguments[0]){var l=arguments[0];return nu.isNaN(l)?bu.createNaN():bu.copy(this).selfDivide(l,0)}},bu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},bu.prototype.pow=function(t){if(0===t)return bu.valueOf(1);var e=new bu(this),n=bu.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},bu.prototype.ceil=function(){if(this.isNaN())return bu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new bu(t,e)},bu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},bu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},bu.prototype.setValue=function(){if(arguments[0]instanceof bu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},bu.prototype.max=function(t){return this.ge(t)?this:t},bu.prototype.sqrt=function(){if(this.isZero())return bu.valueOf(0);if(this.isNegative())return bu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=bu.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},bu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),i=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var h=arguments[0],u=arguments[1],l=null,c=null,f=null,p=null,d=null,g=null,y=null;p=this._hi+h,c=this._lo+u,d=p-(g=p-this._hi),f=c-(y=c-this._lo);var m=(l=p+(g=(d=h-g+(this._hi-d))+c))+(g=(f=u-y+(this._lo-f))+(g+(p-l))),_=g+(l-m);return this._hi=m,this._lo=_,this}},bu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,h=null,u=null;r=(h=bu.SPLIT*this._hi)-this._hi,u=bu.SPLIT*n,r=h-r,o=this._hi-r,s=u-n;var l=(h=this._hi*n)+(u=r*(s=u-s)-h+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),c=u+(r=h-l);return this._hi=l,this._lo=c,this}},bu.prototype.selfSqr=function(){return this.selfMultiply(this)},bu.prototype.floor=function(){if(this.isNaN())return bu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new bu(t,e)},bu.prototype.negate=function(){return this.isNaN()?this:new bu(-this._hi,-this._lo)},bu.prototype.clone=function(){},bu.prototype.multiply=function(){if(arguments[0]instanceof bu){var t=arguments[0];return t.isNaN()?bu.createNaN():bu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nu.isNaN(e)?bu.createNaN():bu.copy(this).selfMultiply(e,0)}},bu.prototype.isNaN=function(){return nu.isNaN(this._hi)},bu.prototype.intValue=function(){return Math.trunc(this._hi)},bu.prototype.toString=function(){var t=bu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},bu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+bu.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+bu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},bu.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this._hi)-(r=(s=bu.SPLIT*n)-(r=s-n)),o=(a=bu.SPLIT*this._hi)-this._hi;var h=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new bu(h,n-h+s)},bu.prototype.toSciNotation=function(){if(this.isZero())return bu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=bu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},bu.prototype.abs=function(){return this.isNaN()?bu.NaN:this.isNegative()?this.negate():new bu(this)},bu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},bu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},bu.prototype.add=function(){if(arguments[0]instanceof bu){var t=arguments[0];return bu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return bu.copy(this).selfAdd(e)}},bu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof bu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},bu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},bu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},bu.prototype.trunc=function(){return this.isNaN()?bu.NaN:this.isPositive()?this.floor():this.ceil()},bu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},bu.prototype.interfaces_=function(){return[au,ru,ou]},bu.prototype.getClass=function(){return bu},bu.sqr=function(t){return bu.valueOf(t).selfMultiply(t)},bu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return bu.parse(t)}if("number"==typeof arguments[0])return new bu(arguments[0])},bu.sqrt=function(t){return bu.valueOf(t).sqrt()},bu.parse=function(t){for(var e=0,n=t.length;vu.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new bu,s=0,a=0,h=0;!(e>=n);){var u=t.charAt(e);if(e++,vu.isDigit(u)){var l=u-"0";o.selfMultiply(bu.TEN),o.selfAdd(l),s++}else{if("."!==u){if("e"===u||"E"===u){var c=t.substring(e);try{h=_u.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-h;if(0===p)f=o;else if(p>0){var d=bu.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=bu.TEN.pow(-p);f=o.multiply(g)}return i?f.negate():f},bu.createNaN=function(){return new bu(nu.NaN,nu.NaN)},bu.copy=function(t){return new bu(t)},bu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},bu.stringOfChar=function(t,e){for(var n=new mu,i=0;i<e;i++)n.append(t);return n.toString()},xu.PI.get=function(){return new bu(3.141592653589793,12246467991473532e-32)},xu.TWO_PI.get=function(){return new bu(6.283185307179586,24492935982947064e-32)},xu.PI_2.get=function(){return new bu(1.5707963267948966,6123233995736766e-32)},xu.E.get=function(){return new bu(2.718281828459045,14456468917292502e-32)},xu.NaN.get=function(){return new bu(nu.NaN,nu.NaN)},xu.EPS.get=function(){return 123259516440783e-46},xu.SPLIT.get=function(){return 134217729},xu.MAX_PRINT_DIGITS.get=function(){return 32},xu.TEN.get=function(){return bu.valueOf(10)},xu.ONE.get=function(){return bu.valueOf(1)},xu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},xu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(bu,xu);var wu=function(){},Eu={DP_SAFE_EPSILON:{configurable:!0}};wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.orientationIndex=function(t,e,n){var i=wu.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=bu.valueOf(e.x).selfAdd(-t.x),o=bu.valueOf(e.y).selfAdd(-t.y),s=bu.valueOf(n.x).selfAdd(-e.x),a=bu.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},wu.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},wu.intersection=function(t,e,n,i){var r=bu.valueOf(i.y).selfSubtract(n.y).selfMultiply(bu.valueOf(e.x).selfSubtract(t.x)),o=bu.valueOf(i.x).selfSubtract(n.x).selfMultiply(bu.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=bu.valueOf(i.x).selfSubtract(n.x).selfMultiply(bu.valueOf(t.y).selfSubtract(n.y)),h=bu.valueOf(i.y).selfSubtract(n.y).selfMultiply(bu.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(h).selfDivide(s).doubleValue(),l=bu.valueOf(t.x).selfAdd(bu.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),c=bu.valueOf(e.x).selfSubtract(t.x).selfMultiply(bu.valueOf(t.y).selfSubtract(n.y)),f=bu.valueOf(e.y).selfSubtract(t.y).selfMultiply(bu.valueOf(t.x).selfSubtract(n.x)),p=c.subtract(f).selfDivide(s).doubleValue(),d=bu.valueOf(n.y).selfAdd(bu.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new hu(l,d)},wu.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return wu.signum(s);i=r+o}else{if(!(r<0))return wu.signum(s);if(o>=0)return wu.signum(s);i=-r-o}var a=wu.DP_SAFE_EPSILON*i;return s>=a||-s>=a?wu.signum(s):2},wu.signum=function(t){return t>0?1:t<0?-1:0},Eu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(wu,Eu);var Mu=function(){},Su={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Su.X.get=function(){return 0},Su.Y.get=function(){return 1},Su.Z.get=function(){return 2},Su.M.get=function(){return 3},Mu.prototype.setOrdinate=function(t,e,n){},Mu.prototype.size=function(){},Mu.prototype.getOrdinate=function(t,e){},Mu.prototype.getCoordinate=function(){},Mu.prototype.getCoordinateCopy=function(t){},Mu.prototype.getDimension=function(){},Mu.prototype.getX=function(t){},Mu.prototype.clone=function(){},Mu.prototype.expandEnvelope=function(t){},Mu.prototype.copy=function(){},Mu.prototype.getY=function(t){},Mu.prototype.toCoordinateArray=function(){},Mu.prototype.interfaces_=function(){return[ou]},Mu.prototype.getClass=function(){return Mu},Object.defineProperties(Mu,Su);var Iu=function(){},Cu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Iu),Pu=function(){};Pu.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},Pu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Nu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof hu&&arguments[1]instanceof hu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var h=arguments[0],u=arguments[1],l=arguments[2];this.x=h,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=c.y-f.y,y=f.x-c.x,m=c.x*f.y-f.x*c.y,_=p.y-d.y,v=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-v*m,this.y=_*m-g*b,this.w=g*v-_*y}};Nu.prototype.getY=function(){var t=this.y/this.w;if(nu.isNaN(t)||nu.isInfinite(t))throw new Cu;return t},Nu.prototype.getX=function(){var t=this.x/this.w;if(nu.isNaN(t)||nu.isInfinite(t))throw new Cu;return t},Nu.prototype.getCoordinate=function(){var t=new hu;return t.x=this.getX(),t.y=this.getY(),t},Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,h=i.x-n.x,u=n.x*i.y-i.x*n.y,l=r*h-a*o,c=(o*u-h*s)/l,f=(a*s-r*u)/l;if(nu.isNaN(c)||nu.isInfinite(c)||nu.isNaN(f)||nu.isInfinite(f))throw new Cu;return new hu(c,f)};var Lu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof hu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],h=arguments[3];this.init(o,s,a,h)}},Ou={serialVersionUID:{configurable:!0}};Lu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Lu.prototype.equals=function(t){if(!(t instanceof Lu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Lu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Lu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new Lu(e,i,n,r)},Lu.prototype.isNull=function(){return this._maxx<this._minx},Lu.prototype.getMaxX=function(){return this._maxx},Lu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof hu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Lu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},Lu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof hu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},Lu.prototype.getMinY=function(){return this._miny},Lu.prototype.getMinX=function(){return this._minx},Lu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof hu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Lu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Lu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Lu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Lu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Lu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Lu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Lu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Lu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Lu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Lu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Lu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof hu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},Lu.prototype.centre=function(){return this.isNull()?null:new hu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Lu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof hu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Lu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Lu.prototype.getMaxY=function(){return this._maxy},Lu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Lu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+hu.hashCode(this._minx))+hu.hashCode(this._maxx))+hu.hashCode(this._miny))+hu.hashCode(this._maxy)},Lu.prototype.interfaces_=function(){return[ru,au]},Lu.prototype.getClass=function(){return Lu},Lu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),h=Math.max(o.x,s.x),u=Math.min(i.x,r.x),l=Math.max(i.x,r.x);return!(u>h||l<a||(a=Math.min(o.y,s.y),h=Math.max(o.y,s.y),u=Math.min(i.y,r.y),l=Math.max(i.y,r.y),u>h||l<a))}},Ou.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Lu,Ou);var ku={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Au=function(t){this.geometryFactory=t||new _c};Au.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=ku.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=ku.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Tu[n]&&(e=Tu[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Au.prototype.write=function(t){return this.extractGeometry(t)},Au.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ru[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ru[e].apply(this,[t])+")"};var Ru={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ru.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ru.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ru.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ru.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ru.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ru.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+Ru.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ru.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Tu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(ku.spaces);return this.geometryFactory.createPoint(new hu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(ku.trimParens,"$1"),i.push(Tu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(ku.spaces),i.push(new hu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(ku.spaces),i.push(new hu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(ku.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(ku.trimParens,"$1"),i.push(Tu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e,n,i;if(void 0===t)return this.geometryFactory.createPolygon();for(var r,o=t.trim().split(ku.parenComma),s=[],a=0,h=o.length;a<h;++a)e=o[a].replace(ku.trimParens,"$1"),n=Tu.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(ku.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(ku.trimParens,"$1"),i.push(Tu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Du=function(t){this.parser=new Au(t)};Du.prototype.write=function(t){return this.parser.write(t)},Du.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Fu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Bu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fu),zu=function(){};zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.shouldNeverReachHere=function(){if(0===arguments.length)zu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Bu("Should never reach here"+(null!==t?": "+t:""))}},zu.isTrue=function(){var t;if(1===arguments.length)zu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Bu:new Bu(t)},zu.equals=function(){var t,e,n;if(2===arguments.length)zu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Bu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ju=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new hu,this._intPt[1]=new hu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},qu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ju.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ju.prototype.getTopologySummary=function(){var t=new mu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ju.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},ju.prototype.getIntersectionNum=function(){return this._result},ju.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ju.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ju.prototype.setPrecisionModel=function(t){this._precisionModel=t},ju.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},ju.prototype.getIntersection=function(t){return this._intPt[t]},ju.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ju.prototype.hasIntersection=function(){return this._result!==ju.NO_INTERSECTION},ju.prototype.getEdgeDistance=function(t,e){return ju.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ju.prototype.isCollinear=function(){return this._result===ju.COLLINEAR_INTERSECTION},ju.prototype.toString=function(){return Du.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Du.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ju.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ju.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ju.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return zu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ju.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return zu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},qu.DONT_INTERSECT.get=function(){return 0},qu.DO_INTERSECT.get=function(){return 1},qu.COLLINEAR.get=function(){return 2},qu.NO_INTERSECTION.get=function(){return 0},qu.POINT_INTERSECTION.get=function(){return 1},qu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ju,qu);var Uu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Lu(this._inputLines[0][0],this._inputLines[0][1]),n=new Lu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,Lu.intersects(n,i,e)&&0===Wu.orientationIndex(n,i,e)&&0===Wu.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Nu.intersection(t,n,i,r)}catch(s){if(!(s instanceof Cu))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new hu(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=wu.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);Pu.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&Pu.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new hu(t),o=new hu(e),s=new hu(n),a=new hu(i),h=new hu;this.normalizeToEnvCentre(r,o,s,a,h);var u=this.safeHCoordinateIntersection(r,o,s,a);return u.x+=h.x,u.y+=h.y,u},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=Lu.intersects(e,n,i),s=Lu.intersects(e,n,r),a=Lu.intersects(i,r,e),h=Lu.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&h?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||h?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&h?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||h?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&h?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,h=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=((o>u?o:u)+(a<c?a:c))/2,d=((s>l?s:l)+(h<f?h:f))/2;r.x=p,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!Lu.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=Wu.orientationIndex(e,n,i),s=Wu.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Wu.orientationIndex(i,r,e),h=Wu.orientationIndex(i,r,n);return a>0&&h>0||a<0&&h<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===h?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===h?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new hu(i):0===s?this._intPt[0]=new hu(r):0===a?this._intPt[0]=new hu(e):0===h&&(this._intPt[0]=new hu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=Wu.distancePointLine(t,n,i),s=Wu.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=Wu.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=Wu.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(ju),Gu=function(){};Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu},Gu.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Gu.signOfDet2x2(i,r,o,s)},Gu.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var Vu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Vu.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,h=Gu.signOfDet2x2(r,o,s,a);if(0===h)return this._isPointOnSegment=!0,null;a<o&&(h=-h),h>0&&this._crossingCount++}},Vu.prototype.isPointInPolygon=function(){return this.getLocation()!==fu.EXTERIOR},Vu.prototype.getLocation=function(){return this._isPointOnSegment?fu.BOUNDARY:this._crossingCount%2==1?fu.INTERIOR:fu.EXTERIOR},Vu.prototype.isOnSegment=function(){return this._isPointOnSegment},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Vu.locatePointInRing=function(){if(arguments[0]instanceof hu&&du(arguments[1],Mu)){for(var t=arguments[1],e=new Vu(arguments[0]),n=new hu,i=new hu,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof hu&&arguments[1]instanceof Array){for(var o=arguments[1],s=new Vu(arguments[0]),a=1;a<o.length;a++){var h=o[a],u=o[a-1];if(s.countSegment(h,u),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var Wu=function(){},Hu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu},Wu.orientationIndex=function(t,e,n){return wu.orientationIndex(t,e,n)},Wu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(du(arguments[0],Mu)){var s=arguments[0],a=s.size();if(a<3)return 0;var h=new hu,u=new hu,l=new hu;s.getCoordinate(0,u),s.getCoordinate(1,l);var c=u.x;l.x-=c;for(var f=0,p=1;p<a-1;p++)h.y=u.y,u.x=l.x,u.y=l.y,s.getCoordinate(p+1,l),l.x-=c,f+=u.x*(h.y-l.y);return f/2}},Wu.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Wu.distancePointLine(t,n,i);if(n.equals(i))return Wu.distancePointLine(i,t,e);var r=!1;if(Lu.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,h=s/o;(h<0||h>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?gu.min(Wu.distancePointLine(t,n,i),Wu.distancePointLine(e,n,i),Wu.distancePointLine(n,t,e),Wu.distancePointLine(i,t,e)):0},Wu.isPointInRing=function(t,e){return Wu.locatePointInRing(t,e)!==fu.EXTERIOR},Wu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new hu;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,h=i.y,u=a-r,l=h-o;n+=Math.sqrt(u*u+l*l),r=a,o=h}return n},Wu.isCCW=function(t){var e=t.length-1;if(e<3)throw new eu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var h=t[s],u=t[a];if(h.equals2D(n)||u.equals2D(n)||h.equals2D(u))return!1;var l=Wu.computeOrientation(h,n,u);return 0===l?h.x>u.x:l>0},Wu.locatePointInRing=function(t,e){return Vu.locatePointInRing(t,e)},Wu.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},Wu.computeOrientation=function(t,e,n){return Wu.orientationIndex(t,e,n)},Wu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new eu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Wu.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var h=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/h;if(u<=0)return o.distance(s);if(u>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/h;return Math.abs(l)*Math.sqrt(h)}},Wu.isOnLine=function(t,e){for(var n=new Uu,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},Hu.CLOCKWISE.get=function(){return-1},Hu.RIGHT.get=function(){return Wu.CLOCKWISE},Hu.COUNTERCLOCKWISE.get=function(){return 1},Hu.LEFT.get=function(){return Wu.COUNTERCLOCKWISE},Hu.COLLINEAR.get=function(){return 0},Hu.STRAIGHT.get=function(){return Wu.COLLINEAR},Object.defineProperties(Wu,Hu);var Yu=function(){};Yu.prototype.filter=function(t){},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var Xu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Zu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Xu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Xu.SORTINDEX_GEOMETRYCOLLECTION},Xu.prototype.getFactory=function(){return this._factory},Xu.prototype.getGeometryN=function(t){return this},Xu.prototype.getArea=function(){return 0},Xu.prototype.isRectangle=function(){return!1},Xu.prototype.equals=function(){if(arguments[0]instanceof Xu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Xu))return!1;var n=e;return this.equalsExact(n)}},Xu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Xu.prototype.geometryChanged=function(){this.apply(Xu.geometryChangedFilter)},Xu.prototype.geometryChangedAction=function(){this._envelope=null},Xu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Xu.prototype.getLength=function(){return 0},Xu.prototype.getNumGeometries=function(){return 1},Xu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},Xu.prototype.getUserData=function(){return this._userData},Xu.prototype.getSRID=function(){return this._SRID},Xu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Xu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Xu.SORTINDEX_GEOMETRYCOLLECTION)throw new eu("This method does not support GeometryCollection arguments")},Xu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Xu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Xu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Xu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Lu(this._envelope)},Xu.prototype.setSRID=function(t){this._SRID=t},Xu.prototype.setUserData=function(t){this._userData=t},Xu.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},Xu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Xu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Xu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Xu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Xu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Xu.SORTINDEX_MULTIPOLYGON},Xu.prototype.interfaces_=function(){return[ou,ru,au]},Xu.prototype.getClass=function(){return Xu},Xu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Xu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Zu.serialVersionUID.get=function(){return 0x799ea46522854c00},Zu.SORTINDEX_POINT.get=function(){return 0},Zu.SORTINDEX_MULTIPOINT.get=function(){return 1},Zu.SORTINDEX_LINESTRING.get=function(){return 2},Zu.SORTINDEX_LINEARRING.get=function(){return 3},Zu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Zu.SORTINDEX_POLYGON.get=function(){return 5},Zu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Zu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Zu.geometryChangedFilter.get=function(){return Ju},Object.defineProperties(Xu,Zu);var Ju=function(){};Ju.interfaces_=function(){return[Yu]},Ju.filter=function(t){t.geometryChangedAction()};var Ku=function(){};Ku.prototype.filter=function(t){},Ku.prototype.interfaces_=function(){return[]},Ku.prototype.getClass=function(){return Ku};var $u=function(){},Qu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$u.prototype.isInBoundary=function(t){},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u},Qu.Mod2BoundaryNodeRule.get=function(){return tl},Qu.EndPointBoundaryNodeRule.get=function(){return el},Qu.MultiValentEndPointBoundaryNodeRule.get=function(){return nl},Qu.MonoValentEndPointBoundaryNodeRule.get=function(){return il},Qu.MOD2_BOUNDARY_RULE.get=function(){return new tl},Qu.ENDPOINT_BOUNDARY_RULE.get=function(){return new el},Qu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nl},Qu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new il},Qu.OGC_SFS_BOUNDARY_RULE.get=function(){return $u.MOD2_BOUNDARY_RULE},Object.defineProperties($u,Qu);var tl=function(){};tl.prototype.isInBoundary=function(t){return t%2==1},tl.prototype.interfaces_=function(){return[$u]},tl.prototype.getClass=function(){return tl};var el=function(){};el.prototype.isInBoundary=function(t){return t>0},el.prototype.interfaces_=function(){return[$u]},el.prototype.getClass=function(){return el};var nl=function(){};nl.prototype.isInBoundary=function(t){return t>1},nl.prototype.interfaces_=function(){return[$u]},nl.prototype.getClass=function(){return nl};var il=function(){};il.prototype.isInBoundary=function(t){return 1===t},il.prototype.interfaces_=function(){return[$u]},il.prototype.getClass=function(){return il};var rl=function(){};function ol(t){this.message=t||""}rl.prototype.add=function(){},rl.prototype.addAll=function(){},rl.prototype.isEmpty=function(){},rl.prototype.iterator=function(){},rl.prototype.size=function(){},rl.prototype.toArray=function(){},rl.prototype.remove=function(){},ol.prototype=new Error,ol.prototype.name="IndexOutOfBoundsException";var sl=function(){};sl.prototype.hasNext=function(){},sl.prototype.next=function(){},sl.prototype.remove=function(){};var al=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(rl);function hl(t){this.message=t||""}hl.prototype=new Error,hl.prototype.name="NoSuchElementException";var ul=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof rl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,rl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ll(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ol;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(al),ll=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new hl;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sl),cl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[1],i=!1,r=arguments[0].iterator();r.hasNext();)e.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];return this.add(i,r,!0),!0}if(arguments[0]instanceof hu&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var h=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<h.length;l++)e.add(h[l],u);else for(var c=h.length-1;c>=0;c--)e.add(h[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof hu){var f=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<d&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var g=arguments[0],y=arguments[1],m=arguments[2],_=arguments[3],v=1;m>_&&(v=-1);for(var b=m;b!==_;b+=v)e.add(g[b],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new hu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(ul),fl=function(){},pl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};pl.ForwardComparator.get=function(){return dl},pl.BidirectionalComparator.get=function(){return gl},pl.coordArrayType.get=function(){return new Array(0).fill(null)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},fl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(fl.indexOf(i,e)<0)return i}return null},fl.scroll=function(t,e){var n=fl.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);Pu.arraycopy(t,n,i,0,t.length-n),Pu.arraycopy(t,0,i,t.length-n,n),Pu.arraycopy(i,0,t,0,t.length)},fl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},fl.intersection=function(t,e){for(var n=new cl,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},fl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},fl.removeRepeatedPoints=function(t){return fl.hasRepeatedPoints(t)?new cl(t,!1).toCoordinateArray():t},fl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},fl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},fl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new hu(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],h=0;h<a;h++)o[s+h]=new hu(i[r+h])},fl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},fl.envelope=function(t){for(var e=new Lu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},fl.toCoordinateArray=function(t){return t.toArray(fl.coordArrayType)},fl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},fl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},fl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},fl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},fl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},fl.extract=function(t,e,n){e=gu.clamp(e,0,t.length);var i=(n=gu.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(fl,pl);var dl=function(){};dl.prototype.compare=function(t,e){return fl.compare(t,e)},dl.prototype.interfaces_=function(){return[su]},dl.prototype.getClass=function(){return dl};var gl=function(){};gl.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=fl.compare(n,i);return fl.isEqualReversed(n,i)?0:r},gl.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=fl.increasingDirection(n),o=fl.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,h=0;h<n.length;h++){var u=n[s].compareTo(i[a]);if(0!==u)return u;s+=r,a+=o}return 0},gl.prototype.interfaces_=function(){return[su]},gl.prototype.getClass=function(){return gl};var yl=function(){};yl.prototype.get=function(){},yl.prototype.put=function(){},yl.prototype.size=function(){},yl.prototype.values=function(){},yl.prototype.entrySet=function(){};var ml=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(yl);function _l(t){this.message=t||""}function vl(){}_l.prototype=new Error,_l.prototype.name="OperationNotSupported",vl.prototype=new rl,vl.prototype.contains=function(){};var bl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof rl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new xl(this)},e}(vl),xl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new hl;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _l},e}(sl);function wl(t){return null===t?0:t.color}function El(t){return null===t?null:t.parent}function Ml(t,e){null!==t&&(t.color=e)}function Sl(t){return null===t?null:t.left}function Il(t){return null===t?null:t.right}function Cl(){this.root_=null,this.size_=0}Cl.prototype=new ml,Cl.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Cl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Cl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(El(t)===Sl(El(El(t)))){var n=Il(El(El(t)));1===wl(n)?(Ml(El(t),0),Ml(n,0),Ml(El(El(t)),1),t=El(El(t))):(t===Il(El(t))&&(t=El(t),e.rotateLeft(t)),Ml(El(t),0),Ml(El(El(t)),1),e.rotateRight(El(El(t))))}else{var i=Sl(El(El(t)));1===wl(i)?(Ml(El(t),0),Ml(i,0),Ml(El(El(t)),1),t=El(El(t))):(t===Sl(El(t))&&(t=El(t),e.rotateRight(t)),Ml(El(t),0),Ml(El(El(t)),1),e.rotateLeft(El(El(t))))}this.root_.color=0},Cl.prototype.values=function(){var t=new ul,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Cl.successor(e));)t.add(e.value);return t},Cl.prototype.entrySet=function(){var t=new bl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Cl.successor(e));)t.add(e);return t},Cl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Cl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Cl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Cl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Cl.prototype.size=function(){return this.size_};var Pl=function(){};function Nl(){}function Ll(){this.array_=[],arguments[0]instanceof rl&&this.addAll(arguments[0])}Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl},Nl.prototype=new vl,Ll.prototype=new Nl,Ll.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ll.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ll.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ll.prototype.remove=function(t){throw new _l},Ll.prototype.size=function(){return this.array_.length},Ll.prototype.isEmpty=function(){return 0===this.array_.length},Ll.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ll.prototype.iterator=function(){return new Ol(this)};var Ol=function(t){this.treeSet_=t,this.position_=0};Ol.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new hl;return this.treeSet_.array_[this.position_++]},Ol.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ol.prototype.remove=function(){throw new _l};var kl=function(){};kl.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},kl.asList=function(t){for(var e=new ul,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var Al=function(){},Rl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Rl.P.get=function(){return 0},Rl.L.get=function(){return 1},Rl.A.get=function(){return 2},Rl.FALSE.get=function(){return-1},Rl.TRUE.get=function(){return-2},Rl.DONTCARE.get=function(){return-3},Rl.SYM_FALSE.get=function(){return"F"},Rl.SYM_TRUE.get=function(){return"T"},Rl.SYM_DONTCARE.get=function(){return"*"},Rl.SYM_P.get=function(){return"0"},Rl.SYM_L.get=function(){return"1"},Rl.SYM_A.get=function(){return"2"},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.toDimensionSymbol=function(t){switch(t){case Al.FALSE:return Al.SYM_FALSE;case Al.TRUE:return Al.SYM_TRUE;case Al.DONTCARE:return Al.SYM_DONTCARE;case Al.P:return Al.SYM_P;case Al.L:return Al.SYM_L;case Al.A:return Al.SYM_A}throw new eu("Unknown dimension value: "+t)},Al.toDimensionValue=function(t){switch(vu.toUpperCase(t)){case Al.SYM_FALSE:return Al.FALSE;case Al.SYM_TRUE:return Al.TRUE;case Al.SYM_DONTCARE:return Al.DONTCARE;case Al.SYM_P:return Al.P;case Al.SYM_L:return Al.L;case Al.SYM_A:return Al.A}throw new eu("Unknown dimension symbol: "+t)},Object.defineProperties(Al,Rl);var Tl=function(){};Tl.prototype.filter=function(t){},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl};var Dl=function(){};Dl.prototype.filter=function(t,e){},Dl.prototype.isDone=function(){},Dl.prototype.isGeometryChanged=function(){},Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl};var Fl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new eu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Lu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n;if(this._geometries.length!==r._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(r._geometries[o],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Al.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Al.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Ll(kl.asList(this._geometries)),i=new Ll(kl.asList(e._geometries));return this.compare(n,i)}if(2===arguments.length){for(var r=arguments[1],o=arguments[0],s=this.getNumGeometries(),a=o.getNumGeometries(),h=0;h<s&&h<a;){var u=t.getGeometryN(h),l=o.getGeometryN(h),c=u.compareToSameClass(l,r);if(0!==c)return c;h++}return h<s?1:h<a?-1:0}},e.prototype.apply=function(){var t=this;if(du(arguments[0],Ku))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(du(arguments[0],Dl)){var i=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(t._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(du(arguments[0],Tl)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(du(arguments[0],Yu)){var a=arguments[0];a.filter(this);for(var h=0;h<this._geometries.length;h++)t._geometries[h].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),zu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Xu),Bl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Al.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new zl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Fl),zl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=$u.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};zl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},zl.prototype.getBoundary=function(){return this._geom instanceof Jl?this.boundaryLineString(this._geom):this._geom instanceof Bl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},zl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zl.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new ul;this._endpointMap=new Cl;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);0!==r.getNumPoints()&&(e.addEndpoint(r.getCoordinateN(0)),e.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return fl.toCoordinateArray(n)},zl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new jl,this._endpointMap.put(t,e)),e.count++},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.getBoundary=function(){return 1===arguments.length?new zl(arguments[0]).getBoundary():2===arguments.length?new zl(arguments[0],arguments[1]).getBoundary():void 0};var jl=function(){this.count=null};function ql(){}function Ul(){}jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Gl=function(){};function Vl(){}function Wl(){}function Hl(){}var Yl=function(){},Xl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl},Yl.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Yl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Vl,n=new ql(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new Hl(new Ul(Yl.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+Yl.NEWLINE}catch(t){if(!(t instanceof Wl))throw t;zu.shouldNeverReachHere()}return o}},Yl.split=function(t,e){for(var n=e.length,i=new ul,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),h=0;h<a.length;h++)a[h]=i.get(h);return a},Yl.toString=function(){if(1===arguments.length){var t=arguments[0];return Yl.SIMPLE_ORDINATE_FORMAT.format(t)}},Yl.spaces=function(t){return Yl.chars(" ",t)},Xl.NEWLINE.get=function(){return Pu.getProperty("line.separator")},Xl.SIMPLE_ORDINATE_FORMAT.get=function(){return new Gl("0.#")},Object.defineProperties(Yl,Xl);var Zl=function(){};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl},Zl.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Zl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Mu.X)===t.getOrdinate(e-1,Mu.X)&&t.getOrdinate(0,Mu.Y)===t.getOrdinate(e-1,Mu.Y)},Zl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||nu.isNaN(s)&&nu.isNaN(a)))return!1}return!0},Zl.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Zl.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Zl.copy(e,r-1,i,o,1);return i},Zl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Zl.swap(t,i,e-i)},Zl.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Zl.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Zl.copyCoord(t,e+o,n,i+o)},Zl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new mu;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Yl.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Zl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zl.createClosedRing(t,e,4):e.getOrdinate(0,Mu.X)===e.getOrdinate(n-1,Mu.X)&&e.getOrdinate(0,Mu.Y)===e.getOrdinate(n-1,Mu.Y)?e:Zl.createClosedRing(t,e,n+1)},Zl.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Zl.copy(e,0,i,0,r);for(var o=r;o<n;o++)Zl.copy(e,0,i,o,1);return i};var Jl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Lu:this._points.expandEnvelope(new Lu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n;if(this._points.size()!==r._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),r._points.getCoordinate(o),i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Zl.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Al.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Wu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0,i=0;n<this._points.size()&&i<e._points.size();){var r=t._points.getCoordinate(n).compareTo(e._points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this._points.size()?1:i<e._points.size()?-1:0}if(2===arguments.length){var o=arguments[0];return arguments[1].compare(this._points,o._points)}},e.prototype.apply=function(){var t=this;if(du(arguments[0],Ku))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(du(arguments[0],Dl)){var i=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(i.filter(t._points,r),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else(du(arguments[0],Tl)||du(arguments[0],Yu))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new zl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new eu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Xu),Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var $l=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Lu;var t=new Lu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Al.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(du(arguments[0],Ku)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(du(arguments[0],Dl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(du(arguments[0],Tl)||du(arguments[0],Yu))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),zu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Xu),Ql=function(){};Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var tc=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new eu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new eu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Wu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Wu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var h=t.getX(a),u=t.getY(a);if(h!==o==(u!==s))return!1;o=h,s=u}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n,o=this._shell,s=r._shell;if(!o.equalsExact(s,i))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(r._holes[a],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);kl.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(n.isEmpty())return null;var r=new Array(n.getCoordinates().length-1).fill(null);Pu.arraycopy(n.getCoordinates(),0,r,0,r.length);var o=fl.minCoordinate(n.getCoordinates());fl.scroll(r,o),Pu.arraycopy(r,0,n.getCoordinates(),0,r.length),n.getCoordinates()[r.length]=r[0],Wu.isCCW(n.getCoordinates())===i&&fl.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,i=e._shell;return n.compareToSameClass(i)}if(2===arguments.length){var r=arguments[1],o=arguments[0],s=this._shell,a=o._shell,h=s.compareToSameClass(a,r);if(0!==h)return h;for(var u=this.getNumInteriorRing(),l=o.getNumInteriorRing(),c=0;c<u&&c<l;){var f=t.getInteriorRingN(c),p=o.getInteriorRingN(c),d=f.compareToSameClass(p,r);if(0!==d)return d;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){var e=this;if(du(t,Ku)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(du(t,Dl)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(e._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(du(t,Tl))t.filter(this);else if(du(t,Yu)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Ql]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Xu),ec=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Al.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Fl),nc=function(t){function e(e,n){e instanceof hu&&n instanceof _c&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Al.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new eu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new eu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jl),ic=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new ul,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ql]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Fl),rc=function(t){this._factory=t||null,this._isUserDataCopied=!1},oc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Fl?this.editGeometryCollection(t,e):t instanceof tc?this.editPolygon(t,e):t instanceof $l||t instanceof Jl?e.edit(t,this._factory):(zu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new ul,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===ec?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Bl?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ic?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},rc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new ul,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.GeometryEditorOperation=function(){},oc.NoOpGeometryOperation.get=function(){return sc},oc.CoordinateOperation.get=function(){return ac},oc.CoordinateSequenceOperation.get=function(){return hc},Object.defineProperties(rc,oc);var sc=function(){};sc.prototype.edit=function(t,e){return t},sc.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},sc.prototype.getClass=function(){return sc};var ac=function(){};ac.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof nc?e.createLinearRing(n):t instanceof Jl?e.createLineString(n):t instanceof $l?n.length>0?e.createPoint(n[0]):e.createPoint():t},ac.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},ac.prototype.getClass=function(){return ac};var hc=function(){};hc.prototype.edit=function(t,e){return t instanceof nc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $l?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},hc.prototype.interfaces_=function(){return[rc.GeometryEditorOperation]},hc.prototype.getClass=function(){return hc};var uc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new hu}else if(du(arguments[0],Mu)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)t._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],h=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=h;for(var u=0;u<a;u++)t._coordinates[u]=new hu}},lc={serialVersionUID:{configurable:!0}};uc.prototype.setOrdinate=function(t,e,n){switch(e){case Mu.X:this._coordinates[t].x=n;break;case Mu.Y:this._coordinates[t].y=n;break;case Mu.Z:this._coordinates[t].z=n;break;default:throw new eu("invalid ordinateIndex")}},uc.prototype.size=function(){return this._coordinates.length},uc.prototype.getOrdinate=function(t,e){switch(e){case Mu.X:return this._coordinates[t].x;case Mu.Y:return this._coordinates[t].y;case Mu.Z:return this._coordinates[t].z}return nu.NaN},uc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},uc.prototype.getCoordinateCopy=function(t){return new hu(this._coordinates[t])},uc.prototype.getDimension=function(){return this._dimension},uc.prototype.getX=function(t){return this._coordinates[t].x},uc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new uc(t,this._dimension)},uc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},uc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new uc(t,this._dimension)},uc.prototype.toString=function(){if(this._coordinates.length>0){var t=new mu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},uc.prototype.getY=function(t){return this._coordinates[t].y},uc.prototype.toCoordinateArray=function(){return this._coordinates},uc.prototype.interfaces_=function(){return[Mu,au]},uc.prototype.getClass=function(){return uc},lc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(uc,lc);var cc=function(){},fc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};cc.prototype.readResolve=function(){return cc.instance()},cc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new uc(arguments[0]);if(du(arguments[0],Mu))return new uc(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new uc(t):new uc(t,e)}},cc.prototype.interfaces_=function(){return[cu,au]},cc.prototype.getClass=function(){return cc},cc.instance=function(){return cc.instanceObject},fc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fc.instanceObject.get=function(){return new cc},Object.defineProperties(cc,fc);var pc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new ul,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new bl;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(yl),dc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},gc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};dc.prototype.equals=function(t){if(!(t instanceof dc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},dc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new _u(n).compareTo(new _u(i))},dc.prototype.getScale=function(){return this._scale},dc.prototype.isFloating=function(){return this._modelType===dc.FLOATING||this._modelType===dc.FLOATING_SINGLE},dc.prototype.getType=function(){return this._modelType},dc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===dc.FLOATING?t="Floating":this._modelType===dc.FLOATING_SINGLE?t="Floating-Single":this._modelType===dc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},dc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return nu.isNaN(t)||this._modelType===dc.FLOATING_SINGLE?t:this._modelType===dc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof hu){var e=arguments[0];if(this._modelType===dc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},dc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===dc.FLOATING?t=16:this._modelType===dc.FLOATING_SINGLE?t=6:this._modelType===dc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},dc.prototype.setScale=function(t){this._scale=Math.abs(t)},dc.prototype.interfaces_=function(){return[au,ru]},dc.prototype.getClass=function(){return dc},dc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},gc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(dc,gc);var yc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yc.prototype.readResolve=function(){return yc.nameToTypeMap.get(this._name)},yc.prototype.toString=function(){return this._name},yc.prototype.interfaces_=function(){return[au]},yc.prototype.getClass=function(){return yc},mc.serialVersionUID.get=function(){return-552860263173159e4},mc.nameToTypeMap.get=function(){return new pc},Object.defineProperties(yc,mc),dc.Type=yc,dc.FIXED=new yc("FIXED"),dc.FLOATING=new yc("FLOATING"),dc.FLOATING_SINGLE=new yc("FLOATING SINGLE");var _c=function t(){this._precisionModel=new dc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?du(arguments[0],cu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof dc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},vc={serialVersionUID:{configurable:!0}};_c.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new hu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new hu(t.getMinX(),t.getMinY()),new hu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new hu(t.getMinX(),t.getMinY()),new hu(t.getMinX(),t.getMaxY()),new hu(t.getMaxX(),t.getMaxY()),new hu(t.getMaxX(),t.getMinY()),new hu(t.getMinX(),t.getMinY())]),null)},_c.prototype.createLineString=function(t){return t?t instanceof Array?new Jl(this.getCoordinateSequenceFactory().create(t),this):du(t,Mu)?new Jl(t,this):void 0:new Jl(this.getCoordinateSequenceFactory().create([]),this)},_c.prototype.createMultiLineString=function(){return 0===arguments.length?new Bl(null,this):1===arguments.length?new Bl(arguments[0],this):void 0},_c.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(_c.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof tc)return this.createMultiPolygon(_c.toPolygonArray(t));if(a instanceof Jl)return this.createMultiLineString(_c.toLineStringArray(t));if(a instanceof $l)return this.createMultiPoint(_c.toPointArray(t));zu.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_c.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_c.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof hu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(du(arguments[0],Mu))return new $l(arguments[0],this)}},_c.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_c.prototype.createPolygon=function(){if(0===arguments.length)return new tc(null,null,this);if(1===arguments.length){if(du(arguments[0],Mu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new tc(arguments[0],arguments[1],this)},_c.prototype.getSRID=function(){return this._SRID},_c.prototype.createGeometryCollection=function(){return 0===arguments.length?new Fl(null,this):1===arguments.length?new Fl(arguments[0],this):void 0},_c.prototype.createGeometry=function(t){return new rc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_c.prototype.getPrecisionModel=function(){return this._precisionModel},_c.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(du(arguments[0],Mu))return new nc(arguments[0],this)}},_c.prototype.createMultiPolygon=function(){return 0===arguments.length?new ic(null,this):1===arguments.length?new ic(arguments[0],this):void 0},_c.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new ec(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new ec(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(du(arguments[0],Mu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=t.getCoordinateSequenceFactory().create(1,n.getDimension());Zl.copy(n,r,o,0,1),i[r]=t.createPoint(o)}return this.createMultiPoint(i)}}},_c.prototype.interfaces_=function(){return[au]},_c.prototype.getClass=function(){return _c},_c.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.getDefaultCoordinateSequenceFactory=function(){return cc.instance()},_c.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},vc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_c,vc);var bc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xc=function(t){this.geometryFactory=t||new _c};xc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!wc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==bc.indexOf(n)?wc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?wc[n].apply(this,[e.geometries]):wc[n].apply(this,[e])},xc.prototype.write=function(t){var e=t.getGeometryType();if(!Ec[e])throw new Error("Geometry is not supported");return Ec[e].apply(this,[t])};var wc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!wc[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=wc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new hu(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new hu(t[0],t[1]),new hu(t[2],t[1]),new hu(t[2],t[3]),new hu(t[0],t[3]),new hu(t[0],t[1])])},Point:function(t){var e=new hu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=wc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=wc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=wc.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(wc.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Ec={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ec.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ec.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Ec.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ec.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ec.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=Ec.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ec.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Ec[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Mc=function(t){this.geometryFactory=t||new _c,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xc(this.geometryFactory)};Mc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===dc.FIXED&&this.reducePrecision(e),e},Mc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sc=function(){this.parser=new xc(this.geometryFactory)};Sc.prototype.write=function(t){return this.parser.write(t)};var Ic=function(){},Cc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Pc(t){this.message=t||""}function Nc(){this.array_=[]}Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.opposite=function(t){return t===Ic.LEFT?Ic.RIGHT:t===Ic.RIGHT?Ic.LEFT:t},Cc.ON.get=function(){return 0},Cc.LEFT.get=function(){return 1},Cc.RIGHT.get=function(){return 2},Object.defineProperties(Ic,Cc),Pc.prototype=new Error,Pc.prototype.name="EmptyStackException",Nc.prototype=new al,Nc.prototype.add=function(t){return this.array_.push(t),!0},Nc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nc.prototype.push=function(t){return this.array_.push(t),t},Nc.prototype.pop=function(t){if(0===this.array_.length)throw new Pc;return this.array_.pop()},Nc.prototype.peek=function(){if(0===this.array_.length)throw new Pc;return this.array_[this.array_.length-1]},Nc.prototype.empty=function(){return 0===this.array_.length},Nc.prototype.isEmpty=function(){return this.empty()},Nc.prototype.search=function(t){return this.array_.indexOf(t)},Nc.prototype.size=function(){return this.array_.length},Nc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Lc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Lc.prototype.getCoordinate=function(){return this._minCoord},Lc.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Lc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();zu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Wu.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Wu.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Wu.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Lc.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Ic.LEFT;return n[e].y<n[e+1].y&&(i=Ic.RIGHT),i},Lc.prototype.getEdge=function(){return this._orientedDe},Lc.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===e._minCoord||n[i].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=i,e._minCoord=n[i])},Lc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Lc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}zu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ic.LEFT&&(this._orientedDe=this._minDe.getSym())},Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc};var Oc=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new hu(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Fu),kc=function(){this.array_=[]};kc.prototype.addLast=function(t){this.array_.push(t)},kc.prototype.removeFirst=function(){return this.array_.shift()},kc.prototype.isEmpty=function(){return 0===this.array_.length};var Ac=function(){this._finder=null,this._dirEdgeList=new ul,this._nodes=new ul,this._rightMostCoord=null,this._env=null,this._finder=new Lc};Ac.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ac.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ac.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Oc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Ac.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ic.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ac.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ac.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ic.RIGHT)>=1&&e.getDepth(Ic.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ac.prototype.computeDepths=function(t){var e=new bl,n=new kc,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ac.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ac.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Lu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Ac.prototype.addReachable=function(t){var e=new Nc;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ac.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ic.LEFT,t.getDepth(Ic.RIGHT)),e.setDepth(Ic.RIGHT,t.getDepth(Ic.LEFT))},Ac.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Ac.prototype.getNodes=function(){return this._nodes},Ac.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ac.prototype.interfaces_=function(){return[ru]},Ac.prototype.getClass=function(){return Ac};var Rc=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Ic.ON]=i}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var o=0;o<this.location.length;o++)e.location[o]=r.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],h=arguments[2];this.init(3),this.location[Ic.ON]=s,this.location[Ic.LEFT]=a,this.location[Ic.RIGHT]=h}};Rc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Rc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fu.NONE)return!1;return!0},Rc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fu.NONE&&(this.location[e]=t)},Rc.prototype.isLine=function(){return 1===this.location.length},Rc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ic.ON]=this.location[Ic.ON],e[Ic.LEFT]=fu.NONE,e[Ic.RIGHT]=fu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Rc.prototype.getLocations=function(){return this.location},Rc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ic.LEFT];this.location[Ic.LEFT]=this.location[Ic.RIGHT],this.location[Ic.RIGHT]=t},Rc.prototype.toString=function(){var t=new mu;return this.location.length>1&&t.append(fu.toLocationSymbol(this.location[Ic.LEFT])),t.append(fu.toLocationSymbol(this.location[Ic.ON])),this.location.length>1&&t.append(fu.toLocationSymbol(this.location[Ic.RIGHT])),t.toString()},Rc.prototype.setLocations=function(t,e,n){this.location[Ic.ON]=t,this.location[Ic.LEFT]=e,this.location[Ic.RIGHT]=n},Rc.prototype.get=function(t){return t<this.location.length?this.location[t]:fu.NONE},Rc.prototype.isArea=function(){return this.location.length>1},Rc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fu.NONE)return!0;return!1},Rc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ic.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Rc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fu.NONE)},Rc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Rc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Tc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Rc(e),this.elt[1]=new Rc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Rc(n.elt[0]),this.elt[1]=new Rc(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Rc(fu.NONE),this.elt[1]=new Rc(fu.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Rc(o,s,a),this.elt[1]=new Rc(o,s,a)}else if(4===arguments.length){var h=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new Rc(fu.NONE,fu.NONE,fu.NONE),this.elt[1]=new Rc(fu.NONE,fu.NONE,fu.NONE),this.elt[h].setLocations(u,l,c)}};Tc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Tc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Tc.prototype.isNull=function(t){return this.elt[t].isNull()},Tc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Tc.prototype.isLine=function(t){return this.elt[t].isLine()},Tc.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Rc(t.elt[n]):e.elt[n].merge(t.elt[n])},Tc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Tc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ic.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Tc.prototype.toString=function(){var t=new mu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Tc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Tc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Tc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ic.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Tc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Tc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Tc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Rc(this.elt[t].location[0]))},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.toLineLabel=function(t){for(var e=new Tc(fu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Dc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ul,this._pts=new ul,this._label=new Tc(fu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ul,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Dc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Wu.isCCW(this._ring.getCoordinates())},Dc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Dc.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,i=!0;do{if(null===n)throw new Oc("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Oc("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var r=n.getLabel();zu.isTrue(r.isArea()),e.mergeLabel(r),e.addPoints(n.getEdge(),n.isForward(),i),i=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Dc.prototype.getLinearRing=function(){return this._ring},Dc.prototype.getCoordinate=function(t){return this._pts.get(t)},Dc.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Dc.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Dc.prototype.isHole=function(){return this._isHole},Dc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Dc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Wu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Dc.prototype.addHole=function(t){this._holes.add(t)},Dc.prototype.isShell=function(){return null===this._shell},Dc.prototype.getLabel=function(){return this._label},Dc.prototype.getEdges=function(){return this._edges},Dc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Dc.prototype.getShell=function(){return this._shell},Dc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ic.RIGHT);if(n===fu.NONE)return null;if(this._label.getLocation(e)===fu.NONE)return this._label.setLocation(e,n),null}},Dc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Dc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),Bc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new ul,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Fc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),zc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};zc.prototype.setVisited=function(t){this._isVisited=t},zc.prototype.setInResult=function(t){this._isInResult=t},zc.prototype.isCovered=function(){return this._isCovered},zc.prototype.isCoveredSet=function(){return this._isCoveredSet},zc.prototype.setLabel=function(t){this._label=t},zc.prototype.getLabel=function(){return this._label},zc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},zc.prototype.updateIM=function(t){zu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},zc.prototype.isInResult=function(){return this._isInResult},zc.prototype.isVisited=function(){return this._isVisited},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var jc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Tc(0,fu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==fu.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Tc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Tc)for(var i=arguments[0],r=0;r<2;r++){var o=t.computeMergedLocation(i,r);t._label.getLocation(r)===fu.NONE&&t._label.setLocation(r,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fu.BOUNDARY:n=fu.INTERIOR;break;case fu.INTERIOR:default:n=fu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zc),qc=function(){this.nodeMap=new Cl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};qc.prototype.find=function(t){return this.nodeMap.get(t)},qc.prototype.addNode=function(){if(arguments[0]instanceof hu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof jc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},qc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},qc.prototype.iterator=function(){return this.nodeMap.values().iterator()},qc.prototype.values=function(){return this.nodeMap.values()},qc.prototype.getBoundaryNodes=function(t){for(var e=new ul,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===fu.BOUNDARY&&e.add(i)}return e},qc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Uc=function(){},Gc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.isNorthern=function(t){return t===Uc.NE||t===Uc.NW},Uc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Uc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Uc.isInHalfPlane=function(t,e){return e===Uc.SE?t===Uc.SE||t===Uc.SW:t===e||t===e+1},Uc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Uc.NE:Uc.SE:e>=0?Uc.NW:Uc.SW}if(arguments[0]instanceof hu&&arguments[1]instanceof hu){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new eu("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Uc.NE:Uc.SE:i.y>=n.y?Uc.NW:Uc.SW}},Gc.NE.get=function(){return 0},Gc.NW.get=function(){return 1},Gc.SW.get=function(){return 2},Gc.SE.get=function(){return 3},Object.defineProperties(Uc,Gc);var Vc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=null;this._edge=e,this.init(n,i),this._label=r}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],h=arguments[3];this._edge=o,this.init(s,a),this._label=h}};Vc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Wu.computeOrientation(t._p0,t._p1,this._p1)},Vc.prototype.getDy=function(){return this._dy},Vc.prototype.getCoordinate=function(){return this._p0},Vc.prototype.setNode=function(t){this._node=t},Vc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Vc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Vc.prototype.getDirectedCoordinate=function(){return this._p1},Vc.prototype.getDx=function(){return this._dx},Vc.prototype.getLabel=function(){return this._label},Vc.prototype.getEdge=function(){return this._edge},Vc.prototype.getQuadrant=function(){return this._quadrant},Vc.prototype.getNode=function(){return this._node},Vc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Vc.prototype.computeLabel=function(t){},Vc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Uc.quadrant(this._dx,this._dy),zu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vc.prototype.interfaces_=function(){return[ru]},Vc.prototype.getClass=function(){return Vc};var Wc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Tc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Ic.LEFT)===fu.INTERIOR&&t._label.getLocation(n,Ic.RIGHT)===fu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ic.LEFT]+"/"+this._depth[Ic.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ic.LEFT&&(i=-1);var r=Ic.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fu.EXTERIOR&&e===fu.INTERIOR?1:t===fu.INTERIOR&&e===fu.EXTERIOR?-1:0},e}(Vc),Hc=function(){};Hc.prototype.createNode=function(t){return new jc(t,null)},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Yc=function(){if(this._edges=new ul,this._nodes=null,this._edgeEndList=new ul,0===arguments.length)this._nodes=new qc(new Hc);else if(1===arguments.length){var t=arguments[0];this._nodes=new qc(t)}};Yc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Yc.prototype.find=function(t){return this._nodes.find(t)},Yc.prototype.addNode=function(){if(arguments[0]instanceof jc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof hu){var e=arguments[0];return this._nodes.addNode(e)}},Yc.prototype.getNodeIterator=function(){return this._nodes.iterator()},Yc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Yc.prototype.debugPrintln=function(t){Pu.out.println(t)},Yc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===fu.BOUNDARY},Yc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Yc.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Wu.computeOrientation(t,e,i)===Wu.COLLINEAR&&Uc.quadrant(t,e)===Uc.quadrant(n,i)},Yc.prototype.getEdgeEnds=function(){return this._edgeEndList},Yc.prototype.debugPrint=function(t){Pu.out.print(t)},Yc.prototype.getEdgeIterator=function(){return this._edges.iterator()},Yc.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,i=0;i<this._edges.size();i++){var r=n._edges.get(i),o=r.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return r;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return r}return null},Yc.prototype.insertEdge=function(t){this._edges.add(t)},Yc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Yc.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next();e._edges.add(i);var r=new Wc(i,!0),o=new Wc(i,!1);r.setSym(o),o.setSym(r),e.add(r),e.add(o)}},Yc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Yc.prototype.getNodes=function(){return this._nodes.values()},Yc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Xc=function(){this._geometryFactory=null,this._shellList=new ul;var t=arguments[0];this._geometryFactory=t};Xc.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Xc.prototype.computePolygons=function(t){for(var e=new ul,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Xc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Oc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Xc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new ul,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Xc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Xc.prototype.buildMaximalEdgeRings=function(t){for(var e=new ul,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Bc(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Xc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Xc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var h=a.next(),u=h.getLinearRing(),l=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;l.contains(i)&&Wu.isPointInRing(r,u.getCoordinates())&&(c=!0),c&&(null===o||s.contains(l))&&(o=h)}return o},Xc.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return zu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Xc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Yc.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new ul,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Zc=function(){};Zc.prototype.getBounds=function(){},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Jc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Jc.prototype.getItem=function(){return this._item},Jc.prototype.getBounds=function(){return this._bounds},Jc.prototype.interfaces_=function(){return[Zc,au]},Jc.prototype.getClass=function(){return Jc};var Kc=function(){this._size=null,this._items=null,this._size=0,this._items=new ul,this._items.add(null)};Kc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kc.prototype.size=function(){return this._size},Kc.prototype.reorder=function(t){for(var e=this,n=null,i=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(i)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,i)},Kc.prototype.clear=function(){this._size=0,this._items.clear()},Kc.prototype.isEmpty=function(){return 0===this._size},Kc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var $c=function(){};$c.prototype.visitItem=function(t){},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var Qc=function(){};Qc.prototype.insert=function(t,e){},Qc.prototype.remove=function(t,e){},Qc.prototype.query=function(){},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var tf=function(){if(this._childBoundables=new ul,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ef={serialVersionUID:{configurable:!0}};tf.prototype.getLevel=function(){return this._level},tf.prototype.size=function(){return this._childBoundables.size()},tf.prototype.getChildBoundables=function(){return this._childBoundables},tf.prototype.addChildBoundable=function(t){zu.isTrue(null===this._bounds),this._childBoundables.add(t)},tf.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},tf.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},tf.prototype.interfaces_=function(){return[Zc,au]},tf.prototype.getClass=function(){return tf},ef.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(tf,ef);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var n=t.toArray();e?kl.sort(n,e):kl.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},nf.singletonList=function(t){var e=new ul;return e.add(t),e};var rf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};rf.prototype.expandToQueue=function(t,e){var n=rf.isComposite(this._boundable1),i=rf.isComposite(this._boundable2);if(n&&i)return rf.area(this._boundable1)>rf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new eu("neither boundable is composite")},rf.prototype.isLeaves=function(){return!(rf.isComposite(this._boundable1)||rf.isComposite(this._boundable2))},rf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},rf.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new rf(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},rf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},rf.prototype.getDistance=function(){return this._distance},rf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rf.prototype.interfaces_=function(){return[ru]},rf.prototype.getClass=function(){return rf},rf.area=function(t){return t.getBounds().getArea()},rf.isComposite=function(t){return t instanceof tf};var of=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new ul,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];zu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},sf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};of.prototype.getNodeCapacity=function(){return this._nodeCapacity},of.prototype.lastNode=function(t){return t.get(t.size()-1)},of.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof tf?e+=t.size(i):i instanceof Jc&&(e+=1)}return e}},of.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Jc&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},of.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new ul:e}if(1===arguments.length){for(var n=arguments[0],i=new ul,r=n.getChildBoundables().iterator();r.hasNext();){var o=r.next();if(o instanceof tf){var s=t.itemsTree(o);null!==s&&i.add(s)}else o instanceof Jc?i.add(o.getItem()):zu.shouldNeverReachHere()}return i.size()<=0?null:i}},of.prototype.insert=function(t,e){zu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Jc(t,e))},of.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new ul;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(zu.isTrue(i>-2),r.getLevel()===i)return o.add(r),null;for(var s=r.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof tf?t.boundablesAtLevel(i,a,o):(zu.isTrue(a instanceof Jc),-1===i&&o.add(a))}return null}},of.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new ul;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,r)}else if(3===arguments.length)if(du(arguments[2],$c)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),h=0;h<a.size();h++){var u=a.get(h);t.getIntersectsOp().intersects(u.getBounds(),o)&&(u instanceof tf?t.query(o,u,s):u instanceof Jc?s.visitItem(u.getItem()):zu.shouldNeverReachHere())}else if(du(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var l=arguments[0],c=arguments[2],f=arguments[1].getChildBoundables(),p=0;p<f.size();p++){var d=f.get(p);t.getIntersectsOp().intersects(d.getBounds(),l)&&(d instanceof tf?t.query(l,d,c):d instanceof Jc?c.add(d.getItem()):zu.shouldNeverReachHere())}},of.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},of.prototype.getRoot=function(){return this.build(),this._root},of.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=this.removeItem(r,o);if(s)return!0;for(var a=null,h=r.getChildBoundables().iterator();h.hasNext();){var u=h.next();if(t.getIntersectsOp().intersects(u.getBounds(),i)&&u instanceof tf&&(s=t.remove(i,u,o))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),s}},of.prototype.createHigherLevels=function(t,e){zu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},of.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof tf){var r=t.depth(i);r>e&&(e=r)}}return e+1}},of.prototype.createParentBoundables=function(t,e){var n=this;zu.isTrue(!t.isEmpty());var i=new ul;i.add(this.createNode(e));var r=new ul(t);nf.sort(r,this.getComparator());for(var o=r.iterator();o.hasNext();){var s=o.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(e)),n.lastNode(i).addChildBoundable(s)}return i},of.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},of.prototype.interfaces_=function(){return[au]},of.prototype.getClass=function(){return of},of.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},sf.IntersectsOp.get=function(){return af},sf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(of,sf);var af=function(){},hf=function(){};hf.prototype.distance=function(t,e){},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf};var uf=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){zu.isTrue(t.length>0);for(var n=new ul,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new lf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new ul;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(du(arguments[2],$c)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(du(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var a=arguments[0],h=arguments[1],u=arguments[2];t.prototype.query.call(this,a,h,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){zu.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new ul(t);nf.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(du(arguments[0],hf)){var t=arguments[0],n=new rf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof rf){var i=arguments[0];return this.nearestNeighbour(i,nu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&du(arguments[1],hf)){var r=arguments[0],o=arguments[1],s=new rf(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof rf&&"number"==typeof arguments[1]){var a=arguments[0],h=arguments[1],u=null,l=new Kc;for(l.add(a);!l.isEmpty()&&h>0;){var c=l.poll(),f=c.getDistance();if(f>=h)break;c.isLeaves()?(h=f,u=c):c.expandToQueue(l,h)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Jc(arguments[0],arguments[1]),g=new rf(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[Qc,au]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return lf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[su]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[su]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(of),lf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Lu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tf),cf=function(){};cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},cf.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=cf.relativeSign(e.x,n.x),r=cf.relativeSign(e.y,n.y);switch(t){case 0:return cf.compareValue(i,r);case 1:return cf.compareValue(r,i);case 2:return cf.compareValue(r,-i);case 3:return cf.compareValue(-i,r);case 4:return cf.compareValue(-i,-r);case 5:return cf.compareValue(-r,-i);case 6:return cf.compareValue(-r,i);case 7:return cf.compareValue(i,-r)}return zu.shouldNeverReachHere("invalid octant value"),0},cf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ff=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new hu(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};ff.prototype.getCoordinate=function(){return this.coord},ff.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ff.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:cf.compare(this._segmentOctant,this.coord,e.coord)},ff.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ff.prototype.isInterior=function(){return this._isInterior},ff.prototype.interfaces_=function(){return[ru]},ff.prototype.getClass=function(){return ff};var pf=function(){this._nodeMap=new Cl,this._edge=null;var t=arguments[0];this._edge=t};pf.prototype.getSplitCoordinates=function(){var t=new cl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},pf.prototype.addCollapsedNodes=function(){var t=new ul;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},pf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new _u(e+1))}},pf.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new hu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new hu(e.coord))},pf.prototype.iterator=function(){return this._nodeMap.values().iterator()},pf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},pf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},pf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new _u(e[0])),i=r}},pf.prototype.getEdge=function(){return this._edge},pf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},pf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new hu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new hu(e.coord)),new mf(o,this._edge.getData())},pf.prototype.add=function(t,e){var n=new ff(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(zu.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},pf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Fu("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Fu("bad split edge end point at "+r)},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var df=function(){};df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof hu&&arguments[1]instanceof hu){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new eu("Cannot compute the octant for two identical points "+r);return df.octant(s,a)}};var gf=function(){};gf.prototype.getCoordinates=function(){},gf.prototype.size=function(){},gf.prototype.getCoordinate=function(t){},gf.prototype.isClosed=function(){},gf.prototype.setData=function(t){},gf.prototype.getData=function(){},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var yf=function(){};yf.prototype.addIntersection=function(t,e){},yf.prototype.interfaces_=function(){return[gf]},yf.prototype.getClass=function(){return yf};var mf=function(){this._nodeList=new pf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};mf.prototype.getCoordinates=function(){return this._pts},mf.prototype.size=function(){return this._pts.length},mf.prototype.getCoordinate=function(t){return this._pts[t]},mf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},mf.prototype.setData=function(t){this._data=t},mf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:df.octant(t,e)},mf.prototype.getData=function(){return this._data},mf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new hu(arguments[0].getIntersection(i));this.addIntersection(r,n)}},mf.prototype.toString=function(){return Du.toLineString(new uc(this._pts))},mf.prototype.getNodeList=function(){return this._nodeList},mf.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},mf.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},mf.prototype.interfaces_=function(){return[yf]},mf.prototype.getClass=function(){return mf},mf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new ul;return mf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var _f=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new hu,this.p1=new hu;else if(1===arguments.length){var t=arguments[0];this.p0=new hu(t.p0),this.p1=new hu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new hu(e,n),this.p1=new hu(i,r)}},vf={serialVersionUID:{configurable:!0}};_f.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_f.prototype.orientationIndex=function(){if(arguments[0]instanceof _f){var t=arguments[0],e=Wu.orientationIndex(this.p0,this.p1,t.p0),n=Wu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof hu){var i=arguments[0];return Wu.orientationIndex(this.p0,this.p1,i)}},_f.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},_f.prototype.isVertical=function(){return this.p0.x===this.p1.x},_f.prototype.equals=function(t){if(!(t instanceof _f))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},_f.prototype.intersection=function(t){var e=new Uu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},_f.prototype.project=function(){if(arguments[0]instanceof hu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new hu(t);var e=this.projectionFactor(t),n=new hu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof _f){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new _f(s,a)}},_f.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_f.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_f.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},_f.prototype.distancePerpendicular=function(t){return Wu.distancePointLinePerpendicular(t,this.p0,this.p1)},_f.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_f.prototype.midPoint=function(){return _f.midPoint(this.p0,this.p1)},_f.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?nu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},_f.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=nu.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var h=t.closestPoint(this.p1);return(r=h.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=h),n},_f.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},_f.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_f.prototype.getLength=function(){return this.p0.distance(this.p1)},_f.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},_f.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},_f.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},_f.prototype.lineIntersection=function(t){try{return Nu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Cu))throw t}return null},_f.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_f.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,h=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,h=e*o/s}return new hu(n-h,i+a)},_f.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},_f.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nu.isNaN(e))&&(e=1),e},_f.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_f.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_f.prototype.distance=function(){if(arguments[0]instanceof _f){var t=arguments[0];return Wu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof hu){var e=arguments[0];return Wu.distancePointLine(e,this.p0,this.p1)}},_f.prototype.pointAlong=function(t){var e=new hu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},_f.prototype.hashCode=function(){var t=nu.doubleToLongBits(this.p0.x);t^=31*nu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=nu.doubleToLongBits(this.p1.x);return n^=31*nu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},_f.prototype.interfaces_=function(){return[ru,au]},_f.prototype.getClass=function(){return _f},_f.midPoint=function(t,e){return new hu((t.x+e.x)/2,(t.y+e.y)/2)},vf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_f,vf);var bf=function(){this.tempEnv1=new Lu,this.tempEnv2=new Lu,this._overlapSeg1=new _f,this._overlapSeg2=new _f};bf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var xf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};xf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},xf.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},xf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},xf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},xf.prototype.setId=function(t){this._id=t},xf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},xf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Lu(t,e)}return this._env},xf.prototype.getEndIndex=function(){return this._end},xf.prototype.getStartIndex=function(){return this._start},xf.prototype.getContext=function(){return this._context},xf.prototype.getId=function(){return this._id},xf.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],h=n._pts[i],u=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(h,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),c=Math.trunc((i+r)/2);t<l&&(i<c&&this.computeOverlapsInternal(t,l,n,i,c,o),c<r&&this.computeOverlapsInternal(t,l,n,c,r,o)),l<e&&(i<c&&this.computeOverlapsInternal(l,e,n,i,c,o),c<r&&this.computeOverlapsInternal(l,e,n,c,r,o))},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var wf=function(){};wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.getChainStartIndices=function(t){var e=0,n=new ul;n.add(new _u(e));do{var i=wf.findChainEnd(t,e);n.add(new _u(i)),e=i}while(e<t.length-1);return wf.toIntArray(n)},wf.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Uc.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Uc.quadrant(t[r-1],t[r])===i);)r++;return r-1},wf.getChains=function(){if(1===arguments.length){var t=arguments[0];return wf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new ul,r=wf.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new xf(e,r[o],r[o+1],n);i.add(s)}return i}},wf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ef=function(){};Ef.prototype.computeNodes=function(t){},Ef.prototype.getNodedSubstrings=function(){},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef};var Mf=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Mf.prototype.setSegmentIntersector=function(t){this._segInt=t},Mf.prototype.interfaces_=function(){return[Ef]},Mf.prototype.getClass=function(){return Mf};var Sf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new ul,this._index=new uf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=wf.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var i=n.next();i.setId(e._idCounter++),e._index.insert(i.getEnvelope(),i),e._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new If(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var i=n.next(),r=t._index.query(i.getEnvelope()).iterator();r.hasNext();){var o=r.next();if(o.getId()>i.getId()&&(i.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return If},Object.defineProperties(e,n),e}(Mf),If=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bf),Cf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Pf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cf.prototype.getEndCapStyle=function(){return this._endCapStyle},Cf.prototype.isSingleSided=function(){return this._isSingleSided},Cf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cf.JOIN_ROUND&&(this._quadrantSegments=Cf.DEFAULT_QUADRANT_SEGMENTS)},Cf.prototype.getJoinStyle=function(){return this._joinStyle},Cf.prototype.setJoinStyle=function(t){this._joinStyle=t},Cf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cf.prototype.getMitreLimit=function(){return this._mitreLimit},Cf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cf.prototype.setSingleSided=function(t){this._isSingleSided=t},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Pf.CAP_ROUND.get=function(){return 1},Pf.CAP_FLAT.get=function(){return 2},Pf.CAP_SQUARE.get=function(){return 3},Pf.JOIN_ROUND.get=function(){return 1},Pf.JOIN_MITRE.get=function(){return 2},Pf.JOIN_BEVEL.get=function(){return 3},Pf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Pf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Pf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cf,Pf);var Nf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Wu.COUNTERCLOCKWISE,this._inputLine=t||null},Lf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nf.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Nf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;t.isDeletable(e,n,i,t._distanceTol)&&(t._isDeleted[n]=Nf.DELETE,o=!0,r=!0),e=o?i:n,n=t.findNextNonDeletedIndex(e),i=t.findNextNonDeletedIndex(n)}return r},Nf.prototype.isShallowConcavity=function(t,e,n,i){return Wu.computeOrientation(t,e,n)===this._angleOrientation&&Wu.distancePointLine(e,t,n)<i},Nf.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Nf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Nf.prototype.isConcave=function(t,e,n){return Wu.computeOrientation(t,e,n)===this._angleOrientation},Nf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Wu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nf.DELETE;)e++;return e},Nf.prototype.isShallow=function(t,e,n,i){return Wu.distancePointLine(e,t,n)<i},Nf.prototype.collapseLine=function(){for(var t=new cl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.simplify=function(t,e){return new Nf(t).simplify(e)},Lf.INIT.get=function(){return 0},Lf.DELETE.get=function(){return 1},Lf.KEEP.get=function(){return 1},Lf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nf,Lf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ul},kf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new hu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new _c).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new hu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},kf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,kf);var Af=function(){},Rf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.toDegrees=function(t){return 180*t/Math.PI},Af.normalize=function(t){for(;t>Math.PI;)t-=Af.PI_TIMES_2;for(;t<=-Math.PI;)t+=Af.PI_TIMES_2;return t},Af.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Af.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Af.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Af.interiorAngle=function(t,e,n){var i=Af.angle(e,t),r=Af.angle(e,n);return Math.abs(r-i)},Af.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Af.PI_TIMES_2;t>=Af.PI_TIMES_2&&(t=0)}else{for(;t>=Af.PI_TIMES_2;)t-=Af.PI_TIMES_2;t<0&&(t=0)}return t},Af.angleBetween=function(t,e,n){var i=Af.angle(e,t),r=Af.angle(e,n);return Af.diff(i,r)},Af.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Af.toRadians=function(t){return t*Math.PI/180},Af.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Af.COUNTERCLOCKWISE:n<0?Af.CLOCKWISE:Af.NONE},Af.angleBetweenOriented=function(t,e,n){var i=Af.angle(e,t),r=Af.angle(e,n)-i;return r<=-Math.PI?r+Af.PI_TIMES_2:r>Math.PI?r-Af.PI_TIMES_2:r},Rf.PI_TIMES_2.get=function(){return 2*Math.PI},Rf.PI_OVER_2.get=function(){return Math.PI/2},Rf.PI_OVER_4.get=function(){return Math.PI/4},Rf.COUNTERCLOCKWISE.get=function(){return Wu.COUNTERCLOCKWISE},Rf.CLOCKWISE.get=function(){return Wu.CLOCKWISE},Rf.NONE.get=function(){return Wu.COLLINEAR},Object.defineProperties(Af,Rf);var Tf=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _f,this._seg1=new _f,this._offset0=new _f,this._offset1=new _f,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Uu,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Df={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Tf.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Wu.computeOrientation(this._s0,this._s1,this._s2),i=n===Wu.CLOCKWISE&&this._side===Ic.LEFT||n===Wu.COUNTERCLOCKWISE&&this._side===Ic.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Tf.prototype.addLineEndCap=function(t,e){var n=new _f(t,e),i=new _f;this.computeOffsetSegment(n,Ic.LEFT,this._distance,i);var r=new _f;this.computeOffsetSegment(n,Ic.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Wu.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Cf.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Cf.CAP_SQUARE:var h=new hu;h.x=Math.abs(this._distance)*Math.cos(a),h.y=Math.abs(this._distance)*Math.sin(a);var u=new hu(i.p1.x+h.x,i.p1.y+h.y),l=new hu(r.p1.x+h.x,r.p1.y+h.y);this._segList.addPt(u),this._segList.addPt(l)}},Tf.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Tf.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Nu.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof Cu))throw t;o=new hu(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Tf.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),h=n.x-t.x,u=n.y-t.y,l=Math.atan2(u,h);i===Wu.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,i,r),this._segList.addPt(n)},Tf.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Tf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Tf.prototype.createSquare=function(t){this._segList.addPt(new hu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new hu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new hu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new hu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Tf.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Tf.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Tf.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Tf.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Tf.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Af.angle(r,this._seg0.p0),s=Af.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Af.normalize(o+s),h=Af.normalize(a+Math.PI),u=i*n,l=n-u*Math.abs(Math.sin(s)),c=r.x+u*Math.cos(h),f=r.y+u*Math.sin(h),p=new hu(c,f),d=new _f(r,p),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ic.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Tf.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ic.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),h=r*n*o/a,u=r*n*s/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+h,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+h},Tf.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Wu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var h=s/a,u=0,l=new hu;u<s;){var c=e+o*u;l.x=t.x+r*Math.cos(c),l.y=t.y+r*Math.sin(c),this._segList.addPt(l),u+=h}},Tf.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Tf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new hu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new hu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Tf.prototype.createCircle=function(t){var e=new hu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Tf.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Tf.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Tf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Tf.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Wu.CLOCKWISE,this._distance))},Tf.prototype.closeRing=function(){this._segList.closeRing()},Tf.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Df.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Df.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Tf,Df);var Ff=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ff.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&fl.reverse(o),o},Ff.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Nf.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ic.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Nf.simplify(t,i),h=a.length-1;n.initSideSegments(a[0],a[1],Ic.LEFT),n.addFirstSegment();for(var u=2;u<=h;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Ff.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Ic.RIGHT&&(i=-i);var r=Nf.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},Ff.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Nf.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ic.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Nf.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ic.LEFT);for(var h=a-2;h>=0;h--)e.addNextSegment(s[h],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ff.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:e.createCircle(t);break;case Cf.CAP_SQUARE:e.createSquare(t)}},Ff.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Ff.prototype.getBufferParameters=function(){return this._bufParams},Ff.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ff.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ff.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Ff.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Nf.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ic.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Nf.simplify(t,i),h=a.length-1;n.initSideSegments(a[0],a[1],Ic.LEFT),n.addFirstSegment();for(var u=2;u<=h;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Ff.prototype.getSegGen=function(t){return new Tf(this._precisionModel,this._bufParams,t)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new hu(t[n]);return e};var Bf=function(){this._subgraphs=null,this._seg=new _f,this._cga=new Wu;var t=arguments[0];this._subgraphs=t},zf={DepthSegment:{configurable:!0}};Bf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new ul,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),o=r.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,r.getDirectedEdges(),n)}return n}if(3===arguments.length)if(du(arguments[2],al)&&arguments[0]instanceof hu&&arguments[1]instanceof Wc){for(var s=arguments[0],a=arguments[1],h=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(t._seg.p0=u[l],t._seg.p1=u[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Wu.computeOrientation(t._seg.p0,t._seg.p1,s)===Wu.RIGHT)){var c=a.getDepth(Ic.LEFT);t._seg.p0.equals(u[l])||(c=a.getDepth(Ic.RIGHT));var f=new jf(t._seg,c);h.add(f)}}else if(du(arguments[2],al)&&arguments[0]instanceof hu&&du(arguments[1],al))for(var p=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var y=g.next();y.isForward()&&t.findStabbedSegments(p,y,d)}},Bf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},zf.DepthSegment.get=function(){return jf},Object.defineProperties(Bf,zf);var jf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new _f(t),this._leftDepth=e};jf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jf.prototype.toString=function(){return this._upwardSeg.toString()},jf.prototype.interfaces_=function(){return[ru]},jf.prototype.getClass=function(){return jf};var qf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};qf.prototype.area=function(){return qf.area(this.p0,this.p1,this.p2)},qf.prototype.signedArea=function(){return qf.signedArea(this.p0,this.p1,this.p2)},qf.prototype.interpolateZ=function(t){if(null===t)throw new eu("Supplied point is null.");return qf.interpolateZ(t,this.p0,this.p1,this.p2)},qf.prototype.longestSideLength=function(){return qf.longestSideLength(this.p0,this.p1,this.p2)},qf.prototype.isAcute=function(){return qf.isAcute(this.p0,this.p1,this.p2)},qf.prototype.circumcentre=function(){return qf.circumcentre(this.p0,this.p1,this.p2)},qf.prototype.area3D=function(){return qf.area3D(this.p0,this.p1,this.p2)},qf.prototype.centroid=function(){return qf.centroid(this.p0,this.p1,this.p2)},qf.prototype.inCentre=function(){return qf.inCentre(this.p0,this.p1,this.p2)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},qf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},qf.det=function(t,e,n,i){return t*i-e*n},qf.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,h=n.y-o,u=i.y-o,l=s*u-a*h,c=t.x-r,f=t.y-o,p=(u*c-a*f)/l,d=(-h*c+s*f)/l;return e.z+p*(n.z-e.z)+d*(i.z-e.z)},qf.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},qf.isAcute=function(t,e,n){return!!Af.isAcute(t,e,n)&&!!Af.isAcute(e,n,t)&&!!Af.isAcute(n,t,e)},qf.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,h=e.y-r,u=2*qf.det(o,s,a,h),l=qf.det(s,o*o+s*s,h,a*a+h*h),c=qf.det(o,o*o+s*s,a,a*a+h*h);return new hu(i-l/u,r+c/u)},qf.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Nu(t.x+n/2,t.y+i/2,1),o=new Nu(t.x-i+n/2,t.y+n+i/2,1);return new Nu(r,o)},qf.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new hu(t.x+r*o,t.y+r*s)},qf.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,h=n.z-t.z,u=r*h-o*a,l=o*s-i*h,c=i*a-r*s,f=u*u+l*l+c*c;return Math.sqrt(f)/2},qf.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new hu(i,r)},qf.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,h=(i*t.y+r*e.y+o*n.y)/s;return new hu(a,h)};var Uf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ul;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Uf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fu.EXTERIOR,fu.INTERIOR)},Uf.prototype.addPolygon=function(t){var e=this,n=this._distance,i=Ic.LEFT;this._distance<0&&(n=-this._distance,i=Ic.RIGHT);var r=t.getExteriorRing(),o=fl.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,i,fu.EXTERIOR,fu.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),h=fl.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(h,n,Ic.opposite(i),fu.INTERIOR,fu.EXTERIOR)}},Uf.prototype.isTriangleErodedCompletely=function(t,e){var n=new qf(t[0],t[1],t[2]),i=n.inCentre();return Wu.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Uf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=fl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fu.EXTERIOR,fu.INTERIOR)},Uf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new mf(t,new Tc(0,fu.BOUNDARY,e,n));this._curveList.add(i)},Uf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Uf.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<nc.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=nc.MINIMUM_VALID_SIZE&&Wu.isCCW(t)&&(o=r,s=i,n=Ic.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Uf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof tc?this.addPolygon(t):t instanceof Jl?this.addLineString(t):t instanceof $l?this.addPoint(t):(t instanceof ec||t instanceof Bl||t instanceof ic||t instanceof Fl)&&this.addCollection(t)},Uf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Uf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var Gf=function(){};Gf.prototype.locate=function(t){},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf};var Vf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new hl;var t=this._parent.getGeometryN(this._index++);return t instanceof Fl?(this._subcollectionIterator=new Vf(t),this._subcollectionIterator.next()):t},Vf.prototype.remove=function(){throw new Error(this.getClass().getName())},Vf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vf.prototype.interfaces_=function(){return[sl]},Vf.prototype.getClass=function(){return Vf},Vf.isAtomic=function(t){return!(t instanceof Fl)};var Wf=function(){this._geom=null;var t=arguments[0];this._geom=t};Wf.prototype.locate=function(t){return Wf.locate(t,this._geom)},Wf.prototype.interfaces_=function(){return[Gf]},Wf.prototype.getClass=function(){return Wf},Wf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Wu.isPointInRing(t,e.getCoordinates())},Wf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Wf.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Wf.isPointInRing(t,r))return!1}return!0},Wf.containsPoint=function(t,e){if(e instanceof tc)return Wf.containsPointInPolygon(t,e);if(e instanceof Fl)for(var n=new Vf(e);n.hasNext();){var i=n.next();if(i!==e&&Wf.containsPoint(t,i))return!0}return!1},Wf.locate=function(t,e){return e.isEmpty()?fu.EXTERIOR:Wf.containsPoint(t,e)?fu.INTERIOR:fu.EXTERIOR};var Hf=function(){this._edgeMap=new Cl,this._edgeList=null,this._ptInAreaLocation=[fu.NONE,fu.NONE]};Hf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Hf.prototype.propagateSideLabels=function(t){for(var e=fu.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Ic.LEFT)!==fu.NONE&&(e=i.getLocation(t,Ic.LEFT))}if(e===fu.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ic.ON)===fu.NONE&&a.setLocation(t,Ic.ON,r),a.isArea(t)){var h=a.getLocation(t,Ic.LEFT),u=a.getLocation(t,Ic.RIGHT);if(u!==fu.NONE){if(u!==r)throw new Oc("side location conflict",s.getCoordinate());h===fu.NONE&&zu.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=h}else zu.isTrue(a.getLocation(t,Ic.LEFT)===fu.NONE,"found single null side"),a.setLocation(t,Ic.RIGHT,r),a.setLocation(t,Ic.LEFT,r)}}},Hf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hf.prototype.print=function(t){Pu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ic.LEFT);zu.isTrue(i!==fu.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();zu.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ic.LEFT),h=s.getLocation(t,Ic.RIGHT);if(a===h)return!1;if(h!==r)return!1;r=a}return!0},Hf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hf.prototype.iterator=function(){return this.getEdges().iterator()},Hf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new ul(this._edgeMap.values())),this._edgeList},Hf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fu.NONE&&(this._ptInAreaLocation[t]=Wf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Hf.prototype.toString=function(){var t=new mu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Hf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===fu.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),h=0;h<2;h++)if(a.isAnyNull(h)){var u=fu.NONE;if(e[h])u=fu.EXTERIOR;else{var l=s.getCoordinate();u=this.getLocation(h,l,t)}a.setAllLocationsIfNull(h,u)}},Hf.prototype.getDegree=function(){return this._edgeMap.size()},Hf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf};var Yf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var o=t._resultAreaEdgeList.get(r),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),i){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,i=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),i=t._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===e)throw new Oc("no outgoing dirEdge found",this.getCoordinate());zu.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Uc.isNorthern(r)&&Uc.isNorthern(o)?n:Uc.isNorthern(r)||Uc.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(zu.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){Pu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ul;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),i=e.getDepth(Ic.LEFT),r=e.getDepth(Ic.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),i);if(this.computeDepths(0,n,o)!==r)throw new Oc("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],h=arguments[0];h<s;h++){var u=t._edgeList.get(h);u.setEdgeDepths(Ic.RIGHT,a),a=u.getDepth(Ic.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,i=null,r=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),r){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,r=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;i.setNextMin(s),r=e._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(zu.isTrue(null!==n,"found null for first outgoing dirEdge"),zu.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fu.INTERIOR;break}if(i.isInResult()){t=fu.EXTERIOR;break}}}if(t===fu.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===fu.INTERIOR):(s.isInResult()&&(r=fu.EXTERIOR),a.isInResult()&&(r=fu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Tc(fu.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==fu.INTERIOR&&o!==fu.BOUNDARY||this._label.setLocation(r,fu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hf),Xf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new jc(t,new Yf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hc),Zf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Zf.prototype.compareTo=function(t){var e=t;return Zf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Zf.prototype.interfaces_=function(){return[ru]},Zf.prototype.getClass=function(){return Zf},Zf.orientation=function(t){return 1===fl.increasingDirection(t)},Zf.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,h=e?0:t.length-1,u=i?0:n.length-1;;){var l=t[h].compareTo(n[u]);if(0!==l)return l;var c=(h+=r)===s,f=(u+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}};var Jf=function(){this._edges=new ul,this._ocaMap=new Cl};Jf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Jf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Jf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Jf.prototype.iterator=function(){return this._edges.iterator()},Jf.prototype.getEdges=function(){return this._edges},Jf.prototype.get=function(t){return this._edges.get(t)},Jf.prototype.findEqualEdge=function(t){var e=new Zf(t.getCoordinates());return this._ocaMap.get(e)},Jf.prototype.add=function(t){this._edges.add(t);var e=new Zf(t.getCoordinates());this._ocaMap.put(e,t)},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,n,i){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var $f=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$f.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if($f.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},$f.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$f.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$f.prototype.getLineIntersector=function(){return this._li},$f.prototype.hasProperIntersection=function(){return this._hasProper},$f.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$f.prototype.hasIntersection=function(){return this._hasIntersection},$f.prototype.isDone=function(){return!1},$f.prototype.hasInteriorIntersection=function(){return this._hasInterior},$f.prototype.interfaces_=function(){return[Kf]},$f.prototype.getClass=function(){return $f},$f.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Qf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new hu(t),this.segmentIndex=e,this.dist=n};Qf.prototype.getSegmentIndex=function(){return this.segmentIndex},Qf.prototype.getCoordinate=function(){return this.coord},Qf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Qf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Qf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Qf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Qf.prototype.getDistance=function(){return this.dist},Qf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Qf.prototype.interfaces_=function(){return[ru]},Qf.prototype.getClass=function(){return Qf};var tp=function(){this._nodeMap=new Cl,this.edge=null;var t=arguments[0];this.edge=t};tp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tp.prototype.iterator=function(){return this._nodeMap.values().iterator()},tp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},tp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new hu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new op(o,new Tc(this.edge._label))},tp.prototype.add=function(t,e,n){var i=new Qf(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},tp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.getChainStartIndices=function(t){var e=0,n=new ul;n.add(new _u(e));do{var i=this.findChainEnd(t,e);n.add(new _u(i)),e=i}while(e<t.length-1);return ep.toIntArray(n)},ep.prototype.findChainEnd=function(t,e){for(var n=Uc.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Uc.quadrant(t[i-1],t[i])===n;)i++;return i-1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Lu,this.env2=new Lu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ep;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],h=arguments[4],u=arguments[5],l=this.pts[r],c=this.pts[o],f=s.pts[a],p=s.pts[h];if(o-r==1&&h-a==1)return u.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(l,c),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+h)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,u),g<h&&this.computeIntersectsForChain(r,d,s,g,h,u)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,u),g<h&&this.computeIntersectsForChain(d,o,s,g,h,u))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},rp={NULL_VALUE:{configurable:!0}};ip.prototype.getDepth=function(t,e){return this._depth[t][e]},ip.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ip.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==ip.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===ip.NULL_VALUE}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._depth[r][o]===ip.NULL_VALUE}},ip.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var i=1;i<3;i++){var r=0;t._depth[e][i]>n&&(r=1),t._depth[e][i]=r}}},ip.prototype.getDelta=function(t){return this._depth[t][Ic.RIGHT]-this._depth[t][Ic.LEFT]},ip.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fu.EXTERIOR:fu.INTERIOR},ip.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ip.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==fu.EXTERIOR&&r!==fu.INTERIOR||(t.isNull(n,i)?t._depth[n][i]=ip.depthAtLocation(r):t._depth[n][i]+=ip.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===fu.INTERIOR&&this._depth[o][s]++}},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.depthAtLocation=function(t){return t===fu.EXTERIOR?0:t===fu.INTERIOR?1:ip.NULL_VALUE},rp.NULL_VALUE.get=function(){return-1},Object.defineProperties(ip,rp);var op=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ip,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Tc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Lu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new hu(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var h=this.pts[a];r.equals2D(h)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new mu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ic.ON),e.getLocation(1,Ic.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ic.LEFT),e.getLocation(1,Ic.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ic.RIGHT),e.getLocation(1,Ic.RIGHT),2))},e}(zc),sp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jf,this._bufParams=t||null};sp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},sp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Tc(t.getLabel())).flip(),n.merge(i);var r=sp.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(sp.depthDelta(t.getLabel()))},sp.prototype.buildSubgraphs=function(t,e){for(var n=new ul,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Bf(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},sp.prototype.createSubgraphs=function(t){for(var e=new ul,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Ac;r.create(i),e.add(r)}}return nf.sort(e,nf.reverseOrder()),e},sp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Sf,n=new Uu;return n.setPrecisionModel(t),e.setSegmentIntersector(new $f(n)),e},sp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Ff(n,this._bufParams),r=new Uf(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Yc(new Xf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Xc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},sp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new op(r.getCoordinates(),new Tc(s));this.insertUniqueEdge(a)}}},sp.prototype.setNoder=function(t){this._workingNoder=t},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.depthDelta=function(t){var e=t.getLocation(0,Ic.LEFT),n=t.getLocation(0,Ic.RIGHT);return e===fu.INTERIOR&&n===fu.EXTERIOR?1:e===fu.EXTERIOR&&n===fu.INTERIOR?-1:0},sp.convertSegStrings=function(t){for(var e=new _c,n=new ul;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ap=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ap.prototype.rescale=function(){var t=this;if(du(arguments[0],rl))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],r=0;r<i.length;r++)i[r].x=i[r].x/t._scaleFactor+t._offsetX,i[r].y=i[r].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Pu.out.println(i)}},ap.prototype.scale=function(){var t=this;if(du(arguments[0],rl)){for(var e=arguments[0],n=new ul,i=e.iterator();i.hasNext();){var r=i.next();n.add(new mf(t.scale(r.getCoordinates()),r.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new hu(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return fl.removeRepeatedPoints(s)}},ap.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ap.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ap.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ap.prototype.interfaces_=function(){return[Ef]},ap.prototype.getClass=function(){return ap};var hp=function(){this._li=new Uu,this._segStrings=null;var t=arguments[0];this._segStrings=t},up={fact:{configurable:!0}};hp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var o=r.next().getCoordinates(),s=1;s<o.length-1;s++)if(o[s].equals(i))throw new Fu("found endpt/interior pt intersection at index "+s+" :pt "+i)},hp.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),i=this._segStrings.iterator();i.hasNext();){var r=i.next();t.checkInteriorIntersections(n,r)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),h=s.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<h.length-1;l++)t.checkInteriorIntersections(o,u,s,l);else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(c===p&&f===d)return null;var g=c.getCoordinates()[f],y=c.getCoordinates()[f+1],m=p.getCoordinates()[d],_=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,m,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,m,_)))throw new Fu("found non-noded intersection at "+g+"-"+y+" and "+m+"-"+_)}},hp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},hp.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),r=0;r<i.length-2;r++)t.checkCollapse(i[r],i[r+1],i[r+2])},hp.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},hp.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Fu("found non-noded collapse at "+hp.fact.createLineString([t,e,n]))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},up.fact.get=function(){return new _c},Object.defineProperties(hp,up);var lp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new eu("Scale factor must be non-zero");1!==e&&(this._pt=new hu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new hu,this._p1Scaled=new hu),this.initCorners(this._pt)},cp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};lp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return zu.isTrue(!(s&&a),"Found bad envelope test"),a},lp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new hu(this._maxx,this._maxy),this._corner[1]=new hu(this._minx,this._maxy),this._corner[2]=new hu(this._minx,this._miny),this._corner[3]=new hu(this._maxx,this._miny)},lp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},lp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},lp.prototype.getCoordinate=function(){return this._originalPt},lp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},lp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=lp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Lu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},lp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},lp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},lp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},cp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(lp,cp);var fp=function(){this.tempEnv1=new Lu,this.selectedSegment=new _f};fp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._index=null;var t=arguments[0];this._index=t},dp={HotPixelSnapAction:{configurable:!0}};pp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new gp(e,n,i);return this._index.query(r,{interfaces_:function(){return[$c]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},dp.HotPixelSnapAction.get=function(){return gp},Object.defineProperties(pp,dp);var gp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),yp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new ul};yp.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var h=0;h<this._li.getIntersectionNum();h++)this._interiorIntersections.add(this._li.getIntersection(h));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},yp.prototype.isDone=function(){return!1},yp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yp.prototype.interfaces_=function(){return[Kf]},yp.prototype.getClass=function(){return yp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Uu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mp.prototype.checkCorrectness=function(t){var e=mf.getNodedSubstrings(t),n=new hp(e);try{n.checkValid()}catch(t){if(!(t instanceof Iu))throw t;t.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},mp.prototype.findInteriorIntersections=function(t,e){var n=new yp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var t=this;if(du(arguments[0],rl))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof mf)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var s=new lp(r[o],t._scaleFactor,t._li);t._pointSnapper.snap(s,i,o)&&i.addIntersection(r[o],o)}},mp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Sf,this._pointSnapper=new pp(this._noder.getIndex()),this.snapRound(t,this._li)},mp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next(),r=new lp(i,e._scaleFactor,e._li);e._pointSnapper.snap(r)}},mp.prototype.interfaces_=function(){return[Ef]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},vp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(t){var e=new ap(new mp(new dc(1)),t.getScale()),n=new sp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=_p.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=_p.precisionScaleFactor(this._argGeom,this._distance,n),r=new dc(i);this.bufferFixedPrecision(r)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===dc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},_p.prototype.bufferOriginalPrecision=function(){try{var t=new sp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Fu))throw t;this._saveException=t}},_p.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new _p(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Xu&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new _p(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof Cf&&arguments[0]instanceof Xu&&"number"==typeof arguments[1]){var r=arguments[1];return new _p(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],h=new _p(arguments[0]);return h.setQuadrantSegments(s),h.setEndCapStyle(a),h.getResultGeometry(o)}},_p.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=gu.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},vp.CAP_ROUND.get=function(){return Cf.CAP_ROUND},vp.CAP_BUTT.get=function(){return Cf.CAP_FLAT},vp.CAP_FLAT.get=function(){return Cf.CAP_FLAT},vp.CAP_SQUARE.get=function(){return Cf.CAP_SQUARE},vp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,vp);var bp=function(){this._pt=[new hu,new hu],this._distance=nu.NaN,this._isNull=!0};bp.prototype.getCoordinates=function(){return this._pt},bp.prototype.getCoordinate=function(t){return this._pt[t]},bp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},bp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},bp.prototype.getDistance=function(){return this._distance},bp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var xp=function(){};xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.computeDistance=function(){if(arguments[2]instanceof bp&&arguments[0]instanceof Jl&&arguments[1]instanceof hu)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new _f,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof bp&&arguments[0]instanceof tc&&arguments[1]instanceof hu){var s=arguments[0],a=arguments[1],h=arguments[2];xp.computeDistance(s.getExteriorRing(),a,h);for(var u=0;u<s.getNumInteriorRing();u++)xp.computeDistance(s.getInteriorRingN(u),a,h)}else if(arguments[2]instanceof bp&&arguments[0]instanceof Xu&&arguments[1]instanceof hu){var l=arguments[0],c=arguments[1],f=arguments[2];if(l instanceof Jl)xp.computeDistance(l,c,f);else if(l instanceof tc)xp.computeDistance(l,c,f);else if(l instanceof Fl)for(var p=l,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);xp.computeDistance(g,c,f)}else f.setMinimum(l.getCoordinate(),c)}else if(arguments[2]instanceof bp&&arguments[0]instanceof _f&&arguments[1]instanceof hu){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var wp=function(t){this._maxPtDist=new bp,this._inputGeom=t||null},Ep={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};wp.prototype.computeMaxMidpointDistance=function(t){var e=new Sp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.computeMaxVertexDistance=function(t){var e=new Mp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},wp.prototype.getDistancePoints=function(){return this._maxPtDist},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},Ep.MaxPointDistanceFilter.get=function(){return Mp},Ep.MaxMidpointDistanceFilter.get=function(){return Sp},Object.defineProperties(wp,Ep);var Mp=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Mp.prototype.filter=function(t){this._minPtDist.initialize(),xp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mp.prototype.interfaces_=function(){return[Ku]},Mp.prototype.getClass=function(){return Mp};var Sp=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Sp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new hu((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),xp.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sp.prototype.isDone=function(){return!1},Sp.prototype.isGeometryChanged=function(){return!1},Sp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sp.prototype.interfaces_=function(){return[Dl]},Sp.prototype.getClass=function(){return Sp};var Ip=function(t){this._comps=t||null};Ip.prototype.filter=function(t){t instanceof tc&&this._comps.add(t)},Ip.prototype.interfaces_=function(){return[Tl]},Ip.prototype.getClass=function(){return Ip},Ip.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ip.getPolygons(t,new ul)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof tc?n.add(e):e instanceof Fl&&e.apply(new Ip(n)),n}};var Cp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jl&&this._lines.add(t)},Cp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cp.prototype.interfaces_=function(){return[Yu]},Cp.prototype.getClass=function(){return Cp},Cp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cp.getLines(e,n))}},Cp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Cp.getLines(t,!1)}if(2===arguments.length){if(du(arguments[0],rl)&&du(arguments[1],rl)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();Cp.getLines(i,e)}return e}if(arguments[0]instanceof Xu&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=new ul;return r.apply(new Cp(s,o)),s}if(arguments[0]instanceof Xu&&du(arguments[1],rl)){var a=arguments[0],h=arguments[1];return a instanceof Jl?h.add(a):a.apply(new Cp(h)),h}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&du(arguments[0],rl)&&du(arguments[1],rl)){for(var u=arguments[1],l=arguments[2],c=arguments[0].iterator();c.hasNext();){var f=c.next();Cp.getLines(f,u,l)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Xu&&du(arguments[1],rl)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Cp(p,d)),p}}};var Pp=function(){if(this._boundaryRule=$u.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new eu("Rule must be non-null");this._boundaryRule=t}};Pp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof hu&&arguments[1]instanceof tc){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fu.EXTERIOR;var i=n.getExteriorRing(),r=this.locateInPolygonRing(e,i);if(r===fu.EXTERIOR)return fu.EXTERIOR;if(r===fu.BOUNDARY)return fu.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===fu.INTERIOR)return fu.EXTERIOR;if(a===fu.BOUNDARY)return fu.BOUNDARY}return fu.INTERIOR}if(arguments[0]instanceof hu&&arguments[1]instanceof Jl){var h=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(h))return fu.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!h.equals(l[0])&&!h.equals(l[l.length-1])?Wu.isOnLine(h,l)?fu.INTERIOR:fu.EXTERIOR:fu.BOUNDARY}if(arguments[0]instanceof hu&&arguments[1]instanceof $l){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?fu.INTERIOR:fu.EXTERIOR}},Pp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Wu.locatePointInRing(t,e.getCoordinates()):fu.EXTERIOR},Pp.prototype.intersects=function(t,e){return this.locate(t,e)!==fu.EXTERIOR},Pp.prototype.updateLocationInfo=function(t){t===fu.INTERIOR&&(this._isIn=!0),t===fu.BOUNDARY&&this._numBoundaries++},Pp.prototype.computeLocation=function(t,e){var n=this;if(e instanceof $l&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof tc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Bl)for(var i=e,r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof ic)for(var s=e,a=0;a<s.getNumGeometries();a++){var h=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,h))}else if(e instanceof Fl)for(var u=new Vf(e);u.hasNext();){var l=u.next();l!==e&&n.computeLocation(t,l)}},Pp.prototype.locate=function(t,e){return e.isEmpty()?fu.EXTERIOR:e instanceof Jl||e instanceof tc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fu.BOUNDARY:this._numBoundaries>0||this._isIn?fu.INTERIOR:fu.EXTERIOR)},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._component=e,this._segIndex=n,this._pt=i}},Lp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Lp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Lp);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof $l&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Tl]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $l?nf.singletonList(t):Op.getPoints(t,new ul)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $l?n.add(e):e instanceof Fl&&e.apply(new Op(n)),n}};var kp=function(){this._locations=null;var t=arguments[0];this._locations=t};kp.prototype.filter=function(t){(t instanceof $l||t instanceof Jl||t instanceof tc)&&this._locations.add(new Np(t,0,t.getCoordinate()))},kp.prototype.interfaces_=function(){return[Tl]},kp.prototype.getClass=function(){return kp},kp.getLocations=function(t){var e=new ul;return t.apply(new kp(e)),e};var Ap=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pp,this._minDistanceLocation=null,this._minDistance=nu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Ap.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=1-n,o=Ip.getPolygons(this._geom[n]);if(o.size()>0){var s=kp.getLocations(this._geom[r]);if(this.computeContainmentDistance(s,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&du(arguments[0],al)&&du(arguments[1],al)){for(var a=arguments[0],h=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),f=0;f<h.size();f++)if(t.computeContainmentDistance(c,h.get(f),u),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof tc){var p=arguments[0],d=arguments[1],g=arguments[2],y=p.getCoordinate();if(fu.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=p,g[1]=new Np(d,y),null}},Ap.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},Ap.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cp.getLines(this._geom[0]),n=Cp.getLines(this._geom[1]),i=Op.getPoints(this._geom[0]),r=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Ap.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ap.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ap.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ap.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jl&&arguments[1]instanceof $l){var e=arguments[0],n=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),o=n.getCoordinate(),s=0;s<r.length-1;s++){var a=Wu.distancePointLine(o,r[s],r[s+1]);if(a<t._minDistance){t._minDistance=a;var h=new _f(r[s],r[s+1]).closestPoint(o);i[0]=new Np(e,s,h),i[1]=new Np(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jl&&arguments[1]instanceof Jl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=l.getCoordinates(),d=0;d<f.length-1;d++)for(var g=0;g<p.length-1;g++){var y=Wu.distanceLineLine(f[d],f[d+1],p[g],p[g+1]);if(y<t._minDistance){t._minDistance=y;var m=new _f(f[d],f[d+1]),_=new _f(p[g],p[g+1]),v=m.closestPoints(_);c[0]=new Np(u,d,v[0]),c[1]=new Np(l,g,v[1])}if(t._minDistance<=t._terminateDistance)return null}}},Ap.prototype.computeMinDistancePoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s),h=o.getCoordinate().distance(a.getCoordinate());if(h<i._minDistance&&(i._minDistance=h,n[0]=new Np(o,0,o.getCoordinate()),n[1]=new Np(a,0,a.getCoordinate())),i._minDistance<=i._terminateDistance)return null}},Ap.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new eu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ap.prototype.computeMinDistanceLines=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.distance=function(t,e){return new Ap(t,e).distance()},Ap.isWithinDistance=function(t,e,n){return new Ap(t,e,n).distance()<=n},Ap.nearestPoints=function(t,e){return new Ap(t,e).nearestPoints()};var Rp=function(){this._pt=[new hu,new hu],this._distance=nu.NaN,this._isNull=!0};Rp.prototype.getCoordinates=function(){return this._pt},Rp.prototype.getCoordinate=function(t){return this._pt[t]},Rp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Rp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Rp.prototype.toString=function(){return Du.toLineString(this._pt[0],this._pt[1])},Rp.prototype.getDistance=function(){return this._distance},Rp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp};var Tp=function(){};Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.computeDistance=function(){if(arguments[2]instanceof Rp&&arguments[0]instanceof Jl&&arguments[1]instanceof hu)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new _f,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof tc&&arguments[1]instanceof hu){var a=arguments[0],h=arguments[1],u=arguments[2];Tp.computeDistance(a.getExteriorRing(),h,u);for(var l=0;l<a.getNumInteriorRing();l++)Tp.computeDistance(a.getInteriorRingN(l),h,u)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof Xu&&arguments[1]instanceof hu){var c=arguments[0],f=arguments[1],p=arguments[2];if(c instanceof Jl)Tp.computeDistance(c,f,p);else if(c instanceof tc)Tp.computeDistance(c,f,p);else if(c instanceof Fl)for(var d=c,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Tp.computeDistance(y,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof _f&&arguments[1]instanceof hu){var m=arguments[1],_=arguments[2],v=arguments[0].closestPoint(m);_.setMinimum(v,m)}};var Dp=function(){this._g0=null,this._g1=null,this._ptDist=new Rp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Fp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new eu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dp.prototype.computeOrientedDistance=function(t,e,n){var i=new Bp(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new zp(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Dp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.distance=function(){if(2===arguments.length)return new Dp(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dp(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Fp.MaxPointDistanceFilter.get=function(){return Bp},Fp.MaxDensifiedByFractionDistanceFilter.get=function(){return zp},Object.defineProperties(Dp,Fp);var Bp=function(){this._maxPtDist=new Rp,this._minPtDist=new Rp,this._euclideanDist=new Tp,this._geom=null;var t=arguments[0];this._geom=t};Bp.prototype.filter=function(t){this._minPtDist.initialize(),Tp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bp.prototype.interfaces_=function(){return[Ku]},Bp.prototype.getClass=function(){return Bp};var zp=function(){this._maxPtDist=new Rp,this._minPtDist=new Rp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};zp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var i=t.getCoordinate(e-1),r=t.getCoordinate(e),o=(r.x-i.x)/this._numSubSegs,s=(r.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var h=i.x+a*o,u=i.y+a*s,l=new hu(h,u);n._minPtDist.initialize(),Tp.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},zp.prototype.isDone=function(){return!1},zp.prototype.isGeometryChanged=function(){return!1},zp.prototype.getMaxPointDistance=function(){return this._maxPtDist},zp.prototype.interfaces_=function(){return[Dl]},zp.prototype.getClass=function(){return zp};var jp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jp.prototype.checkMaximumDistance=function(t,e,n){var i=new Dp(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Du.toLineString(r[0],r[1])+")"}},jp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),jp.VERBOSE&&Pu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jp.prototype.checkNegativeValid=function(){if(!(this._input instanceof tc||this._input instanceof ic||this._input instanceof Fl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jp.prototype.getErrorIndicator=function(){return this._errorIndicator},jp.prototype.checkMinimumDistance=function(t,e,n){var i=new Ap(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Du.toLineString(r[0],r[1])+" )"}},jp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jp.prototype.getErrorLocation=function(){return this._errorLocation},jp.prototype.getPolygonLines=function(t){for(var e=new ul,n=new Cp(e),i=Ip.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},jp.prototype.getErrorMessage=function(){return this._errMsg},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jp,qp);var Up=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Up.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Up.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Up.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Lu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Lu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Up.prototype.checkDistance=function(){var t=new jp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Up.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Up.prototype.checkPolygonal=function(){this._result instanceof tc||this._result instanceof ic||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Up.prototype.report=function(t){if(!Up.VERBOSE)return null;Pu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Up.prototype.getErrorMessage=function(){return this._errorMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.isValidMsg=function(t,e,n){var i=new Up(t,e,n);return i.isValid()?null:i.getErrorMessage()},Up.isValid=function(t,e,n){return!!new Up(t,e,n).isValid()},Gp.VERBOSE.get=function(){return!1},Gp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,Gp);var Vp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Vp.prototype.getCoordinates=function(){return this._pts},Vp.prototype.size=function(){return this._pts.length},Vp.prototype.getCoordinate=function(t){return this._pts[t]},Vp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:df.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vp.prototype.setData=function(t){this._data=t},Vp.prototype.getData=function(){return this._data},Vp.prototype.toString=function(){return Du.toLineString(new uc(this._pts))},Vp.prototype.interfaces_=function(){return[gf]},Vp.prototype.getClass=function(){return Vp};var Wp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ul,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Wp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Wp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Wp.prototype.getIntersectionSegments=function(){return this._intSegments},Wp.prototype.count=function(){return this._intersectionCount},Wp.prototype.getIntersections=function(){return this._intersections},Wp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Wp.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Wp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Wp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Wp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Wp.prototype.interfaces_=function(){return[Kf]},Wp.prototype.getClass=function(){return Wp},Wp.createAllIntersectionsFinder=function(t){var e=new Wp(t);return e.setFindAllIntersections(!0),e},Wp.createAnyIntersectionFinder=function(t){return new Wp(t)},Wp.createIntersectionCounter=function(t){var e=new Wp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hp=function(){this._li=new Uu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hp.prototype.isValid=function(){return this.execute(),this._isValid},Hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Wp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Sf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Du.toLineString(t[0],t[1])+" and "+Du.toLineString(t[2],t[3])},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.computeIntersections=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Yp=function t(){this._nv=null;var e=arguments[0];this._nv=new Hp(t.toSegmentStrings(e))};Yp.prototype.checkValid=function(){this._nv.checkValid()},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.toSegmentStrings=function(t){for(var e=new ul,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Vp(i.getCoordinates(),i))}return e},Yp.checkValid=function(t){new Yp(t).checkValid()};var Xp=function(t){this._mapOp=t};Xp.prototype.map=function(t){for(var e=new ul,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(_c.toGeometryArray(e))},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.map=function(t,e){return new Xp(e).map(t)};var Zp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ul,this._resultLineList=new ul;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Zp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();e.collectLineEdge(i,t,e._lineEdgesList),e.collectBoundaryTouchEdge(i,t,e._lineEdgesList)}},Zp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Zp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Zp.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Zp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Zp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Zp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Zp.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(zu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(i,e)&&e===Nd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Jp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new ul;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Jp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Nd.INTERSECTION)){var i=n.getLabel();Nd.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Jp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof nc&&!i.isEmpty()||(n=!1);for(var r=new ul,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nc||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new ul;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var n=new ul,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var n=new ul,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Kp.prototype.transformMultiPolygon=function(t,e){for(var n=new ul,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var n=new ul,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_c.toGeometryArray(n)):this._factory.buildGeometry(n)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $l)return this.transformPoint(t,null);if(t instanceof ec)return this.transformMultiPoint(t,null);if(t instanceof nc)return this.transformLinearRing(t,null);if(t instanceof Jl)return this.transformLineString(t,null);if(t instanceof Bl)return this.transformMultiLineString(t,null);if(t instanceof tc)return this.transformPolygon(t,null);if(t instanceof ic)return this.transformMultiPolygon(t,null);if(t instanceof Fl)return this.transformGeometryCollection(t,null);throw new eu("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var $p=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _f,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};$p.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new hu(o)),0===i&&this._isClosed&&t.set(t.size()-1,new hu(o)))}},$p.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$p.prototype.snapTo=function(t){var e=new cl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$p.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new hu(r),!1)}},$p.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,i=nu.MAX_VALUE,r=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<i&&(i=s,r=o)}return r},$p.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Qp=function(t){this._srcGeom=t||null},td={SNAP_PRECISION_FACTOR:{configurable:!0}};Qp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ed(e,n).transform(this._srcGeom)},Qp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new ed(t,n,!0).transform(this._srcGeom),r=i;return e&&du(r,Ql)&&(r=i.buffer(0)),r},Qp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Qp.prototype.extractTargetCoordinates=function(t){for(var e=new Ll,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Qp.prototype.computeMinimumSegmentLength=function(t){for(var e=nu.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Qp(t);i[0]=r.snapTo(e,n);var o=new Qp(e);return i[1]=o.snapTo(i[0],n),i},Qp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Qp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===dc.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Qp.computeOverlaySnapTolerance(r),Qp.computeOverlaySnapTolerance(o))}},Qp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Qp.SNAP_PRECISION_FACTOR},Qp.snapToSelf=function(t,e,n){return new Qp(t).snapToSelf(e,n)},td.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Qp,td);var ed=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $p(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nu.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+nu.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(nd.getBit(t,i)!==nd.getBit(e,i))return n;n++}return 52};var id=function(){this._commonCoord=null,this._ccFilter=new od},rd={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};id.prototype.addCommonBits=function(t){var e=new sd(this._commonCoord);t.apply(e),t.geometryChanged()},id.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new hu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new sd(e);return t.apply(n),t.geometryChanged(),t},id.prototype.getCommonCoordinate=function(){return this._commonCoord},id.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},rd.CommonCoordinateFilter.get=function(){return od},rd.Translater.get=function(){return sd},Object.defineProperties(id,rd);var od=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};od.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},od.prototype.getCommonCoordinate=function(){return new hu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},od.prototype.interfaces_=function(){return[Ku]},od.prototype.getClass=function(){return od};var sd=function(){this.trans=null;var t=arguments[0];this.trans=t};sd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},sd.prototype.isDone=function(){return!1},sd.prototype.isGeometryChanged=function(){return!0},sd.prototype.interfaces_=function(){return[Dl]},sd.prototype.getClass=function(){return sd};var ad=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ad.prototype.selfSnap=function(t){return new Qp(t).snapTo(t,this._snapTolerance)},ad.prototype.removeCommonBits=function(t){this._cbr=new id,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ad.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ad.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ad.prototype.checkValid=function(t){t.isValid()||Pu.out.println("Snapped geometry is invalid")},ad.prototype.computeSnapTolerance=function(){this._snapTolerance=Qp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ad.prototype.snap=function(t){var e=this.removeCommonBits(t);return Qp.snap(e[0],e[1],this._snapTolerance)},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.overlayOp=function(t,e,n){return new ad(t,e).getResultGeometry(n)},ad.union=function(t,e){return ad.overlayOp(t,e,Nd.UNION)},ad.intersection=function(t,e){return ad.overlayOp(t,e,Nd.INTERSECTION)},ad.symDifference=function(t,e){return ad.overlayOp(t,e,Nd.SYMDIFFERENCE)},ad.difference=function(t,e){return ad.overlayOp(t,e,Nd.DIFFERENCE)};var hd=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};hd.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Fu))throw t;i=t}if(!n)try{e=ad.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Fu?i:t}return e},hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd},hd.overlayOp=function(t,e,n){return new hd(t,e).getResultGeometry(n)},hd.union=function(t,e){return hd.overlayOp(t,e,Nd.UNION)},hd.intersection=function(t,e){return hd.overlayOp(t,e,Nd.INTERSECTION)},hd.symDifference=function(t,e){return hd.overlayOp(t,e,Nd.SYMDIFFERENCE)},hd.difference=function(t,e){return hd.overlayOp(t,e,Nd.DIFFERENCE)};var ud=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ud.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var ld=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},cd={INSERT:{configurable:!0},DELETE:{configurable:!0}};ld.prototype.isDelete=function(){return this._eventType===ld.DELETE},ld.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ld.prototype.getObject=function(){return this._obj},ld.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ld.prototype.getInsertEvent=function(){return this._insertEvent},ld.prototype.isInsert=function(){return this._eventType===ld.INSERT},ld.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ld.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ld.prototype.interfaces_=function(){return[ru]},ld.prototype.getClass=function(){return ld},cd.INSERT.get=function(){return 1},cd.DELETE.get=function(){return 2},Object.defineProperties(ld,cd);var fd=function(){};fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var pd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};pd.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(pd.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},pd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},pd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},pd.prototype.hasProperIntersection=function(){return this._hasProper},pd.prototype.hasIntersection=function(){return this._hasIntersection},pd.prototype.isDone=function(){return this._isDone},pd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},pd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},pd.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var dd=function(t){function e(){t.call(this),this.events=new ul,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var i=t.events.get(n);if(i.isInsert()&&t.processOverlaps(n,i.getDeleteEventIndex(),i,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pd&&du(arguments[0],al)&&du(arguments[1],al)){var r=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(r,r),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&du(arguments[0],al)&&arguments[1]instanceof pd){var a=arguments[0],h=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(h)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new ud(n,r),s=new ld(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ld(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();){var o=r.next();t.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fd),gd=function(){this._min=nu.POSITIVE_INFINITY,this._max=nu.NEGATIVE_INFINITY},yd={NodeComparator:{configurable:!0}};gd.prototype.getMin=function(){return this._min},gd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},gd.prototype.getMax=function(){return this._max},gd.prototype.toString=function(){return Du.toLineString(new hu(this._min,0),new hu(this._max,0))},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},yd.NodeComparator.get=function(){return md},Object.defineProperties(gd,yd);var md=function(){};md.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},md.prototype.interfaces_=function(){return[su]},md.prototype.getClass=function(){return md};var _d=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),vd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),bd=function(){this._leaves=new ul,this._root=null,this._level=0};bd.prototype.buildTree=function(){nf.sort(this._leaves,new gd.NodeComparator);for(var t=this._leaves,e=null,n=new ul;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},bd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(t,e,n))},bd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},bd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},bd.prototype.printNode=function(t){Pu.out.println(Du.toLineString(new hu(t._min,this._level),new hu(t._max,this._level)))},bd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},bd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new vd(t.get(n),t.get(n+1));e.add(r)}}},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var xd=function(){this._items=new ul};xd.prototype.visitItem=function(t){this._items.add(t)},xd.prototype.getItems=function(){return this._items},xd.prototype.interfaces_=function(){return[$c]},xd.prototype.getClass=function(){return xd};var wd=function(){this._index=null;var t=arguments[0];if(!du(t,Ql))throw new eu("Argument must be Polygonal");this._index=new Sd(t)},Ed={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};wd.prototype.locate=function(t){var e=new Vu(t),n=new Md(e);return this._index.query(t.y,t.y,n),e.getLocation()},wd.prototype.interfaces_=function(){return[Gf]},wd.prototype.getClass=function(){return wd},Ed.SegmentVisitor.get=function(){return Md},Ed.IntervalIndexedGeometry.get=function(){return Sd},Object.defineProperties(wd,Ed);var Md=function(){this._counter=null;var t=arguments[0];this._counter=t};Md.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Md.prototype.interfaces_=function(){return[$c]},Md.prototype.getClass=function(){return Md};var Sd=function(){this._index=new bd;var t=arguments[0];this.init(t)};Sd.prototype.init=function(t){for(var e=Cp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Sd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new _f(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Sd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xd;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Id=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pp,2===arguments.length){var e=arguments[0],n=arguments[1],i=$u.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Ic.ON)===fu.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new pd(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof nc||this._parentGeom instanceof tc||this._parentGeom instanceof ic,a=n||!s;return o.computeIntersections(this._edges,r,a),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new pd(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $l){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,fu.INTERIOR)}else if(arguments[0]instanceof hu){var e=arguments[0];this.insertPoint(this._argIndex,e,fu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fu.EXTERIOR,fu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fu.INTERIOR,fu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fu.BOUNDARY)},e.prototype.addLineString=function(t){var e=fl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new op(e,new Tc(this._argIndex,fu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),zu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=fl.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;Wu.isCCW(i)&&(r=n,o=e);var s=new op(i,new Tc(this._argIndex,fu.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],fu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Tc(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new dd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ic&&(this._useBoundaryDeterminationRule=!1),e instanceof tc)this.addPolygon(e);else if(e instanceof Jl)this.addLineString(e);else if(e instanceof $l)this.addPoint(e);else if(e instanceof ec)this.addCollection(e);else if(e instanceof Bl)this.addCollection(e);else if(e instanceof ic)this.addCollection(e);else{if(!(e instanceof Fl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return du(this._parentGeom,Ql)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new wd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fu.BOUNDARY:fu.INTERIOR},e}(Yc),Cd=function(){if(this._li=new Uu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Id(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=$u.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Id(0,e,i),this._arg[1]=new Id(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Id(0,r,s),this._arg[1]=new Id(1,o,s)}};Cd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Cd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd};var Pd=function(){};Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd},Pd.map=function(){if(arguments[0]instanceof Xu&&du(arguments[1],Pd.MapOp)){for(var t=arguments[0],e=arguments[1],n=new ul,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(du(arguments[0],rl)&&du(arguments[1],Pd.MapOp)){for(var o=arguments[0],s=arguments[1],a=new ul,h=o.iterator();h.hasNext();){var u=h.next(),l=s.map(u);null!==l&&a.add(l)}return a}},Pd.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Pp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jf,this._resultPolyList=new ul,this._resultLineList=new ul,this._resultPointList=new ul,this._graph=new Yc(new Xf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Tc(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new ul;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==fu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new ul,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new ul;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Yp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Xc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Zp(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Jp(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ic.RIGHT),r.getLocation(1,Ic.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(zu.isTrue(!i.isNull(r,Ic.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ic.LEFT,i.getLocation(r,Ic.LEFT)),zu.isTrue(!i.isNull(r,Ic.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ic.RIGHT,i.getLocation(r,Ic.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cd);Nd.overlayOp=function(t,e,n){return new Nd(t,e).getResultGeometry(n)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Xp.map(t,{interfaces_:function(){return[Pd.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hd.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hd.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(i,r);break;case Nd.UNION:o=Math.max(i,r);break;case Nd.DIFFERENCE:o=i;break;case Nd.SYMDIFFERENCE:o=Math.max(i,r)}return o},Nd.createEmptyResult=function(t,e,n,i){var r=null;switch(Nd.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hd.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Nd.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===fu.BOUNDARY&&(r=fu.INTERIOR),o===fu.BOUNDARY&&(o=fu.INTERIOR),s){case Nd.INTERSECTION:return r===fu.INTERIOR&&o===fu.INTERIOR;case Nd.UNION:return r===fu.INTERIOR||o===fu.INTERIOR;case Nd.DIFFERENCE:return r===fu.INTERIOR&&o!==fu.INTERIOR;case Nd.SYMDIFFERENCE:return r===fu.INTERIOR&&o!==fu.INTERIOR||r!==fu.INTERIOR&&o===fu.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var Ld=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pp,this._seg=new _f;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ld.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=e._linework.getGeometryN(n).getCoordinateSequence(),r=0;r<i.size()-1;r++)if(i.getCoordinate(r,e._seg.p0),i.getCoordinate(r+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Ld.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fu.BOUNDARY:this._ptLocator.locate(t,this._g)},Ld.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var n=e.getLinework(),i=_c.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld};var Od=function(){this._linework=null,this._linework=new ul};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof tc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Od.prototype.interfaces_=function(){return[Tl]},Od.prototype.getClass=function(){return Od};var kd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};kd.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},kd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},kd.prototype.getPoints=function(t){for(var e=new ul,n=Cp.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},kd.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,h=n*o/s,u=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var c=new hu(u-h,l+a);i.add(c)}if(this._doRight){var f=new hu(u+h,l-a);i.add(f)}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd};var Ad=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new ul;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Ld(this._geom[0],this._boundaryDistanceTolerance),new Ld(this._geom[1],this._boundaryDistanceTolerance),new Ld(this._geom[2],this._boundaryDistanceTolerance)]},Rd={TOLERANCE:{configurable:!0}};Ad.prototype.reportResult=function(t,e,n){Pu.out.println("Overlay result invalid - A:"+fu.toLocationSymbol(e[0])+" B:"+fu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fu.toLocationSymbol(e[2]))},Ad.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ad.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(e,i))return t._invalidLocation=i,!1}return!0}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Ad.hasLocation(this._location,fu.BOUNDARY)||this.isValidResult(r,this._location)}},Ad.prototype.addTestPts=function(t){var e=new kd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ad.prototype.isValidResult=function(t,e){var n=Nd.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===fu.INTERIOR);return i||this.reportResult(t,e,n),i},Ad.prototype.getInvalidLocation=function(){return this._invalidLocation},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad},Ad.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ad.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Qp.computeSizeBasedSnapTolerance(t),Qp.computeSizeBasedSnapTolerance(e))},Ad.isValid=function(t,e,n,i){return new Ad(t,e,i).isValid(n)},Rd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ad,Rd);var Td=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Td.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Td.prototype.combine=function(){for(var t=new ul,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.combine=function(){if(1===arguments.length)return new Td(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Td(Td.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Td(Td.createList(n,i,r)).combine()}},Td.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Td.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new ul;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new ul;return s.add(i),s.add(r),s.add(o),s}};var Dd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new ul)},Fd={STRTREE_NODE_CAPACITY:{configurable:!0}};Dd.prototype.reduceToGeometries=function(t){for(var e=new ul,n=t.iterator();n.hasNext();){var i=n.next(),r=null;du(i,al)?r=this.unionTree(i):i instanceof Xu&&(r=i),e.add(r)}return e},Dd.prototype.extractByEnvelope=function(t,e,n){for(var i=new ul,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Dd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Td.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Dd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new uf(Dd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Dd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Dd.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Dd.getGeometry(e,n),Dd.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Dd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Dd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Dd.prototype.unionActual=function(t,e){return Dd.restrictToPolygons(t.union(e))},Dd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Dd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new ul,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Td.combine(i)},Dd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.restrictToPolygons=function(t){if(du(t,Ql))return t;var e=Ip.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_c.toPolygonArray(e))},Dd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Dd.union=function(t){return new Dd(t).union()},Fd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dd,Fd);var Bd=function(){};function zd(){return new jd}function jd(){this.reset()}Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},Bd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hd.overlayOp(t,e,Nd.UNION)},jd.prototype={constructor:jd,reset:function(){this.s=this.t=0},add:function(t){Ud(qd,t,this.t),Ud(this,qd.s,this.s),this.s?this.t+=qd.t:this.s=qd.t},valueOf:function(){return this.s}};var qd=new jd;function Ud(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var Gd=1e-6,Vd=Math.PI,Wd=Vd/2,Hd=Vd/4,Yd=2*Vd,Xd=180/Vd,Zd=Vd/180,Jd=Math.abs,Kd=Math.atan,$d=Math.atan2,Qd=Math.cos,tg=Math.sin,eg=Math.sqrt;function ng(t){return t>1?0:t<-1?Vd:Math.acos(t)}function ig(t){return t>1?Wd:t<-1?-Wd:Math.asin(t)}function rg(){}function og(t,e){t&&ug.hasOwnProperty(t.type)&&ug[t.type](t,e)}var sg,ag,hg={Feature:function(t,e){og(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)og(n[i].geometry,e)}},ug={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){lg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)lg(n[i],e,0)},Polygon:function(t,e){cg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)cg(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)og(n[i],e)}};function lg(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function cg(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)lg(t[n],e,1);e.polygonEnd()}function fg(t){return[$d(t[1],t[0]),ig(t[2])]}function pg(t){var e=t[0],n=t[1],i=Qd(n);return[i*Qd(e),i*tg(e),tg(n)]}function dg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function _g(t){var e=eg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function vg(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function bg(t,e){return[t>Vd?t-Yd:t<-Vd?t+Yd:t,e]}function xg(t){return function(e,n){return[(e+=t)>Vd?e-Yd:e<-Vd?e+Yd:e,n]}}function wg(t){var e=xg(t);return e.invert=xg(-t),e}function Eg(t,e){var n=Qd(t),i=tg(t),r=Qd(e),o=tg(e);function s(t,e){var s=Qd(e),a=Qd(t)*s,h=tg(t)*s,u=tg(e),l=u*n+a*i;return[$d(h*r-l*o,a*n-u*i),ig(l*r+h*o)]}return s.invert=function(t,e){var s=Qd(e),a=Qd(t)*s,h=tg(t)*s,u=tg(e),l=u*r-h*o;return[$d(h*r+u*o,a*n+l*i),ig(l*n-a*i)]},s}function Mg(t,e){(e=pg(e))[0]-=t,_g(e);var n=ng(-e[1]);return((-e[2]<0?-n:n)+Yd-Gd)%Yd}function Sg(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:rg,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ig(t,e){return Jd(t[0]-e[0])<Gd&&Jd(t[1]-e[1])<Gd}function Cg(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Pg(t,e,n,i,r){var o,s,a=[],h=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Ig(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new Cg(i,t,null,!0)),h.push(n.o=new Cg(i,null,n,!1)),a.push(n=new Cg(s,t,null,!1)),h.push(n.o=new Cg(s,null,n,!0))}})),a.length){for(h.sort(e),Ng(a),Ng(h),o=0,s=h.length;o<s;++o)h[o].e=n=!n;for(var u,l,c=a[0];;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=u.length;o<s;++o)r.point((l=u[o])[0],l[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((l=u[o])[0],l[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function Ng(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Lg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Og(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}zd(),zd(),zd(),bg.invert=bg,1===(sg=Lg).length&&(ag=sg,sg=function(t,e){return Lg(ag(t),e)});var kg=1e9,Ag=-kg;function Rg(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,u){var l=0,c=0;if(null==r||(l=s(r,a))!==(c=s(o,a))||h(r,o)<0^a>0)do{u.point(0===l||3===l?t:n,l>1?i:e)}while((l=(l+a+4)%4)!==c);else u.point(o[0],o[1])}function s(i,r){return Jd(i[0]-t)<Gd?r>0?0:3:Jd(i[0]-n)<Gd?r>0?2:1:Jd(i[1]-e)<Gd?r>0?1:0:r>0?3:2}function a(t,e){return h(t.x,e.x)}function h(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var h,u,l,c,f,p,d,g,y,m,_,v=s,b=Sg(),x={point:w,lineStart:function(){x.point=E,u&&u.push(l=[]),m=!0,y=!1,d=g=NaN},lineEnd:function(){h&&(E(c,f),p&&y&&b.rejoin(),h.push(b.result())),x.point=w,y&&v.lineEnd()},polygonStart:function(){v=b,h=[],u=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,s,a=u[n],h=1,l=a.length,c=a[0],f=c[0],p=c[1];h<l;++h)o=f,s=p,f=(c=a[h])[0],p=c[1],s<=i?p>i&&(f-o)*(i-s)>(p-s)*(t-o)&&++e:p<=i&&(f-o)*(i-s)<(p-s)*(t-o)&&--e;return e}(),n=_&&e,r=(h=Og(h)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&Pg(h,a,e,o,s),s.polygonEnd()),v=s,h=u=l=null}};function w(t,e){r(t,e)&&v.point(t,e)}function E(o,s){var a=r(o,s);if(u&&l.push([o,s]),m)c=o,f=s,p=a,m=!1,a&&(v.lineStart(),v.point(o,s));else if(a&&y)v.point(o,s);else{var h=[d=Math.max(Ag,Math.min(kg,d)),g=Math.max(Ag,Math.min(kg,g))],b=[o=Math.max(Ag,Math.min(kg,o)),s=Math.max(Ag,Math.min(kg,s))];!function(t,e,n,i,r,o){var s,a=t[0],h=t[1],u=0,l=1,c=e[0]-a,f=e[1]-h;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<u)return;s<l&&(l=s)}else if(c>0){if(s>l)return;s>u&&(u=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>l)return;s>u&&(u=s)}else if(c>0){if(s<u)return;s<l&&(l=s)}if(s=i-h,f||!(s>0)){if(s/=f,f<0){if(s<u)return;s<l&&(l=s)}else if(f>0){if(s>l)return;s>u&&(u=s)}if(s=o-h,f||!(s<0)){if(s/=f,f<0){if(s>l)return;s>u&&(u=s)}else if(f>0){if(s<u)return;s<l&&(l=s)}return u>0&&(t[0]=a+u*c,t[1]=h+u*f),l<1&&(e[0]=a+l*c,e[1]=h+l*f),!0}}}}}(h,b,t,e,n,i)?a&&(v.lineStart(),v.point(o,s),_=!1):(y||(v.lineStart(),v.point(h[0],h[1])),v.point(b[0],b[1]),a||v.lineEnd(),_=!1)}d=o,g=s,y=a}return x}}var Tg=zd();function Dg(t){return t}zd(),zd(),zd();var Fg=1/0,Bg=Fg,zg=-Fg,jg=zg,qg={point:function(t,e){t<Fg&&(Fg=t),t>zg&&(zg=t),e<Bg&&(Bg=e),e>jg&&(jg=e)},lineStart:rg,lineEnd:rg,polygonStart:rg,polygonEnd:rg,result:function(){var t=[[Fg,Bg],[zg,jg]];return zg=jg=-(Bg=Fg=1/0),t}};function Ug(t,e,n,i){return function(r,o){var s,a,h,u=e(o),l=r.invert(i[0],i[1]),c=Sg(),f=e(c),p=!1,d={point:g,lineStart:m,lineEnd:_,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=_,a=Og(a);var t=function(t,e){var n=e[0],i=e[1],r=[tg(n),-Qd(n),0],o=0,s=0;Tg.reset();for(var a=0,h=t.length;a<h;++a)if(l=(u=t[a]).length)for(var u,l,c=u[l-1],f=c[0],p=c[1]/2+Hd,d=tg(p),g=Qd(p),y=0;y<l;++y,f=_,d=b,g=x,c=m){var m=u[y],_=m[0],v=m[1]/2+Hd,b=tg(v),x=Qd(v),w=_-f,E=w>=0?1:-1,M=E*w,S=M>Vd,I=d*b;if(Tg.add($d(I*E*tg(M),g*x+I*Qd(M))),o+=S?w+E*Yd:w,S^f>=n^_>=n){var C=gg(pg(c),pg(m));_g(C);var P=gg(r,C);_g(P);var N=(S^w>=0?-1:1)*ig(P[2]);(i>N||i===N&&(C[0]||C[1]))&&(s+=S^w>=0?1:-1)}}return(o<-1e-6||o<Gd&&Tg<-1e-6)^1&s}(s,l);a.length?(p||(o.polygonStart(),p=!0),Pg(a,Vg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function y(t,e){var n=r(t,e);u.point(n[0],n[1])}function m(){d.point=y,u.lineStart()}function _(){d.point=g,u.lineEnd()}function v(t,e){h.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),h=[]}function x(){v(h[0][0],h[0][1]),f.lineEnd();var t,e,n,i,r=f.clean(),u=c.result(),l=u.length;if(h.pop(),s.push(h),h=null,l)if(1&r){if((e=(n=u[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else l>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(Gg))}return d}}function Gg(t){return t.length>1}function Vg(t,e){return((t=t.x)[0]<0?t[1]-Wd-Gd:Wd-t[1])-((e=e.x)[0]<0?e[1]-Wd-Gd:Wd-e[1])}zd();var Wg=Ug((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Vd:-Vd,h=Jd(o-n);Jd(h-Vd)<Gd?(t.point(n,i=(i+s)/2>0?Wd:-Wd),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&h>=Vd&&(Jd(n-r)<Gd&&(n-=r*Gd),Jd(o-a)<Gd&&(o-=a*Gd),i=function(t,e,n,i){var r,o,s=tg(t-n);return Jd(s)>Gd?Kd((tg(e)*(o=Qd(i))*tg(n)-tg(i)*(r=Qd(e))*tg(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Wd,i.point(-Vd,r),i.point(0,r),i.point(Vd,r),i.point(Vd,0),i.point(Vd,-r),i.point(0,-r),i.point(-Vd,-r),i.point(-Vd,0),i.point(-Vd,r);else if(Jd(t[0]-e[0])>Gd){var o=t[0]<e[0]?Vd:-Vd;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-Vd,-Wd]);function Hg(t,e){var n=Qd(t),i=n>0,r=Jd(n)>Gd;function o(t,e){return Qd(t)*Qd(e)>n}function s(t,e,i){var r=[1,0,0],o=gg(pg(t),pg(e)),s=dg(o,o),a=o[0],h=s-a*a;if(!h)return!i&&t;var u=n*s/h,l=-n*a/h,c=gg(r,o),f=mg(r,u);yg(f,mg(o,l));var p=c,d=dg(f,p),g=dg(p,p),y=d*d-g*(dg(f,f)-1);if(!(y<0)){var m=eg(y),_=mg(p,(-d-m)/g);if(yg(_,f),_=fg(_),!i)return _;var v,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(v=b,b=x,x=v);var M=x-b,S=Jd(M-Vd)<Gd;if(!S&&E<w&&(v=w,w=E,E=v),S||M<Gd?S?w+E>0^_[1]<(Jd(_[0]-b)<Gd?w:E):w<=_[1]&&_[1]<=E:M>Vd^(b<=_[0]&&_[0]<=x)){var I=mg(p,(-d+m)/g);return yg(I,f),[_,fg(I)]}}}function a(e,n){var r=i?t:Vd-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Ug(o,(function(t){var e,n,h,u,l;return{lineStart:function(){u=h=!1,l=1},point:function(c,f){var p,d=[c,f],g=o(c,f),y=i?g?0:a(c,f):g?a(c+(c<0?Vd:-Vd),f):0;if(!e&&(u=h=g)&&t.lineStart(),g!==h&&(!(p=s(e,d))||Ig(e,p)||Ig(d,p))&&(d[0]+=Gd,d[1]+=Gd,g=o(d[0],d[1])),g!==h)l=0,g?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&i^g){var m;y&n||!(m=s(d,e,!0))||(l=0,i?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Ig(e,d)||t.point(d[0],d[1]),e=d,h=g,n=y},lineEnd:function(){h&&t.lineEnd(),e=null},clean:function(){return l|(u&&h)<<1}}}),(function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var s=Qd(e),a=tg(e),h=i*n;null==r?(r=e+i*Yd,o=e-h/2):(r=Mg(s,r),o=Mg(s,o),(i>0?r<o:r>o)&&(r+=i*Yd));for(var u,l=r;i>0?l>o:l<o;l-=h)u=fg([s,-a*Qd(l),-a*tg(l)]),t.point(u[0],u[1])}}(o,t,e,r,n,i)}),i?[0,-t]:[-Vd,t-Vd])}function Yg(t){return function(e){var n=new Xg;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Xg(){}function Zg(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&hg.hasOwnProperty(t.type)?hg[t.type](t,e):og(t,e)}(n,t.stream(qg));var s=qg.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),h=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([h,u])}Xg.prototype={constructor:Xg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jg=Qd(30*Zd);function Kg(t,e){return+e?function(t,e){function n(i,r,o,s,a,h,u,l,c,f,p,d,g,y){var m=u-i,_=l-r,v=m*m+_*_;if(v>4*e&&g--){var b=s+f,x=a+p,w=h+d,E=eg(b*b+x*x+w*w),M=ig(w/=E),S=Jd(Jd(w)-1)<Gd||Jd(o-c)<Gd?(o+c)/2:$d(x,b),I=t(S,M),C=I[0],P=I[1],N=C-i,L=P-r,O=_*N-m*L;(O*O/v>e||Jd((m*N+_*L)/v-.5)>.3||s*f+a*p+h*d<Jg)&&(n(i,r,o,s,a,h,C,P,S,b/=E,x/=E,w,g,y),y.point(C,P),n(C,P,S,b,x,w,u,l,c,f,p,d,g,y))}}return function(e){var i,r,o,s,a,h,u,l,c,f,p,d,g={point:y,lineStart:m,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,i){n=t(n,i),e.point(n[0],n[1])}function m(){l=NaN,g.point=_,e.lineStart()}function _(i,r){var o=pg([i,r]),s=t(i,r);n(l,c,u,f,p,d,l=s[0],c=s[1],u=i,f=o[0],p=o[1],d=o[2],16,e),e.point(l,c)}function v(){g.point=y,e.lineEnd()}function b(){m(),g.point=x,g.lineEnd=w}function x(t,e){_(i=t,e),r=l,o=c,s=f,a=p,h=d,g.point=_}function w(){n(l,c,u,f,p,d,r,o,i,s,a,h,16,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return Yg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var $g=Yg({point:function(t,e){this.stream.point(t*Zd,e*Zd)}});function Qg(t){return function(t){var e,n,i,r,o,s,a,h,u,l,c=150,f=480,p=250,d=0,g=0,y=0,m=0,_=0,v=null,b=Wg,x=null,w=Dg,E=.5,M=Kg(C,E);function S(t){return[(t=o(t[0]*Zd,t[1]*Zd))[0]*c+n,i-t[1]*c]}function I(t){return(t=o.invert((t[0]-n)/c,(i-t[1])/c))&&[t[0]*Xd,t[1]*Xd]}function C(t,r){return[(t=e(t,r))[0]*c+n,i-t[1]*c]}function P(){o=vg(r=function(t,e,n){return(t%=Yd)?e||n?vg(wg(t),Eg(e,n)):wg(t):e||n?Eg(e,n):bg}(y,m,_),e);var t=e(d,g);return n=f-t[0]*c,i=p+t[1]*c,N()}function N(){return u=l=null,S}return S.stream=function(t){return u&&l===t?u:u=$g(b(r,M(w(l=t))))},S.clipAngle=function(t){return arguments.length?(b=+t?Hg(v=t*Zd,6*Zd):(v=null,Wg),N()):v*Xd},S.clipExtent=function(t){return arguments.length?(w=null==t?(x=s=a=h=null,Dg):Rg(x=+t[0][0],s=+t[0][1],a=+t[1][0],h=+t[1][1]),N()):null==x?null:[[x,s],[a,h]]},S.scale=function(t){return arguments.length?(c=+t,P()):c},S.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],P()):[f,p]},S.center=function(t){return arguments.length?(d=t[0]%360*Zd,g=t[1]%360*Zd,P()):[d*Xd,g*Xd]},S.rotate=function(t){return arguments.length?(y=t[0]%360*Zd,m=t[1]%360*Zd,_=t.length>2?t[2]%360*Zd:0,P()):[y*Xd,m*Xd,_*Xd]},S.precision=function(t){return arguments.length?(M=Kg(C,E=t*t),N()):eg(E)},S.fitExtent=function(t,e){return Zg(S,t,e)},S.fitSize=function(t,e){return function(t,e,n){return Zg(t,[[0,0],e],n)}(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&I,P()}}((function(){return t}))()}var ty=function(t){return function(e,n){var i=Qd(e),r=Qd(n),o=t(i*r);return[o*r*tg(e),o*tg(n)]}}((function(t){return(t=ng(t))&&t/tg(t)}));function ey(){return Qg(ty).scale(79.4188).clipAngle(179.999)}function ny(t,n,i,r){var s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var h=[];return z(t,(function(t){var e=ny(t,n,i,r);e&&h.push(e)})),p(h)}var u=function(t){var n=bn(t).geometry.coordinates,i=[-n[0],-n[1]];return ey().rotate(i).scale(e)}(a),l={type:a.type,coordinates:ry(a.coordinates,u)},c=(new Mc).read(l),f=v(b(n,i),"meters"),d=_p.bufferOp(c,f,r);if(!iy((d=(new Sc).write(d)).coordinates))return o({type:d.type,coordinates:oy(d.coordinates,u)},s)}function iy(t){return Array.isArray(t[0])?iy(t[0]):isNaN(t[0])}function ry(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return ry(t,e)}))}function oy(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return oy(t,e)}))}function sy(t,e,n){void 0===n&&(n={});var i=it(t),r=it(e),o=Qh.intersection(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):y(o,n.properties)}function ay(t,e,n){void 0===n&&(n={});var i=JSON.stringify(n.properties||{}),r=t[0],o=t[1],s=t[2],a=t[3],h=(o+a)/2,u=(r+s)/2,l=2*e/ve([r,h],[s,h],n)*(s-r),c=2*e/ve([u,o],[u,a],n)*(a-o),f=l/2,d=2*f,g=Math.sqrt(3)/2*c,y=s-r,m=a-o,_=3/4*d,v=g,b=(y-d)/(d-f/2),x=Math.floor(b),w=(x*_-f/2-y)/2-f/2+_/2,E=Math.floor((m-g)/g),M=(m-E*g)/2,S=E*g-m>g/2;S&&(M-=g/4);for(var I=[],C=[],P=0;P<6;P++){var N=2*Math.PI/6*P;I.push(Math.cos(N)),C.push(Math.sin(N))}for(var L=[],O=0;O<=x;O++)for(var k=0;k<=E;k++){var A=O%2==1;if(!(0===k&&A||0===k&&S)){var R=O*_+r-w,T=k*v+o+M;if(A&&(T-=g/2),!0===n.triangles)uy([R,T],l/2,c/2,JSON.parse(i),I,C).forEach((function(t){n.mask?sy(n.mask,t)&&L.push(t):L.push(t)}));else{var D=hy([R,T],l/2,c/2,JSON.parse(i),I,C);n.mask?sy(n.mask,D)&&L.push(D):L.push(D)}}}return p(L)}function hy(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var h=t[0]+e*r[a],l=t[1]+n*o[a];s.push([h,l])}return s.push(s[0].slice()),u([s],i)}function uy(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var h=[];h.push(t),h.push([t[0]+e*r[a],t[1]+n*o[a]]),h.push([t[0]+e*r[(a+1)%6],t[1]+n*o[(a+1)%6]]),h.push(t),s.push(u([h],i))}return s}function ly(t){return y(t)}function cy(t){return u(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function fy(t,e,n){return void 0===n&&(n={}),function(t,e,n,i){void 0===i&&(i={});for(var r=[],o=t[0],s=t[1],a=t[2],h=t[3],l=e/ve([o,s],[a,s],i)*(a-o),c=n/ve([o,s],[o,h],i)*(h-s),f=a-o,d=h-s,g=Math.floor(f/l),y=Math.floor(d/c),m=(d-y*c)/2,_=o+(f-g*l)/2,v=0;v<g;v++){for(var b=s+m,x=0;x<y;x++){var w=u([[[_,b],[_,b+c],[_+l,b+c],[_+l,b],[_,b]]],i.properties);i.mask?Ps(i.mask,w)&&r.push(w):r.push(w),b+=c}_+=l}return p(r)}(t,e,e,n)}function py(t,e,n){void 0===n&&(n={});for(var i=[],r=e/ve([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ve([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var h=0,l=t[1];l<=t[3];){var c=null,f=null;s%2==0&&h%2==0?(c=u([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),f=u([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)):s%2==0&&h%2==1?(c=u([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties),f=u([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties)):h%2==0&&s%2==1?(c=u([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties),f=u([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties)):h%2==1&&s%2==1&&(c=u([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),f=u([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)),n.mask?(sy(n.mask,c)&&i.push(c),sy(n.mask,f)&&i.push(f)):(i.push(c),i.push(f)),l+=o,h++}s++,a+=r}return p(i)}ty.invert=function(t){return function(e,n){var i=eg(e*e+n*n),r=t(i),o=tg(r),s=Qd(r);return[$d(e*o,i*s),ig(i&&n*o/i)]}}((function(t){return t})),t.along=function(t,e,n){void 0===n&&(n={});for(var i=it(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var s=e-r;if(s){var h=vn(i[o],i[o-1])-180;return mn(i[o],s,h,n)}return a(i[o])}r+=ve(i[o],i[o+1],n)}return a(i[i.length-1])},t.angle=function(t,e,n,i){if(void 0===i&&(i={}),!P(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var r=t,o=e,s=n,a=w(!0!==i.mercator?vn(r,o):jr(r,o)),h=w(!0!==i.mercator?vn(s,o):jr(s,o)),u=Math.abs(a-h);return!0===i.explementary?360-u:u},t.applyFilter=hh,t.area=Ui,t.areaFactors=r,t.bbox=J,t.bboxClip=function(t,e){var n=it(t),i=n.type,r="Feature"===t.type?t.properties:{},o=n.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(o=[o]),o.forEach((function(t){!function(t,e,n){var i,r,o,s,a,h=t.length,u=kr(t[0],e),l=[];for(n||(n=[]),i=1;i<h;i++){for(s=t[i-1],r=o=kr(a=t[i],e);;){if(!(u|r)){l.push(s),r!==o?(l.push(a),i<h-1&&(n.push(l),l=[])):i===h-1&&l.push(a);break}if(u&r)break;u?u=kr(s=Or(s,a,u,e),e):r=kr(a=Or(s,a,r,e),e)}u=o}l.length&&n.push(l)}(t,e,s)})),1===s.length?c(s[0],r):d(s,r);case"Polygon":return u(Ar(o,e),r);case"MultiPolygon":return y(o.map((function(t){return Ar(t,e)})),r);default:throw new Error("geometry "+i+" not supported")}},t.bboxPolygon=dn,t.bearing=vn,t.bearingToAngle=w,t.bearingToAzimuth=w,t.bezier=pn,t.bezierSpline=pn,t.booleanClockwise=Hr,t.booleanContains=function(t,e){var n=it(t),i=it(e),r=n.type,o=i.type,s=n.coordinates,a=i.coordinates;switch(r){case"Point":if("Point"===o)return ms(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(ms(t.coordinates[n],e.coordinates)){i=!0;break}return i}(n,i);case"MultiPoint":return function(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){for(var r=i[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(ms(r,a[s])){o=!0;break}if(!o)return!1}return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Xi(i,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(Xi({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Xi({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,i);case"MultiPoint":return function(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(Xi(o,t,{ignoreEndVertices:!0})&&(n=!0),!Xi(o,t))return!1}return!!n}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ye(i,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0;if(!ys(J(t),J(e)))return!1;for(;i<e.coordinates.length-1;i++)if(ye({type:"Point",coordinates:_s(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,i);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!ys(J(t),J(e)))return!1;for(var n=0,i=it(e).coordinates;n<i.length;n++)for(var r=0,o=i[n];r<o.length;r++)if(!ye(o[r],t))return!1;return!0}(n,i);case"MultiPoint":return function(t,e){for(var n=0,i=e.coordinates;n<i.length;n++)if(!ye(i[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=it(t),i=it(e),r=n.type,o=i.type;switch(r){case"MultiPoint":switch(o){case"LineString":return vs(n,i);case"Polygon":return xs(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return vs(i,n);case"LineString":return function(t,e){if(Oi(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),ws(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(n,i);case"Polygon":return bs(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return xs(i,n);case"LineString":return bs(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanDisjoint=fs,t.booleanEqual=function(t,e){return it(t).type===it(e).type&&new Cs({precision:6}).compare(tn(t),tn(e))},t.booleanIntersects=Ps,t.booleanOverlap=function(t,e){var n=it(t),i=it(e),r=n.type,o=i.type;if("MultiPoint"===r&&"MultiPoint"!==o||("LineString"===r||"MultiLineString"===r)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===r||"MultiPolygon"===r)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===r)throw new Error("Point geometry not supported");if(new Cs({precision:6}).compare(t,e))return!1;var s=0;switch(r){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var h=0;h<i.coordinates.length;h++){var u=n.coordinates[a],l=i.coordinates[h];if(u[0]===l[0]&&u[1]===l[1])return!0}return!1;case"LineString":case"MultiLineString":G(t,(function(t){G(e,(function(e){Fr(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":G(t,(function(t){G(e,(function(e){Oi(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Gs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Gs(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Jn(tn(t)).features,i=Jn(tn(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!Us(o,i[r].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=ye,t.booleanPointOnLine=Xi,t.booleanWithin=Ji,t.buffer=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){var n=ny(t,e,i,r);n&&o.push(n)})),p(o);case"FeatureCollection":return D(t,(function(t){var n=ny(t,e,i,r);n&&D(n,(function(t){t&&o.push(t)}))})),p(o)}return ny(t,e,i,r)},t.center=bn,t.centerMean=Da,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!C(n))throw new Error("counter must be a number");var i=e.weight,r=Da(t,{weight:e.weight}),o=p([]);D(t,(function(t){var e;o.features.push(xn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[i]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return Fa(r.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),rt(e)){case"Point":return a(K(e),n.properties);case"Polygon":var i=[];k(e,(function(t){i.push(t)}));var r,o,s,h,u,l,c,f,p=xn(e,{properties:n.properties}),d=p.geometry.coordinates,g=0,y=0,m=0,_=i.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(r=0;r<i.length-1;r++)h=(o=_[r])[0],l=o[1],u=(s=_[r+1])[0],m+=f=h*(c=s[1])-u*l,g+=(h+u)*f,y+=(l+c)*f;if(0===m)return p;var v=1/(.5*m*6);return a([d[0]+v*g,d[1]+v*y],n.properties);default:var b=ge(e);return b?t(b,{properties:n.properties}):xn(e,{properties:n.properties})}},t.centroid=xn,t.circle=_n,t.cleanCoords=tn,t.clone=Me,t.clusterEach=oh,t.clusterReduce=sh,t.clusters=ch,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Me(t)),n.minPoints=n.minPoints||3;var i=new As.DBSCAN,r=i.run(B(t),S(e,n.units),n.minPoints,ve),o=-1;return r.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),i.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Me(t));var i=B(t),r=i.slice(0,e.numberOfClusters),o=qs(i,e.numberOfClusters,r),s={};return o.centroids.forEach((function(t,e){s[e]=t})),D(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,i){var r=St(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return r.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=J(t),n=r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[i]=o})),t},t.collectionOf=nt,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,(function(t){var n,i,r,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),p(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return o({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,i=be(function(t){var e=[],n={};return D(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,i)||(e.push(t),n[i]=!0)}})),p(e)}(t));if(i.features=i.features.filter((function(t){var i=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(i,r,e),a=ve(r,o,e),h=ve(i,o,e);return s<=n&&a<=n&&h<=n})),i.features.length<1)return null;var r=Qe(i);return 1===r.coordinates.length&&(r.coordinates=r.coordinates[0],r.type="Polygon"),o(r)},t.containsNumber=Q,t.convertArea=I,t.convertDistance=S,t.convertLength=S,t.convex=ge,t.coordAll=B,t.coordEach=k,t.coordReduce=A,t.createBins=ah,t.degrees2radians=M,t.degreesToRadians=M,t.destination=mn,t.difference=function(t,e){var n=it(t),i=it(e),r=t.properties||{},o=Qh.difference(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],r):y(o,r)},t.dissolve=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var i=[];if(!e.propertyName)return nr(y(Qh.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var r={};D(t,(function(t){Object.prototype.hasOwnProperty.call(r,t.properties[n])||(r[t.properties[n]]=[]),r[t.properties[n]].push(t)}));for(var o=Object.keys(r),s=0;s<o.length;s++){var a=y(Qh.union.apply(null,r[o[s]].map((function(t){return t.geometry.coordinates}))));a.properties[n]=o[s],i.push(a)}return nr(p(i))},t.distance=ve,t.distanceToDegrees=x,t.distanceToRadians=b,t.distanceWeight=Ua,t.earthRadius=e,t.ellipse=Ra,t.envelope=gn,t.explode=wn,t.factors=n,t.feature=o,t.featureCollection=p,t.featureEach=D,t.featureOf=et,t.featureReduce=F,t.filterProperties=lh,t.findPoint=X,t.findSegment=Y,t.flatten=nr,t.flattenEach=q,t.flattenReduce=U,t.flip=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Me(t)),k(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonType=tt,t.geomEach=z,t.geomReduce=j,t.geometry=s,t.geometryCollection=m,t.getCluster=rh,t.getCoord=K,t.getCoords=$,t.getGeom=it,t.getType=rt,t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=K(t),e=K(e),i=i||{},r=r||100,o=o||10,new mr({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},t.helpers=O,t.hexGrid=ay,t.inside=ye,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var s,a=J(t);switch(i){case"point":case"points":s=tr(a,e,n);break;case"square":case"squares":s=fy(a,e,n);break;case"hex":case"hexes":s=ay(a,e,n);break;case"triangle":case"triangles":s=py(a,e,n);break;default:throw new Error("invalid gridType")}var h=[];return D(s,(function(e){var s=0,a=0;D(t,(function(t){var h,u=ve("point"===i?e:xn(e),t,n);if(void 0!==r&&(h=t.properties[r]),void 0===h&&(h=t.geometry.coordinates[2]),void 0===h)throw new Error("zValue is missing");0===u&&(s=h);var l=1/Math.pow(u,o);a+=l,s+=l*h}));var u=Me(e);u.properties[r]=s/a,h.push(u)})),p(h)},t.intersect=sy,t.invariant=ot,t.isNumber=C,t.isObject=P,t.isobands=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!P(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Jr(t,{zProperty:i,flip:!0}),a=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=Jo(Zo(Qr(t,o,s-o))),h={};h.groupedRings=a,h[n]=o+"-"+s,i.push(h)}return i}(s,e,i);return p((a=function(t,e,n){var i=J(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],h=e[0].length-1,u=e.length-1,l=r/h,c=o/u,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*c+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(a,s,t)).map((function(t,e){if(o[e]&&!P(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=lt({},r,o[e]);return n[i]=t[i],y(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!P(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:i,flip:!0});return p(function(t,e,n){var i=J(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],h=e[0].length-1,u=e.length-1,l=r/h,c=o/u,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*c+a};return t.forEach((function(t){k(t,f)})),t}(function(t,e,n,i,r){for(var o=[],s=1;s<e.length;s++){var a=+e[s],h=lt({},i,r[s]);h[n]=a;var u=d(pt(t,a),h);o.push(u)}return o}(s,e,i,r,o),s,t))},t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var r=n;r<e.length-1;r++){if(t===e){if(1===Math.abs(n-r))continue;if(0===n&&r===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Bi(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[r][0],e[r][1],e[r+1][0],e[r+1][1]);o&&i.features.push(a([o[0],o[1]]))}}))})),i},t.length=Hi,t.lengthToDegrees=x,t.lengthToRadians=b,t.lineArc=wr,t.lineChunk=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return q(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=Hi(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(Yi(t,e*s,e*(s+1),{units:n}),s)}(t,e,i,(function(t){o.push(t)}))})),p(o)},t.lineDistance=Hi,t.lineEach=W,t.lineIntersect=Oi,t.lineOffset=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=rt(t),o=t.properties;switch(r){case"LineString":return os(t,e,i);case"MultiLineString":var s=[];return q(t,(function(t){s.push(os(t,e,i).geometry.coordinates)})),d(s,o);default:throw new Error("geometry "+r+" is not supported")}},t.lineOverlap=Fr,t.lineReduce=H,t.lineSegment=Jn,t.lineSlice=function(t,e,n){var i=$(n);if("LineString"!==rt(n))throw new Error("line must be a LineString");for(var r,o=Ai(n,t),s=Ai(n,e),a=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],h=r[0].properties.index+1;h<r[1].properties.index+1;h++)a.push(i[h]);return a.push(r[1].geometry.coordinates),c(a,n.properties)},t.lineSliceAlong=Yi,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=rt(t),i=rt(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=er(e,{precision:7});switch(i){case"Point":return vr(t,r);case"MultiPoint":return _r(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _r(t,Oi(t,r))}},t.lineString=c,t.lineStringToPolygon=Cr,t.lineStrings=f,t.lineToPolygon=Cr,t.mask=function(t,e){var n,i=cy(e);return("FeatureCollection"===t.type?ly(2===(n=t).features.length?Qh.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Qh.union.apply(Qh,n.features.map((function(t){return t.geometry.coordinates})))):ly(Qh.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){i.geometry.coordinates.push(t[0])})),i},t.meta=Z,t.midpoint=function(t,e){return mn(t,ve(t,e)/2,vn(t,e))},t.moranIndex=function(t,e){var n=e.inputField,i=e.threshold||1e5,r=e.p||2,o=e.binary||!1,s=Ua(t,{alpha:e.alpha||-1,binary:o,p:r,standardization:e.standardization||!0,threshold:i}),a=[];D(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var h=Ga(a),u=function(t){for(var e=Ga(t),n=0,i=0,r=t;i<r.length;i++){var o=r[i];n+=Math.pow(o-e,2)}return n/t.length}(a),l=0,c=0,f=0,p=0,d=s.length,g=0;g<d;g++){for(var y=0,m=0;m<d;m++)l+=s[g][m]*(a[g]-h)*(a[m]-h),c+=s[g][m],f+=Math.pow(s[g][m]+s[m][g],2),y+=s[g][m]+s[m][g];p+=Math.pow(y,2)}var _=l/c/u,v=-1/(d-1),b=(d*d*(f*=.5)-d*p+c*c*3)/((d-1)*(d+1)*(c*c))-v*v,x=Math.sqrt(b);return{expectedMoranIndex:v,moranIndex:_,stdNorm:x,zNorm:(_-v)/x}},t.multiLineString=d,t.multiPoint=g,t.multiPolygon=y,t.nearest=Zn,t.nearestPoint=Zn,t.nearestPointOnLine=Ai,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var i=n.units,r=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return z(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==rt(e))throw new Error("line must be a LineString");var s=1/0,a=null;return D(o,(function(t){var n=Ti(t,e,{units:i});n<s&&(s=n,a=t)})),a&&(a.properties=lt({dist:s},a.properties,r)),a},t.planepoint=function(t,e){var n=K(t),i=it(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,s=r.b,a=r.c,h=n[0],u=n[1],l=i[0][0],c=i[0][1],f=void 0!==o?o:i[0][2],p=i[1][0],d=i[1][1],g=void 0!==s?s:i[1][2],y=i[2][0],m=i[2][1],_=void 0!==a?a:i[2][2];return(_*(h-l)*(u-d)+f*(h-p)*(u-m)+g*(h-y)*(u-c)-g*(h-l)*(u-m)-_*(h-p)*(u-c)-f*(h-y)*(u-d))/((h-l)*(u-d)+(h-p)*(u-m)+(h-y)*(u-c)-(h-l)*(u-m)-(h-p)*(u-c)-(h-y)*(u-d))},t.point=a,t.pointGrid=tr,t.pointOnFeature=zi,t.pointOnLine=Ai,t.pointOnSurface=zi,t.pointToLineDistance=Ti,t.points=h,t.pointsWithinPolygon=_e,t.polygon=u,t.polygonSmooth=function(t,e){var n=[],i=e.iterations||1;if(!t)throw new Error("inputPolys is required");return z(t,(function(t,e,r){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var h=0;h<i;h++)a=[[]],s=t,h>0&&(s=u(o).geometry),za(s,a),o=a.slice(0);n.push(u(o,r));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<i;l++)a=[[[]]],s=t,l>0&&(s=y(o).geometry),ja(s,a),o=a.slice(0);n.push(y(o,r));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),p(n)},t.polygonTangents=function(t,e){var n,i,r,o,s=$(t),h=$(e),u=J(e),l=0,c=null;switch(s[0]>u[0]&&s[0]<u[2]&&s[1]>u[1]&&s[1]<u[3]&&(l=(c=Zn(t,wn(e))).properties.featureIndex),rt(e)){case"Polygon":n=h[0][l],i=h[0][0],null!==c&&c.geometry.coordinates[1]<s[1]&&(i=h[0][l]),o=Wr(h[0][0],h[0][h[0].length-1],s);var f=Gr(h[0],s,o,r,n,i);n=f[0],i=f[1];break;case"MultiPolygon":for(var d=0,g=0,y=0,m=0;m<h[0].length;m++){d=m;for(var _=!1,v=0;v<h[0][m].length;v++){if(g=v,y===l){_=!0;break}y++}if(_)break}n=h[0][d][g],i=h[0][d][g],o=Wr(h[0][0][0],h[0][0][h[0][0].length-1],s),h.forEach((function(t){var e=Gr(t[0],s,o,r,n,i);n=e[0],i=e[1]}))}return p([a(n),a(i)])},t.polygonToLine=Mr,t.polygonToLineString=Mr,t.polygonize=function(t){var e=cs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){ls.findEdgeRingContaining(t,i)&&i.push(t)})),p(i.map((function(t){return t.toPolygon()})))},t.polygons=l,t.projection=Za,t.propEach=R,t.propReduce=T,t.propertiesContainsFilter=uh,t.radians2degrees=E,t.radiansToDegrees=E,t.radiansToDistance=v,t.radiansToLength=v,t.random=ih,t.randomLineString=th,t.randomPoint=$a,t.randomPolygon=Qa,t.randomPosition=Ka,t.rewind=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Me(t));var r=[];switch(t.type){case"GeometryCollection":return z(t,(function(t){Yr(t,n)})),t;case"FeatureCollection":return D(t,(function(t){D(Yr(t,n),(function(t){r.push(t)}))})),p(r)}return Yr(t,n)},t.rhumbBearing=jr,t.rhumbDestination=Ur,t.rhumbDistance=Ri,t.round=_,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return p(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))},t.sector=function(t,e,n,i,r){if(!P(r=r||{}))throw new Error("options is invalid");var o=r.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(zr(n)===zr(i))return _n(t,e,r);var s=$(t),a=wr(t,e,n,i,r),h=[[s]];return k(a,(function(t){h[0].push(t)})),h[0].push(s),u(h,o)},t.segmentEach=G,t.segmentReduce=V,t.shortestPath=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var i=n.resolution,r=n.minDistance,s=n.obstacles||p([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&!C(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");if(r)throw new Error("options.minDistance is not yet implemented");var h=K(t),u=K(e);switch(t=a(h),e=a(u),rt(s)){case"FeatureCollection":if(0===s.features.length)return c([h,u]);break;case"Polygon":s=p([o(it(s))]);break;default:throw new Error("invalid obstacles")}var l=s;l.features.push(t),l.features.push(e);var f=J(ts(dn(J(l)),1.15));i||(i=ve([f[0],f[1]],[f[2],f[1]],n)/100),l.features.pop(),l.features.pop();for(var d=f[0],g=f[1],y=f[2],m=f[3],_=i/ve([d,g],[y,g],n)*(y-d),v=i/ve([d,g],[d,m],n)*(m-g),b=y-d,x=m-g,w=Math.floor(b/_),E=Math.floor(x/v),M=(b-w*_)/2,S=[],I=[],N=[],L=[],O=1/0,k=1/0,A=m-(x-E*v)/2,R=0;A>=g;){for(var T=[],D=[],F=d+M,B=0;F<=y;){var z=a([F,A]),j=Zs(z,s);T.push(j?0:1),D.push(F+"|"+A);var q=ve(z,t);!j&&q<O&&(O=q,N={x:B,y:R});var U=ve(z,e);!j&&U<k&&(k=U,L={x:B,y:R}),F+=_,B++}I.push(T),S.push(D),A-=v,R++}var G=new Hs(I,{diagonal:!0}),V=G.grid[N.y][N.x],W=G.grid[L.y][L.x],H=Ws.search(G,V,W),Y=[h];return H.forEach((function(t){var e=S[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(u),tn(c(Y))},t.simplify=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=Me(t)),z(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;tn(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=un(r,e,n);break;case"MultiLineString":t.coordinates=r.map((function(t){return un(t,e,n)}));break;case"Polygon":t.coordinates=ln(r,e,n);break;case"MultiPolygon":t.coordinates=r.map((function(t){return ln(t,e,n)}))}}(t,n,i)})),t},t.square=yn,t.squareGrid=fy,t.standardDeviationalEllipse=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!C(n))throw new Error("steps must be a number");if(!P(r))throw new Error("properties must be a number");var o=B(t).length,s=Da(t,{weight:i}),a=0,h=0,u=0;D(t,(function(t){var e=t.properties[i]||1,n=Ba($(t),$(s));a+=Math.pow(n.x,2)*e,h+=Math.pow(n.y,2)*e,u+=n.x*n.y*e}));var l=a-h,c=Math.sqrt(Math.pow(l,2)+4*Math.pow(u,2)),f=2*u,d=Math.atan((l+c)/f),g=180*d/Math.PI,y=0,m=0,_=0;D(t,(function(t){var e=t.properties[i]||1,n=Ba($(t),$(s));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,m+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,_+=e}));var v=Math.sqrt(2*y/_),b=Math.sqrt(2*m/_),x=Ra(s,v,b,{units:"degrees",angle:g,steps:n,properties:r}),w=_e(t,p([x])),E={meanCenterCoordinates:$(s),semiMajorAxis:v,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*B(w).length/o};return x.properties.standardDeviationalEllipse=E,x},t.tag=function(t,e,n,i){return t=Me(t),e=Me(e),D(t,(function(t){t.properties||(t.properties={}),D(e,(function(e){void 0===t.properties[i]&&ye(t,e)&&(t.properties[i]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Xn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Xn(t))})),e},t.tin=be,t.toMercator=Va,t.toWgs84=Wa,t.transformRotate=Qo,t.transformScale=ts,t.transformTranslate=function(t,e,n,i){if(!P(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Me(t)),k(t,(function(t){var i=$(Ur(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=py,t.truncate=er,t.union=function(t,e,n){void 0===n&&(n={});var i=it(t),r=it(e),o=Qh.union(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):y(o,n.properties)},t.unitsFactors=i,t.unkinkPolygon=function(t){var e=[];return q(t,(function(t){"Polygon"===t.geometry.type&&D(or(t),(function(n){e.push(u(n.geometry.coordinates,t.properties))}))})),p(e)},t.validateBBox=N,t.validateId=L,t.voronoi=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),p(function(){var t=Ks,e=$s,n=null;function i(i){return new ka(i.map((function(n,r){var o=[Math.round(t(n,r,i)/Na)*Na,Math.round(e(n,r,i)/Na)*Na];return o.index=r,o.data=n,o})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Js(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Js(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Aa))},t.within=_e,Object.defineProperty(t,"__esModule",{value:!0})}(qc);class Wc{static#t=0;static#e=0;#n;constructor(t,e,n,i,r=!1){return this.name=t,this.view=e,this.source=n,this.field=i,this.gradation_or_classes=r,this.#n=!1,r?this.setGradation("rgb(255,0,0)","",NaN,NaN):this.setClasses({}),this}setExtrude(t,e){return this.field_ground=t,this.field_height=e,this.#n=!0,this}to3D(t){return void 0===this.field_ground||void 0===this.field_height?(this.#n=!1,this):(this.#n=t,this)}setGradation(t,e="",n=this.min,i=this.max){return t=t.replace(" ","").slice(4,-1).split(","),this.color1={r:+t[0],g:+t[1],b:+t[2]},""!=e&&(e=e.replace(" ","").slice(4,-1).split(","),this.color2={r:+e[0],g:+e[1],b:+e[2]}),this.min=n,this.max=i,this}setClasses(t={}){return this.classes_map=t,void 0===this.classes_map["no-data-color"]&&(this.classes_map["no-data-color"]="rgb(169,169,169)"),this}async autoMinMax(){const t=this.min,e=this.max;if(isNaN(t)||isNaN(e)){const n=function(t){return void 0===t[this.field]||isNaN(t[this.field])||((isNaN(this.min)||t[this.field]<this.min)&&(this.min=t[this.field]),(isNaN(this.max)||t[this.field]>this.max)&&(this.max=t[this.field])),!0}.bind(this);Wc.#e+=1;const i=Wc.#e,r=new itowns.FeatureGeometryLayer("to_delete_minmax_style"+i,{batchId:function(t,e){return e},filter:n,source:this.source,visible:!1});return this.view.addLayer(r).then((()=>{isNaN(t)||(this.min=t),isNaN(e)||(this.max=e),this.view.removeLayer("to_delete_minmax_style"+i),r.delete()}))}return Promise.resolve()}async autoClass(){if(1==Object.keys(this.classes_map).length){const t=function(t){return void 0!==t[this.field]&&void 0===this.classes_map[t[this.field]]&&(this.classes_map[t[this.field]]="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")"),!0}.bind(this);Wc.#e+=1;const e=Wc.#e,n=new itowns.FeatureGeometryLayer("to_delete_class_style"+e,{batchId:function(t,e){return e},filter:t,source:this.source,visible:!1});return this.view.addLayer(n).then((()=>{this.view.removeLayer("to_delete_class_style"+e),n.delete()}))}return Promise.resolve()}async to_itowns_layer(){let t;this.clean(),this.gradation_or_classes?((isNaN(this.min)||isNaN(this.max))&&await this.autoMinMax(),t=this.color2?function(t){if(void 0!==t[this.field]){const e=(this.max+this.min)/2;let n,i;t[this.field]<e?(n=(t[this.field]-this.min)/(e-this.min),i=this.color2):(n=1-(t[this.field]-e)/(this.max-e),i=this.color1);let r=[];r.push(Math.floor(n*(255-i.r)+i.r)),r.push(Math.floor(n*(255-i.g)+i.g)),r.push(Math.floor(n*(255-i.b)+i.b));for(let t=0;t<3;t++)r[t]<0?r[t]=0:r[t]>255&&(r[t]=255);return"rgb("+r[0]+","+r[1]+","+r[2]+")"}return"rgb(169,169,169)"}:function(t){if(void 0!==t[this.field]){const e=1-(t[this.field]-this.min)/(this.max-this.min);let n=[];n.push(Math.floor(e*(255-this.color1.r)+this.color1.r)),n.push(Math.floor(e*(255-this.color1.g)+this.color1.g)),n.push(Math.floor(e*(255-this.color1.b)+this.color1.b));for(let t=0;t<3;t++)n[t]<0?n[t]=0:n[t]>255&&(n[t]=255);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}return"rgb(169,169,169)"}):(1==Object.keys(this.classes_map).length&&await this.autoClass(),t=function(t){return void 0!==t[this.field]&&void 0!==this.classes_map[t[this.field]]?this.classes_map[t[this.field]]:this.classes_map["no-data-color"]});const e=t.bind(this);Wc.#t+=1;const n="style_layer_"+Wc.#t;let i;if(this.#n){const t=t=>t[this.field_ground],r=t=>t[this.field_height],o=t=>!!t[this.field_height]&&!!t[this.field_ground];i=new itowns.FeatureGeometryLayer(n,{batchId:function(t,e){return e},filter:o,source:this.source,zoom:{min:0,max:12},style:new itowns.Style({fill:{color:e,extrusion_height:r,base_altitude:t}}),onMeshCreated:t=>{let e=t.children[0].children[0].children[0].children[0],n=new itowns.THREE.LineSegments(new itowns.THREE.EdgesGeometry(e.geometry),new itowns.THREE.LineBasicMaterial({color:"black"}));e.add(n)}})}else i=new itowns.ColorLayer(n,{batchId:function(t,e){return e},source:this.source,zoom:{min:14},style:new itowns.Style({fill:{color:e},stroke:{color:"black"}})});return this.view.addLayer(i).then((()=>{this.view.notifyChange(this.view.camera.camera3D,!0)})),i}clean(){const t="style_layer_"+Wc.#t;try{const e=this.view.getLayerById(t);this.view.removeLayer(t),e.delete()}catch(t){}return this}getLegend(){let t=document.createElement("div"),e=document.createElement("h5");if(e.innerText=this.name,this.gradation_or_classes){t.innerHTML+='<p><span style="color:rgb(169,169,169);font-size: 2em">■</span> no-data-color</p><br>',t.appendChild(e);let n=document.createElement("canvas"),i=n.getContext("2d");console.log(n.height),n.height=120;const r=80;i.fillStyle="rgb(0,0,0)",i.fillRect(0,0,300,r+2);let o=i.createLinearGradient(20,0,280,0);void 0===this.color2?o.addColorStop(0,"rgb(255,255,255)"):(o.addColorStop(0,"rgb("+this.color2.r+","+this.color2.g+","+this.color2.b+")"),o.addColorStop(.5,"rgb(255,255,255)")),o.addColorStop(1,"rgb("+this.color1.r+","+this.color1.g+","+this.color1.b+")"),i.fillStyle=o,i.fillRect(1,1,298,r),i.fillStyle="rgb(0,0,0)",i.font="18px Arial",i.fillText("I",0,r+17),i.fillText("I",296,r+17);const s=""+this.max;i.font="bold 18px Arial",i.fillText(""+this.min,0,r+35),i.fillText(s,n.width-10*s.length,r+35),t.appendChild(n)}else{t.appendChild(e);let n="";for(let t of Object.keys(this.classes_map))n+='<p><span style="color:'+this.classes_map[t]+';font-size: 2em">■</span> '+t+"</p>";t.innerHTML+=n}return t}to_config_json(){let t={};return t.name=this.name,t.field=this.field,t.extrude=this.#n,void 0!==this.field_ground&&void 0!==this.field_height&&(t.field_ground=this.field_ground,t.field_height=this.field_height),t.gradation_or_classes=this.gradation_or_classes,this.gradation_or_classes?(t.color1=this.color1,void 0!==this.color2&&(t.color2=this.color2),t.min=this.min,t.max=this.max):t.classes_map=this.classes_map,this.source.isFileSource&&(t.source_info={type:"FileSource",fetchedData:this.source.fetchedData,crs:this.source.crs,format:this.source.format}),t}static load(t,e){let n;"FileSource"==e.source_info.type&&(n=new itowns.FileSource({fetchedData:e.source_info.fetchedData,crs:e.source_info.crs,format:e.source_info.format}));let i=new Wc(e.name,t,n,e.field,e.gradation_or_classes);return void 0!==e.field_ground&&void 0!==e.field_height&&i.setExtrude(e.field_ground,e.field_height),e.gradation_or_classes?void 0===e.color2?i.setGradation(e.color1,"",e.min,e.max):i.setGradation(e.color1,e.color2,e.min,e.max):i.setClasses(e.classes_map),i}}const Hc={libelle_adr_principale_ban:"Adresse",fiabilite_cr_adr_niv_1:"Fiabilité de l'adresse ",code_iris:"Code IRIS",libelle_commune_insee:"Commune",code_departement_insee:"Numéro de département",bdtopo_zoa_l_toponyme:"Toponyme",code_commune_insee:"Code INSEE",ffo_bat_annee_construction:"Année de construction",ETAT:"État du bâtiment",NATURE:"Nature",ffo_bat_usage_niveau_1_txt:"Usage",USAGE1:"Usage 1",USAGE2:"Usage 2",bdtopo_bat_altitude_sol_mean:"Altitude au sol",bdtopo_bat_hauteur_mean:"Hauteur du bâtiment",NB_ETAGES:"Nombre d'étages",DATE_CREAT:"Date de Création",nbEntrances:"Nombre d'entrées",nbHousing:"Nombre de logements",nbWorkingPlace:"Nombre de lieux de travail",code_commu:"Code commune",code_depar:"Code département",argiles_alea:"Risque argile",radon_alea:"Risque radon",dpe_arrete_2021_nb_classe_conso_energie_arrete_2012:"Notes énergétique des logements",dpe_nb_classe_ener_a:"Nombre de logements de classe énergétique A",dpe_nb_classe_ener_b:"Nombre de logements de classe énergétique B",dpe_nb_classe_ener_c:"Nombre de logements de classe énergétique C",dpe_nb_classe_ener_d:"Nombre de logements de classe énergétique D",dpe_nb_classe_ener_e:"Nombre de logements de classe énergétique E",dpe_nb_classe_ener_f:"Nombre de logements de classe énergétique F",dpe_nb_classe_ener_g:"Nombre de logements de classe énergétique G",dpe_nb_classe_ener_nc:"Nombre de logements de classe énergétique non communiquée",dpe_nb_classe_ges_a:"Nombre de logements d'émission de GES de classe A",dpe_nb_classe_ges_b:"Nombre de logements d'émission de GES de classe B",dpe_nb_classe_ges_c:"Nombre de logements d'émission de GES de classe C",dpe_nb_classe_ges_d:"Nombre de logements d'émission de GES de classe D",dpe_nb_classe_ges_e:"Nombre de logements d'émission de GES de classe E",dpe_nb_classe_ges_f:"Nombre de logements d'émission de GES de classe F",dpe_nb_classe_ges_g:"Nombre de logements d'émission de GES de classe G",dpe_nb_classe_ges_nc:"Nombre de logements d'émission de GES de classe non communiquée",dpe_class_conso_ener_mean:"Note moyenne de la consommation énergétique du bâtiment",dpe_conso_ener_mean:"Consommation énergétique moyenne du bâtiment",dpe_conso_ener_std:"Ecart-type des valeurs de consommation énergétique du bâtiment",dpe_class_estim_ges_mean:"Note moyenne de l'émission de Gaz à effet de serre du bâtiment",dpe_estim_ges_mean:"Moyenne de l'émission de Gaz à effet de serre du bâtiment",dpe_estim_ges_std:"Ecart-type des valeurs d'émission de Gaz à effet de serre du bâtiment. ",dpe_logtype_mur_pos_isol_ext:"Matériaux d'isolations des murs extérieurs",dpe_logtype_pb_pos_isol:"Matériaux d'isolations des planchers bas",dpe_logtype_ph_pos_isol:"Matériaux d'isolations des planchers hauts",P19_POP15P_MARIEE:"Marié",P19_POP15P_PACSEE:"Pacsé",P19_POP15P_CONCUB_UNION_LIBRE:"Concubinage - union libre",P19_POP15P_VEUFS:"Veuf",P19_POP15P_DIVORCEE:"Divorcé",P19_POP15P_CELIBATAIRE:"Célibataire",P19_POP1524:"15-24 ans",P19_POP2554:"25-54 ans",P19_POP5579:"55-79 ans",P19_POP80P:"80+ ans",C19_NE24F0:"0 enfant",C19_NE24F1:"1 enfant",C19_NE24F2:"2 enfants",C19_NE24F3:"3 enfants",C19_NE24F4P:"4 enfants",FamilyChildrenNumber:"Nombre d'enfants dans la famille",HouseholdComposition:"Composition du ménage",HouseholdSize:"Nombre d'individus dans le ménage",age:"Age",occupation:"Occupation",sex:"Sexe"},Yc={ongletBatiment:["bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean","ffo_bat_usage_niveau_1_txt","ffo_bat_annee_construction","DATE_CREAT","ETAT","NATURE","NB_ETAGES","USAGE1","USAGE2","nbEntrances","nbHousing","nbWorkingPlace"],ongletRisque:["radon_alea","argiles_alea"],ongletInfoGen:["code_commune_insee","code_departement_insee","code_iris","fiabilite_cr_adr_niv_1","libelle_adr_principale_ban","libelle_commune_insee","bdtopo_zoa_l_toponyme","code_commu","code_depar"],ongletEnergie:["dpe_arrete_2021_nb_classe_conso_energie_arrete_2012","dpe_nb_classe_ener_a","dpe_nb_classe_ener_b","dpe_nb_classe_ener_c","dpe_nb_classe_ener_d","dpe_nb_classe_ener_e","dpe_nb_classe_ener_f","dpe_nb_classe_ener_g","dpe_nb_classe_ener_nc","dpe_nb_classe_ges_a","dpe_nb_classe_ges_b","dpe_nb_classe_ges_c","dpe_nb_classe_ges_d","dpe_nb_classe_ges_e","dpe_nb_classe_ges_f","dpe_nb_classe_ges_g","dpe_nb_classe_ges_nc","dpe_class_conso_ener_mean","dpe_conso_ener_mean","dpe_conso_ener_std","dpe_class_estim_ges_mean","dpe_estim_ges_mean","dpe_estim_ges_std","dpe_logtype_mur_pos_isol_ext","dpe_logtype_pb_pos_isol","dpe_logtype_ph_pos_isol"],ongletPopulation:["P19_POP15P_MARIEE","P19_POP15P_PACSEE","P19_POP15P_CONCUB_UNION_LIBRE","P19_POP15P_VEUFS","P19_POP15P_DIVORCEE","P19_POP15P_CELIBATAIRE","P19_POP1524","P19_POP2554","P19_POP5579","P19_POP80P","C19_NE24F0","C19_NE24F1","C19_NE24F2","C19_NE24F3","C19_NE24F4P","FamilyChildrenNumber","HouseholdComposition","HouseholdSize","age","occupation","sex"]};function Xc(t,e,n,i,r=!1){let o=Hc[e];const s={attribut:e,name4User:o,val:n,source:i};return r&&o?s:(Yc.ongletInfoGen.includes(e)?t.tabInfoGen.push(s):Yc.ongletBatiment.includes(e)?t.tabBatiment.push(s):Yc.ongletRisque.includes(e)?t.tabRisques.push(s):Yc.ongletEnergie.includes(e)?t.tabEnergie.push(s):Yc.ongletPopulation.includes(e)&&t.tabPopulation.push(s),t)}function Zc(t,e,n,i){if(0!==n.length){let r="";const o=document.getElementById(t);i.includes(e)&&(o.innerHTML="",n.forEach((t=>{r=function(t,e,n,i){let r="";return r+='<div class="accordion-item">',r+='<h2 class="accordion-header" id="heading'+t+'">',r+='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse'+t+'" aria-expanded="false" aria-controls="collapse'+t+'">',r+=e,r+="</button></h2></div>",r+='<div id="collapse'+t+'" class="accordion-collapse collapse" aria-labelledby="heading'+t+'">',r+='<div class="accordion-body" id="info'+t+'">',r+='<div style="width:100%;display:flex; flex-direction:row;justify-content:space-around">',r+="<span>"+n+"</span>",r+='<a href="#" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-custom-class="custom-tooltip" data-bs-title="Donnée issue de la '+i+" sur "+t+'">',r+="info",r+="</a></div></div></div>",r}(t.attribut,t.name4User,t.val,t.source),o.innerHTML+=r})))}}function Jc(t,e,n){let i;return Object.entries(t).forEach((([t,r])=>{i=Xc(e,t,r,n)})),i}function Kc(t,e,n,i,r,o="red"){let s=Uc(t.features.reduce(((t,n)=>{const i=n.properties[e];return t.includes(i)||t.push(i),t}),[]));document.getElementById("exampleModalLabel").innerText=e;let a=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"}),h=new itowns.ColorLayer(n,{source:a,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:t=>{if(i)return o;return s[t[e]]}},stroke:{color:"blue",width:1}})});r.addLayer(h),Gc(s)}function $c(t){return t.features.reduce(((t,e)=>t.concat(Object.keys(e.properties))),[]).reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[])}function Qc(t,e){const n=document.getElementById(t);console.log(n),n.innerHTML="",e.forEach((t=>{const e=document.createElement("option");e.text=t,e.value=t,n.add(e)})),console.log(e)}function tf(t,e){const n=$c(e);document.getElementById(t).innerHTML="",Qc(t,n)}const ef=itowns.THREE,nf="./data/shp/prg/bdnb_perigeux8",rf="./data/shp/prg/bd_topo_2",of="./data/shp/prg/osm",sf="./data/shp/prg/cadastre_perigeux8",af="./data/shp/innondation/forte/n_tri_peri_inondable_01_01for_s_024",hf="./data/shp/prg/bat_innondable";let uf=document.createElement("div");uf.className="bat",uf.id="bat";let lf,cf=[],ff=[1,2],pf={ino_random_id:{name:"innondation",num:0,id:"innondation_0"},bdnb_random_id:{name:"bdnb",num:0,id:"bdnb_0"},bdtopo_radom_id:{name:"bdtopo",num:0,id:"bdtopo_0"},osm_random_id:{name:"osm",num:0,id:"osm_0"},cadastre_random_id:{name:"cadastre",num:0,id:"cadastre_0"}},df={"2dDrop":{},"2dDropId":{name:"2dDropId",num:0,id:"2dDropId_0"},"3dDropId":{name:"3dDropId",num:0,id:"3dDropId_0"}},gf={updatedGeojson:{},csvLayerId:{name:"updatedLayerWithCsv",num:0,id:"updatedLayerWithCsv_0"}};const yf=document.createElement("div"),mf=document.createElement("div");mf.classList.add("bubble"),yf.appendChild(mf);const _f=document.createElement("div");_f.classList.add("pointer"),yf.appendChild(_f);let vf={coord:new itowns.Coordinates("EPSG:4326",.72829,45.1826,2),range:200,tilt:33};const bf=document.getElementById("site_state"),xf=document.getElementById("viewerDiv");xf.appendChild(uf);const wf=new itowns.GlobeView(xf,vf);setupLoadingScreen(xf,wf),FeatureToolTip.init(xf,wf),function(t){const e=new itowns_widgets.Navigation(t);e.addButton("rotate-up",'<p style="font-size: 20px">&#8595</p>',"rotate camera up",(()=>{t.controls.lookAtCoordinate({tilt:t.controls.getTilt()-10,time:500})}),"button-bar-rotation"),e.addButton("rotate-down",'<p style="font-size: 20px">&#8593</p>',"rotate camera down",(()=>{t.controls.lookAtCoordinate({tilt:t.controls.getTilt()+10,time:500})}),"button-bar-rotation"),e.addButton("reset-position","&#8634","reset position")}(wf),document.getElementById("changloc").addEventListener("click",(()=>{let t=wf.controls.getLookAtCoordinate();bf.checked?(t.x=2.380015,t.y=48.859424,t.z=86):(t.x=.72829,t.y=45.1826,t.z=86),wf.camera.camera3D.position.copy(t.as(wf.referenceCrs)),wf.camera.camera3D.updateMatrixWorld(),wf.notifyChange(wf.camera.camera3D,!0)})),document.getElementById("changloc").addEventListener("click",(()=>{let t=wf.controls.getLookAtCoordinate();bf.unchecked&&(t.x=.72829,t.y=45.1826,t.z=86),wf.camera.camera3D.position.copy(t.as(wf.referenceCrs)),wf.camera.camera3D.updateMatrixWorld(),wf.notifyChange(wf.camera.camera3D,!0)})),itowns.Fetcher.json("./data/layers/JSONLayers/WORLD_DTM.json").then((t=>s(t,wf))),itowns.Fetcher.json("./data/layers/JSONLayers/IGN_MNT_HIGHRES.json").then((t=>s(t,wf))),itowns.Fetcher.json("./data/layers/JSONLayers/Ortho.json").then((t=>o(t,wf)));let Ef,Mf=ar("./data/csv/base-ic-couples-familles-menages-2019.CSV"),Sf=ar("./data/shp/prg/data_bdnb.csv"),If=ar("./data/csv/bdnb_paris11.csv"),Cf=ar("./data/csv/ICI-csv/building.csv"),Pf=ar("./data/csv/ICI-csv/household.csv"),Nf=ar("./data/csv/ICI-csv/housing.csv"),Lf=ar("./data/csv/ICI-csv/individual.csv"),Of=er(nf),kf=er(rf),Af=er(of),Rf=er(sf);wf.addEventListener(itowns.GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED,(async function(){console.info("Globe initialized"),nr("./data/shp/paris_11/paris11_bdnb","bdnbParis","red","",wf,!0),await nr("./data/shp/prg/bdnb_perigeux8","bdnb","black","",wf,!0),await Sf.then((t=>{Ef=t.reduce(((t,e)=>(t[e.batiment_groupe_id]=Object.entries(e).reduce(((t,[e,n])=>(null===n||(t[e]=n),t)),{}),t)),{})}));let t,e=document.getElementById("checkbox_style_3D"),n=document.getElementById("select_style"),i=document.getElementById("button_style_apply");await er(nf).then((e=>{e.features.forEach((t=>{let e=Ef[t.properties.batiment_g];e&&(t.properties=e)})),t=new itowns.FileSource({fetchedData:e,crs:"EPSG:4326",format:"application/json"})}));let r=[];r.push(new Wc("Iris",wf,t,"code_iris",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean")),r.push(new Wc("Hauteur",wf,t,"bdtopo_bat_hauteur_mean",!0).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setGradation("rgb(255,0,0)")),r.push(new Wc("Nature du bâtiment",wf,t,"bdtopo_bat_l_nature",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean")),r.push(new Wc("Année de construction",wf,t,"ffo_bat_annee_construction",!0).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setGradation("rgb(0,0,255)")),r.push(new Wc("Notes consommation d'énergie",wf,t,"dpe_logtype_classe_conso_ener",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({A:"rgb(1,149,65)",B:"rgb(83,174,50)",C:"rgb(202,211,0)",D:"rgb(255,223,1)",E:"rgb(251,185,1)",F:"rgb(237,102,7)",G:"rgb(228,19,18)"})),r.push(new Wc("Risques liés aux argiles",wf,t,"argiles_alea",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({Faible:"rgb(82,255,71)",Moyen:"rgb(255,165,0)",Fort:"rgb(255,0,0)"})),r.push(new Wc("Risques liés au radon",wf,t,"radon_alea",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({Faible:"rgb(82,255,71)",Moyen:"rgb(255,165,0)",Fort:"rgb(255,0,0)"})),r.push(new Wc("Fiabilité de la hauteur",wf,t,"fiabilite_hauteur",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({BONNE:"rgb(82,255,71)",MOYENNE:"rgb(255,165,0)",FAIBLE:"rgb(255,0,0)"})),r.push(new Wc("Fiabilité de l'emprise au sol",wf,t,"fiabilite_emprise_sol",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({BONNE:"rgb(82,255,71)",MOYENNE:"rgb(255,165,0)",FAIBLE:"rgb(255,0,0)"})),r.push(new Wc("Fiabilité de l'adresse",wf,t,"fiabilite_cr_adr_niv_1",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({"données croisées à l'adresse fiables":"rgb(82,255,71)","données croisées à l'adresse fiables à l'echelle de la parcelle unifiee":"rgb(255,255,0)","données croisées à l'adresse moyennement fiables":"rgb(255,165,0)","problème de géocodage":"rgb(255,0,0)"}));for(let t=0;t<r.length;t++)n.innerHTML+="<option value='"+t+"'>"+r[t].name+"</option>";i.addEventListener("click",(()=>{if(-1==n.value)r[0].clean();else{const t=r[n.value];t.to3D(e.checked),t.to_itowns_layer().then((()=>{document.getElementById("legend").replaceChildren(t.getLegend())}))}}))}));const Tf=document.getElementById("tooltip"),Df=document.getElementById("listConsoPopulationIris"),Ff=document.getElementById("listConsoPopulationICI");xf.addEventListener("mouseup",(()=>{if(ff.push(Tf.value.properties.fid),ff[ff.length-1]!=ff[ff.length-2]){ff=[ff[ff.length-1]];let t={tabInfoGen:[],tabBatiment:[],tabRisques:[],tabEnergie:[],tabPopulation:[]};Df.innerHTML="";let e="";e+='<div class="accordion" id="accordionPanelsStayOpenExample">';let n="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)})),i=Tf.value.properties.batiment_c+n;if(cf.push(i),cf[1]){let t=wf.getLayerById(cf[0]);wf.removeLayer(cf[0]),t.delete(),wf.notifyChange(),wf.mainLoop.gfxEngine.renderer.render(wf.scene,wf.camera.camera3D),cf=[cf[1]]}else console.log("non");rr("./data/shp/prg/bdnb_perigeux8","batiment_c",Tf.value.properties.batiment_c,n,wf,ef),rr("./data/shp/paris_11/paris11_bdnb","batiment_c",Tf.value.properties.batiment_c,n,wf,ef),console.log(Tf.value);let r=Tf.value.properties.batiment_c;r.includes("-")&&(r=r.slice(0,-2)),jc(If,"batiment_g",Tf.value.properties.batiment_g).then((e=>Jc(e,t,"BDNB"))).then((async t=>{let e,n=await Cf;Object.entries(n).forEach((t=>{if(t[1].idBdTopo&&t[1].idBdTopo.includes(r))return e=t[1],e}));let i=Jc(e,t,"Building ICI"),o=await Nf,s=[];Object.entries(o).forEach((t=>{t[1].BuildingID&&t[1].BuildingID.includes(e.ID)&&s.push(t[1].ID)}));let a,h={},u=await Pf;Object.entries(u).forEach((t=>{s.includes(t[1].HousingID)&&(h[t[1].ID]={},h[t[1].ID].household=[],Object.entries(t[1]).forEach((([e,n])=>{a=Xc({},e,n,"Household ICI",!0),0!==Object.keys(a).length&&h[t[1].ID].household.push(a)})))})),Object.entries(h).forEach((([t,e])=>{0===Object.keys(e).length&&delete h[t]}));let l=[];Object.entries(h).forEach((t=>{l.push(t[0])}));let c,f=await Lf;return Object.entries(f).forEach((t=>{if(t[1].IDHousehold){let e=[];l.includes(t[1].IDHousehold)&&(Object.entries(t[1]).forEach((([t,n])=>{c=Xc({},t,n,"Individual ICI",!0),0!==Object.keys(c).length&&e.push(c)})),h[t[1].IDHousehold].individuals?h[t[1].IDHousehold].individuals.push(e):h[t[1].IDHousehold].individuals=[e])}})),i.tabPopulation=h,i})).then((t=>{console.log(t),Object.entries(t).forEach((([t,e])=>{Zc("infoGenAccordion","tabInfoGen",e,t),Zc("batimentAccordion","tabBatiment",e,t)}));let e,n,i,r,o="",s="";Object.entries(t.tabPopulation).forEach((([t,a])=>{n="",a.individuals.forEach(((i,r)=>{e="",e+=zc(i,"",!0),n+=Bc("individu"+t+r,"Individu "+r,e).innerHTML})),s=zc(a.household,t),r=Bc("individu","Individus",n).outerHTML,i=Bc("household"+t,t,s+r),o+=i.outerHTML})),Ff.innerHTML=o;[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new bootstrap.Tooltip(t))),console.log(Ff)})),jc(Sf,"batiment_groupe_id",Tf.value.properties.batiment_g).then((e=>Jc(e,t,"BDNB"))).then((t=>{let n=Mf.then((n=>{let i=Jc(n.filter((t=>t.IRIS===Number(Tf.value.properties.code_iris)))[0],t,"INSEE");let r=[];return Object.entries({status15OuPlus:["P19_POP15P_MARIEE","P19_POP15P_PACSEE","P19_POP15P_CONCUB_UNION_LIBRE","P19_POP15P_VEUFS","P19_POP15P_DIVORCEE","P19_POP15P_CELIBATAIRE"],repartitionPop:["P19_POP1524","P19_POP2554","P19_POP5579","P19_POP80P"],enfant25:["C19_NE24F0","C19_NE24F1","C19_NE24F2","C19_NE24F3","C19_NE24F4P"]}).forEach((([t,e])=>{console.log(t),r.push(function(t,e){let n=[];return Object.entries(e).forEach((([e,i])=>{t.includes(i.attribut)&&(console.log(e),n.push({name:i.name4User,value:i.val}))})),n}(e,i.tabPopulation))})),e+=Fc("Status_15_ans+","status"),e+=Fc("Repartion_pop_15_ans+","repartition"),e+=Fc("Nombre_famille_enfants_-25ans","enfant"),Df.innerHTML+=e,Dc("status",r[0],"name","value","Nombre de personnes"),Dc("repartition",r[1],"name","value","Nombre d'individus"),Dc("enfant",r[2],"name","value","Nombre de familles"),i}));return n})).then((t=>{kf.then((t=>t.features.filter((t=>{if(Tf.value.properties.batiment_c.includes(t.properties.ID))return t}))[0])).then((e=>{if(e.properties)return Jc(e.properties,t,"BDTopo")})).then((t=>{Object.entries(t).forEach((([t,e])=>{Zc("infoGenAccordion","tabInfoGen",e,t),Zc("batimentAccordion","tabBatiment",e,t),Zc("RisquesAccordion","tabRisques",e,t),Zc("energieAccordion","tabEnergie",e,t)}));[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new bootstrap.Tooltip(t)))}))})),shapefile.open("./data/shp/prg/bdnb_perigeux8").then((t=>t.read().then((async function e(n){if(n.done)return"done";if(n.value.properties.batiment_g===Tf.value.properties.batiment_g){let t=n.value.geometry.coordinates,e=qc.polygon(t);shapefile.open("./data/shp/prg/osm").then((t=>t.read().then((function n(i){if(i.done)return"done";let r=qc.polygon(i.value.geometry.coordinates);return qc.intersect(r,e)?void 0:t.read().then(n)}))))}return t.read().then(e)}))))}})),Df.innerHTML+="</div>",document.getElementById("showIgnLayer").addEventListener("change",(()=>{document.getElementById("showIgnLayer").checked?nr("./data/shp/prg/bd_topo","bd_topo","green","",wf,!1):wf.removeLayer("bd_topo")})),document.getElementById("showOsmLayer").addEventListener("change",(()=>{document.getElementById("showOsmLayer").checked?nr("./data/shp/prg/osm","osm","yellow","",wf,!1):wf.removeLayer("osm")})),document.getElementById("showCadastreLayer").addEventListener("change",(()=>{document.getElementById("showCadastreLayer").checked?nr("./data/shp/prg/osm","cadastre","red","",wf,!1):wf.removeLayer("cadastre")})),document.getElementById("showInnondationLayer").addEventListener("change",(()=>{document.getElementById("showInnondationLayer").checked?(nr(af,"inno","black","blue",wf,!1),pf.ino_random_id.num+=1,pf.ino_random_id.id=pf.ino_random_id.name+"_"+pf.ino_random_id.num,er(hf).then((t=>{Vc(t,"selectPropValue",pf.ino_random_id.id,!0,wf,ef)}))):(wf.removeLayer(pf.ino_random_id.id),wf.removeLayer("inno"))})),document.getElementById("exploredata").addEventListener("change",(()=>{document.getElementById("exploredata").checked?Of.then((t=>{t.features.forEach((t=>{let e=Ef[t.properties.batiment_g];e&&(t.properties=e)})),pf.bdnb_random_id.num+=1,pf.bdnb_random_id.id=pf.bdnb_random_id.name+"_"+pf.bdnb_random_id.num,tf("selectProp",t),Vc(t,"argiles_alea",pf.bdnb_random_id.id,!1,wf,ef)})):wf.removeLayer(pf.bdnb_random_id.id)})),document.getElementById("exploredataIgn").addEventListener("change",(()=>{document.getElementById("exploredataIgn").checked?(pf.bdtopo_radom_id.num+=1,pf.bdtopo_radom_id.id=pf.bdtopo_radom_id.name+"_"+pf.bdtopo_radom_id.num,kf.then((t=>{tf("selectProp",t),Vc(t,"USAGE1",pf.bdtopo_radom_id.id,!1,wf,ef)}))):wf.removeLayer(pf.bdtopo_radom_id.id)})),document.getElementById("exploredataOsm").addEventListener("change",(()=>{document.getElementById("exploredataOsm").checked?(pf.osm_random_id.num+=1,pf.osm_random_id.id=pf.osm_random_id.name+"_"+pf.osm_random_id.num,Af.then((t=>{tf("selectProp",t),Vc(t,"fclass",pf.osm_random_id.id,!1,wf,ef)}))):wf.removeLayer(pf.osm_random_id.id)})),document.getElementById("exploredataCadastre").addEventListener("change",(()=>{document.getElementById("exploredataCadastre").checked?(pf.cadastre_random_id.num+=1,pf.cadastre_random_id.id=pf.cadastre_random_id.name+"_"+pf.cadastre_random_id.num,Rf.then((t=>{tf("selectProp",t),Vc(t,"fclass",pf.cadastre_random_id.id,!1,wf,ef)}))):(wf.removeLayer(pf.cadastre_random_id.id),pf.cadastre_random_id="")})),document.getElementById("confirmExporation").addEventListener("click",(()=>{const t=document.getElementById("selectProp").value;document.getElementById("exploredataIgn").checked&&(wf.removeLayer(pf.bdtopo_radom_id.id),pf.bdtopo_radom_id.num+=1,pf.bdtopo_radom_id.id=pf.bdtopo_radom_id.name+"_"+pf.bdtopo_radom_id.num,kf.then((e=>{tf("selectProp",e),Vc(e,t,pf.bdtopo_radom_id.id,!1,wf,ef)})));document.getElementById("exploredata").checked&&(wf.removeLayer(pf.bdnb_random_id.id),pf.bdnb_random_id.num+=1,pf.bdnb_random_id.id=pf.bdnb_random_id.name+"_"+pf.bdnb_random_id.num,console.log(pf.bdnb_random_id),Of.then((e=>{Vc(e,!1,t,pf.bdnb_random_id.id,!1,wf,ef)})));document.getElementById("exploredataOsm").checked&&(wf.removeLayer(pf.osm_random_id.id),pf.osm_random_id.num+=1,pf.osm_random_id.id=pf.osm_random_id.name+"_"+pf.osm_random_id.num,Af.then((e=>{tf("selectProp",e),Vc(e,t,pf.osm_random_id.id,!1,wf,ef)})));document.getElementById("exploredataCadastre").checked&&(wf.removeLayer(pf.cadastre_random_id.id),pf.cadastre_random_id.num+=1,pf.cadastre_random_id.id=pf.cadastre_random_id.name+"_"+pf.cadastre_random_id.num,Rf.then((e=>{tf("selectProp",e),Vc(e,!0,t,pf.cadastre_random_id.id,!1,wf,ef)})))}));let Bf=document.getElementById("drop-zone");Bf.addEventListener("dragover",(function(t){t.preventDefault(),Bf.classList.add("drag-over")})),Bf.addEventListener("dragleave",(function(){Bf.classList.remove("drag-over")})),Bf.addEventListener("drop",(function(t){t.preventDefault(),Bf.classList.remove("drag-over");var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if("application/zip"===n.type){var i=new FileReader;i.onload=function(t){var e=t.target.result;console.log(e),h(e).then((function(t){console.log(t),tf("select2dZiped",t),df["2dDrop"]=t}))},i.readAsArrayBuffer(n)}else alert("Please drop a ZIP file")}})),document.getElementById("afficheDrop2d").addEventListener("click",(()=>{"2dDropId_0"!==df["2dDropId"].id&&wf.removeLayer(df["2dDropId"].id),df["2dDropId"].num+=1,df["2dDropId"].id=df["2dDropId"].name+"_"+df["2dDropId"].num;let t=df["2dDrop"];console.log(t);Kc(t,document.getElementById("select2dZiped").value,df["2dDropId"].id,!1,wf)})),document.getElementById("checkbox-supprime-2ddrop").addEventListener("click",(()=>{console.log(df),wf.removeLayer(df["2dDropId"].id),df["2dDropId"].num=0,df["2dDropId"].id="2dDropId_0"}));let zf=document.getElementById("drop-zone-3D");zf.addEventListener("dragover",(function(t){t.preventDefault(),zf.classList.add("drag-over")})),zf.addEventListener("dragleave",(function(){zf.classList.remove("drag-over")})),zf.addEventListener("drop",(function(t){t.preventDefault(),zf.classList.remove("drag-over");var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if("application/zip"===n.type){var i=new FileReader;i.onload=function(t){var e=t.target.result;console.log(e),h(e).then((function(t){console.log(t),tf("selectHauteur3dZiped",t),tf("selectAltiSol3dZiped",t),tf("selectCol3dZiped",t),df["3dDrop"]=t}))},i.readAsArrayBuffer(n)}else alert("Please drop a ZIP file")}})),document.getElementById("afficheDrop3d").addEventListener("click",(()=>{"3dDropId_0"!==df["3dDropId"].id&&wf.removeLayer(df["3dDropId"].id),df["3dDropId"].num+=1,df["3dDropId"].id=df["3dDropId"].name+"_"+df["3dDropId"].num;let t=df["3dDrop"];const e=document.getElementById("selectHauteur3dZiped").value,n=document.getElementById("selectAltiSol3dZiped").value;Vc(t,document.getElementById("selectCol3dZiped").value,df["3dDropId"].id,!1,wf,ef,e,n)})),document.getElementById("checkbox-supprime-3ddrop").addEventListener("click",(()=>{console.log(df),wf.removeLayer(df["3dDropId"].id),df["3dDropId"].num=0,df["3dDropId"].id="3dDropId_0"}));let jf=document.getElementById("drop-zone-csv");jf.addEventListener("dragover",(function(t){t.preventDefault(),jf.classList.add("drag-over")})),jf.addEventListener("dragleave",(function(){jf.classList.remove("drag-over")})),jf.addEventListener("drop",(function(t){let e;t.preventDefault(),jf.classList.remove("drag-over");var n=t.dataTransfer.files;n.length>0&&(e=n[0]);const i=new FileReader;i.onload=()=>{let t=[];const e=i.result.split("\n"),n=e[0].split(",");Qc("attJointureCsv",n),Qc("selectCouleurCsv",n);for(let i=1;i<e.length;i++){const r=e[i].split(",");let o={};for(let t=0;t<n.length;t++)o[n[t]]=r[t];o=Object.entries(o).reduce(((t,[e,n])=>(null===n||""===n||(t[e]=n),t)),{}),t.push(o)}lf=t},i.readAsText(e),console.log(wf.getLayers()),Qc("selectJoinLayer",wf.getLayers().reduce(((t,e)=>(t.push(e.id),t)),[]))})),document.getElementById("selectJoinLayer").addEventListener("change",(()=>{let t=document.getElementById("selectJoinLayer").value;console.log(t),console.log(wf.getLayerById(t));let e=wf.getLayerById(t).source.fetchedData;Qc("selectJoinAttribut",$c(e));let n=document.getElementById("attJointureCsv").value,i=document.getElementById("selectJoinAttribut").value;console.log(lf);let r=lf.reduce(((t,e)=>(t[e[n]]=e,t)),{});console.log(r),console.log(e),e.features.forEach((t=>{let e=r[t.properties[i]];e&&Object.entries(e).forEach((([e,n])=>{t.properties[e]=n,console.log(t.properties)}))})),console.log(e),wf.removeLayer(t),gf.updatedGeojson=e})),document.getElementById("afficheDropCsv").addEventListener("click",(()=>{"updatedLayerWithCsv_0"!==gf.csvLayerId.id&&wf.removeLayer(gf.csvLayerId.id),gf.csvLayerId.num+=1,gf.csvLayerId.id=gf.csvLayerId.name+"_"+gf.csvLayerId.num;let t=gf.updatedGeojson;console.log(t);Vc(t,document.getElementById("selectCouleurCsv").value,"fsdfdsfgdsg",!1,wf,ef)}));
//# sourceMappingURL=index.89b4f34f.js.map
