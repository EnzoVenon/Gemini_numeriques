var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){Object.defineProperty(t,"__esModule",{value:!0,configurable:!0})}function n(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var r={},i={},o=t.parcelRequireecff;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},t.parcelRequireecff=o),o.register("gKeLP",(function(t,e){var n;t.exports,n=function t(){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,r=e.IS_PAPA_WORKER||!1,i={},o=0,s={parse:function(n,r){var a=(r=r||{}).dynamicTyping||!1;if(x(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!x(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var u=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,a=(n=e.URL||e.webkitURL||null,r=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))),u=new e.Worker(a);return u.onmessage=y,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,void u.postMessage({input:n,config:r,workerId:u.id})}var p=null;return s.NODE_STREAM_INPUT,"string"==typeof n?(n=function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}(n),p=r.download?new h(r):new c(r)):!0===n.readable&&x(n.read)&&x(n.on)?p=new f(r):(e.File&&n instanceof File||n instanceof Object)&&(p=new l(r)),p.stream(n)},unparse:function(t,e){var n=!1,r=!0,i=",",o="\r\n",a='"',u=a+a,h=!1,l=null,c=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+a),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(c=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(d(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,h);if("object"==typeof t[0])return p(l||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function p(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,u=!Array.isArray(e[0]);if(a&&r){for(var h=0;h<t.length;h++)0<h&&(s+=i),s+=g(t[h],h);0<e.length&&(s+=o)}for(var l=0;l<e.length;l++){var c=a?t.length:e[l].length,f=!1,p=a?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!a&&(f="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&a){for(var d=[],y=0;y<c;y++){var m=u?t[y]:y;d.push(e[l][m])}f=""===d.join("").trim()}if(!f){for(var _=0;_<c;_++){0<_&&!p&&(s+=i);var v=a&&u?t[_]:_;s+=g(e[l][v],_)}l<e.length-1&&(!n||0<c&&!p)&&(s+=o)}}return s}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var r=!1;c&&"string"==typeof t&&c.test(t)&&(t="'"+t,r=!0);var o=t.toString().replace(f,u);return(r=r||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(o,s.BAD_DELIMITERS)||-1<o.indexOf(i)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?a+o+a:o}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=p,s.NetworkStreamer=h,s.FileStreamer=l,s.StringStreamer=c,s.ReadableStreamStreamer=f,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},r=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},n)})})),i(),this;function i(){if(0!==r.length){var e,n,i,u=r[0];if(x(t.before)){var h=t.before(u.file,u.inputElem);if("object"==typeof h){if("abort"===h.action)return e=u.file,n=u.inputElem,i=h.reason,void(x(t.error)&&t.error({name:"AbortError"},e,n,i));if("skip"===h.action)return void o();"object"==typeof h.config&&(u.instanceConfig=a.extend(u.instanceConfig,h.config))}else if("skip"===h)return void o()}var l=u.instanceConfig.complete;u.instanceConfig.complete=function(t){x(l)&&l(t,u.file,u.inputElem),o()},s.parse(u.file,u.instanceConfig)}else x(t.complete)&&t.complete()}function o(){r.splice(0,1),i()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=v(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=a.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),a&&a.data&&(this._rowCount+=a.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:a,workerId:s.WORKER_ID,finished:h});else if(x(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!h||!x(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),u.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function l(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),u.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function c(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function f(t){u.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=b((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,n,r,i=Math.pow(2,53),o=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,l=0,c=0,f=!1,p=!1,y=[],m={data:[],errors:[],meta:{}};if(x(t.step)){var _=t.step;t.step=function(e){if(m=e,E())w();else{if(w(),0===m.data.length)return;l+=e.data.length,t.preview&&l>t.preview?n.abort():(m.data=m.data[0],_(m,h))}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function w(){return m&&r&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter((function(t){return!b(t)}))),E()&&function(){if(m)if(Array.isArray(m.data[0])){for(var e=0;E()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){x(t.transformHeader)&&(e=t.transformHeader(e,n)),y.push(e)}}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var o=r,s=e[r];t.header&&(o=r>=y.length?"__parsed_extra":y[r]),t.transform&&(s=t.transform(s,o)),s=M(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return t.header&&(r>y.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+r,c+n):r<y.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+r,c+n)),i}var n=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(e),n=m.data.length):m.data=e(m.data,0),t.header&&m.meta&&(m.meta.fields=y),c+=n,m}()}function E(){return t.header&&0===y.length}function M(e,n){var r;return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n}function S(t,e,n,r){var i={type:t,code:e,message:n};void 0!==r&&(i.row=r),m.errors.push(i)}this.parse=function(i,o,a){var u=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(d(e)+"([^]*?)"+d(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var s=0,a=0;a<r.length;a++)"\n"===r[a][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(i),m.meta.delimiter=t.delimiter);else{var h=function(e,n,r,i,o){var a,u,h,l;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var c=0;c<o.length;c++){var f=o[c],p=0,d=0,y=0;h=void 0;for(var m=new g({comments:i,delimiter:f,newline:n,preview:10}).parse(e),_=0;_<m.data.length;_++)if(r&&b(m.data[_]))y++;else{var v=m.data[_].length;d+=v,void 0!==h?0<v&&(p+=Math.abs(v-h),h=v):h=v}0<m.data.length&&(d/=m.data.length-y),(void 0===u||p<=u)&&(void 0===l||l<d)&&1.99<d&&(u=p,a=f,l=d)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(r=!0,t.delimiter=s.DefaultDelimiter),m.meta.delimiter=t.delimiter}var l=v(t);return t.preview&&t.header&&l.preview++,e=i,n=new g(l),m=n.parse(e,o,a),w(),f?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),e=x(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){h.streamer._halted?(f=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),m.meta.aborted=!0,x(t.complete)&&t.complete(m),e=""}}function d(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,o=t.step,a=t.preview,u=t.fastMode,h=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var l=0,c=!1;this.parse=function(s,f,p){if("string"!=typeof s)throw new Error("Input must be a string");var g=s.length,y=n.length,m=r.length,_=i.length,v=x(o),b=[],w=[],E=[],M=l=0;if(!s)return W();if(t.header&&!f){var S=s.split(r)[0].split(n),I=[],C={},P=!1;for(var L in S){var N=S[L];x(t.transformHeader)&&(N=t.transformHeader(N,L));var O=N,A=C[N]||0;for(0<A&&(P=!0,O=N+"_"+A),C[N]=A+1;I.includes(O);)O=O+"_"+A;I.push(O)}if(P){var k=s.split(r);k[0]=I.join(n),s=k.join(r)}}if(u||!1!==u&&-1===s.indexOf(e)){for(var R=s.split(r),T=0;T<R.length;T++){if(E=R[T],l+=E.length,T!==R.length-1)l+=r.length;else if(p)return W();if(!i||E.substring(0,_)!==i){if(v){if(b=[],U(E.split(n)),Y(),c)return W()}else U(E.split(n));if(a&&a<=T)return b=b.slice(0,a),W(!0)}}return W()}for(var D=s.indexOf(n,l),F=s.indexOf(r,l),B=new RegExp(d(h)+d(e),"g"),j=s.indexOf(e,l);;)if(s[l]!==e)if(i&&0===E.length&&s.substring(l,l+_)===i){if(-1===F)return W();l=F+m,F=s.indexOf(r,l),D=s.indexOf(n,l)}else if(-1!==D&&(D<F||-1===F))E.push(s.substring(l,D)),l=D+y,D=s.indexOf(n,l);else{if(-1===F)break;if(E.push(s.substring(l,F)),H(F+m),v&&(Y(),c))return W();if(a&&b.length>=a)return W(!0)}else for(j=l,l++;;){if(-1===(j=s.indexOf(e,j+1)))return p||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:l}),V();if(j===g-1)return V(s.substring(l,j).replace(B,e));if(e!==h||s[j+1]!==h){if(e===h||0===j||s[j-1]!==h){-1!==D&&D<j+1&&(D=s.indexOf(n,j+1)),-1!==F&&F<j+1&&(F=s.indexOf(r,j+1));var z=q(-1===F?D:Math.min(D,F));if(s.substr(j+1+z,y)===n){E.push(s.substring(l,j).replace(B,e)),s[l=j+1+z+y]!==e&&(j=s.indexOf(e,l)),D=s.indexOf(n,l),F=s.indexOf(r,l);break}var G=q(F);if(s.substring(j+1+G,j+1+G+m)===r){if(E.push(s.substring(l,j).replace(B,e)),H(j+1+G+m),D=s.indexOf(n,l),j=s.indexOf(e,l),v&&(Y(),c))return W();if(a&&b.length>=a)return W(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:l}),j++}}else j++}return V();function U(t){b.push(t),M=l}function q(t){var e=0;if(-1!==t){var n=s.substring(j+1,t);n&&""===n.trim()&&(e=n.length)}return e}function V(t){return p||(void 0===t&&(t=s.substring(l)),E.push(t),l=g,U(E),v&&Y()),W()}function H(t){l=t,U(E),E=[],F=s.indexOf(r,l)}function W(t){return{data:b,errors:w,meta:{delimiter:n,linebreak:r,aborted:c,truncated:!!t,cursor:M+(f||0)}}}function Y(){o(W()),b=[],w=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return l}}function y(t){var e=t.data,n=i[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,m(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(x(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!r);s++);delete e.results}else x(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&m(e.workerId,e.results)}function m(t,e){var n=i[t];x(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function _(){throw new Error("Not implemented.")}function v(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=v(t[n]);return e}function b(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&e.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(h.prototype=Object.create(u.prototype)).constructor=h,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(f.prototype=Object.create(u.prototype)).constructor=f,s},"function"==typeof define&&define.amd?define([],n):t.exports=n()})),o.register("hEixu",(function(t,e){o("hPtJY");t.exports,function(t){var e=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},r={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return a(e).geometry;case"LineString":return c(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return d(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(t[0])||!C(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return a(t,e)})),n)}function h(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return h(t,e)})),n)}function c(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return c(t,e)})),n)}function p(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function d(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function v(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function x(t,e){return E(b(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function M(t){return t%360*Math.PI/180}function S(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return v(b(t,e),n)}function I(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function C(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function P(t){return!!t&&t.constructor===Object}function L(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!C(t))throw new Error("bbox must only contain numbers")}))}function N(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:e,factors:n,unitsFactors:r,areaFactors:i,feature:o,geometry:s,point:a,points:u,polygon:h,polygons:l,lineString:c,lineStrings:f,featureCollection:p,multiLineString:d,multiPoint:g,multiPolygon:y,geometryCollection:m,round:_,radiansToLength:v,lengthToRadians:b,lengthToDegrees:x,bearingToAzimuth:w,radiansToDegrees:E,degreesToRadians:M,convertLength:S,convertArea:I,isNumber:C,isObject:P,validateBBox:L,validateId:N});function A(t,e,n){if(null!==t)for(var r,i,o,s,a,u,h,l,c=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(h=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<a;_++){var v=0,b=0;if(null!==(s=l?h.geometries[_]:h)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,m,v,b))return!1;f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,v,b))return!1;f++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],f,m,v,b))return!1;f++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],f,m,v,b))return!1;f++}b++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===A(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(t,e,n,r){var i=n;return A(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function T(t,e,n){var r=n;return R(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var r=n;return D(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function B(t){var e=[];return A(t,(function(t){e.push(t)})),e}function j(t,e){var n,r,i,o,s,a,u,h,l,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,h=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,h,l,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,h,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,h,l,c))return!1;f++}}function z(t,e,n){var r=n;return j(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function G(t,e){j(t,(function(t,n,r,i,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(o(t,r,{bbox:i,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var h=0;h<t.coordinates.length;h++){var l=t.coordinates[h];if(!1===e(o({type:a,coordinates:l},r),n,h))return!1}}))}function U(t,e,n){var r=n;return G(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function q(t,e){G(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,h=0;return!1!==A(t,(function(o,l,f,p,d){if(void 0===s||n>a||p>u||d>h)return s=o,a=n,u=p,h=d,void(i=0);var g=c([s,o],t.properties);if(!1===e(g,n,r,d,i))return!1;i++,s=o}))&&void 0}}}))}function V(t,e,n){var r=n,i=!1;return q(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function H(t,e){if(!t)throw new Error("geojson is required");G(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(c(o[s],t.properties),n,r,s))return!1}}}))}function W(t,e,n){var r=n;return H(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r}function Y(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),c([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),c([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),c([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),c([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function X(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var h=n.coordinates;switch(n.type){case"Point":return a(h,u,e);case"MultiPoint":return i<0&&(i=h.length+i),a(h[i],u,e);case"LineString":return s<0&&(s=h.length+s),a(h[s],u,e);case"Polygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),a(h[o][s],u,e);case"MultiLineString":return i<0&&(i=h.length+i),s<0&&(s=h[i].length+s),a(h[i][s],u,e);case"MultiPolygon":return i<0&&(i=h.length+i),o<0&&(o=h[i].length+o),s<0&&(s=h[i][o].length-s),a(h[i][o][s],u,e)}throw new Error("geojson is invalid")}var Z=Object.freeze({__proto__:null,coordAll:B,coordEach:A,coordReduce:k,featureEach:D,featureReduce:F,findPoint:X,findSegment:Y,flattenEach:G,flattenReduce:U,geomEach:j,geomReduce:z,lineEach:H,lineReduce:W,propEach:R,propReduce:T,segmentEach:q,segmentReduce:V});function J(t){var e=[1/0,1/0,-1/0,-1/0];return A(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Q(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(t){if(t.length>1&&C(t[0])&&C(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return $(t[0]);throw new Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function et(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function rt(t){return"Feature"===t.type?t.geometry:t}function it(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var ot=Object.freeze({__proto__:null,getCoord:K,getCoords:Q,containsNumber:$,geojsonType:tt,featureOf:et,collectionOf:nt,getGeom:rt,getType:it}),st=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ht(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var lt=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=ht(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))at.call(n,s)&&(i[s]=n[s]);if(st){r=st(n);for(var a=0;a<r.length;a++)ut.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},ct={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function pt(t,e,n){n=n||{};for(var r=Object.keys(ct),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:ct[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0,r=1e-7;return t.cells.forEach((function(i,o){i.forEach((function(i,s){if(void 0!==i&&5!==(p=i).cval&&10!==p.cval&&!gt(i)){var a=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],f=c.cval,p=h[f],d=mt(c,p);s.push([n+d[0],e+d[1]]),d=mt(c,p=l[f]),s.push([n+d[0],e+d[1]]),yt(c);for(var g=n+a[f],y=e+u[f],m=f;g>=0&&y>=0&&y<o&&(g!=n||y!=e)&&void 0!==(c=t[y][g]);){if(0===(f=c.cval)||15===f)return{path:s,info:"mergeable"};p=l[f],r=a[f],i=u[f],5!==f&&10!==f||(5===f?c.flipped?-1===u[m]?(p="left",r=-1,i=0):(p="right",r=1,i=0):-1===a[m]&&(p="bottom",r=0,i=-1):10===f&&(c.flipped?-1===a[m]?(p="top",r=0,i=1):(p="bottom",r=0,i=-1):1===u[m]&&(p="left",r=-1,i=0))),d=mt(c,p),s.push([g+d[0],y+d[1]]),yt(c),g+=r,y+=i,m=f}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var h=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-h)<=r&&Math.abs(e[c][0][1]-l)<=r){for(var f=a.path.length-2;f>=0;--f)e[c].unshift(a.path[f]);u=!0;break}u||(e[n++]=a.path)}var p}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],h=t[o+1][s+1],l=t[o][s+1],c=t[o][s];if(!(isNaN(u)||isNaN(h)||isNaN(l)||isNaN(c))){a|=u>=e?8:0,a|=h>=e?4:0,a|=l>=e?2:0;var f,p,d,g,y=!1;if(5==(a|=c>=e?1:0)||10===a){var m=(u+h+l+c)/4;5===a&&m<e?(a=10,y=!0):10===a&&m<e&&(a=5,y=!0)}0!==a&&15!==a&&(f=p=d=g=.5,1===a?(d=1-dt(e,u,c),p=1-dt(e,l,c)):2===a?(p=dt(e,c,l),g=1-dt(e,h,l)):3===a?(d=1-dt(e,u,c),g=1-dt(e,h,l)):4===a?(f=dt(e,u,h),g=dt(e,l,h)):5===a?(f=dt(e,u,h),g=dt(e,l,h),p=1-dt(e,l,c),d=1-dt(e,u,c)):6===a?(p=dt(e,c,l),f=dt(e,u,h)):7===a?(d=1-dt(e,u,c),f=dt(e,u,h)):8===a?(d=dt(e,c,u),f=1-dt(e,h,u)):9===a?(p=1-dt(e,l,c),f=1-dt(e,h,u)):10===a?(f=1-dt(e,h,u),g=1-dt(e,h,l),p=dt(e,c,l),d=dt(e,c,u)):11===a?(f=1-dt(e,h,u),g=1-dt(e,h,l)):12===a?(d=dt(e,c,u),g=dt(e,l,h)):13===a?(p=1-dt(e,l,c),g=dt(e,l,h)):14===a?(d=dt(e,c,u),p=dt(e,c,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:y,top:f,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(a),a}function dt(t,e,n){return(t-e)/(n-e)}function gt(t){return 0===t.cval||15===t.cval}function yt(t){gt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})).sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],h=[],l=0;l<u.length;l++){var c=u[l];c.properties[n]?h.push(c.properties[n]):h.push(0),!0===i&&(c.properties.matrixPosition=[a,l])}s.push(h)}return s}var vt=xt,bt=xt;function xt(t,e,n,r,i){wt(t,e,n||0,r||t.length-1,i||Mt)}function wt(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);wt(t,e,Math.max(n,Math.floor(e-s*u/o+h)),Math.min(r,Math.floor(e+(o-s)*u/o+h)),i)}var l=t[e],c=n,f=r;for(Et(t,n,e),i(t[r],l)>0&&Et(t,n,r);c<f;){for(Et(t,c,f),c++,f--;i(t[c],l)<0;)c++;for(;i(t[f],l)>0;)f--}0===i(t[n],l)?Et(t,n,f):Et(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Et(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Mt(t,e){return t<e?-1:t>e?1:0}vt.default=bt;var St=Ct,It=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Lt(t,e){Nt(t,0,t.children.length,e,t)}function Nt(t,e,n,r,i){i||(i=Bt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Ot(i,t.leaf?r(o):o);return i}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function At(t,e){return t.minX-e.minX}function kt(t,e){return t.minY-e.minY}function Rt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Tt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Bt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,vt(t,o,e,n,i),s.push(e,o,o,n))}function zt(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ft(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Dt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ft(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Ft(t,s=e.leaf?n(o):o)){if(e.leaf||Dt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(i=Pt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Dt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),h.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:At,compareMinY:kt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Lt(i=Bt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Bt([])).leaf=!1,i.height=r;var a,u,h,l,c=Math.ceil(o/s),f=c*Math.ceil(Math.sqrt(s));for(jt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(jt(t,a,h=Math.min(a+f-1,n),c,this.compareMinY),u=a;u<=h;u+=c)l=Math.min(u+c-1,h),i.children.push(this._build(t,u,l,r-1));return Lt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,h,l,c,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(l=c=1/0,i=0,o=e.children.length;i<o;i++)u=Rt(s=e.children[i]),f=t,p=s,(h=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<c?(c=h,l=u<l?u:l,a=s):h===c&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ot(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Bt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Lt(n,this.toBBox),Lt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Bt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Lt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,h,l,c,f,p,d,g,y;for(u=h=1/0,r=e;r<=n-e;r++)c=i=Nt(t,0,r,this.toBBox),f=o=Nt(t,r,n,this.toBBox),p=void 0,d=void 0,g=void 0,y=void 0,p=Math.max(c.minX,f.minX),d=Math.max(c.minY,f.minY),g=Math.min(c.maxX,f.maxX),y=Math.min(c.maxY,f.maxY),s=Math.max(0,g-p)*Math.max(0,y-d),a=Rt(i)+Rt(o),s<u?(u=s,l=r,h=a<h?a:h):s===u&&a<h&&(h=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:At,i=t.leaf?this.compareMinY:kt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Nt(t,0,e,s),u=Nt(t,n-e,n,s),h=Tt(a)+Tt(u);for(i=e;i<n-e;i++)o=t.children[i],Ot(a,t.leaf?s(o):o),h+=Tt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Ot(u,t.leaf?s(o):o),h+=Tt(u);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ot(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Lt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},St.default=It;var Gt=function(t,e,n){var r=t*e,i=Ut*t,o=i-(i-t),s=t-o,a=Ut*e,u=a-(a-e),h=e-u,l=s*h-(r-o*u-s*u-o*h);return n?(n[0]=l,n[1]=r,n):[l,r]},Ut=+(Math.pow(2,27)+1),qt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,h=0,l=Math.abs,c=t[u],f=l(c),p=e[h],d=l(p);f<d?(o=c,(u+=1)<n&&(f=l(c=t[u]))):(o=p,(h+=1)<r&&(d=l(p=e[h]))),u<n&&f<d||h>=r?(i=c,(u+=1)<n&&(f=l(c=t[u]))):(i=p,(h+=1)<r&&(d=l(p=e[h])));for(var g,y,m=i+o,_=m-i,v=o-_,b=v,x=m;u<n&&h<r;)f<d?(i=c,(u+=1)<n&&(f=l(c=t[u]))):(i=p,(h+=1)<r&&(d=l(p=e[h]))),(v=(o=b)-(_=(m=i+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(v=(o=b)-(_=(m=(i=c)+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(c=t[u]);for(;h<r;)(v=(o=b)-(_=(m=(i=p)+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(h+=1)<r&&(p=e[h]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Vt=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Ht=function(t,e){var n=t.length;if(1===n){var r=Gt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Gt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Gt(t[u],e,s);var h=o[1];Vt(h,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],c=o[1],f=l+c,p=c-(f-l);o[1]=f,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Wt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,h=0,l=Math.abs,c=t[u],f=l(c),p=-e[h],d=l(p);f<d?(o=c,(u+=1)<n&&(f=l(c=t[u]))):(o=p,(h+=1)<r&&(d=l(p=-e[h]))),u<n&&f<d||h>=r?(i=c,(u+=1)<n&&(f=l(c=t[u]))):(i=p,(h+=1)<r&&(d=l(p=-e[h])));for(var g,y,m=i+o,_=m-i,v=o-_,b=v,x=m;u<n&&h<r;)f<d?(i=c,(u+=1)<n&&(f=l(c=t[u]))):(i=p,(h+=1)<r&&(d=l(p=-e[h]))),(v=(o=b)-(_=(m=i+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(v=(o=b)-(_=(m=(i=c)+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(c=t[u]);for(;h<r;)(v=(o=b)-(_=(m=(i=p)+o)-i))&&(s[a++]=v),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(h+=1)<r&&(p=-e[h]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Yt=zt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));var s;return i}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var h=n(i),l=n(o),c="orientation"+t+"Exact",f=["function ",c,"(",a.join(),"){var p=",h,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return new Function("sum","prod","scale","sub",f)(qt,Gt,Ht,Wt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],h=e[1]-r[1],l=n[1]-r[1],c=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*l,g=a*h,y=a*u,m=i*l,_=i*h,v=o*u,b=c*(d-g)+f*(y-m)+p*(_-v),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(c)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(_)+Math.abs(v))*Math.abs(p));return b>x||-b>x?b:s(t,e,n,r)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[u].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),Xt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],h=o.length;h>1&&Zt(t[o[h-2]],t[o[h-1]],u)<=0;)h-=1,o.pop();for(o.push(a),h=s.length;h>1&&Zt(t[s[h-2]],t[s[h-1]],u)>=0;)h-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var l=0,c=(r=0,o.length);r<c;++r)n[l++]=o[r];for(var f=s.length-2;f>0;--f)n[l++]=s[f];return n},Zt=Yt[3],Jt=Qt,Kt=Qt;function Qt(t,e){if(!(this instanceof Qt))return new Qt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||$t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function $t(t,e){return t<e?-1:t>e?1:0}Qt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Jt.default=Kt;var te=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],h=e[s][0],l=e[s][1];u>r!=l>r&&n<(h-a)*(r-u)/(l-u)+a&&(i=!i)}return i},ee=Yt[3],ne=ie,re=ie;function ie(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)te(t[o],a)||u.push(t[o]);var h=Xt(u),l=[];for(o=0;o<h.length;o++)l.push(u[h[o]]);return l}(t),o=St(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=ce(u,r),s.push(r)}var h=St(16);for(a=0;a<s.length;a++)h.insert(le(s[a]));for(var l=e*e,c=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,g=fe(p,d);if(!(g<c)){var y=g/l;(u=oe(o,f.prev.p,p,d,f.next.next.p,y,h))&&Math.min(fe(u,p),fe(u,d))<=y&&(s.push(f),s.push(ce(u,f)),o.remove(u),h.remove(f),h.insert(le(f)),h.insert(le(f.next)))}}f=r;var m=[];do{m.push(f.p),f=f.next}while(f!==r);return m.push(f.p),m}function oe(t,e,n,r,i,o,s){for(var a=new Jt(null,se),u=t.data;u;){for(var h=0;h<u.children.length;h++){var l=u.children[h],c=u.leaf?pe(l,n,r):ae(n,r,l);c>o||a.push({node:l,dist:c})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=pe(p,e,n),g=pe(p,r,i);if(f.dist<d&&f.dist<g&&he(n,p,s)&&he(r,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function se(t,e){return t.dist-e.dist}function ae(t,e,n){if(ue(t,n)||ue(e,n))return 0;var r=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=de(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=de(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function ue(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function he(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),h=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),c=n.search({minX:a,minY:u,maxX:h,maxY:l}),f=0;f<c.length;f++)if(r=c[f].p,i=c[f].next.p,o=t,r!==(s=e)&&i!==o&&ee(r,i,o)>0!=ee(r,i,s)>0&&ee(o,s,r)>0!=ee(o,s,i)>0)return!1;return!0}function le(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function ce(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function pe(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function de(t,e,n,r,i,o,s,a){var u,h,l,c,f=n-t,p=r-e,d=s-i,g=a-o,y=t-i,m=e-o,_=f*f+p*p,v=f*d+p*g,b=d*d+g*g,x=f*y+p*m,w=d*y+g*m,E=_*b-v*v,M=E,S=E;0===E?(h=0,M=1,c=w,S=b):(c=_*w-v*x,(h=v*w-b*x)<0?(h=0,c=w,S=b):h>M&&(h=M,c=w+v,S=b)),c<0?(c=0,-x<0?h=0:-x>_?h=M:(h=-x,M=_)):c>S&&(c=S,-x+v<0?h=0:-x+v>_?h=M:(h=-x+v,M=_));var I=(1-(l=0===c?0:c/S))*i+l*s-((1-(u=0===h?0:h/M))*t+u*n),C=(1-l)*o+l*a-((1-u)*e+u*r);return I*I+C*C}function ge(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(A(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=ne(n,e.concavity);return r.length>3?h([r]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=K(t),i=rt(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,h=0;h<a.length&&!u;h++)if(me(r,a[h][0],n.ignoreBoundary)){for(var l=!1,c=1;c<a[h].length&&!l;)me(r,a[h][c],!n.ignoreBoundary)&&(l=!0),c++;l||(u=!0)}return u}function me(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],h=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+h*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(h-t[1])<=0)return!n;a>t[1]!=h>t[1]&&t[0]<(u-s)*(t[1]-a)/(h-a)+s&&(r=!r)}return r}function _e(t,e){var n=[];return D(t,(function(t){var r=!1;if("Point"===t.geometry.type)j(e,(function(e){ye(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];j(e,(function(e){A(t,(function(t){ye(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(g(i))}})),p(n)}function ve(t,e,n){void 0===n&&(n={});var r=K(t),i=K(e),o=M(i[1]-r[1]),s=M(i[0]-r[0]),a=M(r[1]),u=M(i[1]),h=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return v(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n.units)}function be(t,e){var n=!1;return p(function(t){if(t.length<3)return[];t.sort(we);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,h=t[0].x,l=t[a].y,c=l,f=1e-12;a--;)t[a].y<l&&(l=t[a].y),t[a].y>c&&(c=t[a].y);var p,d=h-u,g=c-l,y=d>g?d:g,m=.5*(h+u),_=.5*(c+l),v=[new xe({__sentinel:!0,x:m-20*y,y:_-y},{__sentinel:!0,x:m,y:_+20*y},{__sentinel:!0,x:m+20*y,y:_-y})],b=[],x=[];for(a=t.length;a--;){for(x.length=0,p=v.length;p--;)(d=t[a].x-v[p].x)>0&&d*d>v[p].r?(b.push(v[p]),v.splice(p,1)):d*d+(g=t[a].y-v[p].y)*g>v[p].r||(x.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1));for(Ee(x),p=x.length;p;)n=x[--p],e=x[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>f&&v.push(new xe(e,n,r))}for(Array.prototype.push.apply(b,v),a=b.length;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},h([[e,r,i,e]],o)})))}ne.default=re;var xe=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,h=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+n.x)+u*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*h-s*l)/c,this.y=(o*l-a*h)/c,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function we(t,e){return e.x-t.x}function Ee(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Me(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Se(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Se(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ce(t);default:throw new Error("unknown GeoJSON type")}}function Se(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ie(t.properties),e.geometry=Ce(t.geometry),e}function Ie(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Ie(r):e[n]=r})),e):e}function Ce(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ce(t)})),e):(e.coordinates=Pe(t.coordinates),e)}function Pe(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Pe(t)}))}function Le(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var r=[],i=W(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ne(r[0]),s=Ne(r[r.length-1]),a=Ne(i[0]),u=Ne(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return c(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:d(r.map((function(t){return t.coordinates}))):null}function Ne(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Ae(t,e){var n=function(t){if(null==t)return Oe;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,h=t.length,l=new Array(h);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+s;u<h;)l[u]=t[u],++u;return l}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function ke(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var h=o===n?n:n.concat(o);r[h.start=n.start]=i[h.end=o.end]=h}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Re(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ae(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=ke(t,i)).length)>1)for(var o,a,u=1,h=s(i[0]);u<r;++u)(o=s(i[u]))>h&&(a=i[0],i[0]=i[u],i[u]=a,h=o);return i})).filter((function(t){return t.length>0}))}}var Te=Object.prototype.hasOwnProperty;function De(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,h=0;h<t;++h)s[h]=i;function l(r,o){for(var h=e(r)&u,l=s[h],c=0;l!=i;){if(n(l,r))return a[h]=o;if(++c>=t)throw new Error("full hashmap");l=s[h=h+1&u]}return s[h]=r,a[h]=o,o}function c(r,o){for(var h=e(r)&u,l=s[h],c=0;l!=i;){if(n(l,r))return a[h];if(++c>=t)throw new Error("full hashmap");l=s[h=h+1&u]}return s[h]=r,a[h]=o,o}function f(r,o){for(var h=e(r)&u,l=s[h],c=0;l!=i;){if(n(l,r))return a[h];if(++c>=t)break;l=s[h=h+1&u]}return o}function p(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}return{set:l,maybeSet:c,get:f,keys:p}}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]}var Be=new ArrayBuffer(16),je=new Float64Array(Be),ze=new Uint32Array(Be);function Ge(t){je[0]=t[0],je[1]=t[1];var e=ze[0]^ze[1];return 2147483647&(e<<5^e>>7^ze[2]^ze[3])}function Ue(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=De(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),h=new Int32Array(o.length),l=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)h[e]=l[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],g=d[0],y=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=y;)b(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)h[e]=-1;for(e=0,n=a.length;e<n;++e){var m=a[e],_=m[0]+1,v=m[1];for(b(e,u[v-1],r=u[_-1],i=u[_]);++_<=v;)b(e,r,r=i,i=u[_])}function b(t,e,n,r){if(h[n]!==t){h[n]=t;var i=l[n];if(i>=0){var o=c[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else l[n]=e,c[n]=r}}function x(t){return Ge(o[t])}function w(t,e){return Fe(o[t],o[e])}h=l=c=null;var E,M=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(r){for(var a=e(r)&s,u=o[a],h=0;u!=i;){if(n(u,r))return!0;if(++h>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0}function h(r){for(var a=e(r)&s,u=o[a],h=0;u!=i;){if(n(u,r))return!0;if(++h>=t)break;u=o[a=a+1&s]}return!1}function l(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:h,values:l}}(1.4*p,Ge,Fe);for(e=0,n=o.length;e<n;++e)f[E=u[e]]&&M.add(o[E]);return M}function qe(t,e,n,r){Ve(t,e,n),Ve(t,e,e+r),Ve(t,e+r,n)}function Ve(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function He(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?We:"Feature"===n.type?Ye:Xe)(n);return r}function We(t){var e={type:"GeometryCollection",geometries:t.features.map(Ye)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ye(t){var e,n=Xe(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Xe(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Xe)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ze(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Te.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(h)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function h(t){t.forEach(u)}for(var l in t)o(t[l]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=He(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,u=s-i?(n-1)/(s-i):1;function h(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*u)]}function l(t,e){for(var n,o,s,h,l,c=-1,f=0,p=t.length,d=new Array(p);++c<p;)n=t[c],h=Math.round((n[0]-r)*a),l=Math.round((n[1]-i)*u),h===o&&l===s||(d[f++]=[o=h,s=l]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function c(t){return l(t,2)}function f(t){return l(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Te.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=h(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(h)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var y in t)d(t[y]);return{scale:[1/a,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var h=De(2*u*1.4,Ge,Fe),l=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{c(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{c(n)}while(n=n.next);else f(n);function c(t){var e,n,r,i,s,a,u,c;if(r=h.get(e=o[t[0]]))for(u=0,c=r.length;u<c;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=h.get(n=o[t[1]]))for(u=0,c=s.length;u<c;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):h.set(e,[t]),s?s.push(t):h.set(n,[t]),l.push(t)}function f(t){var e,n,r,i,s;if(n=h.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=h.get(e=o[t[0]+m(t)]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):h.set(e,[t]),l.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Fe(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!Fe(o[n],o[s]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=m(t),a=m(e),u=0;u<i;++u)if(!Fe(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=m(t),h=a-m(e),l=0;l<a;++l)if(!Fe(o[n+(l+u)%a],o[s-(l+h)%a]))return!1;return!0}function m(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=Ue(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],h=u[0],l=u[1];++h<l;)i.has(o[h])&&(e={0:h,1:u[1]},u[1]=h,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var c=a[n],f=c[0],p=f,d=c[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:c[1]},c[1]=p,c=c.next=e):(qe(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Te.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function h(t){return t.map(u)}for(var l in t)o(t[l]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=De(1.4*i.arcs.length,Je,Ke);function a(t){t&&Te.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=t.arcs.map(h)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function h(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(h)}for(var c in t)a(t[c]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,h=o[0],l=h[0],c=h[1];++s<u;)r=(h=o[s])[0],i=h[1],r===l&&i===c||(o[a++]=[r-l,i-c],l=r,c=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Je(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ke(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Qe(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Me(t));var n=[];G(t,(function(t){n.push(t.geometry)}));var r=Ze({geoms:m(n).geometry});return function(t){return Ae(t,Re.apply(this,arguments))}(r,r.objects.geoms.geometries)}function $e(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var r=function(t){var e={};G(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return Le(i,e);case"Polygon":return Qe(i,e);default:throw new Error(r+" is not supported")}}function tn(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=it(t),i=[];switch(r){case"LineString":i=en(t);break;case"MultiLineString":case"Polygon":Q(t).forEach((function(t){i.push(en(t))}));break;case"MultiPolygon":Q(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(en(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var s={};Q(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(s,e)||(i.push(t),s[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):o({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function en(t){var e=Q(t);if(2===e.length&&!nn(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,nn(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function nn(t,e){return t[0]===e[0]&&t[1]===e[1]}function rn(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],h=a-o,l=u-s;return 0==(r-o)*l-(i-s)*h&&(Math.abs(h)>=Math.abs(l)?h>0?o<=r&&r<=a:a<=r&&r<=o:l>0?s<=i&&i<=u:u<=i&&i<=s)}function on(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function sn(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=on(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&sn(t,e,o,r,i),i.push(t[o]),n-o>1&&sn(t,o,n,r,i))}function an(t,e){var n=t.length-1,r=[t[0]];return sn(t,0,n,e,r),r.push(t[n]),r}function un(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return an(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],h=1,l=t.length;h<l;h++)i=a,o=void 0,s=void 0,(o=(r=n=t[h]).x-i.x)*o+(s=r.y-i.y)*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function hn(t,e,n){return un(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ln(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=un(r,e,n).map((function(t){return[t.x,t.y]}));!cn(i);)i=un(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function cn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fn=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function pn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=rt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new fn({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),c(i,e.properties)}function dn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return h([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function gn(t){return dn(J(t))}function yn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(ve(t.slice(0,2),[r,n])>=ve(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function mn(t,e,n,r){void 0===r&&(r={});var i=K(t),o=M(i[0]),s=M(i[1]),u=M(n),h=b(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(h)+Math.cos(s)*Math.sin(h)*Math.cos(u));return a([E(o+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(s),Math.cos(h)-Math.sin(s)*Math.sin(l))),E(l)],r.properties)}function _n(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(mn(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),h([o],i)}function vn(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=vn(e,t);return(n+180)%360}(t,e);var r=K(t),i=K(e),o=M(r[0]),s=M(i[0]),a=M(r[1]),u=M(i[1]),h=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return E(Math.atan2(h,l))}function bn(t,e){void 0===e&&(e={});var n=J(t);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function xn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return A(t,(function(t){n+=t[0],r+=t[1],i++}),!0),a([n/i,r/i],e.properties)}function wn(t){var e=[];return"FeatureCollection"===t.type?D(t,(function(t){A(t,(function(n){e.push(a(n,t.properties))}))})):A(t,(function(n){e.push(a(n,t.properties))})),p(e)}var En=Sn,Mn=Sn;function Sn(t,e,n){n=n||2;var r,i,o,s,a,u,h,l=e&&e.length,c=l?e[0]*n:t.length,f=In(t,0,c,n,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=In(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Dn(s));for(a.sort(kn),i=0;i<a.length;i++)Rn(a[i],n),n=Cn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<c;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);h=0!==(h=Math.max(o-r,s-i))?1/h:0}return Pn(f,p,n,r,i,h),p}function In(t,e,n,r,i){var o,s;if(i===Yn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Vn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Vn(o,t[o],t[o+1],s);return s&&zn(s,s.next)&&(Hn(s),s=s.next),s}function Cn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!zn(r,r.next)&&0!==jn(r.prev,r,r.next))r=r.next;else{if(Hn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Pn(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Tn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,h=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<h&&(a++,r=r.nextZ);e++);for(u=h;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,h*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,h=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Nn(t,r,i,o):Ln(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Hn(t),t=u.next,h=u.next;else if((t=u)===h){s?1===s?Pn(t=On(t,e,n),e,n,r,i,o,2):2===s&&An(t,e,n,r,i,o):Pn(Cn(t),e,n,r,i,o,1);break}}}function Ln(t){var e=t.prev,n=t,r=t.next;if(jn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Fn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&jn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Nn(t,e,n,r){var i=t.prev,o=t,s=t.next;if(jn(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=Tn(a,u,e,n,r),f=Tn(h,l,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=c&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function On(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!zn(i,o)&&Gn(i,r,r.next,o)&&Un(i,o)&&Un(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Hn(r),Hn(r.next),r=t=o),r=r.next}while(r!==t);return r}function An(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Bn(s,a)){var u=qn(s,a);return s=Cn(s,s.next),u=Cn(u,u.next),Pn(s,e,n,r,i,o),void Pn(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function kn(t,e){return t.x-e.x}function Rn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,h=n,l=n.x,c=n.y,f=1/0;for(r=n.next;r!==h;)i>=r.x&&r.x>=l&&i!==r.x&&Fn(o<c?i:s,o,l,c,o<c?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Un(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=qn(e,t);Cn(n,n.next)}}function Tn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Fn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Bn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Un(t,e)&&Un(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zn(t,e){return t.x===e.x&&t.y===e.y}function Gn(t,e,n,r){return!!(zn(t,e)&&zn(n,r)||zn(t,r)&&zn(n,e))||jn(t,e,n)>0!=jn(t,e,r)>0&&jn(n,r,t)>0!=jn(n,r,e)>0}function Un(t,e){return jn(t.prev,t,t.next)<0?jn(t,e,t.next)>=0&&jn(t,t.prev,e)>=0:jn(t,e,t.prev)<0||jn(t,t.next,e)<0}function qn(t,e){var n=new Wn(t.i,t.x,t.y),r=new Wn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Vn(t,e,n,r){var i=new Wn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Xn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=En(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(h([s]))}return r}function Zn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return D(e,(function(e,n){var o=ve(t,e);o<r&&(i=n,r=o)})),(n=Me(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Jn(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=Q(r);break;case"LineString":n=[Q(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=c([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),p(e)}Sn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Yn(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Yn(t,h,l,n))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},Sn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},En.default=Mn;var Kn=zt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=h,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return f(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(c(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Qn(t,e,n){if(null!==t)for(var r,i,o,s,a,u,h,l,c=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(h=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<a;_++){var v=0,b=0;if(null!==(s=l?h.geometries[_]:h)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,m,v,b))return!1;f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,v,b))return!1;f++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],f,m,v,b))return!1;f++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],f,m,v,b))return!1;f++}b++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Qn(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $n(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function tr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function er(t,e){var n,r,i,o,s,a,u,h,l,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,h=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,h,l,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,h,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,h,l,c))return!1;f++}}function nr(t,e){er(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Kn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var h={type:s,coordinates:t.coordinates[u]};if(!1===e(Kn.feature(h,r),n,u))return!1}}))}function rr(t,e){nr(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,h=0;return!1!==Qn(t,(function(o,l,c,f,p){if(void 0===s||n>a||f>u||p>h)return s=o,a=n,u=f,h=p,void(i=0);var d=Kn.lineString([s,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,s=o}))&&void 0}}}))}function ir(t,e){if(!t)throw new Error("geojson is required");nr(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Kn.lineString(o[s],t.properties),n,r,s))return!1}}}))}var or=function(t){var e=[];return Qn(t,(function(t){e.push(t)})),e},sr=Qn,ar=function(t,e,n,r){var i=n;return Qn(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i},ur=tr,hr=function(t,e,n){var r=n;return tr(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},lr=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Kn.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Kn.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Kn.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Kn.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Kn.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Kn.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},cr=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Kn.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Kn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Kn.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Kn.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},fr=nr,pr=function(t,e,n){var r=n;return nr(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},dr=er,gr=function(t,e,n){var r=n;return er(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},yr=ir,mr=function(t,e,n){var r=n;return ir(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},_r=$n,vr=function(t,e,n){var r=n;return $n(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},br=rr,xr=function(t,e,n){var r=n,i=!1;return rr(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r},wr=Object.defineProperty({coordAll:or,coordEach:sr,coordReduce:ar,featureEach:ur,featureReduce:hr,findPoint:lr,findSegment:cr,flattenEach:fr,flattenReduce:pr,geomEach:dr,geomReduce:gr,lineEach:yr,lineReduce:mr,propEach:_r,propReduce:vr,segmentEach:br,segmentReduce:xr},"__esModule",{value:!0});function Er(t){var e=[1/0,1/0,-1/0,-1/0];return wr.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Er.default=Er;var Mr=Er,Sr=Object.defineProperty({default:Mr},"__esModule",{value:!0}).default,Ir=wr.featureEach,Cr=(wr.coordEach,Kn.polygon,Kn.featureCollection);function Pr(t){var e=St(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Sr(t),St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Sr(t),e.push(t)})):Ir(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Sr(t),e.push(t)})),St.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Sr(t),St.prototype.remove.call(this,t,e)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){var e=St.prototype.search.call(this,this.toBBox(t));return Cr(e)},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=St.prototype.all.call(this);return Cr(t)},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Sr(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Sr(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Lr=Pr,Nr=Pr;function Or(t,e){var n={},r=[];if("LineString"===t.type&&(t=o(t)),"LineString"===e.type&&(e=o(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Ar(t,e);return i&&r.push(i),p(r)}var s=Lr();return s.load(Jn(e)),D(Jn(t),(function(t){D(s.search(t),(function(e){var i=Ar(t,e);if(i){var o=Q(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),p(r)}function Ar(t,e){var n=Q(t),r=Q(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],u=n[1][1],h=r[0][0],l=r[0][1],c=r[1][0],f=r[1][1],p=(f-l)*(s-i)-(c-h)*(u-o);if(0===p)return null;var d=((c-h)*(o-l)-(f-l)*(i-h))/p,g=((s-i)*(o-l)-(u-o)*(i-h))/p;return d>=0&&d<=1&&g>=0&&g<=1?a([i+d*(s-i),o+d*(u-o)]):null}function kr(t,e,n){void 0===n&&(n={});var r=a([1/0,1/0],{dist:1/0}),i=0;return G(t,(function(t){for(var o=Q(t),s=0;s<o.length-1;s++){var u=a(o[s]);u.properties.dist=ve(e,u,n);var h=a(o[s+1]);h.properties.dist=ve(e,h,n);var l=ve(u,h,n),f=Math.max(u.properties.dist,h.properties.dist),p=vn(u,h),d=mn(e,f,p+90,n),g=mn(e,f,p-90,n),y=Or(c([d.geometry.coordinates,g.geometry.coordinates]),c([u.geometry.coordinates,h.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=ve(e,m,n),m.properties.location=i+ve(u,m,n)),u.properties.dist<r.properties.dist&&((r=u).properties.index=s,r.properties.location=i),h.properties.dist<r.properties.dist&&((r=h).properties.index=s+1,r.properties.location=i+l),m&&m.properties.dist<r.properties.dist&&((r=m).properties.index=s),i+=l}})),r}function Rr(t,n,r){void 0===r&&(r={});var i=K(t),o=K(n);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,S(function(t,n,r){var i=r=void 0===r?e:Number(r),o=t[1]*Math.PI/180,s=n[1]*Math.PI/180,a=s-o,u=Math.abs(n[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var h=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(h)>1e-11?a/h:Math.cos(o);return Math.sqrt(a*a+l*l*u*u)*i}(i,o),"meters",r.units)}function Tr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=a(t):"Point"===t.type?t=o(t):et(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=c(e):"LineString"===e.type?e=o(e):et(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return q(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=Dr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return Fr(t,e,{method:r.method,units:"degrees"});var s=Dr(i,i);if(s<=o)return Fr(t,n,{method:r.method,units:"degrees"});var a=o/s;return Fr(t,[e[0]+a*i[0],e[1]+a*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);s<r&&(r=s)})),S(r,"degrees",n.units)}function Dr(t,e){return t[0]*e[0]+t[1]*e[1]}function Fr(t,e,n){return"planar"===n.method?Rr(t,e,n):ve(t,e,n)}function Br(t,e,n,r,i,o,s,a){var u,h,l,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(h=e-o)-(r-e)*(l=t-i),h=((s-i)*h-(a-o)*l)/u,l=c/u,f.x=t+h*(n-t),f.y=e+h*(r-e),h>=0&&h<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function jr(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?p([o(t)]):p([t]):t}(t),n=bn(e),r=!1,i=0;!r&&i<e.features.length;){var s,u=e.features[i].geometry,h=!1;if("Point"===u.type)n.geometry.coordinates[0]===u.coordinates[0]&&n.geometry.coordinates[1]===u.coordinates[1]&&(r=!0);else if("MultiPoint"===u.type){var l=!1;for(s=0;!l&&s<u.coordinates.length;)n.geometry.coordinates[0]===u.coordinates[s][0]&&n.geometry.coordinates[1]===u.coordinates[s][1]&&(r=!0,l=!0),s++}else if("LineString"===u.type)for(s=0;!h&&s<u.coordinates.length-1;)zr(n.geometry.coordinates[0],n.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(h=!0,r=!0),s++;else if("MultiLineString"===u.type)for(var c=0;c<u.coordinates.length;){h=!1,s=0;for(var f=u.coordinates[c];!h&&s<f.length-1;)zr(n.geometry.coordinates[0],n.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(h=!0,r=!0),s++;c++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||ye(n,u)&&(r=!0);i++}if(r)return n;var d=p([]);for(i=0;i<e.features.length;i++)d.features=d.features.concat(wn(e.features[i]).features);return a(Zn(n,d).geometry.coordinates)}function zr(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Lr.default=Nr;var Gr=6378137;function Ur(t){return z(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return qr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=qr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function qr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Vr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Vr(t[n]))}return e}function Vr(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(Hr(t[o][0])-Hr(e[0]))*Math.sin(Hr(n[1]));a=a*Gr*Gr/2}return a}function Hr(t){return t*Math.PI/180}function Wr(t,e){return void 0===e&&(e={}),V(t,(function(t,n){var r=n.geometry.coordinates;return t+ve(r[0],r[1],e)}),0)}function Yr(t,e,n,r){if(!P(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,h=i.length,l=0,f=0;f<i.length&&!(e>=l&&f===i.length-1);f++){if(l>e&&0===o.length){if(!(s=e-l))return o.push(i[f]),c(o);a=vn(i[f],i[f-1])-180,u=mn(i[f],s,a,r),o.push(u.geometry.coordinates)}if(l>=n)return(s=n-l)?(a=vn(i[f],i[f-1])-180,u=mn(i[f],s,a,r),o.push(u.geometry.coordinates),c(o)):(o.push(i[f]),c(o));if(l>=e&&o.push(i[f]),f===i.length-1)return c(o);l+=ve(i[f],i[f+1],r)}if(l<e&&i.length===h)throw new Error("Start position is beyond line");var p=i[i.length-1];return c([p,p])}function Xr(t,e,n){void 0===n&&(n={});for(var r=K(t),i=Q(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Zr(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Zr(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],h=e[0],l=e[1],c=h-a,f=l-u,p=(n[0]-a)*f-(n[1]-u)*c;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return r?"start"===r?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=h:h<=o&&o<a:f>0?u<s&&s<=l:l<=s&&s<u:"end"===r?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<h:h<o&&o<=a:f>0?u<=s&&s<l:l<s&&s<=u:"both"===r&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<h:h<o&&o<a:f>0?u<s&&s<l:l<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=h:h<=o&&o<=a:f>0?u<=s&&s<=l:l<=s&&s<=u}function Jr(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Qr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Xr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Qr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Xr(t.coordinates[r],e))return!1;n||(n=Xr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=ye(t.coordinates[1],e))){n=!1;break}r=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Xr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!Kr(J(e),J(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!ye(t.coordinates[r],e))return!1;n||(n=ye(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=ye($r(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!Kr(J(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ye(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Qr(t,e){return t[0]===e[0]&&t[1]===e[1]}function $r(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ti(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],u=t[3],h=e/ve([i,o],[s,o],n)*(s-i),l=e/ve([i,o],[i,u],n)*(u-o),c=s-i,f=u-o,d=Math.floor(c/h),g=(f-Math.floor(f/l)*l)/2,y=i+(c-d*h)/2;y<=s;){for(var m=o+g;m<=u;){var _=a([y,m],n.properties);n.mask?Jr(_,n.mask)&&r.push(_):r.push(_),m+=l}y+=h}return p(r)}function ei(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return A(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function ni(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){e.push(t)})),p(e)}function ri(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(g(a,u));var h=St();h.load(s)}for(var l=0;l<r.length;l++)for(var c=0;c<r[l].length-1;c++)if(n)h.search(g(l,c)).forEach((function(t){var e=t.ring,n=t.edge;d(l,c,e,n)}));else for(var f=0;f<r.length;f++)for(var p=0;p<r[f].length-1;p++)d(l,c,f,p);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,s,a){var u,h,l=r[t][n],c=r[t][n+1],f=r[s][a],p=r[s][a+1],d=function(t,e,n,r){if(ii(t,n)||ii(t,r)||ii(e,n)||ii(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],h=n[1],l=r[0],c=r[1],f=(i-s)*(h-c)-(o-a)*(u-l);return 0===f?null:[((i*a-o*s)*(u-l)-(i-s)*(u*c-h*l))/f,((i*a-o*s)*(h-c)-(o-a)*(u*c-h*l))/f]}(l,c,f,p);if(null!==d&&(u=c[0]!==l[0]?(d[0]-l[0])/(c[0]-l[0]):(d[1]-l[1])/(c[1]-l[1]),h=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||h>=1||h<=0))){var g=d,y=!o[g];y&&(o[g]=!0),e?i.push(e(d,t,n,l,c,u,s,a,f,p,h,y)):i.push(d)}}function g(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function ii(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ii(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function oi(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];li(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=ri(t,(function(t,e,n,r,i,o,s,a,u,h,l,c){return[t,e,n,r,i,o,s,a,u,h,l,c]})),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(h([t.geometry.coordinates[r]],{parent:-1,winding:hi(t.geometry.coordinates[r])}));var l=p(u);return B(),j(),l}var c=[],f=[];for(r=0;r<e;r++){c.push([]);for(var d=0;d<t.geometry.coordinates[r].length-1;d++)c[r].push([new si(t.geometry.coordinates[r][ci(d+1,t.geometry.coordinates[r].length-1)],1,[r,d],[r,ci(d+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new ai(t.geometry.coordinates[r][d],[r,ci(d-1,t.geometry.coordinates[r].length-1)],[r,d],void 0,void 0,!1,!0))}for(r=0;r<a;r++)c[s[r][1]][s[r][2]].push(new si(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new ai(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<c.length;r++)for(d=0;d<c[r].length;d++)c[r][d].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(r=0;r<g;r++)y.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var m=St();for(m.load(y),r=0;r<c.length;r++)for(d=0;d<c[r].length;d++)for(var _=0;_<c[r][d].length;_++){b=_==c[r][d].length-1?c[r][ci(d+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][d][_+1].coord;var v=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];c[r][d][_].nxtIsectAlongEdgeIn=v.index}for(r=0;r<c.length;r++)for(d=0;d<c[r].length;d++)for(_=0;_<c[r][d].length;_++){var b=c[r][d][_].coord,x=(v=m.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?f[x].nxtIsectAlongRingAndEdge2=c[r][d][_].nxtIsectAlongEdgeIn:li(f[x].ringAndEdge1,c[r][d][_].ringAndEdgeIn)?f[x].nxtIsectAlongRingAndEdge1=c[r][d][_].nxtIsectAlongEdgeIn:f[x].nxtIsectAlongRingAndEdge2=c[r][d][_].nxtIsectAlongEdgeIn}var w=[];for(r=0,d=0;d<e;d++){var E=r;for(_=0;_<t.geometry.coordinates[d].length-1;_++)f[r].coord[0]<f[E].coord[0]&&(E=r),r++;var M=f[E].nxtIsectAlongRingAndEdge2;for(_=0;_<f.length;_++)if(f[_].nxtIsectAlongRingAndEdge1==E||f[_].nxtIsectAlongRingAndEdge2==E){var S=_;break}var I=ui([f[S].coord,f[E].coord,f[M].coord],!0)?1:-1;w.push({isect:E,parent:-1,winding:I})}for(w.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];w.length>0;){var C=w.pop(),P=C.isect,L=C.parent,N=C.winding,O=u.length,A=[f[P].coord],k=P;if(f[P].ringAndEdge1Walkable)var R=f[P].ringAndEdge1,T=f[P].nxtIsectAlongRingAndEdge1;else R=f[P].ringAndEdge2,T=f[P].nxtIsectAlongRingAndEdge2;for(;!li(f[P].coord,f[T].coord);){A.push(f[T].coord);var D=void 0;for(r=0;r<w.length;r++)if(w[r].isect==T){D=r;break}if(null!=D&&w.splice(D,1),li(R,f[T].ringAndEdge1)){if(R=f[T].ringAndEdge2,f[T].ringAndEdge2Walkable=!1,f[T].ringAndEdge1Walkable){var F={isect:T};ui([f[k].coord,f[T].coord,f[f[T].nxtIsectAlongRingAndEdge2].coord],1==N)?(F.parent=L,F.winding=-N):(F.parent=O,F.winding=N),w.push(F)}k=T,T=f[T].nxtIsectAlongRingAndEdge2}else R=f[T].ringAndEdge1,f[T].ringAndEdge1Walkable=!1,f[T].ringAndEdge2Walkable&&(F={isect:T},ui([f[k].coord,f[T].coord,f[f[T].nxtIsectAlongRingAndEdge1].coord],1==N)?(F.parent=L,F.winding=-N):(F.parent=O,F.winding=N),w.push(F)),k=T,T=f[T].nxtIsectAlongRingAndEdge1}A.push(f[T].coord),u.push(h([A],{index:O,parent:L,winding:N,netWinding:void 0}))}function B(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<l.features.length;r++)t[e]!=r&&ye(l.features[t[e]].geometry.coordinates[0][0],l.features[r],{ignoreBoundary:!0})&&Ur(l.features[r])<1/0&&(n=r);l.features[t[e]].properties.parent=n}}function j(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,z(t,e)}}function z(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var r=e+l.features[n].properties.winding;l.features[n].properties.netWinding=r,z(n,r)}}return l=p(u),B(),j(),l}var si=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ai=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function ui(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function hi(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(ui([t[ci(e-1,t.length-1)],t[e],t[ci(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function li(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!li(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function ci(t,e){return(t%e+e)%e}var fi=Math.PI/180,pi=180/Math.PI,di=function(t,e){this.lon=t,this.lat=e,this.x=fi*t,this.y=fi*e};di.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},di.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new di(e,t)};var gi=function(){this.coords=[],this.length=0};gi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var yi=function(t){this.properties=t||{},this.geometries=[]};yi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},yi.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var mi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new di(t.x,t.y),this.end=new di(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function _i(t,e){var n=[],r=Lr();return G(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=bi(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),D(vi(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=vi(t,e).features).forEach((function(t){t.bbox||(t.bbox=yn(J(t)))})),r.load(p(n))})),p(n)}function vi(t,e){var n=[],r=Q(t)[0],i=Q(t)[t.geometry.coordinates.length-1];if(xi(r,K(e))||xi(i,K(e)))return p([t]);var o=Lr(),s=Jn(t);o.load(s);var a=o.search(e);if(!a.features.length)return p([t]);var u=bi(e,a),h=F(s,(function(t,r,i){var o=Q(r)[1],s=K(e);return i===u.id?(t.push(s),n.push(c(t)),xi(s,o)?[s]:[s,o]):(t.push(o),t)}),[r]);return h.length>1&&n.push(c(h)),p(n)}function bi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return D(e,(function(e){var i=kr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function xi(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=Ei(n),a=Ei(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return c(_n(t,e,i).geometry.coordinates[0],u);for(var h=s,l=s<a?a:a+360,f=h,p=[],d=0;f<l;)p.push(mn(t,e,f,i).geometry.coordinates),f=h+360*++d/o;return f>l&&p.push(mn(t,e,l,i).geometry.coordinates),c(p,u)}function Ei(t){var e=t%360;return e<0&&(e+=360),e}function Mi(t,e){void 0===e&&(e={});var n=rt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Si(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=rt(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ii(t,r))})),p(i)}(n,e);default:throw new Error("invalid poly")}}function Si(t,e){return void 0===e&&(e={}),Ii(rt(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ii(t,e){return t.length>1?d(t,e):c(t[0],e)}function Ci(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;if("FeatureCollection"===(null!==(i=e.mutate)&&void 0!==i&&i||(t=Me(t)),t.type)){var u=[];return t.features.forEach((function(t){u.push(Q(Pi(t,{},s,a)))})),y(u,o)}return Pi(t,o,s,a)}function Pi(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=rt(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Li(o)),h([o],e);case"MultiLineString":var a=[],u=0;return o.forEach((function(t){if(n&&(t=Li(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(J(c(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),h(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Li(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Ni(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Ai(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Ai(a=t[s],e)&r))!==o&&n.push(Oi(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Oi(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Ai(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function ki(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Ni(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}mi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=pi*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[pi*Math.atan2(i,r),s]},mi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,h=e&&e.offset?e.offset:10,l=180-h,c=-180+h,f=360-h,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],y=Math.abs(g-d);y>f&&(g>l&&d<c||d>l&&g<c)?a=!0:y>u&&(u=y)}var m=[];if(a&&u<h){var _=[];m.push(_);for(var v=0;v<n.length;++v){var b=parseFloat(n[v][0]);if(v>0&&Math.abs(b-n[v-1][0])>f){var x=parseFloat(n[v-1][0]),w=parseFloat(n[v-1][1]),E=parseFloat(n[v][0]),M=parseFloat(n[v][1]);if(x>-180&&x<c&&180===E&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<c){_.push([-180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(x>l&&x<180&&-180===E&&v+1<n.length&&n[v-1][0]>l&&n[v-1][0]<180){_.push([180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(x<c&&E>l){var S=x;x=E,E=S;var I=w;w=M,M=I}if(x>l&&E<c&&(E+=360),x<=180&&E>=180&&x<E){var C=(180-x)/(E-x),P=C*M+(1-C)*w;_.push([n[v-1][0]>l?180:-180,P]),(_=[]).push([n[v-1][0]>l?-180:180,P]),m.push(_)}else _=[],m.push(_);_.push([b,n[v][1]])}else _.push([n[v][0],n[v][1]])}}else{var L=[];m.push(L);for(var N=0;N<n.length;++N)L.push([n[N][0],n[N][1]])}for(var O=new yi(this.properties),A=0;A<m.length;++A){var k=new gi;O.geometries.push(k);for(var R=m[A],T=0;T<R.length;++T)k.move_to(R[T])}return O};var Ri=zt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Ti=zt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Di=zt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ti(t))return!!Ti(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var h=Ri(t),l=Ri(o)}catch(t){return!1}if(h.length!=l.length)return!1;for(h.sort(),l.sort(),a=h.length-1;a>=0;a--)if(h[a]!=l[a])return!1;for(a=h.length-1;a>=0;a--)if(u=h[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function Fi(t,e,n){if(void 0===n&&(n={}),!P(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=Lr(),a=Jn(t);return s.load(a),q(e,(function(t){var e=!1;t&&(D(s.search(t),(function(n){if(!1===e){var o=Q(t).sort(),s=Q(n).sort();Di(o,s)||(0===i?Xr(o[0],n)&&Xr(o[1],n):kr(n,o[0]).properties.dist<=i&&kr(n,o[1]).properties.dist<=i)?(e=!0,r=r?Bi(r,t):t):(0===i?Xr(s[0],t)&&Xr(s[1],t):kr(t,s[0]).properties.dist<=i&&kr(t,s[1]).properties.dist<=i)&&(r=r?Bi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),p(o)}function Bi(t,e){var n=Q(e),r=Q(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Di(n[0],i)?s.unshift(n[1]):Di(n[0],o)?s.push(n[1]):Di(n[1],i)?s.unshift(n[0]):Di(n[1],o)&&s.push(n[0]),t}function ji(t){var e=t%360;return e<0&&(e+=360),e}function zi(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Gi(K(e),K(t)):Gi(K(t),K(e)))>180?-(360-r):r}function Gi(t,e){var n=M(t[1]),r=M(e[1]),i=M(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(i,o))+360)%360}function Ui(t,n,r,i){void 0===i&&(i={});var o=n<0,s=S(Math.abs(n),i.units,"meters");o&&(s=-Math.abs(s));var u=K(t),h=function(t,n,r,i){var o=n/(i=void 0===i?e:Number(i)),s=t[0]*Math.PI/180,a=M(t[1]),u=M(r),h=o*Math.cos(u),l=a+h;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(c)>1e-11?h/c:Math.cos(a);return[(180*(s+o*Math.sin(u)/f)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,r);return h[0]+=h[0]-u[0]>180?-360:u[0]-h[0]>180?360:0,a(h,i.properties)}function qi(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Hi(a,u,e),n<=0&&r>0?Hi(e,a,i)<0||(i=a):n>0&&r<=0&&(Vi(e,a,o)||(o=a)),n=r}return[i,o]}function Vi(t,e,n){return Hi(t,e,n)>0}function Hi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Wi(t){for(var e,n,r=Q(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Yi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){Yi(t,e)})),t;case"LineString":return Xi(Q(t),e),t;case"Polygon":return Zi(Q(t),e),t;case"MultiLineString":return Q(t).forEach((function(t){Xi(t,e)})),t;case"MultiPolygon":return Q(t).forEach((function(t){Zi(t,e)})),t;case"Point":case"MultiPoint":return t}}function Xi(t,e){Wi(t)===e&&t.reverse()}function Zi(t,e){Wi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Wi(t[n])===e&&t[n].reverse()}function Ji(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})).sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],h=[],l=0;l<u.length;l++){var c=u[l];c.properties[n]?h.push(c.properties[n]):h.push(0),!0===i&&(c.properties.matrixPosition=[a,l])}s.push(h)}return s}var Ki={successCallback:null,verbose:!1,polygons:!1},Qi={};function $i(t,e,n,r){r=r||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Ki[s],Qi[s]=a}Qi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,h=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var h=0,l=t[a+1][u],c=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(l)||isNaN(c)||isNaN(f)||isNaN(p))){h|=l<e?0:l>s?128:64,h|=c<e?0:c>s?32:16,h|=f<e?0:f>s?8:4;var d=+(h|=p<e?0:p>s?2:1),g=0;if(17===h||18===h||33===h||34===h||38===h||68===h||72===h||98===h||102===h||132===h||136===h||137===h||152===h||153===h){var y=(l+c+f+p)/4;g=y>s?2:y<e?0:1,34===h?1===g?h=35:0===g&&(h=136):136===h?1===g?(h=35,g=4):0===g&&(h=34):17===h?1===g?(h=155,g=4):0===g&&(h=153):68===h?1===g?(h=103,g=4):0===g&&(h=102):153===h?1===g&&(h=155):102===h?1===g&&(h=103):152===h?g<2&&(h=156,g=1):137===h?g<2&&(h=139,g=1):98===h?g<2&&(h=99,g=1):38===h?g<2&&(h=39,g=1):18===h?g>0?(h=156,g=4):h=152:33===h?g>0?(h=139,g=4):h=137:72===h?g>0?(h=99,g=4):h=98:132===h&&(g>0?(h=39,g=4):h=38)}if(0!=h&&170!=h){var m,_,v,b,x,w,E,M;m=_=v=b=x=w=E=M=.5;var S=[];1===h?(v=1-Vo(e,f,p),M=1-Vo(e,l,p),S.push(Bo[h])):169===h?(v=Vo(s,p,f),M=Vo(s,p,l),S.push(Bo[h])):4===h?(w=1-Vo(e,c,f),b=Vo(e,p,f),S.push(Do[h])):166===h?(w=Vo(s,f,c),b=1-Vo(s,f,p),S.push(Do[h])):16===h?(x=Vo(e,f,c),_=Vo(e,l,c),S.push(To[h])):154===h?(x=1-Vo(s,c,f),_=1-Vo(s,c,l),S.push(To[h])):64===h?(E=Vo(e,p,l),m=1-Vo(e,c,l),S.push(zo[h])):106===h?(E=1-Vo(s,l,p),m=Vo(s,l,c),S.push(zo[h])):168===h?(b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),S.push(Fo[h]),S.push(Bo[h])):2===h?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(Fo[h]),S.push(Bo[h])):162===h?(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),S.push(Fo[h]),S.push(Bo[h])):8===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),S.push(To[h]),S.push(Do[h])):138===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(To[h]),S.push(Do[h])):32===h?(x=Vo(s,f,c),w=Vo(e,f,c),m=Vo(e,l,c),_=Vo(s,l,c),S.push(To[h]),S.push(Do[h])):42===h?(M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(jo[h]),S.push(zo[h])):128===h&&(M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(jo[h]),S.push(zo[h])),5===h?(w=1-Vo(e,c,f),M=1-Vo(e,l,p),S.push(Do[h])):165===h?(w=Vo(s,f,c),M=Vo(s,p,l),S.push(Do[h])):20===h?(b=Vo(e,p,f),_=Vo(e,l,c),S.push(Fo[h])):150===h?(b=1-Vo(s,f,p),_=1-Vo(s,c,l),S.push(Fo[h])):80===h?(x=Vo(e,f,c),E=Vo(e,p,l),S.push(To[h])):90===h?(x=1-Vo(s,c,f),E=1-Vo(s,l,p),S.push(To[h])):65===h?(v=1-Vo(e,f,p),m=1-Vo(e,c,l),S.push(Bo[h])):105===h?(v=Vo(s,p,f),m=Vo(s,l,c),S.push(Bo[h])):160===h?(x=Vo(s,f,c),w=Vo(e,f,c),M=Vo(e,p,l),E=Vo(s,p,l),S.push(To[h]),S.push(Do[h])):10===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(To[h]),S.push(Do[h])):130===h?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Fo[h]),S.push(Bo[h])):40===h?(b=Vo(s,p,f),v=Vo(e,p,f),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Fo[h]),S.push(Bo[h])):101===h?(w=Vo(s,f,c),m=Vo(s,l,c),S.push(Do[h])):69===h?(w=1-Vo(e,c,f),m=1-Vo(e,c,l),S.push(Do[h])):149===h?(M=Vo(s,p,l),_=1-Vo(s,c,l),S.push(jo[h])):21===h?(M=1-Vo(e,l,p),_=Vo(e,l,c),S.push(jo[h])):86===h?(b=1-Vo(s,f,p),E=1-Vo(s,l,p),S.push(Fo[h])):84===h?(b=Vo(e,p,f),E=Vo(e,p,l),S.push(Fo[h])):89===h?(x=1-Vo(s,c,f),v=Vo(s,p,f),S.push(Bo[h])):81===h?(x=Vo(e,f,c),v=1-Vo(e,f,p),S.push(Bo[h])):96===h?(x=Vo(s,f,c),w=Vo(e,f,c),E=Vo(e,p,l),m=Vo(s,l,c),S.push(To[h]),S.push(Do[h])):74===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(To[h]),S.push(Do[h])):24===h?(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),_=Vo(e,l,c),S.push(To[h]),S.push(Bo[h])):146===h?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),_=1-Vo(s,c,l),S.push(To[h]),S.push(Bo[h])):6===h?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),S.push(Do[h]),S.push(Fo[h])):164===h?(w=Vo(s,f,c),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),S.push(Do[h]),S.push(Fo[h])):129===h?(v=1-Vo(e,f,p),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Bo[h]),S.push(jo[h])):41===h?(v=Vo(s,p,f),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Bo[h]),S.push(jo[h])):66===h?(b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(Fo[h]),S.push(Bo[h])):104===h?(b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=Vo(s,l,c),S.push(Bo[h]),S.push(Go[h])):144===h?(x=Vo(e,f,c),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l),S.push(To[h]),S.push(zo[h])):26===h?(x=1-Vo(s,c,f),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c),S.push(To[h]),S.push(zo[h])):36===h?(w=Vo(s,f,c),b=Vo(e,p,f),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Do[h]),S.push(Fo[h])):134===h?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Do[h]),S.push(Fo[h])):9===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=1-Vo(e,l,p),S.push(To[h]),S.push(Do[h])):161===h?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=Vo(s,p,l),S.push(To[h]),S.push(Do[h])):37===h?(w=Vo(s,f,c),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c),S.push(Do[h]),S.push(jo[h])):133===h?(w=1-Vo(e,c,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l),S.push(Do[h]),S.push(jo[h])):148===h?(b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l),S.push(Fo[h]),S.push(zo[h])):22===h?(b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c),S.push(Fo[h]),S.push(zo[h])):82===h?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),S.push(To[h]),S.push(Bo[h])):88===h?(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),S.push(To[h]),S.push(Bo[h])):73===h?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),m=1-Vo(e,c,l),S.push(To[h]),S.push(Do[h])):97===h?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),m=Vo(s,l,c),S.push(To[h]),S.push(Do[h])):145===h?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=Vo(s,p,l),_=1-Vo(s,c,l),S.push(To[h]),S.push(jo[h])):25===h?(x=1-Vo(s,c,f),v=Vo(s,p,f),M=1-Vo(e,l,p),_=Vo(e,l,c),S.push(To[h]),S.push(jo[h])):70===h?(w=1-Vo(e,c,f),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=1-Vo(e,c,l),S.push(Do[h]),S.push(Fo[h])):100===h?(w=Vo(s,f,c),b=Vo(e,p,f),E=Vo(e,p,l),m=Vo(s,l,c),S.push(Do[h]),S.push(Fo[h])):34===h?(0===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(To[h]),S.push(Do[h]),S.push(jo[h]),S.push(zo[h])):35===h?(4===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(To[h]),S.push(Do[h]),S.push(Bo[h]),S.push(zo[h])):136===h?(0===g?(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[h]),S.push(Do[h]),S.push(jo[h]),S.push(zo[h])):153===h?(0===g?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[h]),S.push(Bo[h])):102===h?(0===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(Do[h]),S.push(zo[h])):155===h?(4===g?(x=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[h]),S.push(jo[h])):103===h?(4===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(Do[h]),S.push(Fo[h])):152===h?(0===g?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[h]),S.push(Fo[h]),S.push(Bo[h])):156===h?(4===g?(x=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),_=Vo(e,l,c)):(x=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),_=1-Vo(s,c,l)),S.push(To[h]),S.push(Bo[h]),S.push(zo[h])):137===h?(0===g?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[h]),S.push(Do[h]),S.push(Bo[h])):139===h?(4===g?(x=Vo(s,f,c),w=Vo(e,f,c),v=1-Vo(e,f,p),M=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)):(x=1-Vo(e,c,f),w=1-Vo(s,c,f),v=Vo(s,p,f),M=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)),S.push(To[h]),S.push(Do[h]),S.push(jo[h])):98===h?(0===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(To[h]),S.push(Do[h]),S.push(zo[h])):99===h?(4===g?(x=1-Vo(e,c,f),w=1-Vo(s,c,f),b=Vo(s,p,f),v=Vo(e,p,f),E=Vo(e,p,l),m=1-Vo(e,c,l)):(x=Vo(s,f,c),w=Vo(e,f,c),b=1-Vo(e,f,p),v=1-Vo(s,f,p),E=1-Vo(s,l,p),m=Vo(s,l,c)),S.push(To[h]),S.push(Do[h]),S.push(Bo[h])):38===h?(0===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(Do[h]),S.push(jo[h]),S.push(zo[h])):39===h?(4===g?(w=1-Vo(e,c,f),b=Vo(e,p,f),M=Vo(e,p,l),E=Vo(s,p,l),m=1-Vo(s,c,l),_=1-Vo(e,c,l)):(w=Vo(s,f,c),b=1-Vo(s,f,p),M=1-Vo(s,l,p),E=1-Vo(e,l,p),m=Vo(e,l,c),_=Vo(s,l,c)),S.push(Do[h]),S.push(Fo[h]),S.push(zo[h])):85===h&&(x=1,w=0,b=1,v=0,M=0,E=1,m=0,_=1),(m<0||m>1||_<0||_>1||x<0||x>1||b<0||b>1||M<0||M>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+h+" "+d+" "+l+","+c+","+f+","+p+" "+g+" "+m+" "+_+" "+x+" "+w+" "+b+" "+v+" "+M+" "+E),o.cells[a][u]={cval:h,cval_real:d,flipped:g,topleft:m,topright:_,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:M,lefttop:E,edges:S}}}}}return o}(t,e,n);return Qi.polygons?(Qi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=qo[t.cval](t);"object"==typeof o&&Ho(o)?"object"==typeof o[0]&&Ho(o[0])?"object"==typeof o[0][0]&&Ho(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(h)):(Qi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Yo(t.cells[o][s]),u=null,h=s,l=o;null!==a&&i.push([a.p[0]+h,a.p[1]+l]);do{if(null===(u=Xo(t.cells[l][h],a.x,a.y,a.o)))break;if(i.push([u.p[0]+h,u.p[1]+l]),h+=u.x,a=u,(l+=u.y)<0||l>=n||h<0||h>=r||void 0===t.cells[l][h]){var c=Wo(t,h-=u.x,l-=u.y,u.x,u.y,u.o);if(null===c)break;c.path.forEach((function(t){i.push(t)})),h=c.i,l=c.j,a=c}}while(void 0!==t.cells[l][h]&&t.cells[l][h].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(h)),"function"==typeof Qi.successCallback&&Qi.successCallback(u),u}var to=64,eo=16,no=[],ro=[],io=[],oo=[],so=[],ao=[],uo=[],ho=[],lo=[],co=[],fo=[],po=[],go=[],yo=[],mo=[],_o=[],vo=[],bo=[],xo=[],wo=[],Eo=[],Mo=[],So=[],Io=[];uo[85]=co[85]=-1,ho[85]=fo[85]=0,lo[85]=po[85]=1,xo[85]=Mo[85]=1,wo[85]=So[85]=0,Eo[85]=Io[85]=1,no[85]=oo[85]=0,ro[85]=so[85]=-1,io[85]=mo[85]=0,_o[85]=go[85]=0,vo[85]=yo[85]=1,ao[85]=bo[85]=1,Mo[1]=Mo[169]=0,So[1]=So[169]=-1,Io[1]=Io[169]=0,go[1]=go[169]=-1,yo[1]=yo[169]=0,mo[1]=mo[169]=0,co[4]=co[166]=0,fo[4]=fo[166]=-1,po[4]=po[166]=1,_o[4]=_o[166]=1,vo[4]=vo[166]=0,bo[4]=bo[166]=0,uo[16]=uo[154]=0,ho[16]=ho[154]=1,lo[16]=lo[154]=1,oo[16]=oo[154]=1,so[16]=so[154]=0,ao[16]=ao[154]=1,xo[64]=xo[106]=0,wo[64]=wo[106]=1,Eo[64]=Eo[106]=0,no[64]=no[106]=-1,ro[64]=ro[106]=0,io[64]=io[106]=1,xo[2]=xo[168]=0,wo[2]=wo[168]=-1,Eo[2]=Eo[168]=1,Mo[2]=Mo[168]=0,So[2]=So[168]=-1,Io[2]=Io[168]=0,go[2]=go[168]=-1,yo[2]=yo[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,vo[2]=vo[168]=0,bo[2]=bo[168]=1,uo[8]=uo[162]=0,ho[8]=ho[162]=-1,lo[8]=lo[162]=0,co[8]=co[162]=0,fo[8]=fo[162]=-1,po[8]=po[162]=1,go[8]=go[162]=1,yo[8]=yo[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,vo[8]=vo[162]=0,bo[8]=bo[162]=0,uo[32]=uo[138]=0,ho[32]=ho[138]=1,lo[32]=lo[138]=1,co[32]=co[138]=0,fo[32]=fo[138]=1,po[32]=po[138]=0,no[32]=no[138]=1,ro[32]=ro[138]=0,io[32]=io[138]=0,oo[32]=oo[138]=1,so[32]=so[138]=0,ao[32]=ao[138]=1,Mo[128]=Mo[42]=0,So[128]=So[42]=1,Io[128]=Io[42]=1,xo[128]=xo[42]=0,wo[128]=wo[42]=1,Eo[128]=Eo[42]=0,no[128]=no[42]=-1,ro[128]=ro[42]=0,io[128]=io[42]=1,oo[128]=oo[42]=-1,so[128]=so[42]=0,ao[128]=ao[42]=0,co[5]=co[165]=-1,fo[5]=fo[165]=0,po[5]=po[165]=0,Mo[5]=Mo[165]=1,So[5]=So[165]=0,Io[5]=Io[165]=0,_o[20]=_o[150]=0,vo[20]=vo[150]=1,bo[20]=bo[150]=1,oo[20]=oo[150]=0,so[20]=so[150]=-1,ao[20]=ao[150]=1,uo[80]=uo[90]=-1,ho[80]=ho[90]=0,lo[80]=lo[90]=1,xo[80]=xo[90]=1,wo[80]=wo[90]=0,Eo[80]=Eo[90]=1,go[65]=go[105]=0,yo[65]=yo[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,ro[65]=ro[105]=-1,io[65]=io[105]=0,uo[160]=uo[10]=-1,ho[160]=ho[10]=0,lo[160]=lo[10]=1,co[160]=co[10]=-1,fo[160]=fo[10]=0,po[160]=po[10]=0,Mo[160]=Mo[10]=1,So[160]=So[10]=0,Io[160]=Io[10]=0,xo[160]=xo[10]=1,wo[160]=wo[10]=0,Eo[160]=Eo[10]=1,_o[130]=_o[40]=0,vo[130]=vo[40]=1,bo[130]=bo[40]=1,go[130]=go[40]=0,yo[130]=yo[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,ro[130]=ro[40]=-1,io[130]=io[40]=0,oo[130]=oo[40]=0,so[130]=so[40]=-1,ao[130]=ao[40]=1,co[37]=co[133]=0,fo[37]=fo[133]=1,po[37]=po[133]=1,Mo[37]=Mo[133]=0,So[37]=So[133]=1,Io[37]=Io[133]=0,no[37]=no[133]=-1,ro[37]=ro[133]=0,io[37]=io[133]=0,oo[37]=oo[133]=1,so[37]=so[133]=0,ao[37]=ao[133]=0,_o[148]=_o[22]=-1,vo[148]=vo[22]=0,bo[148]=bo[22]=0,Mo[148]=Mo[22]=0,So[148]=So[22]=-1,Io[148]=Io[22]=1,xo[148]=xo[22]=0,wo[148]=wo[22]=1,Eo[148]=Eo[22]=1,oo[148]=oo[22]=-1,so[148]=so[22]=0,ao[148]=ao[22]=1,uo[82]=uo[88]=0,ho[82]=ho[88]=-1,lo[82]=lo[88]=1,_o[82]=_o[88]=1,vo[82]=vo[88]=0,bo[82]=bo[88]=1,go[82]=go[88]=-1,yo[82]=yo[88]=0,mo[82]=mo[88]=1,xo[82]=xo[88]=0,wo[82]=wo[88]=-1,Eo[82]=Eo[88]=0,uo[73]=uo[97]=0,ho[73]=ho[97]=1,lo[73]=lo[97]=0,co[73]=co[97]=0,fo[73]=fo[97]=-1,po[73]=po[97]=0,go[73]=go[97]=1,yo[73]=yo[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,ro[73]=ro[97]=0,io[73]=io[97]=1,uo[145]=uo[25]=0,ho[145]=ho[25]=-1,lo[145]=lo[25]=0,go[145]=go[25]=1,yo[145]=yo[25]=0,mo[145]=mo[25]=1,Mo[145]=Mo[25]=0,So[145]=So[25]=1,Io[145]=Io[25]=1,oo[145]=oo[25]=-1,so[145]=so[25]=0,ao[145]=ao[25]=0,co[70]=co[100]=0,fo[70]=fo[100]=1,po[70]=po[100]=0,_o[70]=_o[100]=-1,vo[70]=vo[100]=0,bo[70]=bo[100]=1,xo[70]=xo[100]=0,wo[70]=wo[100]=-1,Eo[70]=Eo[100]=1,no[70]=no[100]=1,ro[70]=ro[100]=0,io[70]=io[100]=0,co[101]=co[69]=0,fo[101]=fo[69]=1,po[101]=po[69]=0,no[101]=no[69]=1,ro[101]=ro[69]=0,io[101]=io[69]=0,Mo[149]=Mo[21]=0,So[149]=So[21]=1,Io[149]=Io[21]=1,oo[149]=oo[21]=-1,so[149]=so[21]=0,ao[149]=ao[21]=0,_o[86]=_o[84]=-1,vo[86]=vo[84]=0,bo[86]=bo[84]=1,xo[86]=xo[84]=0,wo[86]=wo[84]=-1,Eo[86]=Eo[84]=1,uo[89]=uo[81]=0,ho[89]=ho[81]=-1,lo[89]=lo[81]=0,go[89]=go[81]=1,yo[89]=yo[81]=0,mo[89]=mo[81]=1,uo[96]=uo[74]=0,ho[96]=ho[74]=1,lo[96]=lo[74]=0,co[96]=co[74]=-1,fo[96]=fo[74]=0,po[96]=po[74]=1,xo[96]=xo[74]=1,wo[96]=wo[74]=0,Eo[96]=Eo[74]=0,no[96]=no[74]=1,ro[96]=ro[74]=0,io[96]=io[74]=1,uo[24]=uo[146]=0,ho[24]=ho[146]=-1,lo[24]=lo[146]=1,_o[24]=_o[146]=1,vo[24]=vo[146]=0,bo[24]=bo[146]=1,go[24]=go[146]=0,yo[24]=yo[146]=1,mo[24]=mo[146]=1,oo[24]=oo[146]=0,so[24]=so[146]=-1,ao[24]=ao[146]=0,co[6]=co[164]=-1,fo[6]=fo[164]=0,po[6]=po[164]=1,_o[6]=_o[164]=-1,vo[6]=vo[164]=0,bo[6]=bo[164]=0,Mo[6]=Mo[164]=0,So[6]=So[164]=-1,Io[6]=Io[164]=1,xo[6]=xo[164]=1,wo[6]=wo[164]=0,Eo[6]=Eo[164]=0,go[129]=go[41]=0,yo[129]=yo[41]=1,mo[129]=mo[41]=1,Mo[129]=Mo[41]=0,So[129]=So[41]=1,Io[129]=Io[41]=0,no[129]=no[41]=-1,ro[129]=ro[41]=0,io[129]=io[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=-1,ao[129]=ao[41]=0,_o[66]=_o[104]=0,vo[66]=vo[104]=1,bo[66]=bo[104]=0,go[66]=go[104]=-1,yo[66]=yo[104]=0,mo[66]=mo[104]=1,xo[66]=xo[104]=0,wo[66]=wo[104]=-1,Eo[66]=Eo[104]=0,no[66]=no[104]=0,ro[66]=ro[104]=-1,io[66]=io[104]=1,uo[144]=uo[26]=-1,ho[144]=ho[26]=0,lo[144]=lo[26]=0,Mo[144]=Mo[26]=1,So[144]=So[26]=0,Io[144]=Io[26]=1,xo[144]=xo[26]=0,wo[144]=wo[26]=1,Eo[144]=Eo[26]=1,oo[144]=oo[26]=-1,so[144]=so[26]=0,ao[144]=ao[26]=1,co[36]=co[134]=0,fo[36]=fo[134]=1,po[36]=po[134]=1,_o[36]=_o[134]=0,vo[36]=vo[134]=1,bo[36]=bo[134]=0,no[36]=no[134]=0,ro[36]=ro[134]=-1,io[36]=io[134]=1,oo[36]=oo[134]=1,so[36]=so[134]=0,ao[36]=ao[134]=0,uo[9]=uo[161]=-1,ho[9]=ho[161]=0,lo[9]=lo[161]=0,co[9]=co[161]=0,fo[9]=fo[161]=-1,po[9]=po[161]=0,go[9]=go[161]=1,yo[9]=yo[161]=0,mo[9]=mo[161]=0,Mo[9]=Mo[161]=1,So[9]=So[161]=0,Io[9]=Io[161]=1,uo[136]=0,ho[136]=1,lo[136]=1,co[136]=0,fo[136]=1,po[136]=0,_o[136]=-1,vo[136]=0,bo[136]=1,go[136]=-1,yo[136]=0,mo[136]=0,Mo[136]=0,So[136]=-1,Io[136]=0,xo[136]=0,wo[136]=-1,Eo[136]=1,no[136]=1,ro[136]=0,io[136]=0,oo[136]=1,so[136]=0,ao[136]=1,uo[34]=0,ho[34]=-1,lo[34]=0,co[34]=0,fo[34]=-1,po[34]=1,_o[34]=1,vo[34]=0,bo[34]=0,go[34]=1,yo[34]=0,mo[34]=1,Mo[34]=0,So[34]=1,Io[34]=1,xo[34]=0,wo[34]=1,Eo[34]=0,no[34]=-1,ro[34]=0,io[34]=1,oo[34]=-1,so[34]=0,ao[34]=0,uo[35]=0,ho[35]=1,lo[35]=1,co[35]=0,fo[35]=-1,po[35]=1,_o[35]=1,vo[35]=0,bo[35]=0,go[35]=-1,yo[35]=0,mo[35]=0,Mo[35]=0,So[35]=-1,Io[35]=0,xo[35]=0,wo[35]=1,Eo[35]=0,no[35]=-1,ro[35]=0,io[35]=1,oo[35]=1,so[35]=0,ao[35]=1,uo[153]=0,ho[153]=1,lo[153]=1,go[153]=-1,yo[153]=0,mo[153]=0,Mo[153]=0,So[153]=-1,Io[153]=0,oo[153]=1,so[153]=0,ao[153]=1,co[102]=0,fo[102]=-1,po[102]=1,_o[102]=1,vo[102]=0,bo[102]=0,xo[102]=0,wo[102]=1,Eo[102]=0,no[102]=-1,ro[102]=0,io[102]=1,uo[155]=0,ho[155]=-1,lo[155]=0,go[155]=1,yo[155]=0,mo[155]=1,Mo[155]=0,So[155]=1,Io[155]=1,oo[155]=-1,so[155]=0,ao[155]=0,co[103]=0,fo[103]=1,po[103]=0,_o[103]=-1,vo[103]=0,bo[103]=1,xo[103]=0,wo[103]=-1,Eo[103]=1,no[103]=1,ro[103]=0,io[103]=0,uo[152]=0,ho[152]=1,lo[152]=1,_o[152]=-1,vo[152]=0,bo[152]=1,go[152]=-1,yo[152]=0,mo[152]=0,Mo[152]=0,So[152]=-1,Io[152]=0,xo[152]=0,wo[152]=-1,Eo[152]=1,oo[152]=1,so[152]=0,ao[152]=1,uo[156]=0,ho[156]=-1,lo[156]=1,_o[156]=1,vo[156]=0,bo[156]=1,go[156]=-1,yo[156]=0,mo[156]=0,Mo[156]=0,So[156]=-1,Io[156]=0,xo[156]=0,wo[156]=1,Eo[156]=1,oo[156]=-1,so[156]=0,ao[156]=1,uo[137]=0,ho[137]=1,lo[137]=1,co[137]=0,fo[137]=1,po[137]=0,go[137]=-1,yo[137]=0,mo[137]=0,Mo[137]=0,So[137]=-1,Io[137]=0,no[137]=1,ro[137]=0,io[137]=0,oo[137]=1,so[137]=0,ao[137]=1,uo[139]=0,ho[139]=1,lo[139]=1,co[139]=0,fo[139]=-1,po[139]=0,go[139]=1,yo[139]=0,mo[139]=0,Mo[139]=0,So[139]=1,Io[139]=0,no[139]=-1,ro[139]=0,io[139]=0,oo[139]=1,so[139]=0,ao[139]=1,uo[98]=0,ho[98]=-1,lo[98]=0,co[98]=0,fo[98]=-1,po[98]=1,_o[98]=1,vo[98]=0,bo[98]=0,go[98]=1,yo[98]=0,mo[98]=1,xo[98]=0,wo[98]=1,Eo[98]=0,no[98]=-1,ro[98]=0,io[98]=1,uo[99]=0,ho[99]=1,lo[99]=0,co[99]=0,fo[99]=-1,po[99]=1,_o[99]=1,vo[99]=0,bo[99]=0,go[99]=-1,yo[99]=0,mo[99]=1,xo[99]=0,wo[99]=-1,Eo[99]=0,no[99]=1,ro[99]=0,io[99]=1,co[38]=0,fo[38]=-1,po[38]=1,_o[38]=1,vo[38]=0,bo[38]=0,Mo[38]=0,So[38]=1,Io[38]=1,xo[38]=0,wo[38]=1,Eo[38]=0,no[38]=-1,ro[38]=0,io[38]=1,oo[38]=-1,so[38]=0,ao[38]=0,co[39]=0,fo[39]=1,po[39]=1,_o[39]=-1,vo[39]=0,bo[39]=0,Mo[39]=0,So[39]=-1,Io[39]=1,xo[39]=0,wo[39]=1,Eo[39]=0,no[39]=-1,ro[39]=0,io[39]=1,oo[39]=1,so[39]=0,ao[39]=0;var Co=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Po=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Lo=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},No=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ao=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ko=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ro=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},To=[],Do=[],Fo=[],Bo=[],jo=[],zo=[],Go=[],Uo=[];Bo[1]=jo[1]=18,Bo[169]=jo[169]=18,Fo[4]=Do[4]=12,Fo[166]=Do[166]=12,To[16]=Uo[16]=4,To[154]=Uo[154]=4,zo[64]=Go[64]=22,zo[106]=Go[106]=22,Fo[2]=zo[2]=17,Bo[2]=jo[2]=18,Fo[168]=zo[168]=17,Bo[168]=jo[168]=18,To[8]=Bo[8]=9,Do[8]=Fo[8]=12,To[162]=Bo[162]=9,Do[162]=Fo[162]=12,To[32]=Uo[32]=4,Do[32]=Go[32]=1,To[138]=Uo[138]=4,Do[138]=Go[138]=1,jo[128]=Uo[128]=21,zo[128]=Go[128]=22,jo[42]=Uo[42]=21,zo[42]=Go[42]=22,Do[5]=jo[5]=14,Do[165]=jo[165]=14,Fo[20]=Uo[20]=6,Fo[150]=Uo[150]=6,To[80]=zo[80]=11,To[90]=zo[90]=11,Bo[65]=Go[65]=3,Bo[105]=Go[105]=3,To[160]=zo[160]=11,Do[160]=jo[160]=14,To[10]=zo[10]=11,Do[10]=jo[10]=14,Fo[130]=Uo[130]=6,Bo[130]=Go[130]=3,Fo[40]=Uo[40]=6,Bo[40]=Go[40]=3,Do[101]=Go[101]=1,Do[69]=Go[69]=1,jo[149]=Uo[149]=21,jo[21]=Uo[21]=21,Fo[86]=zo[86]=17,Fo[84]=zo[84]=17,To[89]=Bo[89]=9,To[81]=Bo[81]=9,To[96]=Go[96]=0,Do[96]=zo[96]=15,To[74]=Go[74]=0,Do[74]=zo[74]=15,To[24]=Fo[24]=8,Bo[24]=Uo[24]=7,To[146]=Fo[146]=8,Bo[146]=Uo[146]=7,Do[6]=zo[6]=15,Fo[6]=jo[6]=16,Do[164]=zo[164]=15,Fo[164]=jo[164]=16,Bo[129]=Uo[129]=7,jo[129]=Go[129]=20,Bo[41]=Uo[41]=7,jo[41]=Go[41]=20,Fo[66]=Go[66]=2,Bo[66]=zo[66]=19,Fo[104]=Go[104]=2,Bo[104]=zo[104]=19,To[144]=jo[144]=10,zo[144]=Uo[144]=23,To[26]=jo[26]=10,zo[26]=Uo[26]=23,Do[36]=Uo[36]=5,Fo[36]=Go[36]=2,Do[134]=Uo[134]=5,Fo[134]=Go[134]=2,To[9]=jo[9]=10,Do[9]=Bo[9]=13,To[161]=jo[161]=10,Do[161]=Bo[161]=13,Do[37]=Uo[37]=5,jo[37]=Go[37]=20,Do[133]=Uo[133]=5,jo[133]=Go[133]=20,Fo[148]=jo[148]=16,zo[148]=Uo[148]=23,Fo[22]=jo[22]=16,zo[22]=Uo[22]=23,To[82]=Fo[82]=8,Bo[82]=zo[82]=19,To[88]=Fo[88]=8,Bo[88]=zo[88]=19,To[73]=Go[73]=0,Do[73]=Bo[73]=13,To[97]=Go[97]=0,Do[97]=Bo[97]=13,To[145]=Bo[145]=9,jo[145]=Uo[145]=21,To[25]=Bo[25]=9,jo[25]=Uo[25]=21,Do[70]=Go[70]=1,Fo[70]=zo[70]=17,Do[100]=Go[100]=1,Fo[100]=zo[100]=17,To[34]=Bo[34]=9,Do[34]=Fo[34]=12,jo[34]=Uo[34]=21,zo[34]=Go[34]=22,To[136]=Uo[136]=4,Do[136]=Go[136]=1,Fo[136]=zo[136]=17,Bo[136]=jo[136]=18,To[35]=Uo[35]=4,Do[35]=Fo[35]=12,Bo[35]=jo[35]=18,zo[35]=Go[35]=22,To[153]=Uo[153]=4,Bo[153]=jo[153]=18,Do[102]=Fo[102]=12,zo[102]=Go[102]=22,To[155]=Bo[155]=9,jo[155]=Uo[155]=23,Do[103]=Go[103]=1,Fo[103]=zo[103]=17,To[152]=Uo[152]=4,Fo[152]=zo[152]=17,Bo[152]=jo[152]=18,To[156]=Fo[156]=8,Bo[156]=jo[156]=18,zo[156]=Uo[156]=23,To[137]=Uo[137]=4,Do[137]=Go[137]=1,Bo[137]=jo[137]=18,To[139]=Uo[139]=4,Do[139]=Bo[139]=13,jo[139]=Go[139]=20,To[98]=Bo[98]=9,Do[98]=Fo[98]=12,zo[98]=Go[98]=22,To[99]=Go[99]=0,Do[99]=Fo[99]=12,Bo[99]=zo[99]=19,Do[38]=Fo[38]=12,jo[38]=Uo[38]=21,zo[38]=Go[38]=22,Do[39]=Uo[39]=5,Fo[39]=jo[39]=16,zo[39]=Go[39]=22;var qo=[];function Vo(t,e,n){return(t-e)/(n-e)}function Ho(t){return t.constructor.toString().indexOf("Array")>-1}function Wo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,h=n+i,l=[],c=!1;!c;){if(void 0===t.cells[h]||void 0===t.cells[h][u])if(h-=i,u-=r,a=(s=t.cells[h][u]).cval_real,-1===i)if(0===o)if(1&a)l.push([u,h]),r=-1,i=0,o=0;else{if(!(4&a)){l.push([u+s.bottomright,h]),r=0,i=1,o=1,c=!0;break}l.push([u+1,h]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){l.push([u+s.bottomright,h]),r=0,i=1,o=1,c=!0;break}l.push([u+s.bottomleft,h]),r=0,i=1,o=0,c=!0;break}l.push([u,h]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&eo)){if(a&to){l.push([u+s.topleft,h+1]),r=0,i=-1,o=0,c=!0;break}l.push([u+s.topright,h+1]),r=0,i=-1,o=1,c=!0;break}l.push([u+1,h+1]),r=1,i=0,o=1}else l.push([u+1,h+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&to)){if(1&a){l.push([u,h+s.leftbottom]),r=1,i=0,o=0,c=!0;break}l.push([u,h+s.lefttop]),r=1,i=0,o=1,c=!0;break}l.push([u,h+1]),r=0,i=1,o=0}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,h+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){l.push([u+1,h+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}l.push([u+1,h]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&eo){l.push([u+1,h+s.righttop]),r=-1,i=0,o=1;break}l.push([u+1,h+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}l.push([u+1,h]),r=0,i=-1,o=1}}else if(a=(s=t.cells[h][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[h-1]&&void 0!==t.cells[h-1][u])r=0,i=-1,o=1;else{if(!(1&a)){l.push([u+s.bottomright,h]),r=0,i=1,o=1,c=!0;break}l.push([u,h])}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+h);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h+1]&&void 0!==t.cells[h+1][u])r=0,i=1,o=0;else{if(!(a&eo)){l.push([u+s.topleft,h+1]),r=0,i=-1,o=0,c=!0;break}l.push([u+1,h+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h][u+1])r=1,i=0,o=1;else{if(!(4&a)){l.push([u+1,h+s.righttop]),r=-1,i=0,o=1,c=!0;break}l.push([u+1,h]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[h][u-1])r=-1,i=0,o=0;else{if(!(a&to)){l.push([u,h+s.leftbottom]),r=1,i=0,o=0,c=!0;break}l.push([u,h+1]),r=0,i=1,o=0}}if(h+=i,(u+=r)===e&&h===n)break}return{path:l,i:u,j:h,x:r,y:i,o:o}}function Yo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&to?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&to?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&to?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&to?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&eo?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&eo?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Xo(t,e,n,r){var i,o,s,a,u,h=t.cval;switch(e){case-1:0===r?(i=Do[h],s=co[h],a=fo[h],u=po[h]):(i=To[h],s=uo[h],a=ho[h],u=lo[h]);break;case 1:0===r?(i=jo[h],s=Mo[h],a=So[h],u=Io[h]):(i=zo[h],s=xo[h],a=wo[h],u=Eo[h]);break;default:switch(n){case-1:0===r?(i=Go[h],s=no[h],a=ro[h],u=io[h]):(i=Uo[h],s=oo[h],a=so[h],u=ao[h]);break;case 1:0===r?(i=Bo[h],s=go[h],a=yo[h],u=mo[h]):(i=Fo[h],s=_o[h],a=vo[h],u=bo[h])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),h=t.cval_real,i){case 0:h&eo?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&h?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&h?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&h?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:h&eo?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&h?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&h?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&h?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&h?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&h?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&h?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:h&to?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&h?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&h?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&h?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:h&to?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&h?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:h&to?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&h?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:h&to?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:h&to?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:h&eo?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:h&to?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:h&eo?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Zo(t){var e=[],n=[];t.forEach((function(t){var r=Ur(h([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Jo(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!Qo(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=h([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||Ko(h([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function Ko(t,e){for(var n=wn(t),r=0;r<n.features.length;r++)if(!ye(n.features[r],e))return!1;return!0}function Qo(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function $o(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=xn(t)),!1!==i&&void 0!==i||(t=Me(t)),A(t,(function(t){var n=zi(r,t)+e,i=Rr(r,t),o=Q(Ui(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function ts(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Me(t)),"FeatureCollection"!==t.type||o?es(t,e,r):(D(t,(function(n,i){t.features[i]=es(n,e,r)})),t)}function es(t,e,n){var r="Point"===it(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return K(e);var n=t.bbox?t.bbox:J(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return a([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return a([o,s]);case"center":return bn(t);case void 0:case null:case"centroid":return xn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||A(t,(function(t){var r=Rr(n,t),i=zi(n,t),o=Q(Ui(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ns(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function rs(t,e){return t[0]*e[1]-e[0]*t[1]}function is(t,e){return!function(t,e){return 0===rs(ns(t),ns(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=ns(t),s=e[0],a=ns(e),u=rs(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(rs((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o))}(t,e)}function os(t,e,n){var r=[],i=x(e,n),o=Q(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(h=t,l=o[e+1],c=i,f=Math.sqrt((h[0]-l[0])*(h[0]-l[0])+(h[1]-l[1])*(h[1]-l[1])),p=h[0]+c*(l[1]-h[1])/f,d=l[0]+c*(l[1]-h[1])/f,[[p,h[1]+c*(h[0]-l[0])/f],[d,l[1]+c*(h[0]-l[0])/f]]);if(r.push(n),e>0){var a=r[e-1],u=is(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var h,l,c,f,p,d})),c(s,t.properties)}function ss(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function as(t,e){return e.geometry.coordinates[0].every((function(e){return ye(a(e),t)}))}qo[1]=qo[169]=Co,qo[4]=qo[166]=Po,qo[16]=qo[154]=Lo,qo[64]=qo[106]=No,qo[168]=qo[2]=Oo,qo[162]=qo[8]=Ao,qo[138]=qo[32]=ko,qo[42]=qo[128]=Ro,qo[5]=qo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},qo[20]=qo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},qo[80]=qo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},qo[65]=qo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},qo[160]=qo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},qo[130]=qo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},qo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},qo[101]=qo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},qo[149]=qo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},qo[86]=qo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},qo[89]=qo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},qo[96]=qo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},qo[24]=qo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},qo[6]=qo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},qo[129]=qo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},qo[66]=qo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},qo[144]=qo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},qo[36]=qo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},qo[9]=qo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},qo[37]=qo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},qo[148]=qo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},qo[82]=qo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},qo[73]=qo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},qo[145]=qo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},qo[70]=qo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},qo[34]=function(t){return[Ro(t),Ao(t)]},qo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},qo[136]=function(t){return[ko(t),Oo(t)]},qo[153]=function(t){return[Lo(t),Co(t)]},qo[102]=function(t){return[Po(t),No(t)]},qo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},qo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},qo[152]=function(t){return[Lo(t),Oo(t)]},qo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},qo[137]=function(t){return[ko(t),Co(t)]},qo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},qo[98]=function(t){return[Ao(t),No(t)]},qo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},qo[38]=function(t){return[Po(t),Ro(t)]},qo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var us=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=ss(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),hs=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return c([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return ss(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),ls=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=ss(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return g(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=h([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=gn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,u,h,l,c,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,u=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),h=o.geometry.coordinates[0].map((function(t){return t[1]})),l=s.geometry.coordinates[0].map((function(t){return t[0]})),c=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,u)!==Math.max.apply(null,l)||Math.max.apply(null,h)!==Math.max.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,l)||Math.min.apply(null,h)!==Math.min.apply(null,c))&&as(f,i)){for(var p=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){var n,r;return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1]}))||(d=t)},y=0,m=p;y<m.length;y++)g(m[y]);d&&e.inside(a(d))&&(r&&!as(n,f)||(r=e))}})),r},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),cs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return G(e,(function(t){et(t,"LineString","Graph::fromGeoJson"),k(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=us.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new us(t)),n},t.prototype.addEdge=function(t,e){var n=new hs(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,h=void 0;s.label===e&&(u=s),a.label===e&&(h=a),u&&h&&(h&&(r=h),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new ls;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function fs(t,e){var n=!0;return G(t,(function(t){G(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!ps(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!ps(t,e);case"LineString":return!function(t,e){return Or(t,e).features.length>0}(t,e);case"Polygon":return!ds(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!ds(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ye(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(ye(o[i],t))return!0;return Or(Mi(t),Mi(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function ps(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(gs(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ds(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ye(r[n],t))return!0;return Or(e,Mi(t)).features.length>0}function gs(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ys(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function _s(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function vs(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),ws(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function bs(t,e){return Or(t,Si(e)).features.length>0}function xs(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)ye(a(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function ws(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Es=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Is};function Ms(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ss(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Is(t,e){return Di(t,e,{strict:!0})}Es.prototype.compare=function(t,e){if(t.type!==e.type||!Ss(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Ms(t),i=Ms(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Es.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Es.prototype.compareLine=function(t,e,n,r){if(!Ss(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Es.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Es.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Es.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Es.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Es.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Es.prototype.removePseudo=function(t){return t};var Cs=Es;function Ps(t,e){var n=!1;return G(t,(function(t){G(e,(function(e){if(!0===n)return!0;n=!fs(t.geometry,e.geometry)}))})),n}var Ls=zt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ns=zt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var h=0;h<n;h++){var l=this.dataset[h].length;if(o===this.assignments[h]){for(u=0;u<l;u++)s[u]+=this.dataset[h][u];a++}}if(a>0){for(u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Os=zt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),As=zt((function(t){if(t.exports)var e=Os;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),h=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,h,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),ks=zt((function(t){t.exports&&(t.exports={DBSCAN:Ls,KMEANS:Ns,OPTICS:As,PriorityQueue:Os})})),Rs=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},Ts=Rs,Ds=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Fs=Rs,Bs=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},js=function(t,e){var n=t[0].length?Ts:Ds,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,h=0,l=[],c=0;c<i;c++){for(var f=1/0,p=0;p<u;p++){var d=n(t[c],r[p]);d<=f&&(f=d)}a[c]=f}for(var g=0;g<i;g++)h+=a[g];for(var y=0;y<i;y++)l[y]={i:y,v:t[y],pr:a[y]/h,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var m=1;m<i;m++)l[m].cs=l[m-1].cs+l[m].pr;for(var _=Math.random(),v=0;v<i-1&&l[v++].cs<_;);r.push(l[v-1].v)}return r};function zs(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var Gs=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,h=r||1e4,l=t.length,c=t[0].length,f=c>0,p=[];if(n)i="kmrand"==n?Bs(t,e):"kmpp"==n?js(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{zs(e,0,p);for(var y=0;y<l;y++){for(var m=1/0,_=0,v=0;v<e;v++)(a=f?Fs(t[y],i[v]):Math.abs(t[y]-i[v]))<=m&&(m=a,_=v);s[y]=_,p[_]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?zs(c,0,b[x]):0,o[x]=i[x];if(f){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<l;E++)for(var M=b[s[E]],S=t[E],I=0;I<c;I++)M[I]+=S[I];u=!0;for(var C=0;C<e;C++){for(var P=i[C],L=b[C],N=o[C],O=p[C],A=0;A<c;A++)P[A]=L[A]/O||0;if(u)for(var k=0;k<c;k++)if(N[k]!=P[k]){u=!1;break}}}else{for(var R=0;R<l;R++)b[s[R]]+=t[R];for(var T=0;T<e;T++)i[T]=b[T]/p[T]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--h<=0}while(!u);return{it:1e4-h,k:e,idxs:s,centroids:i}};function Us(t,e){return w(zi(t[0],t[1]))===w(zi(e[0],e[1]))}function qs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Vs(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Hs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Hs.heuristics.manhattan,o=r.closest||!1,s=new Xs((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Vs(u);u.closed=!0;for(var h=t.neighbors(u),l=0,c=h.length;l<c;++l){var f=h[l];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Vs(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ws(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ys(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ys(t,e,n){this.x=t,this.y=e,this.weight=n}function Xs(t){this.content=[],this.scoreFunction=t}function Zs(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function Js(t){return function(){return t}}function Ks(t){return t[0]}function Qs(t){return t[1]}function $s(){this._=null}function ta(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ea(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function na(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ra(t){for(;t.L;)t=t.L;return t}function ia(t,e,n,r){var i=[null,null],o=Pa.push(i)-1;return i.left=t,i.right=e,n&&sa(i,t,e,n),r&&sa(i,e,t,r),Ia[t.index].halfedges.push(o),Ia[e.index].halfedges.push(o),i}function oa(t,e,n){var r=[e,n];return r.left=t,r}function sa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function aa(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],h=s[1],l=0,c=1,f=a[0]-u,p=a[1]-h;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=n-h,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>l&&(l=o)}if(o=i-h,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<c&&(c=o)}return!(l>0||c<1)||(l>0&&(t[0]=[u+l*f,h+l*p]),c<1&&(t[1]=[u+c*f,h+c*p]),!0)}}}}}function ua(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],h=t.left,l=t.right,c=h[0],f=h[1],p=l[0],d=l[1],g=(c+p)/2,y=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(c>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=y-(s=(c-p)/(d-f))*g,s<-1||s>1)if(c>p){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ha(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function la(t,e){return e[+(e.left!==t.site)]}function ca(t,e){return e[+(e.left===t.site)]}Ws.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Hs.cleanNode(this.nodes[t])},Ws.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Hs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ws.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ws.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ws.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ys.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ys.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ys.prototype.isWall=function(){return 0===this.weight},Xs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var h=this.content[o];this.scoreFunction(h)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},$s.prototype={constructor:$s,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ra(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ea(this,n),n=(t=n).U),n.C=!1,r.C=!0,na(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(na(this,n),n=(t=n).U),n.C=!1,r.C=!0,ea(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ra(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ea(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ea(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ea(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var fa,pa=[];function da(){ta(this),this.x=this.y=this.arc=this.site=this.cy=null}function ga(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,h=r[1]-a,l=o[0]-s,c=o[1]-a,f=2*(u*c-h*l);if(!(f>=-Na)){var p=u*u+h*h,d=l*l+c*c,g=(c*p-h*d)/f,y=(u*d-l*p)/f,m=pa.pop()||new da;m.arc=t,m.site=i,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var _=null,v=Ca._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}Ca.insert(_,m),_||(fa=m)}}}}function ya(t){var e=t.circle;e&&(e.P||(fa=e.N),Ca.remove(e),pa.push(e),ta(e),t.circle=null)}var ma=[];function _a(){ta(this),this.edge=this.site=this.circle=null}function va(t){var e=ma.pop()||new _a;return e.site=t,e}function ba(t){ya(t),Sa.remove(t),ma.push(t),ta(t)}function xa(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];ba(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<La&&Math.abs(r-u.circle.cy)<La;)o=u.P,a.unshift(u),ba(u),u=o;a.unshift(u),ya(u);for(var h=s;h.circle&&Math.abs(n-h.circle.x)<La&&Math.abs(r-h.circle.cy)<La;)s=h.N,a.push(h),ba(h),h=s;a.push(h),ya(h);var l,c=a.length;for(l=1;l<c;++l)h=a[l],u=a[l-1],sa(h.edge,u.site,h.site,i);u=a[0],(h=a[c-1]).edge=ia(u.site,h.site,null,i),ga(u),ga(h)}function wa(t){for(var e,n,r,i,o=t[0],s=t[1],a=Sa._;a;)if((r=Ea(a,s)-o)>La)a=a.L;else{if(!((i=o-Ma(a,s))>La)){r>-La?(e=a.P,n=a):i>-La?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ia[t.index]={site:t,halfedges:[]}}(t);var u=va(t);if(Sa.insert(e,u),e||n){if(e===n)return ya(e),n=va(e.site),Sa.insert(u,n),u.edge=n.edge=ia(e.site,u.site),ga(e),void ga(n);if(n){ya(e),ya(n);var h=e.site,l=h[0],c=h[1],f=t[0]-l,p=t[1]-c,d=n.site,g=d[0]-l,y=d[1]-c,m=2*(f*y-p*g),_=f*f+p*p,v=g*g+y*y,b=[(y*_-p*v)/m+l,(f*v-g*_)/m+c];sa(n.edge,h,d,b),u.edge=ia(h,t,null,b),n.edge=ia(t,d,null,b),ga(e),ga(n)}else u.edge=ia(e.site,u.site)}}function Ea(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],h=u-e;if(!h)return a;var l=a-r,c=1/o-1/h,f=l/h;return c?(-f+Math.sqrt(f*f-2*c*(l*l/(-2*h)-u+h/2+i-o/2)))/c+r:(r+a)/2}function Ma(t,e){var n=t.N;if(n)return Ea(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Sa,Ia,Ca,Pa,La=1e-6,Na=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function Aa(t,e){var n,r,i,o=t.sort(Oa).pop();for(Pa=[],Ia=new Array(t.length),Sa=new $s,Ca=new $s;;)if(i=fa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(wa(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;xa(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ia.length;i<o;++i)if((t=Ia[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ha(t,Pa[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],h=+e[1][1];!function(t,e,n,r){for(var i,o=Pa.length;o--;)ua(i=Pa[o],t,e,n,r)&&aa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>La||Math.abs(i[0][1]-i[1][1])>La)||delete Pa[o]}(s,a,u,h),function(t,e,n,r){var i,o,s,a,u,h,l,c,f,p,d,g,y=Ia.length,m=!0;for(i=0;i<y;++i)if(o=Ia[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Pa[u[a]]||u.splice(a,1);for(a=0,h=u.length;a<h;)d=(p=ca(o,Pa[u[a]]))[0],g=p[1],c=(l=la(o,Pa[u[++a%h]]))[0],f=l[1],(Math.abs(d-c)>La||Math.abs(g-f)>La)&&(u.splice(a,0,Pa.push(oa(s,p,Math.abs(d-t)<La&&r-g>La?[t,Math.abs(c-t)<La?f:r]:Math.abs(g-r)<La&&n-d>La?[Math.abs(f-r)<La?c:n,r]:Math.abs(d-n)<La&&g-e>La?[n,Math.abs(c-n)<La?f:e]:Math.abs(g-e)<La&&d-t>La?[Math.abs(f-e)<La?c:t,e]:null))-1),++h);h&&(m=!1)}if(m){var _,v,b,x=1/0;for(i=0,m=null;i<y;++i)(o=Ia[i])&&(b=(_=(s=o.site)[0]-t)*_+(v=s[1]-e)*v)<x&&(x=b,m=o);if(m){var w=[t,e],E=[t,r],M=[n,r],S=[n,e];m.halfedges.push(Pa.push(oa(s=m.site,w,E))-1,Pa.push(oa(s,E,M))-1,Pa.push(oa(s,M,S))-1,Pa.push(oa(s,S,w))-1)}}for(i=0;i<y;++i)(o=Ia[i])&&(o.halfedges.length||delete Ia[i])}(s,a,u,h)}this.edges=Pa,this.cells=Ia,Sa=Ca=Pa=Ia=null}function ka(t){return(t=t.slice()).push(t[0]),h([t])}function Ra(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!P(r))throw new Error("options must be an object");if(!C(i))throw new Error("steps must be a number");if(!C(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var c=M(s);else e=Ui(t,e,90,{units:o}),n=Ui(t,n,0,{units:o}),e=K(e)[0]-l[0],n=K(n)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ta(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ta(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===o){var m=g*Math.cos(c)+y*Math.sin(c),_=y*Math.cos(c)-g*Math.sin(c);g=m,y=_}f.push([g+l[0],y+l[1]])}return f.push(f[0]),"degrees"===o?h([f],u):$o(h([f],u),s,{pivot:a})}function Ta(t){var e=t*Math.PI/180;return Math.tan(e)}function Da(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return j(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!C(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&A(t,(function(t){n+=t[0]*a,r+=t[1]*a,i+=a}))})),a([n/i,r/i],e.properties,e)}function Fa(t,e,n,r,i){var o=r.tolerance||.001,s=0,u=0,h=0,l=0;if(D(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!C(i=Number(i)))throw new Error("weight value must be a number");if(i>0){l+=1;var o=i*ve(e,t);0===o&&(o=1);var a=i/o;s+=e.geometry.coordinates[0]*a,u+=e.geometry.coordinates[1]*a,h+=a}})),l<1)throw new Error("no features to measure");var c=s/h,f=u/h;return 1===l||0===i||Math.abs(c-e[0])<o&&Math.abs(f-e[1])<o?a([c,f],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([c,f]),Fa([c,f],t,n,r,i-1))}function Ba(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ja(t,e){var n=0,r=0;A(t,(function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var h=o-r,l=t.coordinates[u][h+1],c=i[0],f=i[1],p=l[0],d=l[1];e[u].push([.75*c+.25*p,.75*f+.25*d]),e[u].push([.25*c+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function za(t,e){var n=0,r=0,i=0;A(t,(function(o,s,a,u,h){u>i&&(i=u,r=s,e.push([[]])),h>n&&(n=h,r=s,e[u].push([]));var l=s-r,c=t.coordinates[u][h][l+1],f=o[0],p=o[1],d=c[0],g=c[1];e[u][h].push([.75*f+.25*d,.75*p+.25*g]),e[u][h].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Ga(t,e,n){void 0===n&&(n=2);var r=K(t),i=K(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Ua(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];D(t,(function(t){a.push(xn(t))}));for(var u=[],h=0;h<a.length;h++)u[h]=[];for(h=0;h<a.length;h++)for(var l=h;l<a.length;l++){h===l&&(u[h][l]=0);var c=Ga(a[h],a[l],r);u[h][l]=c,u[l][h]=c}for(h=0;h<a.length;h++)for(l=0;l<a.length;l++)0!==(c=u[h][l])&&(u[h][l]=i?c<=n?1:0:c<=n?Math.pow(c,o):0);if(s)for(h=0;h<a.length;h++){var f=u[h].reduce((function(t,e){return t+e}),0);for(l=0;l<a.length;l++)u[h][l]=u[h][l]/f}return u}function qa(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Va(t,e){return void 0===e&&(e={}),Wa(t,"mercator",e)}function Ha(t,e){return void 0===e&&(e={}),Wa(t,"wgs84",e)}function Wa(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&C(t[0])?t="mercator"===e?Ya(t):Xa(t):(!0!==r&&(t=Me(t)),A(t,(function(t){var n="mercator"===e?Ya(t):Xa(t);t[0]=n[0],t[1]=n[1]}))),t}function Ya(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Xa(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Aa.prototype={constructor:Aa,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return la(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,h,l=n.site,c=-1,f=e[i[o-1]],p=f.left===l?f.right:f.left;++c<o;)s=p,p=(f=e[i[c]]).left===l?f.right:f.left,s&&p&&r<s.index&&r<p.index&&(u=s,h=p,((a=l)[0]-h[0])*(u[1]-a[1])-(a[0]-u[0])*(h[1]-a[1])<0)&&t.push([l.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],h=e-i.site[1],l=u*u+h*h;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],h=e-a[1],c=u*u+h*h;c<l&&(l=c,s=a.index)}}))}while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};var Za=Object.freeze({__proto__:null,toMercator:Va,toWgs84:Ha}),Ja=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function Ka(t){return Array.isArray(t)?nu(t):t&&t.bbox?nu(t.bbox):[360*eu(),180*eu()]}function Qa(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(a(Ka(e.bbox)));return p(n)}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1),C(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),C(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=Ja(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=Ka(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(h([i]))},i=0;i<t;i++)r();return p(n)}function tu(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!C(r)||void 0===r||r<2)&&(r=10),C(i)&&void 0!==i||(i=1e-4),C(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ka(n)],h=0;h<r-1;h++){var l=(0===h?2*Math.random()*Math.PI:Math.tan((u[h][1]-u[h-1][1])/(u[h][0]-u[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;u.push([u[h][0]+f*Math.cos(l),u[h][1]+f*Math.sin(l)])}s.push(c(u))}return p(s)}function eu(){return Math.random()-.5}function nu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var ru=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:Qa,randomPolygon:$a,randomLineString:tu});function iu(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return D(t,(function(t){uu(t.properties,e)&&n.push(t)})),p(n)}function ou(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=au(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],h=0;h<a.length;h++)u.push(t.features[a[h]]);n(p(u),s,o)}}function su(t,e,n,r){var i=r;return ou(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function au(t,e){var n={};return D(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function uu(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!uu(t,e[r]))return!1;return!0}return hu(t,e)}function hu(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function lu(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var cu=Object.freeze({__proto__:null,getCluster:iu,clusterEach:ou,clusterReduce:su,createBins:au,applyFilter:uu,propertiesContainsFilter:hu,filterProperties:lu}),fu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function pu(t,e){return t>e?1:t<e?-1:0}function du(t,e,n){for(var r=new fu(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function gu(t,e,n,r){var i=new fu(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=du(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function yu(t,e,n){var r=null,i=null;if(e){var o=n((e=du(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function mu(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&mu(t.left,o,!1,r,i),t.right&&mu(t.right,o,!0,r,i)}}var _u=function(){function t(t){void 0===t&&(t=pu),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=gu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new fu(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=du(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=du(t,e,n)).key)?(null===e.left?r=e.right:(r=du(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=du(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=du(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new fu(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&xu(t,e,0,r-1,i),null===this._root)this._root=vu(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new fu(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new fu(null,null),r=n,i=0;i<t.length;i++)r=r.next=new fu(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=bu({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return mu(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=yu(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=gu(e,n,s,r):o=gu(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=du(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return yu(t,this._root,this._comparator)},t}();function vu(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t[o],a=e[o],u=new fu(s,a);return u.left=vu(t,e,n,o),u.right=vu(t,e,o+1,r),u}return null}function bu(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=bu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=bu(t,i+1,n),s}return null}function xu(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}xu(t,e,n,a,i),xu(t,e,a+1,r,i)}}function wu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mu(t,e,n){return e&&Eu(t.prototype,e),n&&Eu(t,n),t}var Su=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Iu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Cu=Number.EPSILON;void 0===Cu&&(Cu=Math.pow(2,-52));var Pu=Cu*Cu,Lu=function(t,e){if(-Cu<t&&t<Cu&&-Cu<e&&e<Cu)return 0;var n=t-e;return n*n<Pu*t*e?0:t<e?-1:1},Nu=function(){function t(){wu(this,t),this.reset()}return Mu(t,[{key:"reset",value:function(){this.xRounder=new Ou,this.yRounder=new Ou}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ou=function(){function t(){wu(this,t),this.tree=new _u,this.round(0)}return Mu(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Lu(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Lu(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Au=new Nu,ku=function(t,e){return t.x*e.y-t.y*e.x},Ru=function(t,e){return t.x*e.x+t.y*e.y},Tu=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=ku(r,i);return Lu(o,0)},Du=function(t){return Math.sqrt(Ru(t,t))},Fu=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Ru(i,r)/Du(i)/Du(r)},Bu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},ju=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},zu=function(){function t(e,n){wu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Mu(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Uu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Mu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,h=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=h.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},ku(u,a)/Du(u)/Du(a)),cosine:Fu(e.point,t.point,h.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,h=a.cosine;return o>=0&&u>=0?s<h?1:s>h?-1:0:o<0&&u<0?s<h?-1:s>h?1:0:u<o?-1:u>o?1:0}}}]),t}(),Gu=0,Uu=function(){function t(e,n,r,i){wu(this,t),this.id=++Gu,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Mu(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,h=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n>r){if(s<a&&s<h)return-1;if(s>a&&s>h)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var y=u-s,m=i-n,_=h-a,v=o-r;if(y>m&&_<v)return 1;if(y<m&&_>v)return-1}return i>o?1:i<o||u<h?-1:u>h?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Mu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Iu(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Su(e,s)&&0===this.comparePoint(s),h=Su(n,i)&&0===t.comparePoint(i),l=Su(e,a)&&0===this.comparePoint(a),c=Su(n,o)&&0===t.comparePoint(o);if(h&&u)return c&&!l?o:!c&&l?a:null;if(h)return l&&i.x===a.x&&i.y===a.y?null:i;if(u)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&l)return null;if(c)return o;if(l)return a;var f=function(t,e,n,r){if(0===e.x)return ju(n,r,t.x);if(0===r.x)return ju(t,e,n.x);if(0===e.y)return Bu(n,r,t.y);if(0===r.y)return Bu(t,e,n.y);var i=ku(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=ku(o,e)/i,a=ku(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Su(r,f)?Au.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new zu(e,!0),o=new zu(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return zu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),zu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var h=r.rings[a],l=r.windings[a],c=n.rings.indexOf(h);-1===c?(n.rings.push(h),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var h=[],l=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var p=e[c],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)h.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=h.indexOf(p.poly);-1!==g&&h.splice(g,1)}}for(var y=0,m=h.length;y<m;y++){var _=h[y].multiPoly;-1===r.indexOf(_)&&r.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Qu.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Qu.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Qu.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=zu.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new zu(i,!0),new zu(o,!1),[r],[s])}}]),t}(),qu=function(){function t(e,n,r){if(wu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Au.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Au.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Uu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(Uu.fromRing(o,i,this))}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Vu=function(){function t(e,n){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new qu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new qu(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Hu=function(){function t(e,n){if(wu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Vu(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Wu=function(){function t(e){wu(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Mu(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,h=[a],l=a.point,c=[];s=a,a=u,h.push(a),a.point!==l;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=h[0].point,d=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,y=0,m=c.length;y<m;y++)if(c[y].point===a.point){g=y;break}if(null===g){c.push({index:h.length,point:a.point});var _=a.getLeftmostComparator(s);u=f.sort(_)[0].otherSE;break}var v=c.splice(g)[0],b=h.splice(v.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(h))}}return n}}]),Mu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Tu(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Tu(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,c=[],f=h;f!=l;f+=u)c.push([e[f].x,e[f].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];zu.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Yu=function(){function t(e){wu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Mu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Xu=function(){function t(e){wu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Mu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Yu(i));else{var o=i.enclosingRing();o.poly||e.push(new Yu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Zu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu.compare;wu(this,t),this.queue=e,this.tree=new _u(n),this.segments=[]}return Mu(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var h=s.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(u=h),!s.isAnEndpoint(h)))for(var l=this._splitSafely(s,h),c=0,f=l.length;c<f;c++)n.push(l[c])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,m=g.length;y<m;y++)n.push(g[y])}if(null!==u||null!==p){var _=null;_=null===u?p:null===p||zu.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(_),b=0,x=v.length;b<x;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),M=0,S=E.length;M<S;M++)n.push(E[M]);if(!a.isAnEndpoint(w))for(var I=this._splitSafely(a,w),C=0,P=I.length;C<P;C++)n.push(I[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),Ju=1e6,Ku=1e6,Qu=new(function(){function t(){wu(this,t)}return Mu(t,[{key:"run",value:function(t,e,n){Qu.type=t,Au.reset();for(var r=[new Hu(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Hu(n[i],!1));if(Qu.numMultiPolys=r.length,"difference"===Qu.type)for(var s=r[0],a=1;a<r.length;)null!==Iu(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Qu.type)for(var u=0,h=r.length;u<h;u++)for(var l=r[u],c=u+1,f=r.length;c<f;c++)if(null===Iu(l.bbox,r[c].bbox))return[];for(var p=new _u(zu.compare),d=0,g=r.length;d<g;d++)for(var y=r[d].getSweepEvents(),m=0,_=y.length;m<_;m++)if(p.insert(y[m]),p.size>Ju)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var v=new Zu(p),b=p.size,x=p.pop();x;){var w=x.key;if(p.size===b){var E=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Ju)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(v.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=v.process(w),S=0,I=M.length;S<I;S++){var C=M[S];void 0===C.consumedBy&&p.insert(C)}b=p.size,x=p.pop()}Au.reset();var P=Wu.factory(v.segments);return new Xu(P).getGeom()}}]),t}()),$u={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Qu.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Qu.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Qu.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Qu.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var eh=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nh=function(){},rh={MAX_VALUE:{configurable:!0}};nh.isNaN=function(t){return Number.isNaN(t)},nh.doubleToLongBits=function(t){return t},nh.longBitsToDouble=function(t){return t},nh.isInfinite=function(t){return!Number.isFinite(t)},rh.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nh,rh);var ih=function(){},oh=function(){},sh=function(){};function ah(){}var uh=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},hh={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};uh.prototype.setOrdinate=function(t,e){switch(t){case uh.X:this.x=e;break;case uh.Y:this.y=e;break;case uh.Z:this.z=e;break;default:throw new eh("Invalid ordinate index: "+t)}},uh.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!th.equalsWithTolerance(this.x,e.x,n)&&!!th.equalsWithTolerance(this.y,e.y,n)}},uh.prototype.getOrdinate=function(t){switch(t){case uh.X:return this.x;case uh.Y:return this.y;case uh.Z:return this.z}throw new eh("Invalid ordinate index: "+t)},uh.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nh.isNaN(this.z))&&nh.isNaN(t.z)},uh.prototype.equals=function(t){return t instanceof uh&&this.equals2D(t)},uh.prototype.equalInZ=function(t,e){return th.equalsWithTolerance(this.z,t.z,e)},uh.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},uh.prototype.clone=function(){},uh.prototype.copy=function(){return new uh(this)},uh.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},uh.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},uh.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},uh.prototype.hashCode=function(){var t=17;return 37*(t=37*t+uh.hashCode(this.x))+uh.hashCode(this.y)},uh.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},uh.prototype.interfaces_=function(){return[ih,oh,ah]},uh.prototype.getClass=function(){return uh},uh.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nh.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},hh.DimensionalComparator.get=function(){return lh},hh.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},hh.NULL_ORDINATE.get=function(){return nh.NaN},hh.X.get=function(){return 0},hh.Y.get=function(){return 1},hh.Z.get=function(){return 2},Object.defineProperties(uh,hh);var lh=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new eh("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};lh.prototype.compare=function(t,e){var n=t,r=e,i=lh.compare(n.x,r.x);if(0!==i)return i;var o=lh.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:lh.compare(n.z,r.z)},lh.prototype.interfaces_=function(){return[sh]},lh.prototype.getClass=function(){return lh},lh.compare=function(t,e){return t<e?-1:t>e?1:nh.isNaN(t)?nh.isNaN(e)?0:-1:nh.isNaN(e)?1:0};var ch=function(){};ch.prototype.create=function(){},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var fh=function(){},ph={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},fh.toLocationSymbol=function(t){switch(t){case fh.EXTERIOR:return"e";case fh.BOUNDARY:return"b";case fh.INTERIOR:return"i";case fh.NONE:return"-"}throw new eh("Unknown location value: "+t)},ph.INTERIOR.get=function(){return 0},ph.BOUNDARY.get=function(){return 1},ph.EXTERIOR.get=function(){return 2},ph.NONE.get=function(){return-1},Object.defineProperties(fh,ph);var dh=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},gh=function(){},yh={LOG_10:{configurable:!0}};gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh.log10=function(t){var e=Math.log(t);return nh.isInfinite(e)||nh.isNaN(e)?e:e/gh.LOG_10},gh.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},gh.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},gh.wrap=function(t,e){return t<0?e- -t%e:t%e},gh.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},gh.average=function(t,e){return(t+e)/2},yh.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(gh,yh);var mh=function(t){this.str=t};mh.prototype.append=function(t){this.str+=t},mh.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},mh.prototype.toString=function(t){return this.str};var _h=function(t){this.value=t};_h.prototype.intValue=function(){return this.value},_h.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},_h.isNaN=function(t){return Number.isNaN(t)};var vh=function(){};vh.isWhitespace=function(t){return t<=32&&t>=0||127===t},vh.toUpperCase=function(t){return t.toUpperCase()};var bh=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},xh={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};bh.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},bh.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=bh.magnitude(n._hi),i=bh.TEN.pow(r);(n=n.divide(i)).gt(bh.TEN)?(n=n.divide(bh.TEN),r+=1):n.lt(bh.ONE)&&(n=n.multiply(bh.TEN),r-=1);for(var o=r+1,s=new mh,a=bh.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var h=Math.trunc(n._hi);if(h<0)break;var l=!1,c=0;h>9?(l=!0,c="9"):c="0"+h,s.append(c),n=n.subtract(bh.valueOf(h)).multiply(bh.TEN),l&&n.selfAdd(bh.TEN);var f=!0,p=bh.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},bh.prototype.sqr=function(){return this.multiply(this)},bh.prototype.doubleValue=function(){return this._hi+this._lo},bh.prototype.subtract=function(){if(arguments[0]instanceof bh){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},bh.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},bh.prototype.isZero=function(){return 0===this._hi&&0===this._lo},bh.prototype.selfSubtract=function(){if(arguments[0]instanceof bh){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},bh.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},bh.prototype.min=function(t){return this.le(t)?this:t},bh.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof bh){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,h=null,l=null,c=null;return u=this._hi/n,c=(i=(h=bh.SPLIT*u)-(i=h-u))*(s=(c=bh.SPLIT*n)-(s=c-n))-(l=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,c=u+(h=(this._hi-l-c+this._lo-u*r)/n),this._hi=c,this._lo=u-c+h,this}},bh.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},bh.prototype.divide=function(){if(arguments[0]instanceof bh){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=bh.SPLIT*o)-(e=s-o)),u=e*(r=(u=bh.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var h=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi);return new bh(h,o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return nh.isNaN(l)?bh.createNaN():bh.copy(this).selfDivide(l,0)}},bh.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},bh.prototype.pow=function(t){if(0===t)return bh.valueOf(1);var e=new bh(this),n=bh.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},bh.prototype.ceil=function(){if(this.isNaN())return bh.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new bh(t,e)},bh.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},bh.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},bh.prototype.setValue=function(){if(arguments[0]instanceof bh){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},bh.prototype.max=function(t){return this.ge(t)?this:t},bh.prototype.sqrt=function(){if(this.isZero())return bh.valueOf(0);if(this.isNegative())return bh.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=bh.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},bh.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof bh){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],h=arguments[1],l=null,c=null,f=null,p=null,d=null,g=null,y=null;p=this._hi+u,c=this._lo+h,d=p-(g=p-this._hi),f=c-(y=c-this._lo);var m=(l=p+(g=(d=u-g+(this._hi-d))+c))+(g=(f=h-y+(this._lo-f))+(g+(p-l))),_=g+(l-m);return this._hi=m,this._lo=_,this}},bh.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof bh){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,h=null;i=(u=bh.SPLIT*this._hi)-this._hi,h=bh.SPLIT*n,i=u-i,o=this._hi-i,s=h-n;var l=(u=this._hi*n)+(h=i*(s=h-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),c=h+(i=u-l);return this._hi=l,this._lo=c,this}},bh.prototype.selfSqr=function(){return this.selfMultiply(this)},bh.prototype.floor=function(){if(this.isNaN())return bh.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new bh(t,e)},bh.prototype.negate=function(){return this.isNaN()?this:new bh(-this._hi,-this._lo)},bh.prototype.clone=function(){},bh.prototype.multiply=function(){if(arguments[0]instanceof bh){var t=arguments[0];return t.isNaN()?bh.createNaN():bh.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nh.isNaN(e)?bh.createNaN():bh.copy(this).selfMultiply(e,0)}},bh.prototype.isNaN=function(){return nh.isNaN(this._hi)},bh.prototype.intValue=function(){return Math.trunc(this._hi)},bh.prototype.toString=function(){var t=bh.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},bh.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+bh.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+bh.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},bh.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=bh.SPLIT*n)-(i=s-n)),o=(a=bh.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new bh(u,n-u+s)},bh.prototype.toSciNotation=function(){if(this.isZero())return bh.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=bh.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},bh.prototype.abs=function(){return this.isNaN()?bh.NaN:this.isNegative()?this.negate():new bh(this)},bh.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},bh.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},bh.prototype.add=function(){if(arguments[0]instanceof bh){var t=arguments[0];return bh.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return bh.copy(this).selfAdd(e)}},bh.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof bh){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},bh.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},bh.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},bh.prototype.trunc=function(){return this.isNaN()?bh.NaN:this.isPositive()?this.floor():this.ceil()},bh.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},bh.prototype.interfaces_=function(){return[ah,ih,oh]},bh.prototype.getClass=function(){return bh},bh.sqr=function(t){return bh.valueOf(t).selfMultiply(t)},bh.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return bh.parse(t)}if("number"==typeof arguments[0])return new bh(arguments[0])},bh.sqrt=function(t){return bh.valueOf(t).sqrt()},bh.parse=function(t){for(var e=0,n=t.length;vh.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new bh,s=0,a=0,u=0;!(e>=n);){var h=t.charAt(e);if(e++,vh.isDigit(h)){var l=h-"0";o.selfMultiply(bh.TEN),o.selfAdd(l),s++}else{if("."!==h){if("e"===h||"E"===h){var c=t.substring(e);try{u=_h.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+h+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=bh.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=bh.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},bh.createNaN=function(){return new bh(nh.NaN,nh.NaN)},bh.copy=function(t){return new bh(t)},bh.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},bh.stringOfChar=function(t,e){for(var n=new mh,r=0;r<e;r++)n.append(t);return n.toString()},xh.PI.get=function(){return new bh(3.141592653589793,12246467991473532e-32)},xh.TWO_PI.get=function(){return new bh(6.283185307179586,24492935982947064e-32)},xh.PI_2.get=function(){return new bh(1.5707963267948966,6123233995736766e-32)},xh.E.get=function(){return new bh(2.718281828459045,14456468917292502e-32)},xh.NaN.get=function(){return new bh(nh.NaN,nh.NaN)},xh.EPS.get=function(){return 123259516440783e-46},xh.SPLIT.get=function(){return 134217729},xh.MAX_PRINT_DIGITS.get=function(){return 32},xh.TEN.get=function(){return bh.valueOf(10)},xh.ONE.get=function(){return bh.valueOf(1)},xh.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},xh.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(bh,xh);var wh=function(){},Eh={DP_SAFE_EPSILON:{configurable:!0}};wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},wh.orientationIndex=function(t,e,n){var r=wh.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=bh.valueOf(e.x).selfAdd(-t.x),o=bh.valueOf(e.y).selfAdd(-t.y),s=bh.valueOf(n.x).selfAdd(-e.x),a=bh.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},wh.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},wh.intersection=function(t,e,n,r){var i=bh.valueOf(r.y).selfSubtract(n.y).selfMultiply(bh.valueOf(e.x).selfSubtract(t.x)),o=bh.valueOf(r.x).selfSubtract(n.x).selfMultiply(bh.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=bh.valueOf(r.x).selfSubtract(n.x).selfMultiply(bh.valueOf(t.y).selfSubtract(n.y)),u=bh.valueOf(r.y).selfSubtract(n.y).selfMultiply(bh.valueOf(t.x).selfSubtract(n.x)),h=a.subtract(u).selfDivide(s).doubleValue(),l=bh.valueOf(t.x).selfAdd(bh.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),c=bh.valueOf(e.x).selfSubtract(t.x).selfMultiply(bh.valueOf(t.y).selfSubtract(n.y)),f=bh.valueOf(e.y).selfSubtract(t.y).selfMultiply(bh.valueOf(t.x).selfSubtract(n.x)),p=c.subtract(f).selfDivide(s).doubleValue(),d=bh.valueOf(n.y).selfAdd(bh.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new uh(l,d)},wh.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return wh.signum(s);r=i+o}else{if(!(i<0))return wh.signum(s);if(o>=0)return wh.signum(s);r=-i-o}var a=wh.DP_SAFE_EPSILON*r;return s>=a||-s>=a?wh.signum(s):2},wh.signum=function(t){return t>0?1:t<0?-1:0},Eh.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(wh,Eh);var Mh=function(){},Sh={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Sh.X.get=function(){return 0},Sh.Y.get=function(){return 1},Sh.Z.get=function(){return 2},Sh.M.get=function(){return 3},Mh.prototype.setOrdinate=function(t,e,n){},Mh.prototype.size=function(){},Mh.prototype.getOrdinate=function(t,e){},Mh.prototype.getCoordinate=function(){},Mh.prototype.getCoordinateCopy=function(t){},Mh.prototype.getDimension=function(){},Mh.prototype.getX=function(t){},Mh.prototype.clone=function(){},Mh.prototype.expandEnvelope=function(t){},Mh.prototype.copy=function(){},Mh.prototype.getY=function(t){},Mh.prototype.toCoordinateArray=function(){},Mh.prototype.interfaces_=function(){return[oh]},Mh.prototype.getClass=function(){return Mh},Object.defineProperties(Mh,Sh);var Ih=function(){},Ch=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ih),Ph=function(){};Ph.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Ph.getProperty=function(t){return{"line.separator":"\n"}[t]};var Lh=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof uh&&arguments[1]instanceof uh){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],h=arguments[1],l=arguments[2];this.x=u,this.y=h,this.w=l}else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=c.y-f.y,y=f.x-c.x,m=c.x*f.y-f.x*c.y,_=p.y-d.y,v=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-v*m,this.y=_*m-g*b,this.w=g*v-_*y}};Lh.prototype.getY=function(){var t=this.y/this.w;if(nh.isNaN(t)||nh.isInfinite(t))throw new Ch;return t},Lh.prototype.getX=function(){var t=this.x/this.w;if(nh.isNaN(t)||nh.isInfinite(t))throw new Ch;return t},Lh.prototype.getCoordinate=function(){var t=new uh;return t.x=this.getX(),t.y=this.getY(),t},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,h=n.x*r.y-r.x*n.y,l=i*u-a*o,c=(o*h-u*s)/l,f=(a*s-i*h)/l;if(nh.isNaN(c)||nh.isInfinite(c)||nh.isNaN(f)||nh.isInfinite(f))throw new Ch;return new uh(c,f)};var Nh=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof uh){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Oh={serialVersionUID:{configurable:!0}};Nh.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Nh.prototype.equals=function(t){if(!(t instanceof Nh))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Nh.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Nh;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Nh(e,r,n,i)},Nh.prototype.isNull=function(){return this._maxx<this._minx},Nh.prototype.getMaxX=function(){return this._maxx},Nh.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof uh){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Nh){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Nh.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Nh){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof uh){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Nh.prototype.getMinY=function(){return this._miny},Nh.prototype.getMinX=function(){return this._minx},Nh.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof uh){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Nh){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Nh.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Nh.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Nh.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Nh.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Nh.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Nh.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Nh.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Nh.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Nh.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Nh.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Nh){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof uh){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Nh.prototype.centre=function(){return this.isNull()?null:new uh((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Nh.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof uh){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Nh){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Nh.prototype.getMaxY=function(){return this._maxy},Nh.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Nh.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+uh.hashCode(this._minx))+uh.hashCode(this._maxx))+uh.hashCode(this._miny))+uh.hashCode(this._maxy)},Nh.prototype.interfaces_=function(){return[ih,ah]},Nh.prototype.getClass=function(){return Nh},Nh.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),h=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(h>u||l<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),h=Math.min(r.y,i.y),l=Math.max(r.y,i.y),h>u||l<a))}},Oh.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Nh,Oh);var Ah={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},kh=function(t){this.geometryFactory=t||new _c};kh.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Ah.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Ah.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Th[n]&&(e=Th[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},kh.prototype.write=function(t){return this.extractGeometry(t)},kh.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Rh[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Rh[e].apply(this,[t])+")"};var Rh={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Rh.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Rh.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Rh.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Rh.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Rh.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Rh.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Rh.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Rh.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Th={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Ah.spaces);return this.geometryFactory.createPoint(new uh(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ah.trimParens,"$1"),r.push(Th.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ah.spaces),r.push(new uh(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ah.spaces),r.push(new uh(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Ah.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ah.trimParens,"$1"),r.push(Th.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Ah.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Ah.trimParens,"$1"),n=Th.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Ah.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ah.trimParens,"$1"),r.push(Th.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Dh=function(t){this.parser=new kh(t)};Dh.prototype.write=function(t){return this.parser.write(t)},Dh.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Fh=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Bh=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),jh=function(){};jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.shouldNeverReachHere=function(){if(0===arguments.length)jh.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Bh("Should never reach here"+(null!==t?": "+t:""))}},jh.isTrue=function(){var t;if(1===arguments.length)jh.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Bh:new Bh(t)},jh.equals=function(){var t,e,n;if(2===arguments.length)jh.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Bh("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var zh=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new uh,this._intPt[1]=new uh,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gh={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};zh.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},zh.prototype.getTopologySummary=function(){var t=new mh;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},zh.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},zh.prototype.getIntersectionNum=function(){return this._result},zh.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},zh.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},zh.prototype.setPrecisionModel=function(t){this._precisionModel=t},zh.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},zh.prototype.getIntersection=function(t){return this._intPt[t]},zh.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},zh.prototype.hasIntersection=function(){return this._result!==zh.NO_INTERSECTION},zh.prototype.getEdgeDistance=function(t,e){return zh.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},zh.prototype.isCollinear=function(){return this._result===zh.COLLINEAR_INTERSECTION},zh.prototype.toString=function(){return Dh.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Dh.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},zh.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},zh.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},zh.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return jh.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},zh.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return jh.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Gh.DONT_INTERSECT.get=function(){return 0},Gh.DO_INTERSECT.get=function(){return 1},Gh.COLLINEAR.get=function(){return 2},Gh.NO_INTERSECTION.get=function(){return 0},Gh.POINT_INTERSECTION.get=function(){return 1},Gh.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(zh,Gh);var Uh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Nh(this._inputLines[0][0],this._inputLines[0][1]),n=new Nh(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Nh.intersects(n,r,e)&&0===Hh.orientationIndex(n,r,e)&&0===Hh.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Lh.intersection(t,n,r,i)}catch(s){if(!(s instanceof Ch))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new uh(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=wh.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Ph.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Ph.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new uh(t),o=new uh(e),s=new uh(n),a=new uh(r),u=new uh;this.normalizeToEnvCentre(i,o,s,a,u);var h=this.safeHCoordinateIntersection(i,o,s,a);return h.x+=u.x,h.y+=u.y,h},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Nh.intersects(e,n,r),s=Nh.intersects(e,n,i),a=Nh.intersects(r,i,e),u=Nh.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,h=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>h?o:h)+(a<c?a:c))/2,d=((s>l?s:l)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Nh.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Hh.orientationIndex(e,n,r),s=Hh.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Hh.orientationIndex(r,i,e),u=Hh.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new uh(r):0===s?this._intPt[0]=new uh(i):0===a?this._intPt[0]=new uh(e):0===u&&(this._intPt[0]=new uh(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Hh.distancePointLine(t,n,r),s=Hh.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Hh.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Hh.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(zh),qh=function(){};qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return qh.signOfDet2x2(r,i,o,s)},qh.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Vh=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Vh.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=qh.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Vh.prototype.isPointInPolygon=function(){return this.getLocation()!==fh.EXTERIOR},Vh.prototype.getLocation=function(){return this._isPointOnSegment?fh.BOUNDARY:this._crossingCount%2==1?fh.INTERIOR:fh.EXTERIOR},Vh.prototype.isOnSegment=function(){return this._isPointOnSegment},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.locatePointInRing=function(){if(arguments[0]instanceof uh&&dh(arguments[1],Mh)){for(var t=arguments[1],e=new Vh(arguments[0]),n=new uh,r=new uh,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof uh&&arguments[1]instanceof Array){for(var o=arguments[1],s=new Vh(arguments[0]),a=1;a<o.length;a++){var u=o[a],h=o[a-1];if(s.countSegment(u,h),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var Hh=function(){},Wh={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.orientationIndex=function(t,e,n){return wh.orientationIndex(t,e,n)},Hh.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(dh(arguments[0],Mh)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new uh,h=new uh,l=new uh;s.getCoordinate(0,h),s.getCoordinate(1,l);var c=h.x;l.x-=c;for(var f=0,p=1;p<a-1;p++)u.y=h.y,h.x=l.x,h.y=l.y,s.getCoordinate(p+1,l),l.x-=c,f+=h.x*(u.y-l.y);return f/2}},Hh.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Hh.distancePointLine(t,n,r);if(n.equals(r))return Hh.distancePointLine(r,t,e);var i=!1;if(Nh.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?gh.min(Hh.distancePointLine(t,n,r),Hh.distancePointLine(e,n,r),Hh.distancePointLine(n,t,e),Hh.distancePointLine(r,t,e)):0},Hh.isPointInRing=function(t,e){return Hh.locatePointInRing(t,e)!==fh.EXTERIOR},Hh.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new uh;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,h=a-i,l=u-o;n+=Math.sqrt(h*h+l*l),i=a,o=u}return n},Hh.isCCW=function(t){var e=t.length-1;if(e<3)throw new eh("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],h=t[a];if(u.equals2D(n)||h.equals2D(n)||u.equals2D(h))return!1;var l=Hh.computeOrientation(u,n,h);return 0===l?u.x>h.x:l>0},Hh.locatePointInRing=function(t,e){return Vh.locatePointInRing(t,e)},Hh.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Hh.computeOrientation=function(t,e,n){return Hh.orientationIndex(t,e,n)},Hh.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new eh("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Hh.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),h=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(h<=0)return o.distance(s);if(h>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Hh.isOnLine=function(t,e){for(var n=new Uh,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Wh.CLOCKWISE.get=function(){return-1},Wh.RIGHT.get=function(){return Hh.CLOCKWISE},Wh.COUNTERCLOCKWISE.get=function(){return 1},Wh.LEFT.get=function(){return Hh.COUNTERCLOCKWISE},Wh.COLLINEAR.get=function(){return 0},Wh.STRAIGHT.get=function(){return Hh.COLLINEAR},Object.defineProperties(Hh,Wh);var Yh=function(){};Yh.prototype.filter=function(t){},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Xh=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Zh={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Xh.prototype.isGeometryCollection=function(){return this.getSortIndex()===Xh.SORTINDEX_GEOMETRYCOLLECTION},Xh.prototype.getFactory=function(){return this._factory},Xh.prototype.getGeometryN=function(t){return this},Xh.prototype.getArea=function(){return 0},Xh.prototype.isRectangle=function(){return!1},Xh.prototype.equals=function(){if(arguments[0]instanceof Xh){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Xh))return!1;var n=e;return this.equalsExact(n)}},Xh.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Xh.prototype.geometryChanged=function(){this.apply(Xh.geometryChangedFilter)},Xh.prototype.geometryChangedAction=function(){this._envelope=null},Xh.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Xh.prototype.getLength=function(){return 0},Xh.prototype.getNumGeometries=function(){return 1},Xh.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Xh.prototype.getUserData=function(){return this._userData},Xh.prototype.getSRID=function(){return this._SRID},Xh.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Xh.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Xh.SORTINDEX_GEOMETRYCOLLECTION)throw new eh("This method does not support GeometryCollection arguments")},Xh.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Xh.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Xh.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Xh.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Nh(this._envelope)},Xh.prototype.setSRID=function(t){this._SRID=t},Xh.prototype.setUserData=function(t){this._userData=t},Xh.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Xh.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Xh.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Xh.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Xh.SORTINDEX_MULTIPOINT||this.getSortIndex()===Xh.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Xh.SORTINDEX_MULTIPOLYGON},Xh.prototype.interfaces_=function(){return[oh,ih,ah]},Xh.prototype.getClass=function(){return Xh},Xh.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Xh.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Zh.serialVersionUID.get=function(){return 0x799ea46522854c00},Zh.SORTINDEX_POINT.get=function(){return 0},Zh.SORTINDEX_MULTIPOINT.get=function(){return 1},Zh.SORTINDEX_LINESTRING.get=function(){return 2},Zh.SORTINDEX_LINEARRING.get=function(){return 3},Zh.SORTINDEX_MULTILINESTRING.get=function(){return 4},Zh.SORTINDEX_POLYGON.get=function(){return 5},Zh.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Zh.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Zh.geometryChangedFilter.get=function(){return Jh},Object.defineProperties(Xh,Zh);var Jh=function(){};Jh.interfaces_=function(){return[Yh]},Jh.filter=function(t){t.geometryChangedAction()};var Kh=function(){};Kh.prototype.filter=function(t){},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Qh=function(){},$h={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Qh.prototype.isInBoundary=function(t){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},$h.Mod2BoundaryNodeRule.get=function(){return tl},$h.EndPointBoundaryNodeRule.get=function(){return el},$h.MultiValentEndPointBoundaryNodeRule.get=function(){return nl},$h.MonoValentEndPointBoundaryNodeRule.get=function(){return rl},$h.MOD2_BOUNDARY_RULE.get=function(){return new tl},$h.ENDPOINT_BOUNDARY_RULE.get=function(){return new el},$h.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nl},$h.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rl},$h.OGC_SFS_BOUNDARY_RULE.get=function(){return Qh.MOD2_BOUNDARY_RULE},Object.defineProperties(Qh,$h);var tl=function(){};tl.prototype.isInBoundary=function(t){return t%2==1},tl.prototype.interfaces_=function(){return[Qh]},tl.prototype.getClass=function(){return tl};var el=function(){};el.prototype.isInBoundary=function(t){return t>0},el.prototype.interfaces_=function(){return[Qh]},el.prototype.getClass=function(){return el};var nl=function(){};nl.prototype.isInBoundary=function(t){return t>1},nl.prototype.interfaces_=function(){return[Qh]},nl.prototype.getClass=function(){return nl};var rl=function(){};rl.prototype.isInBoundary=function(t){return 1===t},rl.prototype.interfaces_=function(){return[Qh]},rl.prototype.getClass=function(){return rl};var il=function(){};function ol(t){this.message=t||""}il.prototype.add=function(){},il.prototype.addAll=function(){},il.prototype.isEmpty=function(){},il.prototype.iterator=function(){},il.prototype.size=function(){},il.prototype.toArray=function(){},il.prototype.remove=function(){},ol.prototype=new Error,ol.prototype.name="IndexOutOfBoundsException";var sl=function(){};sl.prototype.hasNext=function(){},sl.prototype.next=function(){},sl.prototype.remove=function(){};var al=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(il);function ul(t){this.message=t||""}ul.prototype=new Error,ul.prototype.name="NoSuchElementException";var hl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,il]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ll(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ol;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(al),ll=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ul;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sl),cl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[1],r=!1,i=arguments[0].iterator();i.hasNext();)e.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof uh&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],h=arguments[1];if(arguments[2])for(var l=0;l<u.length;l++)e.add(u[l],h);else for(var c=u.length-1;c>=0;c--)e.add(u[c],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof uh){var f=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<d&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var g=arguments[0],y=arguments[1],m=arguments[2],_=arguments[3],v=1;m>_&&(v=-1);for(var b=m;b!==_;b+=v)e.add(g[b],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new uh(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(hl),fl=function(){},pl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};pl.ForwardComparator.get=function(){return dl},pl.BidirectionalComparator.get=function(){return gl},pl.coordArrayType.get=function(){return new Array(0).fill(null)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},fl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(fl.indexOf(r,e)<0)return r}return null},fl.scroll=function(t,e){var n=fl.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Ph.arraycopy(t,n,r,0,t.length-n),Ph.arraycopy(t,0,r,t.length-n,n),Ph.arraycopy(r,0,t,0,t.length)},fl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},fl.intersection=function(t,e){for(var n=new cl,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},fl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},fl.removeRepeatedPoints=function(t){return fl.hasRepeatedPoints(t)?new cl(t,!1).toCoordinateArray():t},fl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},fl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},fl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new uh(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new uh(r[i+u])},fl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},fl.envelope=function(t){for(var e=new Nh,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},fl.toCoordinateArray=function(t){return t.toArray(fl.coordArrayType)},fl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},fl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},fl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},fl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},fl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},fl.extract=function(t,e,n){e=gh.clamp(e,0,t.length);var r=(n=gh.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(fl,pl);var dl=function(){};dl.prototype.compare=function(t,e){return fl.compare(t,e)},dl.prototype.interfaces_=function(){return[sh]},dl.prototype.getClass=function(){return dl};var gl=function(){};gl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=fl.compare(n,r);return fl.isEqualReversed(n,r)?0:i},gl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=fl.increasingDirection(n),o=fl.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var h=n[s].compareTo(r[a]);if(0!==h)return h;s+=i,a+=o}return 0},gl.prototype.interfaces_=function(){return[sh]},gl.prototype.getClass=function(){return gl};var yl=function(){};yl.prototype.get=function(){},yl.prototype.put=function(){},yl.prototype.size=function(){},yl.prototype.values=function(){},yl.prototype.entrySet=function(){};var ml=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(yl);function _l(t){this.message=t||""}function vl(){}_l.prototype=new Error,_l.prototype.name="OperationNotSupported",vl.prototype=new il,vl.prototype.contains=function(){};var bl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new xl(this)},e}(vl),xl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ul;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _l},e}(sl);function wl(t){return null===t?0:t.color}function El(t){return null===t?null:t.parent}function Ml(t,e){null!==t&&(t.color=e)}function Sl(t){return null===t?null:t.left}function Il(t){return null===t?null:t.right}function Cl(){this.root_=null,this.size_=0}Cl.prototype=new ml,Cl.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Cl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Cl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(El(t)===Sl(El(El(t)))){var n=Il(El(El(t)));1===wl(n)?(Ml(El(t),0),Ml(n,0),Ml(El(El(t)),1),t=El(El(t))):(t===Il(El(t))&&(t=El(t),e.rotateLeft(t)),Ml(El(t),0),Ml(El(El(t)),1),e.rotateRight(El(El(t))))}else{var r=Sl(El(El(t)));1===wl(r)?(Ml(El(t),0),Ml(r,0),Ml(El(El(t)),1),t=El(El(t))):(t===Sl(El(t))&&(t=El(t),e.rotateRight(t)),Ml(El(t),0),Ml(El(El(t)),1),e.rotateLeft(El(El(t))))}this.root_.color=0},Cl.prototype.values=function(){var t=new hl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Cl.successor(e));)t.add(e.value);return t},Cl.prototype.entrySet=function(){var t=new bl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Cl.successor(e));)t.add(e);return t},Cl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Cl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Cl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Cl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Cl.prototype.size=function(){return this.size_};var Pl=function(){};function Ll(){}function Nl(){this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl},Ll.prototype=new vl,Nl.prototype=new Ll,Nl.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Nl.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Nl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Nl.prototype.remove=function(t){throw new _l},Nl.prototype.size=function(){return this.array_.length},Nl.prototype.isEmpty=function(){return 0===this.array_.length},Nl.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Nl.prototype.iterator=function(){return new Ol(this)};var Ol=function(t){this.treeSet_=t,this.position_=0};Ol.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ul;return this.treeSet_.array_[this.position_++]},Ol.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ol.prototype.remove=function(){throw new _l};var Al=function(){};Al.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Al.asList=function(t){for(var e=new hl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var kl=function(){},Rl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Rl.P.get=function(){return 0},Rl.L.get=function(){return 1},Rl.A.get=function(){return 2},Rl.FALSE.get=function(){return-1},Rl.TRUE.get=function(){return-2},Rl.DONTCARE.get=function(){return-3},Rl.SYM_FALSE.get=function(){return"F"},Rl.SYM_TRUE.get=function(){return"T"},Rl.SYM_DONTCARE.get=function(){return"*"},Rl.SYM_P.get=function(){return"0"},Rl.SYM_L.get=function(){return"1"},Rl.SYM_A.get=function(){return"2"},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl},kl.toDimensionSymbol=function(t){switch(t){case kl.FALSE:return kl.SYM_FALSE;case kl.TRUE:return kl.SYM_TRUE;case kl.DONTCARE:return kl.SYM_DONTCARE;case kl.P:return kl.SYM_P;case kl.L:return kl.SYM_L;case kl.A:return kl.SYM_A}throw new eh("Unknown dimension value: "+t)},kl.toDimensionValue=function(t){switch(vh.toUpperCase(t)){case kl.SYM_FALSE:return kl.FALSE;case kl.SYM_TRUE:return kl.TRUE;case kl.SYM_DONTCARE:return kl.DONTCARE;case kl.SYM_P:return kl.P;case kl.SYM_L:return kl.L;case kl.SYM_A:return kl.A}throw new eh("Unknown dimension symbol: "+t)},Object.defineProperties(kl,Rl);var Tl=function(){};Tl.prototype.filter=function(t){},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl};var Dl=function(){};Dl.prototype.filter=function(t,e){},Dl.prototype.isDone=function(){},Dl.prototype.isGeometryChanged=function(){},Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl};var Fl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new eh("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Nh,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Al.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=kl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=kl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Nl(Al.asList(this._geometries)),r=new Nl(Al.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[1],o=arguments[0],s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var h=t.getGeometryN(u),l=o.getGeometryN(u),c=h.compareToSameClass(l,i);if(0!==c)return c;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){var t=this;if(dh(arguments[0],Kh))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(dh(arguments[0],Dl)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(dh(arguments[0],Tl)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(dh(arguments[0],Yh)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),jh.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Xh),Bl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xh.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new jl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Fl),jl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Qh.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};jl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},jl.prototype.getBoundary=function(){return this._geom instanceof Jl?this.boundaryLineString(this._geom):this._geom instanceof Bl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},jl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},jl.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new hl;this._endpointMap=new Cl;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return fl.toCoordinateArray(n)},jl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new zl,this._endpointMap.put(t,e)),e.count++},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl},jl.getBoundary=function(){return 1===arguments.length?new jl(arguments[0]).getBoundary():2===arguments.length?new jl(arguments[0],arguments[1]).getBoundary():void 0};var zl=function(){this.count=null};function Gl(){}function Ul(){}zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var ql=function(){};function Vl(){}function Hl(){}function Wl(){}var Yl=function(){},Xl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl},Yl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Yl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Vl,n=new Gl(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new Wl(new Ul(Yl.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Yl.NEWLINE}catch(t){if(!(t instanceof Hl))throw t;jh.shouldNeverReachHere()}return o}},Yl.split=function(t,e){for(var n=e.length,r=new hl,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Yl.toString=function(){if(1===arguments.length){var t=arguments[0];return Yl.SIMPLE_ORDINATE_FORMAT.format(t)}},Yl.spaces=function(t){return Yl.chars(" ",t)},Xl.NEWLINE.get=function(){return Ph.getProperty("line.separator")},Xl.SIMPLE_ORDINATE_FORMAT.get=function(){return new ql("0.#")},Object.defineProperties(Yl,Xl);var Zl=function(){};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl},Zl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Zl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Mh.X)===t.getOrdinate(e-1,Mh.X)&&t.getOrdinate(0,Mh.Y)===t.getOrdinate(e-1,Mh.Y)},Zl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||nh.isNaN(s)&&nh.isNaN(a)))return!1}return!0},Zl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Zl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Zl.copy(e,i-1,r,o,1);return r},Zl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Zl.swap(t,r,e-r)},Zl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Zl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Zl.copyCoord(t,e+o,n,r+o)},Zl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new mh;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Yl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Zl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zl.createClosedRing(t,e,4):e.getOrdinate(0,Mh.X)===e.getOrdinate(n-1,Mh.X)&&e.getOrdinate(0,Mh.Y)===e.getOrdinate(n-1,Mh.Y)?e:Zl.createClosedRing(t,e,n+1)},Zl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Zl.copy(e,0,r,0,i);for(var o=i;o<n;o++)Zl.copy(e,0,r,o,1);return r};var Jl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Nh:this._points.expandEnvelope(new Nh)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Zl.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Hh.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0,r=0;n<this._points.size()&&r<e._points.size();){var i=t._points.getCoordinate(n).compareTo(e._points.getCoordinate(r));if(0!==i)return i;n++,r++}return n<this._points.size()?1:r<e._points.size()?-1:0}if(2===arguments.length){var o=arguments[0];return arguments[1].compare(this._points,o._points)}},e.prototype.apply=function(){var t=this;if(dh(arguments[0],Kh))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(dh(arguments[0],Dl)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else(dh(arguments[0],Tl)||dh(arguments[0],Yh))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new jl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new eh("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Pl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Xh),Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Ql=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Nh;var t=new Nh;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(dh(arguments[0],Kh)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(dh(arguments[0],Dl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(dh(arguments[0],Tl)||dh(arguments[0],Yh))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),jh.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Xh),$l=function(){};$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l};var tc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new eh("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new eh("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Hh.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Hh.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),h=t.getY(a);if(u!==o==(h!==s))return!1;o=u,s=h}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Al.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Ph.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=fl.minCoordinate(n.getCoordinates());fl.scroll(i,o),Ph.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Hh.isCCW(n.getCoordinates())===r&&fl.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[1],o=arguments[0],s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var h=this.getNumInteriorRing(),l=o.getNumInteriorRing(),c=0;c<h&&c<l;){var f=t.getInteriorRingN(c),p=o.getInteriorRingN(c),d=f.compareToSameClass(p,i);if(0!==d)return d;c++}return c<h?1:c<l?-1:0}},e.prototype.apply=function(t){var e=this;if(dh(t,Kh)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(dh(t,Dl)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(dh(t,Tl))t.filter(this);else if(dh(t,Yh)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[$l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Xh),ec=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xh.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Fl),nc=function(t){function e(e,n){e instanceof uh&&n instanceof _c&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xh.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new eh("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new eh("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jl),rc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Xh.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new hl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Fl),ic=function(t){this._factory=t||null,this._isUserDataCopied=!1},oc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ic.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ic.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ic.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Fl?this.editGeometryCollection(t,e):t instanceof tc?this.editPolygon(t,e):t instanceof Ql||t instanceof Jl?e.edit(t,this._factory):(jh.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ic.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new hl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===ec?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Bl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===rc?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},ic.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new hl,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.GeometryEditorOperation=function(){},oc.NoOpGeometryOperation.get=function(){return sc},oc.CoordinateOperation.get=function(){return ac},oc.CoordinateSequenceOperation.get=function(){return uc},Object.defineProperties(ic,oc);var sc=function(){};sc.prototype.edit=function(t,e){return t},sc.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},sc.prototype.getClass=function(){return sc};var ac=function(){};ac.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof nc?e.createLinearRing(n):t instanceof Jl?e.createLineString(n):t instanceof Ql?n.length>0?e.createPoint(n[0]):e.createPoint():t},ac.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},ac.prototype.getClass=function(){return ac};var uc=function(){};uc.prototype.edit=function(t,e){return t instanceof nc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ql?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},uc.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},uc.prototype.getClass=function(){return uc};var hc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new uh}else if(dh(arguments[0],Mh)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var h=0;h<a;h++)t._coordinates[h]=new uh}},lc={serialVersionUID:{configurable:!0}};hc.prototype.setOrdinate=function(t,e,n){switch(e){case Mh.X:this._coordinates[t].x=n;break;case Mh.Y:this._coordinates[t].y=n;break;case Mh.Z:this._coordinates[t].z=n;break;default:throw new eh("invalid ordinateIndex")}},hc.prototype.size=function(){return this._coordinates.length},hc.prototype.getOrdinate=function(t,e){switch(e){case Mh.X:return this._coordinates[t].x;case Mh.Y:return this._coordinates[t].y;case Mh.Z:return this._coordinates[t].z}return nh.NaN},hc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},hc.prototype.getCoordinateCopy=function(t){return new uh(this._coordinates[t])},hc.prototype.getDimension=function(){return this._dimension},hc.prototype.getX=function(t){return this._coordinates[t].x},hc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new hc(t,this._dimension)},hc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},hc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new hc(t,this._dimension)},hc.prototype.toString=function(){if(this._coordinates.length>0){var t=new mh(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},hc.prototype.getY=function(t){return this._coordinates[t].y},hc.prototype.toCoordinateArray=function(){return this._coordinates},hc.prototype.interfaces_=function(){return[Mh,ah]},hc.prototype.getClass=function(){return hc},lc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(hc,lc);var cc=function(){},fc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};cc.prototype.readResolve=function(){return cc.instance()},cc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new hc(arguments[0]);if(dh(arguments[0],Mh))return new hc(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new hc(t):new hc(t,e)}},cc.prototype.interfaces_=function(){return[ch,ah]},cc.prototype.getClass=function(){return cc},cc.instance=function(){return cc.instanceObject},fc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fc.instanceObject.get=function(){return new cc},Object.defineProperties(cc,fc);var pc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new hl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new bl;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(yl),dc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},gc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};dc.prototype.equals=function(t){if(!(t instanceof dc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},dc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new _h(n).compareTo(new _h(r))},dc.prototype.getScale=function(){return this._scale},dc.prototype.isFloating=function(){return this._modelType===dc.FLOATING||this._modelType===dc.FLOATING_SINGLE},dc.prototype.getType=function(){return this._modelType},dc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===dc.FLOATING?t="Floating":this._modelType===dc.FLOATING_SINGLE?t="Floating-Single":this._modelType===dc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},dc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return nh.isNaN(t)||this._modelType===dc.FLOATING_SINGLE?t:this._modelType===dc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof uh){var e=arguments[0];if(this._modelType===dc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},dc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===dc.FLOATING?t=16:this._modelType===dc.FLOATING_SINGLE?t=6:this._modelType===dc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},dc.prototype.setScale=function(t){this._scale=Math.abs(t)},dc.prototype.interfaces_=function(){return[ah,ih]},dc.prototype.getClass=function(){return dc},dc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},gc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(dc,gc);var yc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yc.prototype.readResolve=function(){return yc.nameToTypeMap.get(this._name)},yc.prototype.toString=function(){return this._name},yc.prototype.interfaces_=function(){return[ah]},yc.prototype.getClass=function(){return yc},mc.serialVersionUID.get=function(){return-552860263173159e4},mc.nameToTypeMap.get=function(){return new pc},Object.defineProperties(yc,mc),dc.Type=yc,dc.FIXED=new yc("FIXED"),dc.FLOATING=new yc("FLOATING"),dc.FLOATING_SINGLE=new yc("FLOATING SINGLE");var _c=function t(){this._precisionModel=new dc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?dh(arguments[0],ch)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof dc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},vc={serialVersionUID:{configurable:!0}};_c.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new uh(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new uh(t.getMinX(),t.getMinY()),new uh(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new uh(t.getMinX(),t.getMinY()),new uh(t.getMinX(),t.getMaxY()),new uh(t.getMaxX(),t.getMaxY()),new uh(t.getMaxX(),t.getMinY()),new uh(t.getMinX(),t.getMinY())]),null)},_c.prototype.createLineString=function(t){return t?t instanceof Array?new Jl(this.getCoordinateSequenceFactory().create(t),this):dh(t,Mh)?new Jl(t,this):void 0:new Jl(this.getCoordinateSequenceFactory().create([]),this)},_c.prototype.createMultiLineString=function(){return 0===arguments.length?new Bl(null,this):1===arguments.length?new Bl(arguments[0],this):void 0},_c.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(_c.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof tc)return this.createMultiPolygon(_c.toPolygonArray(t));if(a instanceof Jl)return this.createMultiLineString(_c.toLineStringArray(t));if(a instanceof Ql)return this.createMultiPoint(_c.toPointArray(t));jh.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_c.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_c.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof uh){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(dh(arguments[0],Mh))return new Ql(arguments[0],this)}},_c.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_c.prototype.createPolygon=function(){if(0===arguments.length)return new tc(null,null,this);if(1===arguments.length){if(dh(arguments[0],Mh)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new tc(arguments[0],arguments[1],this)},_c.prototype.getSRID=function(){return this._SRID},_c.prototype.createGeometryCollection=function(){return 0===arguments.length?new Fl(null,this):1===arguments.length?new Fl(arguments[0],this):void 0},_c.prototype.createGeometry=function(t){return new ic(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_c.prototype.getPrecisionModel=function(){return this._precisionModel},_c.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(dh(arguments[0],Mh))return new nc(arguments[0],this)}},_c.prototype.createMultiPolygon=function(){return 0===arguments.length?new rc(null,this):1===arguments.length?new rc(arguments[0],this):void 0},_c.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new ec(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new ec(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(dh(arguments[0],Mh)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=t.getCoordinateSequenceFactory().create(1,n.getDimension());Zl.copy(n,i,o,0,1),r[i]=t.createPoint(o)}return this.createMultiPoint(r)}}},_c.prototype.interfaces_=function(){return[ah]},_c.prototype.getClass=function(){return _c},_c.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.getDefaultCoordinateSequenceFactory=function(){return cc.instance()},_c.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_c.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},vc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_c,vc);var bc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xc=function(t){this.geometryFactory=t||new _c};xc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!wc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==bc.indexOf(n)?wc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?wc[n].apply(this,[e.geometries]):wc[n].apply(this,[e])},xc.prototype.write=function(t){var e=t.getGeometryType();if(!Ec[e])throw new Error("Geometry is not supported");return Ec[e].apply(this,[t])};var wc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!wc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=wc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new uh(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new uh(t[0],t[1]),new uh(t[2],t[1]),new uh(t[2],t[3]),new uh(t[0],t[3]),new uh(t[0],t[1])])},Point:function(t){var e=new uh(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=wc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=wc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=wc.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(wc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ec={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ec.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ec.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ec.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ec.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ec.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ec.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ec.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ec[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Mc=function(t){this.geometryFactory=t||new _c,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xc(this.geometryFactory)};Mc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===dc.FIXED&&this.reducePrecision(e),e},Mc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sc=function(){this.parser=new xc(this.geometryFactory)};Sc.prototype.write=function(t){return this.parser.write(t)};var Ic=function(){},Cc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Pc(t){this.message=t||""}function Lc(){this.array_=[]}Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.opposite=function(t){return t===Ic.LEFT?Ic.RIGHT:t===Ic.RIGHT?Ic.LEFT:t},Cc.ON.get=function(){return 0},Cc.LEFT.get=function(){return 1},Cc.RIGHT.get=function(){return 2},Object.defineProperties(Ic,Cc),Pc.prototype=new Error,Pc.prototype.name="EmptyStackException",Lc.prototype=new al,Lc.prototype.add=function(t){return this.array_.push(t),!0},Lc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Lc.prototype.push=function(t){return this.array_.push(t),t},Lc.prototype.pop=function(t){if(0===this.array_.length)throw new Pc;return this.array_.pop()},Lc.prototype.peek=function(){if(0===this.array_.length)throw new Pc;return this.array_[this.array_.length-1]},Lc.prototype.empty=function(){return 0===this.array_.length},Lc.prototype.isEmpty=function(){return this.empty()},Lc.prototype.search=function(t){return this.array_.indexOf(t)},Lc.prototype.size=function(){return this.array_.length},Lc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Nc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Nc.prototype.getCoordinate=function(){return this._minCoord},Nc.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Nc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();jh.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Hh.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Hh.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Hh.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Nc.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ic.LEFT;return n[e].y<n[e+1].y&&(r=Ic.RIGHT),r},Nc.prototype.getEdge=function(){return this._orientedDe},Nc.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Nc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Nc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}jh.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ic.LEFT&&(this._orientedDe=this._minDe.getSym())},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var Oc=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new uh(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Fh),Ac=function(){this.array_=[]};Ac.prototype.addLast=function(t){this.array_.push(t)},Ac.prototype.removeFirst=function(){return this.array_.shift()},Ac.prototype.isEmpty=function(){return 0===this.array_.length};var kc=function(){this._finder=null,this._dirEdgeList=new hl,this._nodes=new hl,this._rightMostCoord=null,this._env=null,this._finder=new Nc};kc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},kc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},kc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Oc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},kc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ic.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},kc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},kc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ic.RIGHT)>=1&&e.getDepth(Ic.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},kc.prototype.computeDepths=function(t){var e=new bl,n=new Ac,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},kc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},kc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Nh,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},kc.prototype.addReachable=function(t){var e=new Lc;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},kc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ic.LEFT,t.getDepth(Ic.RIGHT)),e.setDepth(Ic.RIGHT,t.getDepth(Ic.LEFT))},kc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},kc.prototype.getNodes=function(){return this._nodes},kc.prototype.getDirectedEdges=function(){return this._dirEdgeList},kc.prototype.interfaces_=function(){return[ih]},kc.prototype.getClass=function(){return kc};var Rc=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Ic.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Ic.ON]=s,this.location[Ic.LEFT]=a,this.location[Ic.RIGHT]=u}};Rc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Rc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fh.NONE)return!1;return!0},Rc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fh.NONE&&(this.location[e]=t)},Rc.prototype.isLine=function(){return 1===this.location.length},Rc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ic.ON]=this.location[Ic.ON],e[Ic.LEFT]=fh.NONE,e[Ic.RIGHT]=fh.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fh.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Rc.prototype.getLocations=function(){return this.location},Rc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ic.LEFT];this.location[Ic.LEFT]=this.location[Ic.RIGHT],this.location[Ic.RIGHT]=t},Rc.prototype.toString=function(){var t=new mh;return this.location.length>1&&t.append(fh.toLocationSymbol(this.location[Ic.LEFT])),t.append(fh.toLocationSymbol(this.location[Ic.ON])),this.location.length>1&&t.append(fh.toLocationSymbol(this.location[Ic.RIGHT])),t.toString()},Rc.prototype.setLocations=function(t,e,n){this.location[Ic.ON]=t,this.location[Ic.LEFT]=e,this.location[Ic.RIGHT]=n},Rc.prototype.get=function(t){return t<this.location.length?this.location[t]:fh.NONE},Rc.prototype.isArea=function(){return this.location.length>1},Rc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fh.NONE)return!0;return!1},Rc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ic.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Rc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fh.NONE)},Rc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Rc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Tc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Rc(e),this.elt[1]=new Rc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Rc(n.elt[0]),this.elt[1]=new Rc(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Rc(fh.NONE),this.elt[1]=new Rc(fh.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Rc(o,s,a),this.elt[1]=new Rc(o,s,a)}else if(4===arguments.length){var u=arguments[0],h=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new Rc(fh.NONE,fh.NONE,fh.NONE),this.elt[1]=new Rc(fh.NONE,fh.NONE,fh.NONE),this.elt[u].setLocations(h,l,c)}};Tc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Tc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Tc.prototype.isNull=function(t){return this.elt[t].isNull()},Tc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Tc.prototype.isLine=function(t){return this.elt[t].isLine()},Tc.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Rc(t.elt[n]):e.elt[n].merge(t.elt[n])},Tc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Tc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ic.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Tc.prototype.toString=function(){var t=new mh;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Tc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Tc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Tc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ic.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Tc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Tc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Tc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Rc(this.elt[t].location[0]))},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.toLineLabel=function(t){for(var e=new Tc(fh.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Dc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new hl,this._pts=new hl,this._label=new Tc(fh.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new hl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Dc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Hh.isCCW(this._ring.getCoordinates())},Dc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Dc.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Oc("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Oc("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();jh.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Dc.prototype.getLinearRing=function(){return this._ring},Dc.prototype.getCoordinate=function(t){return this._pts.get(t)},Dc.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Dc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Dc.prototype.isHole=function(){return this._isHole},Dc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Dc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Hh.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Dc.prototype.addHole=function(t){this._holes.add(t)},Dc.prototype.isShell=function(){return null===this._shell},Dc.prototype.getLabel=function(){return this._label},Dc.prototype.getEdges=function(){return this._edges},Dc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Dc.prototype.getShell=function(){return this._shell},Dc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ic.RIGHT);if(n===fh.NONE)return null;if(this._label.getLocation(e)===fh.NONE)return this._label.setLocation(e,n),null}},Dc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Dc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),Bc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new hl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Fc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),jc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};jc.prototype.setVisited=function(t){this._isVisited=t},jc.prototype.setInResult=function(t){this._isInResult=t},jc.prototype.isCovered=function(){return this._isCovered},jc.prototype.isCoveredSet=function(){return this._isCoveredSet},jc.prototype.setLabel=function(t){this._label=t},jc.prototype.getLabel=function(){return this._label},jc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},jc.prototype.updateIM=function(t){jh.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},jc.prototype.isInResult=function(){return this._isInResult},jc.prototype.isVisited=function(){return this._isVisited},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var zc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Tc(0,fh.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fh.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==fh.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Tc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Tc)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i);t._label.getLocation(i)===fh.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fh.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fh.BOUNDARY:n=fh.INTERIOR;break;case fh.INTERIOR:default:n=fh.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jc),Gc=function(){this.nodeMap=new Cl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Gc.prototype.find=function(t){return this.nodeMap.get(t)},Gc.prototype.addNode=function(){if(arguments[0]instanceof uh){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof zc){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gc.prototype.values=function(){return this.nodeMap.values()},Gc.prototype.getBoundaryNodes=function(t){for(var e=new hl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===fh.BOUNDARY&&e.add(r)}return e},Gc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var Uc=function(){},qc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.isNorthern=function(t){return t===Uc.NE||t===Uc.NW},Uc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Uc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Uc.isInHalfPlane=function(t,e){return e===Uc.SE?t===Uc.SE||t===Uc.SW:t===e||t===e+1},Uc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eh("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Uc.NE:Uc.SE:e>=0?Uc.NW:Uc.SW}if(arguments[0]instanceof uh&&arguments[1]instanceof uh){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new eh("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Uc.NE:Uc.SE:r.y>=n.y?Uc.NW:Uc.SW}},qc.NE.get=function(){return 0},qc.NW.get=function(){return 1},qc.SW.get=function(){return 2},qc.SE.get=function(){return 3},Object.defineProperties(Uc,qc);var Vc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Vc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Hh.computeOrientation(t._p0,t._p1,this._p1)},Vc.prototype.getDy=function(){return this._dy},Vc.prototype.getCoordinate=function(){return this._p0},Vc.prototype.setNode=function(t){this._node=t},Vc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Vc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Vc.prototype.getDirectedCoordinate=function(){return this._p1},Vc.prototype.getDx=function(){return this._dx},Vc.prototype.getLabel=function(){return this._label},Vc.prototype.getEdge=function(){return this._edge},Vc.prototype.getQuadrant=function(){return this._quadrant},Vc.prototype.getNode=function(){return this._node},Vc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Vc.prototype.computeLabel=function(t){},Vc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Uc.quadrant(this._dx,this._dy),jh.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vc.prototype.interfaces_=function(){return[ih]},Vc.prototype.getClass=function(){return Vc};var Hc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Tc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Ic.LEFT)===fh.INTERIOR&&t._label.getLocation(n,Ic.RIGHT)===fh.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ic.LEFT]+"/"+this._depth[Ic.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fh.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fh.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ic.LEFT&&(r=-1);var i=Ic.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fh.EXTERIOR&&e===fh.INTERIOR?1:t===fh.INTERIOR&&e===fh.EXTERIOR?-1:0},e}(Vc),Wc=function(){};Wc.prototype.createNode=function(t){return new zc(t,null)},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var Yc=function(){if(this._edges=new hl,this._nodes=null,this._edgeEndList=new hl,0===arguments.length)this._nodes=new Gc(new Wc);else if(1===arguments.length){var t=arguments[0];this._nodes=new Gc(t)}};Yc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Yc.prototype.find=function(t){return this._nodes.find(t)},Yc.prototype.addNode=function(){if(arguments[0]instanceof zc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof uh){var e=arguments[0];return this._nodes.addNode(e)}},Yc.prototype.getNodeIterator=function(){return this._nodes.iterator()},Yc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Yc.prototype.debugPrintln=function(t){Ph.out.println(t)},Yc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===fh.BOUNDARY},Yc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Yc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Hh.computeOrientation(t,e,r)===Hh.COLLINEAR&&Uc.quadrant(t,e)===Uc.quadrant(n,r)},Yc.prototype.getEdgeEnds=function(){return this._edgeEndList},Yc.prototype.debugPrint=function(t){Ph.out.print(t)},Yc.prototype.getEdgeIterator=function(){return this._edges.iterator()},Yc.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Yc.prototype.insertEdge=function(t){this._edges.add(t)},Yc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Yc.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Hc(r,!0),o=new Hc(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Yc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Yc.prototype.getNodes=function(){return this._nodes.values()},Yc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Xc=function(){this._geometryFactory=null,this._shellList=new hl;var t=arguments[0];this._geometryFactory=t};Xc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Xc.prototype.computePolygons=function(t){for(var e=new hl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Xc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Oc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Xc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new hl,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Xc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Xc.prototype.buildMaximalEdgeRings=function(t){for(var e=new hl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Bc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Xc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Xc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),h=u.getLinearRing(),l=h.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;l.contains(r)&&Hh.isPointInRing(i,h.getCoordinates())&&(c=!0),c&&(null===o||s.contains(l))&&(o=u)}return o},Xc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return jh.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Xc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Yc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new hl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Zc=function(){};Zc.prototype.getBounds=function(){},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Jc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Jc.prototype.getItem=function(){return this._item},Jc.prototype.getBounds=function(){return this._bounds},Jc.prototype.interfaces_=function(){return[Zc,ah]},Jc.prototype.getClass=function(){return Jc};var Kc=function(){this._size=null,this._items=null,this._size=0,this._items=new hl,this._items.add(null)};Kc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kc.prototype.size=function(){return this._size},Kc.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Kc.prototype.clear=function(){this._size=0,this._items.clear()},Kc.prototype.isEmpty=function(){return 0===this._size},Kc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Qc=function(){};Qc.prototype.visitItem=function(t){},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(){};$c.prototype.insert=function(t,e){},$c.prototype.remove=function(t,e){},$c.prototype.query=function(){},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var tf=function(){if(this._childBoundables=new hl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ef={serialVersionUID:{configurable:!0}};tf.prototype.getLevel=function(){return this._level},tf.prototype.size=function(){return this._childBoundables.size()},tf.prototype.getChildBoundables=function(){return this._childBoundables},tf.prototype.addChildBoundable=function(t){jh.isTrue(null===this._bounds),this._childBoundables.add(t)},tf.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},tf.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},tf.prototype.interfaces_=function(){return[Zc,ah]},tf.prototype.getClass=function(){return tf},ef.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(tf,ef);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var n=t.toArray();e?Al.sort(n,e):Al.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},nf.singletonList=function(t){var e=new hl;return e.add(t),e};var rf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};rf.prototype.expandToQueue=function(t,e){var n=rf.isComposite(this._boundable1),r=rf.isComposite(this._boundable2);if(n&&r)return rf.area(this._boundable1)>rf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new eh("neither boundable is composite")},rf.prototype.isLeaves=function(){return!(rf.isComposite(this._boundable1)||rf.isComposite(this._boundable2))},rf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},rf.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new rf(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},rf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},rf.prototype.getDistance=function(){return this._distance},rf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rf.prototype.interfaces_=function(){return[ih]},rf.prototype.getClass=function(){return rf},rf.area=function(t){return t.getBounds().getArea()},rf.isComposite=function(t){return t instanceof tf};var of=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new hl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];jh.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},sf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};of.prototype.getNodeCapacity=function(){return this._nodeCapacity},of.prototype.lastNode=function(t){return t.get(t.size()-1)},of.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof tf?e+=t.size(r):r instanceof Jc&&(e+=1)}return e}},of.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Jc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},of.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new hl:e}if(1===arguments.length){for(var n=arguments[0],r=new hl,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof tf){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof Jc?r.add(o.getItem()):jh.shouldNeverReachHere()}return r.size()<=0?null:r}},of.prototype.insert=function(t,e){jh.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Jc(t,e))},of.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new hl;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(jh.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof tf?t.boundablesAtLevel(r,a,o):(jh.isTrue(a instanceof Jc),-1===r&&o.add(a))}return null}},of.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new hl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(dh(arguments[2],Qc)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var h=a.get(u);t.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof tf?t.query(o,h,s):h instanceof Jc?s.visitItem(h.getItem()):jh.shouldNeverReachHere())}else if(dh(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var l=arguments[0],c=arguments[2],f=arguments[1].getChildBoundables(),p=0;p<f.size();p++){var d=f.get(p);t.getIntersectsOp().intersects(d.getBounds(),l)&&(d instanceof tf?t.query(l,d,c):d instanceof Jc?c.add(d.getItem()):jh.shouldNeverReachHere())}},of.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},of.prototype.getRoot=function(){return this.build(),this._root},of.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var h=u.next();if(t.getIntersectsOp().intersects(h.getBounds(),r)&&h instanceof tf&&(s=t.remove(r,h,o))){a=h;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},of.prototype.createHigherLevels=function(t,e){jh.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},of.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof tf){var i=t.depth(r);i>e&&(e=i)}}return e+1}},of.prototype.createParentBoundables=function(t,e){var n=this;jh.isTrue(!t.isEmpty());var r=new hl;r.add(this.createNode(e));var i=new hl(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},of.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},of.prototype.interfaces_=function(){return[ah]},of.prototype.getClass=function(){return of},of.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},sf.IntersectsOp.get=function(){return af},sf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(of,sf);var af=function(){},uf=function(){};uf.prototype.distance=function(t,e){},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var hf=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){jh.isTrue(t.length>0);for(var n=new hl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new lf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new hl;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(dh(arguments[2],Qc)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(dh(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var a=arguments[0],u=arguments[1],h=arguments[2];t.prototype.query.call(this,a,u,h)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){jh.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new hl(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(dh(arguments[0],uf)){var t=arguments[0],n=new rf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof rf){var r=arguments[0];return this.nearestNeighbour(r,nh.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&dh(arguments[1],uf)){var i=arguments[0],o=arguments[1],s=new rf(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof rf&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],h=null,l=new Kc;for(l.add(a);!l.isEmpty()&&u>0;){var c=l.poll(),f=c.getDistance();if(f>=u)break;c.isLeaves()?(u=f,h=c):c.expandToQueue(l,u)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Jc(arguments[0],arguments[1]),g=new rf(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[$c,ah]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return lf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[sh]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[sh]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(of),lf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Nh(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tf),cf=function(){};cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},cf.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=cf.relativeSign(e.x,n.x),i=cf.relativeSign(e.y,n.y);switch(t){case 0:return cf.compareValue(r,i);case 1:return cf.compareValue(i,r);case 2:return cf.compareValue(i,-r);case 3:return cf.compareValue(-r,i);case 4:return cf.compareValue(-r,-i);case 5:return cf.compareValue(-i,-r);case 6:return cf.compareValue(-i,r);case 7:return cf.compareValue(r,-i)}return jh.shouldNeverReachHere("invalid octant value"),0},cf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ff=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new uh(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ff.prototype.getCoordinate=function(){return this.coord},ff.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ff.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:cf.compare(this._segmentOctant,this.coord,e.coord)},ff.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ff.prototype.isInterior=function(){return this._isInterior},ff.prototype.interfaces_=function(){return[ih]},ff.prototype.getClass=function(){return ff};var pf=function(){this._nodeMap=new Cl,this._edge=null;var t=arguments[0];this._edge=t};pf.prototype.getSplitCoordinates=function(){var t=new cl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},pf.prototype.addCollapsedNodes=function(){var t=new hl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},pf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new _h(e+1))}},pf.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new uh(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new uh(e.coord))},pf.prototype.iterator=function(){return this._nodeMap.values().iterator()},pf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},pf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},pf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new _h(e[0])),r=i}},pf.prototype.getEdge=function(){return this._edge},pf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},pf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uh(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new uh(e.coord)),new mf(o,this._edge.getData())},pf.prototype.add=function(t,e){var n=new ff(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(jh.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},pf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Fh("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Fh("bad split edge end point at "+i)},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var df=function(){};df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eh("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof uh&&arguments[1]instanceof uh){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new eh("Cannot compute the octant for two identical points "+i);return df.octant(s,a)}};var gf=function(){};gf.prototype.getCoordinates=function(){},gf.prototype.size=function(){},gf.prototype.getCoordinate=function(t){},gf.prototype.isClosed=function(){},gf.prototype.setData=function(t){},gf.prototype.getData=function(){},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var yf=function(){};yf.prototype.addIntersection=function(t,e){},yf.prototype.interfaces_=function(){return[gf]},yf.prototype.getClass=function(){return yf};var mf=function(){this._nodeList=new pf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};mf.prototype.getCoordinates=function(){return this._pts},mf.prototype.size=function(){return this._pts.length},mf.prototype.getCoordinate=function(t){return this._pts[t]},mf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},mf.prototype.setData=function(t){this._data=t},mf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:df.octant(t,e)},mf.prototype.getData=function(){return this._data},mf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new uh(arguments[0].getIntersection(r));this.addIntersection(i,n)}},mf.prototype.toString=function(){return Dh.toLineString(new hc(this._pts))},mf.prototype.getNodeList=function(){return this._nodeList},mf.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},mf.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},mf.prototype.interfaces_=function(){return[yf]},mf.prototype.getClass=function(){return mf},mf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new hl;return mf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var _f=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new uh,this.p1=new uh;else if(1===arguments.length){var t=arguments[0];this.p0=new uh(t.p0),this.p1=new uh(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new uh(e,n),this.p1=new uh(r,i)}},vf={serialVersionUID:{configurable:!0}};_f.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_f.prototype.orientationIndex=function(){if(arguments[0]instanceof _f){var t=arguments[0],e=Hh.orientationIndex(this.p0,this.p1,t.p0),n=Hh.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof uh){var r=arguments[0];return Hh.orientationIndex(this.p0,this.p1,r)}},_f.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},_f.prototype.isVertical=function(){return this.p0.x===this.p1.x},_f.prototype.equals=function(t){if(!(t instanceof _f))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},_f.prototype.intersection=function(t){var e=new Uh;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},_f.prototype.project=function(){if(arguments[0]instanceof uh){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new uh(t);var e=this.projectionFactor(t),n=new uh;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof _f){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new _f(s,a)}},_f.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_f.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_f.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},_f.prototype.distancePerpendicular=function(t){return Hh.distancePointLinePerpendicular(t,this.p0,this.p1)},_f.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_f.prototype.midPoint=function(){return _f.midPoint(this.p0,this.p1)},_f.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?nh.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},_f.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=nh.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},_f.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},_f.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_f.prototype.getLength=function(){return this.p0.distance(this.p1)},_f.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},_f.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},_f.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},_f.prototype.lineIntersection=function(t){try{return Lh.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Ch))throw t}return null},_f.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_f.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new uh(n-u,r+a)},_f.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},_f.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nh.isNaN(e))&&(e=1),e},_f.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_f.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_f.prototype.distance=function(){if(arguments[0]instanceof _f){var t=arguments[0];return Hh.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof uh){var e=arguments[0];return Hh.distancePointLine(e,this.p0,this.p1)}},_f.prototype.pointAlong=function(t){var e=new uh;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},_f.prototype.hashCode=function(){var t=nh.doubleToLongBits(this.p0.x);t^=31*nh.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=nh.doubleToLongBits(this.p1.x);return n^=31*nh.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},_f.prototype.interfaces_=function(){return[ih,ah]},_f.prototype.getClass=function(){return _f},_f.midPoint=function(t,e){return new uh((t.x+e.x)/2,(t.y+e.y)/2)},vf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_f,vf);var bf=function(){this.tempEnv1=new Nh,this.tempEnv2=new Nh,this._overlapSeg1=new _f,this._overlapSeg2=new _f};bf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var xf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};xf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},xf.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},xf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},xf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},xf.prototype.setId=function(t){this._id=t},xf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},xf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Nh(t,e)}return this._env},xf.prototype.getEndIndex=function(){return this._end},xf.prototype.getStartIndex=function(){return this._start},xf.prototype.getContext=function(){return this._context},xf.prototype.getId=function(){return this._id},xf.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],h=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,h),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),c=Math.trunc((r+i)/2);t<l&&(r<c&&this.computeOverlapsInternal(t,l,n,r,c,o),c<i&&this.computeOverlapsInternal(t,l,n,c,i,o)),l<e&&(r<c&&this.computeOverlapsInternal(l,e,n,r,c,o),c<i&&this.computeOverlapsInternal(l,e,n,c,i,o))},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var wf=function(){};wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.getChainStartIndices=function(t){var e=0,n=new hl;n.add(new _h(e));do{var r=wf.findChainEnd(t,e);n.add(new _h(r)),e=r}while(e<t.length-1);return wf.toIntArray(n)},wf.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Uc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Uc.quadrant(t[i-1],t[i])===r);)i++;return i-1},wf.getChains=function(){if(1===arguments.length){var t=arguments[0];return wf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new hl,i=wf.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new xf(e,i[o],i[o+1],n);r.add(s)}return r}},wf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ef=function(){};Ef.prototype.computeNodes=function(t){},Ef.prototype.getNodedSubstrings=function(){},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef};var Mf=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Mf.prototype.setSegmentIntersector=function(t){this._segInt=t},Mf.prototype.interfaces_=function(){return[Ef]},Mf.prototype.getClass=function(){return Mf};var Sf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new hl,this._index=new hf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=wf.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new If(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return If},Object.defineProperties(e,n),e}(Mf),If=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bf),Cf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Pf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cf.prototype.getEndCapStyle=function(){return this._endCapStyle},Cf.prototype.isSingleSided=function(){return this._isSingleSided},Cf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cf.JOIN_ROUND&&(this._quadrantSegments=Cf.DEFAULT_QUADRANT_SEGMENTS)},Cf.prototype.getJoinStyle=function(){return this._joinStyle},Cf.prototype.setJoinStyle=function(t){this._joinStyle=t},Cf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cf.prototype.getMitreLimit=function(){return this._mitreLimit},Cf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cf.prototype.setSingleSided=function(t){this._isSingleSided=t},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Pf.CAP_ROUND.get=function(){return 1},Pf.CAP_FLAT.get=function(){return 2},Pf.CAP_SQUARE.get=function(){return 3},Pf.JOIN_ROUND.get=function(){return 1},Pf.JOIN_MITRE.get=function(){return 2},Pf.JOIN_BEVEL.get=function(){return 3},Pf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Pf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Pf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cf,Pf);var Lf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Hh.COUNTERCLOCKWISE,this._inputLine=t||null},Nf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Lf.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Lf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Lf.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Lf.prototype.isShallowConcavity=function(t,e,n,r){return Hh.computeOrientation(t,e,n)===this._angleOrientation&&Hh.distancePointLine(e,t,n)<r},Lf.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Lf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Lf.prototype.isConcave=function(t,e,n){return Hh.computeOrientation(t,e,n)===this._angleOrientation},Lf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Hh.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Lf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Lf.DELETE;)e++;return e},Lf.prototype.isShallow=function(t,e,n,r){return Hh.distancePointLine(e,t,n)<r},Lf.prototype.collapseLine=function(){for(var t=new cl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Lf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Lf.simplify=function(t,e){return new Lf(t).simplify(e)},Nf.INIT.get=function(){return 0},Nf.DELETE.get=function(){return 1},Nf.KEEP.get=function(){return 1},Nf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Lf,Nf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new hl},Af={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new uh(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new _c).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new uh(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Af.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,Af);var kf=function(){},Rf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.toDegrees=function(t){return 180*t/Math.PI},kf.normalize=function(t){for(;t>Math.PI;)t-=kf.PI_TIMES_2;for(;t<=-Math.PI;)t+=kf.PI_TIMES_2;return t},kf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},kf.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},kf.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},kf.interiorAngle=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n);return Math.abs(i-r)},kf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=kf.PI_TIMES_2;t>=kf.PI_TIMES_2&&(t=0)}else{for(;t>=kf.PI_TIMES_2;)t-=kf.PI_TIMES_2;t<0&&(t=0)}return t},kf.angleBetween=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n);return kf.diff(r,i)},kf.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},kf.toRadians=function(t){return t*Math.PI/180},kf.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?kf.COUNTERCLOCKWISE:n<0?kf.CLOCKWISE:kf.NONE},kf.angleBetweenOriented=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n)-r;return i<=-Math.PI?i+kf.PI_TIMES_2:i>Math.PI?i-kf.PI_TIMES_2:i},Rf.PI_TIMES_2.get=function(){return 2*Math.PI},Rf.PI_OVER_2.get=function(){return Math.PI/2},Rf.PI_OVER_4.get=function(){return Math.PI/4},Rf.COUNTERCLOCKWISE.get=function(){return Hh.COUNTERCLOCKWISE},Rf.CLOCKWISE.get=function(){return Hh.CLOCKWISE},Rf.NONE.get=function(){return Hh.COLLINEAR},Object.defineProperties(kf,Rf);var Tf=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _f,this._seg1=new _f,this._offset0=new _f,this._offset1=new _f,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Uh,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Df={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Tf.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Hh.computeOrientation(this._s0,this._s1,this._s2),r=n===Hh.CLOCKWISE&&this._side===Ic.LEFT||n===Hh.COUNTERCLOCKWISE&&this._side===Ic.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Tf.prototype.addLineEndCap=function(t,e){var n=new _f(t,e),r=new _f;this.computeOffsetSegment(n,Ic.LEFT,this._distance,r);var i=new _f;this.computeOffsetSegment(n,Ic.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Hh.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cf.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Cf.CAP_SQUARE:var u=new uh;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var h=new uh(r.p1.x+u.x,r.p1.y+u.y),l=new uh(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(h),this._segList.addPt(l)}},Tf.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Tf.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Lh.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Ch))throw t;o=new uh(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Tf.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,h=n.y-t.y,l=Math.atan2(h,u);r===Hh.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},Tf.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Tf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Tf.prototype.createSquare=function(t){this._segList.addPt(new uh(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new uh(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new uh(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new uh(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Tf.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Tf.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Tf.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Tf.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Tf.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=kf.angle(i,this._seg0.p0),s=kf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=kf.normalize(o+s),u=kf.normalize(a+Math.PI),h=r*n,l=n-h*Math.abs(Math.sin(s)),c=i.x+h*Math.cos(u),f=i.y+h*Math.sin(u),p=new uh(c,f),d=new _f(i,p),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ic.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Tf.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ic.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,h=i*n*s/a;r.p0.x=t.p0.x-h,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-h,r.p1.y=t.p1.y+u},Tf.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Hh.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,h=0,l=new uh;h<s;){var c=e+o*h;l.x=t.x+i*Math.cos(c),l.y=t.y+i*Math.sin(c),this._segList.addPt(l),h+=u}},Tf.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Tf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new uh((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new uh((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Tf.prototype.createCircle=function(t){var e=new uh(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Tf.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Tf.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Tf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Tf.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Hh.CLOCKWISE,this._distance))},Tf.prototype.closeRing=function(){this._segList.closeRing()},Tf.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Df.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Df.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Tf,Df);var Ff=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ff.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&fl.reverse(o),o},Ff.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Lf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ic.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Lf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ic.LEFT),n.addFirstSegment();for(var h=2;h<=u;h++)n.addNextSegment(a[h],!0)}n.addLastSegment(),n.closeRing()},Ff.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ic.RIGHT&&(r=-r);var i=Lf.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ff.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Lf.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ic.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Lf.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ic.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ff.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:e.createCircle(t);break;case Cf.CAP_SQUARE:e.createSquare(t)}},Ff.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Ff.prototype.getBufferParameters=function(){return this._bufParams},Ff.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ff.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ff.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ff.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Lf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ic.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Lf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ic.LEFT),n.addFirstSegment();for(var h=2;h<=u;h++)n.addNextSegment(a[h],!0)}n.addLastSegment()},Ff.prototype.getSegGen=function(t){return new Tf(this._precisionModel,this._bufParams,t)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new uh(t[n]);return e};var Bf=function(){this._subgraphs=null,this._seg=new _f,this._cga=new Hh;var t=arguments[0];this._subgraphs=t},jf={DepthSegment:{configurable:!0}};Bf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new hl,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(dh(arguments[2],al)&&arguments[0]instanceof uh&&arguments[1]instanceof Hc){for(var s=arguments[0],a=arguments[1],u=arguments[2],h=a.getEdge().getCoordinates(),l=0;l<h.length-1;l++)if(t._seg.p0=h[l],t._seg.p1=h[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Hh.computeOrientation(t._seg.p0,t._seg.p1,s)===Hh.RIGHT)){var c=a.getDepth(Ic.LEFT);t._seg.p0.equals(h[l])||(c=a.getDepth(Ic.RIGHT));var f=new zf(t._seg,c);u.add(f)}}else if(dh(arguments[2],al)&&arguments[0]instanceof uh&&dh(arguments[1],al))for(var p=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var y=g.next();y.isForward()&&t.findStabbedSegments(p,y,d)}},Bf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},jf.DepthSegment.get=function(){return zf},Object.defineProperties(Bf,jf);var zf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new _f(t),this._leftDepth=e};zf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},zf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},zf.prototype.toString=function(){return this._upwardSeg.toString()},zf.prototype.interfaces_=function(){return[ih]},zf.prototype.getClass=function(){return zf};var Gf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Gf.prototype.area=function(){return Gf.area(this.p0,this.p1,this.p2)},Gf.prototype.signedArea=function(){return Gf.signedArea(this.p0,this.p1,this.p2)},Gf.prototype.interpolateZ=function(t){if(null===t)throw new eh("Supplied point is null.");return Gf.interpolateZ(t,this.p0,this.p1,this.p2)},Gf.prototype.longestSideLength=function(){return Gf.longestSideLength(this.p0,this.p1,this.p2)},Gf.prototype.isAcute=function(){return Gf.isAcute(this.p0,this.p1,this.p2)},Gf.prototype.circumcentre=function(){return Gf.circumcentre(this.p0,this.p1,this.p2)},Gf.prototype.area3D=function(){return Gf.area3D(this.p0,this.p1,this.p2)},Gf.prototype.centroid=function(){return Gf.centroid(this.p0,this.p1,this.p2)},Gf.prototype.inCentre=function(){return Gf.inCentre(this.p0,this.p1,this.p2)},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Gf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Gf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Gf.det=function(t,e,n,r){return t*r-e*n},Gf.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,h=r.y-o,l=s*h-a*u,c=t.x-i,f=t.y-o,p=(h*c-a*f)/l,d=(-u*c+s*f)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Gf.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Gf.isAcute=function(t,e,n){return!!kf.isAcute(t,e,n)&&!!kf.isAcute(e,n,t)&&!!kf.isAcute(n,t,e)},Gf.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,h=2*Gf.det(o,s,a,u),l=Gf.det(s,o*o+s*s,u,a*a+u*u),c=Gf.det(o,o*o+s*s,a,a*a+u*u);return new uh(r-l/h,i+c/h)},Gf.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Lh(t.x+n/2,t.y+r/2,1),o=new Lh(t.x-r+n/2,t.y+n+r/2,1);return new Lh(i,o)},Gf.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new uh(t.x+i*o,t.y+i*s)},Gf.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,h=i*u-o*a,l=o*s-r*u,c=r*a-i*s,f=h*h+l*l+c*c;return Math.sqrt(f)/2},Gf.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new uh(r,i)},Gf.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new uh(a,u)};var Uf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new hl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Uf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fh.EXTERIOR,fh.INTERIOR)},Uf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Ic.LEFT;this._distance<0&&(n=-this._distance,r=Ic.RIGHT);var i=t.getExteriorRing(),o=fl.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,fh.EXTERIOR,fh.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=fl.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,Ic.opposite(r),fh.INTERIOR,fh.EXTERIOR)}},Uf.prototype.isTriangleErodedCompletely=function(t,e){var n=new Gf(t[0],t[1],t[2]),r=n.inCentre();return Hh.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Uf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=fl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fh.EXTERIOR,fh.INTERIOR)},Uf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new mf(t,new Tc(0,fh.BOUNDARY,e,n));this._curveList.add(r)},Uf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Uf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<nc.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=nc.MINIMUM_VALID_SIZE&&Hh.isCCW(t)&&(o=i,s=r,n=Ic.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Uf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof tc?this.addPolygon(t):t instanceof Jl?this.addLineString(t):t instanceof Ql?this.addPoint(t):(t instanceof ec||t instanceof Bl||t instanceof rc||t instanceof Fl)&&this.addCollection(t)},Uf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Uf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var qf=function(){};qf.prototype.locate=function(t){},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Vf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ul;var t=this._parent.getGeometryN(this._index++);return t instanceof Fl?(this._subcollectionIterator=new Vf(t),this._subcollectionIterator.next()):t},Vf.prototype.remove=function(){throw new Error(this.getClass().getName())},Vf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vf.prototype.interfaces_=function(){return[sl]},Vf.prototype.getClass=function(){return Vf},Vf.isAtomic=function(t){return!(t instanceof Fl)};var Hf=function(){this._geom=null;var t=arguments[0];this._geom=t};Hf.prototype.locate=function(t){return Hf.locate(t,this._geom)},Hf.prototype.interfaces_=function(){return[qf]},Hf.prototype.getClass=function(){return Hf},Hf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Hh.isPointInRing(t,e.getCoordinates())},Hf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Hf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Hf.isPointInRing(t,i))return!1}return!0},Hf.containsPoint=function(t,e){if(e instanceof tc)return Hf.containsPointInPolygon(t,e);if(e instanceof Fl)for(var n=new Vf(e);n.hasNext();){var r=n.next();if(r!==e&&Hf.containsPoint(t,r))return!0}return!1},Hf.locate=function(t,e){return e.isEmpty()?fh.EXTERIOR:Hf.containsPoint(t,e)?fh.INTERIOR:fh.EXTERIOR};var Wf=function(){this._edgeMap=new Cl,this._edgeList=null,this._ptInAreaLocation=[fh.NONE,fh.NONE]};Wf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Wf.prototype.propagateSideLabels=function(t){for(var e=fh.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ic.LEFT)!==fh.NONE&&(e=r.getLocation(t,Ic.LEFT))}if(e===fh.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ic.ON)===fh.NONE&&a.setLocation(t,Ic.ON,i),a.isArea(t)){var u=a.getLocation(t,Ic.LEFT),h=a.getLocation(t,Ic.RIGHT);if(h!==fh.NONE){if(h!==i)throw new Oc("side location conflict",s.getCoordinate());u===fh.NONE&&jh.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else jh.isTrue(a.getLocation(t,Ic.LEFT)===fh.NONE,"found single null side"),a.setLocation(t,Ic.RIGHT,i),a.setLocation(t,Ic.LEFT,i)}}},Wf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Wf.prototype.print=function(t){Ph.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Wf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ic.LEFT);jh.isTrue(r!==fh.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();jh.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ic.LEFT),u=s.getLocation(t,Ic.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Wf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Wf.prototype.iterator=function(){return this.getEdges().iterator()},Wf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new hl(this._edgeMap.values())),this._edgeList},Wf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fh.NONE&&(this._ptInAreaLocation[t]=Hf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Wf.prototype.toString=function(){var t=new mh;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Wf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Wf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===fh.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var h=fh.NONE;if(e[u])h=fh.EXTERIOR;else{var l=s.getCoordinate();h=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,h)}},Wf.prototype.getDegree=function(){return this._edgeMap.size()},Wf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf};var Yf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Oc("no outgoing dirEdge found",this.getCoordinate());jh.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Uc.isNorthern(i)&&Uc.isNorthern(o)?n:Uc.isNorthern(i)||Uc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(jh.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Ph.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new hl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Ic.LEFT),i=e.getDepth(Ic.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,o)!==i)throw new Oc("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],u=arguments[0];u<s;u++){var h=t._edgeList.get(u);h.setEdgeDepths(Ic.RIGHT,a),a=h.getDepth(Ic.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(jh.isTrue(null!==n,"found null for first outgoing dirEdge"),jh.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fh.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fh.INTERIOR;break}if(r.isInResult()){t=fh.EXTERIOR;break}}}if(t===fh.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===fh.INTERIOR):(s.isInResult()&&(i=fh.EXTERIOR),a.isInResult()&&(i=fh.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Tc(fh.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==fh.INTERIOR&&o!==fh.BOUNDARY||this._label.setLocation(i,fh.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wf),Xf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new zc(t,new Yf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wc),Zf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Zf.prototype.compareTo=function(t){var e=t;return Zf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Zf.prototype.interfaces_=function(){return[ih]},Zf.prototype.getClass=function(){return Zf},Zf.orientation=function(t){return 1===fl.increasingDirection(t)},Zf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,h=r?0:n.length-1;;){var l=t[u].compareTo(n[h]);if(0!==l)return l;var c=(u+=i)===s,f=(h+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}};var Jf=function(){this._edges=new hl,this._ocaMap=new Cl};Jf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Jf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Jf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Jf.prototype.iterator=function(){return this._edges.iterator()},Jf.prototype.getEdges=function(){return this._edges},Jf.prototype.get=function(t){return this._edges.get(t)},Jf.prototype.findEqualEdge=function(t){var e=new Zf(t.getCoordinates());return this._ocaMap.get(e)},Jf.prototype.add=function(t){this._edges.add(t);var e=new Zf(t.getCoordinates());this._ocaMap.put(e,t)},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,n,r){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var Qf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Qf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Qf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Qf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qf.prototype.getLineIntersector=function(){return this._li},Qf.prototype.hasProperIntersection=function(){return this._hasProper},Qf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Qf.prototype.hasIntersection=function(){return this._hasIntersection},Qf.prototype.isDone=function(){return!1},Qf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Qf.prototype.interfaces_=function(){return[Kf]},Qf.prototype.getClass=function(){return Qf},Qf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $f=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new uh(t),this.segmentIndex=e,this.dist=n};$f.prototype.getSegmentIndex=function(){return this.segmentIndex},$f.prototype.getCoordinate=function(){return this.coord},$f.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$f.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$f.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$f.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$f.prototype.getDistance=function(){return this.dist},$f.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$f.prototype.interfaces_=function(){return[ih]},$f.prototype.getClass=function(){return $f};var tp=function(){this._nodeMap=new Cl,this.edge=null;var t=arguments[0];this.edge=t};tp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tp.prototype.iterator=function(){return this._nodeMap.values().iterator()},tp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},tp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uh(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new op(o,new Tc(this.edge._label))},tp.prototype.add=function(t,e,n){var r=new $f(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},tp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.getChainStartIndices=function(t){var e=0,n=new hl;n.add(new _h(e));do{var r=this.findChainEnd(t,e);n.add(new _h(r)),e=r}while(e<t.length-1);return ep.toIntArray(n)},ep.prototype.findChainEnd=function(t,e){for(var n=Uc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Uc.quadrant(t[r-1],t[r])===n;)r++;return r-1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Nh,this.env2=new Nh;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ep;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],h=arguments[5],l=this.pts[i],c=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return h.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,c),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,h),g<u&&this.computeIntersectsForChain(i,d,s,g,u,h)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,h),g<u&&this.computeIntersectsForChain(d,o,s,g,u,h))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var rp=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ip={NULL_VALUE:{configurable:!0}};rp.prototype.getDepth=function(t,e){return this._depth[t][e]},rp.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},rp.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==rp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===rp.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===rp.NULL_VALUE}},rp.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},rp.prototype.getDelta=function(t){return this._depth[t][Ic.RIGHT]-this._depth[t][Ic.LEFT]},rp.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fh.EXTERIOR:fh.INTERIOR},rp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},rp.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==fh.EXTERIOR&&i!==fh.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=rp.depthAtLocation(i):t._depth[n][r]+=rp.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===fh.INTERIOR&&this._depth[o][s]++}},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.depthAtLocation=function(t){return t===fh.EXTERIOR?0:t===fh.INTERIOR?1:rp.NULL_VALUE},ip.NULL_VALUE.get=function(){return-1},Object.defineProperties(rp,ip);var op=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rp,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Tc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Nh;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new uh(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new mh;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ic.ON),e.getLocation(1,Ic.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ic.LEFT),e.getLocation(1,Ic.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ic.RIGHT),e.getLocation(1,Ic.RIGHT),2))},e}(jc),sp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jf,this._bufParams=t||null};sp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},sp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Tc(t.getLabel())).flip(),n.merge(r);var i=sp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(sp.depthDelta(t.getLabel()))},sp.prototype.buildSubgraphs=function(t,e){for(var n=new hl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Bf(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},sp.prototype.createSubgraphs=function(t){for(var e=new hl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new kc;i.create(r),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},sp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Sf,n=new Uh;return n.setPrecisionModel(t),e.setSegmentIntersector(new Qf(n)),e},sp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Ff(n,this._bufParams),i=new Uf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Yc(new Xf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Xc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},sp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new op(i.getCoordinates(),new Tc(s));this.insertUniqueEdge(a)}}},sp.prototype.setNoder=function(t){this._workingNoder=t},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.depthDelta=function(t){var e=t.getLocation(0,Ic.LEFT),n=t.getLocation(0,Ic.RIGHT);return e===fh.INTERIOR&&n===fh.EXTERIOR?1:e===fh.EXTERIOR&&n===fh.INTERIOR?-1:0},sp.convertSegStrings=function(t){for(var e=new _c,n=new hl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ap=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ap.prototype.rescale=function(){var t=this;if(dh(arguments[0],il))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],i=0;i<r.length;i++)r[i].x=r[i].x/t._scaleFactor+t._offsetX,r[i].y=r[i].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&Ph.out.println(r)}},ap.prototype.scale=function(){var t=this;if(dh(arguments[0],il)){for(var e=arguments[0],n=new hl,r=e.iterator();r.hasNext();){var i=r.next();n.add(new mf(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new uh(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return fl.removeRepeatedPoints(s)}},ap.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ap.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ap.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ap.prototype.interfaces_=function(){return[Ef]},ap.prototype.getClass=function(){return ap};var up=function(){this._li=new Uh,this._segStrings=null;var t=arguments[0];this._segStrings=t},hp={fact:{configurable:!0}};up.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var o=i.next().getCoordinates(),s=1;s<o.length-1;s++)if(o[s].equals(r))throw new Fh("found endpt/interior pt intersection at index "+s+" :pt "+r)},up.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),h=0;h<a.length-1;h++)for(var l=0;l<u.length-1;l++)t.checkInteriorIntersections(o,h,s,l);else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(c===p&&f===d)return null;var g=c.getCoordinates()[f],y=c.getCoordinates()[f+1],m=p.getCoordinates()[d],_=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,m,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,m,_)))throw new Fh("found non-noded intersection at "+g+"-"+y+" and "+m+"-"+_)}},up.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},up.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),i=0;i<r.length-2;i++)t.checkCollapse(r[i],r[i+1],r[i+2])},up.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},up.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Fh("found non-noded collapse at "+up.fact.createLineString([t,e,n]))},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},hp.fact.get=function(){return new _c},Object.defineProperties(up,hp);var lp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new eh("Scale factor must be non-zero");1!==e&&(this._pt=new uh(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new uh,this._p1Scaled=new uh),this.initCorners(this._pt)},cp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};lp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return jh.isTrue(!(s&&a),"Found bad envelope test"),a},lp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new uh(this._maxx,this._maxy),this._corner[1]=new uh(this._minx,this._maxy),this._corner[2]=new uh(this._minx,this._miny),this._corner[3]=new uh(this._maxx,this._miny)},lp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},lp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},lp.prototype.getCoordinate=function(){return this._originalPt},lp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},lp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=lp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Nh(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},lp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},lp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},lp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},cp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(lp,cp);var fp=function(){this.tempEnv1=new Nh,this.selectedSegment=new _f};fp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._index=null;var t=arguments[0];this._index=t},dp={HotPixelSnapAction:{configurable:!0}};pp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new gp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Qc]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},dp.HotPixelSnapAction.get=function(){return gp},Object.defineProperties(pp,dp);var gp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),yp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new hl};yp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},yp.prototype.isDone=function(){return!1},yp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yp.prototype.interfaces_=function(){return[Kf]},yp.prototype.getClass=function(){return yp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Uh,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mp.prototype.checkCorrectness=function(t){var e=mf.getNodedSubstrings(t),n=new up(e);try{n.checkValid()}catch(t){if(!(t instanceof Ih))throw t;t.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},mp.prototype.findInteriorIntersections=function(t,e){var n=new yp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var t=this;if(dh(arguments[0],il))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof mf)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length;o++){var s=new lp(i[o],t._scaleFactor,t._li);t._pointSnapper.snap(s,r,o)&&r.addIntersection(i[o],o)}},mp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Sf,this._pointSnapper=new pp(this._noder.getIndex()),this.snapRound(t,this._li)},mp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new lp(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},mp.prototype.interfaces_=function(){return[Ef]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},vp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(t){var e=new ap(new mp(new dc(1)),t.getScale()),n=new sp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=_p.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=_p.precisionScaleFactor(this._argGeom,this._distance,n),i=new dc(r);this.bufferFixedPrecision(i)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===dc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},_p.prototype.bufferOriginalPrecision=function(){try{var t=new sp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Fh))throw t;this._saveException=t}},_p.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new _p(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Xh&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new _p(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Cf&&arguments[0]instanceof Xh&&"number"==typeof arguments[1]){var i=arguments[1];return new _p(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new _p(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}},_p.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=gh.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},vp.CAP_ROUND.get=function(){return Cf.CAP_ROUND},vp.CAP_BUTT.get=function(){return Cf.CAP_FLAT},vp.CAP_FLAT.get=function(){return Cf.CAP_FLAT},vp.CAP_SQUARE.get=function(){return Cf.CAP_SQUARE},vp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,vp);var bp=function(){this._pt=[new uh,new uh],this._distance=nh.NaN,this._isNull=!0};bp.prototype.getCoordinates=function(){return this._pt},bp.prototype.getCoordinate=function(t){return this._pt[t]},bp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},bp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},bp.prototype.getDistance=function(){return this._distance},bp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var xp=function(){};xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.computeDistance=function(){if(arguments[2]instanceof bp&&arguments[0]instanceof Jl&&arguments[1]instanceof uh)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new _f,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof bp&&arguments[0]instanceof tc&&arguments[1]instanceof uh){var s=arguments[0],a=arguments[1],u=arguments[2];xp.computeDistance(s.getExteriorRing(),a,u);for(var h=0;h<s.getNumInteriorRing();h++)xp.computeDistance(s.getInteriorRingN(h),a,u)}else if(arguments[2]instanceof bp&&arguments[0]instanceof Xh&&arguments[1]instanceof uh){var l=arguments[0],c=arguments[1],f=arguments[2];if(l instanceof Jl)xp.computeDistance(l,c,f);else if(l instanceof tc)xp.computeDistance(l,c,f);else if(l instanceof Fl)for(var p=l,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);xp.computeDistance(g,c,f)}else f.setMinimum(l.getCoordinate(),c)}else if(arguments[2]instanceof bp&&arguments[0]instanceof _f&&arguments[1]instanceof uh){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var wp=function(t){this._maxPtDist=new bp,this._inputGeom=t||null},Ep={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};wp.prototype.computeMaxMidpointDistance=function(t){var e=new Sp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.computeMaxVertexDistance=function(t){var e=new Mp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},wp.prototype.getDistancePoints=function(){return this._maxPtDist},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},Ep.MaxPointDistanceFilter.get=function(){return Mp},Ep.MaxMidpointDistanceFilter.get=function(){return Sp},Object.defineProperties(wp,Ep);var Mp=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Mp.prototype.filter=function(t){this._minPtDist.initialize(),xp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mp.prototype.interfaces_=function(){return[Kh]},Mp.prototype.getClass=function(){return Mp};var Sp=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Sp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new uh((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),xp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sp.prototype.isDone=function(){return!1},Sp.prototype.isGeometryChanged=function(){return!1},Sp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sp.prototype.interfaces_=function(){return[Dl]},Sp.prototype.getClass=function(){return Sp};var Ip=function(t){this._comps=t||null};Ip.prototype.filter=function(t){t instanceof tc&&this._comps.add(t)},Ip.prototype.interfaces_=function(){return[Tl]},Ip.prototype.getClass=function(){return Ip},Ip.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ip.getPolygons(t,new hl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof tc?n.add(e):e instanceof Fl&&e.apply(new Ip(n)),n}};var Cp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jl&&this._lines.add(t)},Cp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cp.prototype.interfaces_=function(){return[Yh]},Cp.prototype.getClass=function(){return Cp},Cp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cp.getLines(e,n))}},Cp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Cp.getLines(t,!1)}if(2===arguments.length){if(dh(arguments[0],il)&&dh(arguments[1],il)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Cp.getLines(r,e)}return e}if(arguments[0]instanceof Xh&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new hl;return i.apply(new Cp(s,o)),s}if(arguments[0]instanceof Xh&&dh(arguments[1],il)){var a=arguments[0],u=arguments[1];return a instanceof Jl?u.add(a):a.apply(new Cp(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&dh(arguments[0],il)&&dh(arguments[1],il)){for(var h=arguments[1],l=arguments[2],c=arguments[0].iterator();c.hasNext();){var f=c.next();Cp.getLines(f,h,l)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Xh&&dh(arguments[1],il)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Cp(p,d)),p}}};var Pp=function(){if(this._boundaryRule=Qh.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new eh("Rule must be non-null");this._boundaryRule=t}};Pp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof uh&&arguments[1]instanceof tc){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fh.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===fh.EXTERIOR)return fh.EXTERIOR;if(i===fh.BOUNDARY)return fh.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===fh.INTERIOR)return fh.EXTERIOR;if(a===fh.BOUNDARY)return fh.BOUNDARY}return fh.INTERIOR}if(arguments[0]instanceof uh&&arguments[1]instanceof Jl){var u=arguments[0],h=arguments[1];if(!h.getEnvelopeInternal().intersects(u))return fh.EXTERIOR;var l=h.getCoordinates();return h.isClosed()||!u.equals(l[0])&&!u.equals(l[l.length-1])?Hh.isOnLine(u,l)?fh.INTERIOR:fh.EXTERIOR:fh.BOUNDARY}if(arguments[0]instanceof uh&&arguments[1]instanceof Ql){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?fh.INTERIOR:fh.EXTERIOR}},Pp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Hh.locatePointInRing(t,e.getCoordinates()):fh.EXTERIOR},Pp.prototype.intersects=function(t,e){return this.locate(t,e)!==fh.EXTERIOR},Pp.prototype.updateLocationInfo=function(t){t===fh.INTERIOR&&(this._isIn=!0),t===fh.BOUNDARY&&this._numBoundaries++},Pp.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Ql&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof tc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Bl)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof rc)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Fl)for(var h=new Vf(e);h.hasNext();){var l=h.next();l!==e&&n.computeLocation(t,l)}},Pp.prototype.locate=function(t,e){return e.isEmpty()?fh.EXTERIOR:e instanceof Jl||e instanceof tc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fh.BOUNDARY:this._numBoundaries>0||this._isIn?fh.INTERIOR:fh.EXTERIOR)},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Lp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Np={INSIDE_AREA:{configurable:!0}};Lp.prototype.isInsideArea=function(){return this._segIndex===Lp.INSIDE_AREA},Lp.prototype.getCoordinate=function(){return this._pt},Lp.prototype.getGeometryComponent=function(){return this._component},Lp.prototype.getSegmentIndex=function(){return this._segIndex},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Np.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Lp,Np);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof Ql&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Tl]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ql?nf.singletonList(t):Op.getPoints(t,new hl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ql?n.add(e):e instanceof Fl&&e.apply(new Op(n)),n}};var Ap=function(){this._locations=null;var t=arguments[0];this._locations=t};Ap.prototype.filter=function(t){(t instanceof Ql||t instanceof Jl||t instanceof tc)&&this._locations.add(new Lp(t,0,t.getCoordinate()))},Ap.prototype.interfaces_=function(){return[Tl]},Ap.prototype.getClass=function(){return Ap},Ap.getLocations=function(t){var e=new hl;return t.apply(new Ap(e)),e};var kp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pp,this._minDistanceLocation=null,this._minDistance=nh.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};kp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Ip.getPolygons(this._geom[n]);if(o.size()>0){var s=Ap.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&dh(arguments[0],al)&&dh(arguments[1],al)){for(var a=arguments[0],u=arguments[1],h=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),f=0;f<u.size();f++)if(t.computeContainmentDistance(c,u.get(f),h),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lp&&arguments[1]instanceof tc){var p=arguments[0],d=arguments[1],g=arguments[2],y=p.getCoordinate();if(fh.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=p,g[1]=new Lp(d,y),null}},kp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},kp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cp.getLines(this._geom[0]),n=Cp.getLines(this._geom[1]),r=Op.getPoints(this._geom[0]),i=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},kp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},kp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},kp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},kp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jl&&arguments[1]instanceof Ql){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=Hh.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new _f(i[s],i[s+1]).closestPoint(o);r[0]=new Lp(e,s,u),r[1]=new Lp(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jl&&arguments[1]instanceof Jl){var h=arguments[0],l=arguments[1],c=arguments[2];if(h.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var f=h.getCoordinates(),p=l.getCoordinates(),d=0;d<f.length-1;d++)for(var g=0;g<p.length-1;g++){var y=Hh.distanceLineLine(f[d],f[d+1],p[g],p[g+1]);if(y<t._minDistance){t._minDistance=y;var m=new _f(f[d],f[d+1]),_=new _f(p[g],p[g+1]),v=m.closestPoints(_);c[0]=new Lp(h,d,v[0]),c[1]=new Lp(l,g,v[1])}if(t._minDistance<=t._terminateDistance)return null}}},kp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Lp(o,0,o.getCoordinate()),n[1]=new Lp(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},kp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new eh("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},kp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.distance=function(t,e){return new kp(t,e).distance()},kp.isWithinDistance=function(t,e,n){return new kp(t,e,n).distance()<=n},kp.nearestPoints=function(t,e){return new kp(t,e).nearestPoints()};var Rp=function(){this._pt=[new uh,new uh],this._distance=nh.NaN,this._isNull=!0};Rp.prototype.getCoordinates=function(){return this._pt},Rp.prototype.getCoordinate=function(t){return this._pt[t]},Rp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Rp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Rp.prototype.toString=function(){return Dh.toLineString(this._pt[0],this._pt[1])},Rp.prototype.getDistance=function(){return this._distance},Rp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp};var Tp=function(){};Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.computeDistance=function(){if(arguments[2]instanceof Rp&&arguments[0]instanceof Jl&&arguments[1]instanceof uh)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new _f,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof tc&&arguments[1]instanceof uh){var a=arguments[0],u=arguments[1],h=arguments[2];Tp.computeDistance(a.getExteriorRing(),u,h);for(var l=0;l<a.getNumInteriorRing();l++)Tp.computeDistance(a.getInteriorRingN(l),u,h)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof Xh&&arguments[1]instanceof uh){var c=arguments[0],f=arguments[1],p=arguments[2];if(c instanceof Jl)Tp.computeDistance(c,f,p);else if(c instanceof tc)Tp.computeDistance(c,f,p);else if(c instanceof Fl)for(var d=c,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Tp.computeDistance(y,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof Rp&&arguments[0]instanceof _f&&arguments[1]instanceof uh){var m=arguments[1],_=arguments[2],v=arguments[0].closestPoint(m);_.setMinimum(v,m)}};var Dp=function(){this._g0=null,this._g1=null,this._ptDist=new Rp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Fp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new eh("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dp.prototype.computeOrientedDistance=function(t,e,n){var r=new Bp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new jp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.distance=function(){if(2===arguments.length)return new Dp(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dp(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Fp.MaxPointDistanceFilter.get=function(){return Bp},Fp.MaxDensifiedByFractionDistanceFilter.get=function(){return jp},Object.defineProperties(Dp,Fp);var Bp=function(){this._maxPtDist=new Rp,this._minPtDist=new Rp,this._euclideanDist=new Tp,this._geom=null;var t=arguments[0];this._geom=t};Bp.prototype.filter=function(t){this._minPtDist.initialize(),Tp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bp.prototype.interfaces_=function(){return[Kh]},Bp.prototype.getClass=function(){return Bp};var jp=function(){this._maxPtDist=new Rp,this._minPtDist=new Rp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};jp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,h=r.y+a*s,l=new uh(u,h);n._minPtDist.initialize(),Tp.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},jp.prototype.isDone=function(){return!1},jp.prototype.isGeometryChanged=function(){return!1},jp.prototype.getMaxPointDistance=function(){return this._maxPtDist},jp.prototype.interfaces_=function(){return[Dl]},jp.prototype.getClass=function(){return jp};var zp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};zp.prototype.checkMaximumDistance=function(t,e,n){var r=new Dp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Dh.toLineString(i[0],i[1])+")"}},zp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=zp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),zp.VERBOSE&&Ph.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},zp.prototype.checkNegativeValid=function(){if(!(this._input instanceof tc||this._input instanceof rc||this._input instanceof Fl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.checkMinimumDistance=function(t,e,n){var r=new kp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Dh.toLineString(i[0],i[1])+" )"}},zp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.getPolygonLines=function(t){for(var e=new hl,n=new Cp(e),r=Ip.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},zp.prototype.getErrorMessage=function(){return this._errMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},Gp.VERBOSE.get=function(){return!1},Gp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Gp);var Up=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},qp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Up.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Up.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Up.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Nh(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Nh(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Up.prototype.checkDistance=function(){var t=new zp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Up.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Up.prototype.checkPolygonal=function(){this._result instanceof tc||this._result instanceof rc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Up.prototype.report=function(t){if(!Up.VERBOSE)return null;Ph.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Up.prototype.getErrorMessage=function(){return this._errorMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.isValidMsg=function(t,e,n){var r=new Up(t,e,n);return r.isValid()?null:r.getErrorMessage()},Up.isValid=function(t,e,n){return!!new Up(t,e,n).isValid()},qp.VERBOSE.get=function(){return!1},qp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,qp);var Vp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Vp.prototype.getCoordinates=function(){return this._pts},Vp.prototype.size=function(){return this._pts.length},Vp.prototype.getCoordinate=function(t){return this._pts[t]},Vp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:df.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vp.prototype.setData=function(t){this._data=t},Vp.prototype.getData=function(){return this._data},Vp.prototype.toString=function(){return Dh.toLineString(new hc(this._pts))},Vp.prototype.interfaces_=function(){return[gf]},Vp.prototype.getClass=function(){return Vp};var Hp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new hl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Hp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Hp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Hp.prototype.getIntersectionSegments=function(){return this._intSegments},Hp.prototype.count=function(){return this._intersectionCount},Hp.prototype.getIntersections=function(){return this._intersections},Hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Hp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Hp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Hp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Hp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Hp.prototype.interfaces_=function(){return[Kf]},Hp.prototype.getClass=function(){return Hp},Hp.createAllIntersectionsFinder=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e},Hp.createAnyIntersectionFinder=function(t){return new Hp(t)},Hp.createIntersectionCounter=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Wp=function(){this._li=new Uh,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Wp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Wp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Wp.prototype.isValid=function(){return this.execute(),this._isValid},Wp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Hp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Sf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Wp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Wp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Dh.toLineString(t[0],t[1])+" and "+Dh.toLineString(t[2],t[3])},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.computeIntersections=function(t){var e=new Wp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Yp=function t(){this._nv=null;var e=arguments[0];this._nv=new Wp(t.toSegmentStrings(e))};Yp.prototype.checkValid=function(){this._nv.checkValid()},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.toSegmentStrings=function(t){for(var e=new hl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Vp(r.getCoordinates(),r))}return e},Yp.checkValid=function(t){new Yp(t).checkValid()};var Xp=function(t){this._mapOp=t};Xp.prototype.map=function(t){for(var e=new hl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(_c.toGeometryArray(e))},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.map=function(t,e){return new Xp(e).map(t)};var Zp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new hl,this._resultLineList=new hl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Zp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Zp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Zp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Zp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ld.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Zp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Zp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Zp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Zp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(jh.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ld.isResultOfOp(r,e)&&e===Ld.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Jp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new hl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Jp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ld.INTERSECTION)){var r=n.getLabel();Ld.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Jp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof nc&&!r.isEmpty()||(n=!1);for(var i=new hl,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nc||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new hl;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var n=new hl,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var n=new hl,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.transformMultiPolygon=function(t,e){for(var n=new hl,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var n=new hl,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_c.toGeometryArray(n)):this._factory.buildGeometry(n)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Ql)return this.transformPoint(t,null);if(t instanceof ec)return this.transformMultiPoint(t,null);if(t instanceof nc)return this.transformLinearRing(t,null);if(t instanceof Jl)return this.transformLineString(t,null);if(t instanceof Bl)return this.transformMultiLineString(t,null);if(t instanceof tc)return this.transformPolygon(t,null);if(t instanceof rc)return this.transformMultiPolygon(t,null);if(t instanceof Fl)return this.transformGeometryCollection(t,null);throw new eh("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var Qp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _f,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Qp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new uh(o)),0===r&&this._isClosed&&t.set(t.size()-1,new uh(o)))}},Qp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Qp.prototype.snapTo=function(t){var e=new cl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Qp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new uh(i),!1)}},Qp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=nh.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},Qp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $p=function(t){this._srcGeom=t||null},td={SNAP_PRECISION_FACTOR:{configurable:!0}};$p.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ed(e,n).transform(this._srcGeom)},$p.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ed(t,n,!0).transform(this._srcGeom),i=r;return e&&dh(i,$l)&&(i=r.buffer(0)),i},$p.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$p.prototype.extractTargetCoordinates=function(t){for(var e=new Nl,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},$p.prototype.computeMinimumSegmentLength=function(t){for(var e=nh.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.snap=function(t,e,n){var r=new Array(2).fill(null),i=new $p(t);r[0]=i.snapTo(e,n);var o=new $p(e);return r[1]=o.snapTo(r[0],n),r},$p.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$p.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===dc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min($p.computeOverlaySnapTolerance(i),$p.computeOverlaySnapTolerance(o))}},$p.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$p.SNAP_PRECISION_FACTOR},$p.snapToSelf=function(t,e,n){return new $p(t).snapToSelf(e,n)},td.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($p,td);var ed=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Qp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nh.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nh.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nh.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+nh.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(nd.getBit(t,r)!==nd.getBit(e,r))return n;n++}return 52};var rd=function(){this._commonCoord=null,this._ccFilter=new od},id={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rd.prototype.addCommonBits=function(t){var e=new sd(this._commonCoord);t.apply(e),t.geometryChanged()},rd.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new uh(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new sd(e);return t.apply(n),t.geometryChanged(),t},rd.prototype.getCommonCoordinate=function(){return this._commonCoord},rd.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},id.CommonCoordinateFilter.get=function(){return od},id.Translater.get=function(){return sd},Object.defineProperties(rd,id);var od=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};od.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},od.prototype.getCommonCoordinate=function(){return new uh(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},od.prototype.interfaces_=function(){return[Kh]},od.prototype.getClass=function(){return od};var sd=function(){this.trans=null;var t=arguments[0];this.trans=t};sd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},sd.prototype.isDone=function(){return!1},sd.prototype.isGeometryChanged=function(){return!0},sd.prototype.interfaces_=function(){return[Dl]},sd.prototype.getClass=function(){return sd};var ad=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ad.prototype.selfSnap=function(t){return new $p(t).snapTo(t,this._snapTolerance)},ad.prototype.removeCommonBits=function(t){this._cbr=new rd,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ad.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ad.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ld.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ad.prototype.checkValid=function(t){t.isValid()||Ph.out.println("Snapped geometry is invalid")},ad.prototype.computeSnapTolerance=function(){this._snapTolerance=$p.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ad.prototype.snap=function(t){var e=this.removeCommonBits(t);return $p.snap(e[0],e[1],this._snapTolerance)},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.overlayOp=function(t,e,n){return new ad(t,e).getResultGeometry(n)},ad.union=function(t,e){return ad.overlayOp(t,e,Ld.UNION)},ad.intersection=function(t,e){return ad.overlayOp(t,e,Ld.INTERSECTION)},ad.symDifference=function(t,e){return ad.overlayOp(t,e,Ld.SYMDIFFERENCE)},ad.difference=function(t,e){return ad.overlayOp(t,e,Ld.DIFFERENCE)};var ud=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ud.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ld.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Fh))throw t;r=t}if(!n)try{e=ad.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Fh?r:t}return e},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,n){return new ud(t,e).getResultGeometry(n)},ud.union=function(t,e){return ud.overlayOp(t,e,Ld.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Ld.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Ld.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Ld.DIFFERENCE)};var hd=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};hd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd};var ld=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},cd={INSERT:{configurable:!0},DELETE:{configurable:!0}};ld.prototype.isDelete=function(){return this._eventType===ld.DELETE},ld.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ld.prototype.getObject=function(){return this._obj},ld.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ld.prototype.getInsertEvent=function(){return this._insertEvent},ld.prototype.isInsert=function(){return this._eventType===ld.INSERT},ld.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ld.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ld.prototype.interfaces_=function(){return[ih]},ld.prototype.getClass=function(){return ld},cd.INSERT.get=function(){return 1},cd.DELETE.get=function(){return 2},Object.defineProperties(ld,cd);var fd=function(){};fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var pd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};pd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(pd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},pd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},pd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},pd.prototype.hasProperIntersection=function(){return this._hasProper},pd.prototype.hasIntersection=function(){return this._hasIntersection},pd.prototype.isDone=function(){return this._isDone},pd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},pd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},pd.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var dd=function(t){function e(){t.call(this),this.events=new hl,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pd&&dh(arguments[0],al)&&dh(arguments[1],al)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&dh(arguments[0],al)&&arguments[1]instanceof pd){var a=arguments[0],u=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new hd(n,i),s=new ld(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ld(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.addEdge(n,n)}else if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();){var o=i.next();t.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fd),gd=function(){this._min=nh.POSITIVE_INFINITY,this._max=nh.NEGATIVE_INFINITY},yd={NodeComparator:{configurable:!0}};gd.prototype.getMin=function(){return this._min},gd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},gd.prototype.getMax=function(){return this._max},gd.prototype.toString=function(){return Dh.toLineString(new uh(this._min,0),new uh(this._max,0))},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},yd.NodeComparator.get=function(){return md},Object.defineProperties(gd,yd);var md=function(){};md.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},md.prototype.interfaces_=function(){return[sh]},md.prototype.getClass=function(){return md};var _d=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),vd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),bd=function(){this._leaves=new hl,this._root=null,this._level=0};bd.prototype.buildTree=function(){nf.sort(this._leaves,new gd.NodeComparator);for(var t=this._leaves,e=null,n=new hl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},bd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(t,e,n))},bd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},bd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},bd.prototype.printNode=function(t){Ph.out.println(Dh.toLineString(new uh(t._min,this._level),new uh(t._max,this._level)))},bd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},bd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new vd(t.get(n),t.get(n+1));e.add(i)}}},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var xd=function(){this._items=new hl};xd.prototype.visitItem=function(t){this._items.add(t)},xd.prototype.getItems=function(){return this._items},xd.prototype.interfaces_=function(){return[Qc]},xd.prototype.getClass=function(){return xd};var wd=function(){this._index=null;var t=arguments[0];if(!dh(t,$l))throw new eh("Argument must be Polygonal");this._index=new Sd(t)},Ed={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};wd.prototype.locate=function(t){var e=new Vh(t),n=new Md(e);return this._index.query(t.y,t.y,n),e.getLocation()},wd.prototype.interfaces_=function(){return[qf]},wd.prototype.getClass=function(){return wd},Ed.SegmentVisitor.get=function(){return Md},Ed.IntervalIndexedGeometry.get=function(){return Sd},Object.defineProperties(wd,Ed);var Md=function(){this._counter=null;var t=arguments[0];this._counter=t};Md.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Md.prototype.interfaces_=function(){return[Qc]},Md.prototype.getClass=function(){return Md};var Sd=function(){this._index=new bd;var t=arguments[0];this.init(t)};Sd.prototype.init=function(t){for(var e=Cp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Sd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new _f(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Sd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xd;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Id=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pp,2===arguments.length){var e=arguments[0],n=arguments[1],r=Qh.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Ic.ON)===fh.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new pd(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof nc||this._parentGeom instanceof tc||this._parentGeom instanceof rc,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new pd(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Ql){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,fh.INTERIOR)}else if(arguments[0]instanceof uh){var e=arguments[0];this.insertPoint(this._argIndex,e,fh.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fh.EXTERIOR,fh.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fh.INTERIOR,fh.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fh.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fh.BOUNDARY)},e.prototype.addLineString=function(t){var e=fl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new op(e,new Tc(this._argIndex,fh.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),jh.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fh.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=fl.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Hh.isCCW(r)&&(i=n,o=e);var s=new op(r,new Tc(this._argIndex,fh.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],fh.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Tc(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new dd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof rc&&(this._useBoundaryDeterminationRule=!1),e instanceof tc)this.addPolygon(e);else if(e instanceof Jl)this.addLineString(e);else if(e instanceof Ql)this.addPoint(e);else if(e instanceof ec)this.addCollection(e);else if(e instanceof Bl)this.addCollection(e);else if(e instanceof rc)this.addCollection(e);else{if(!(e instanceof Fl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return dh(this._parentGeom,$l)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new wd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fh.BOUNDARY:fh.INTERIOR},e}(Yc),Cd=function(){if(this._li=new Uh,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Id(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Qh.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Id(0,e,r),this._arg[1]=new Id(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Id(0,i,s),this._arg[1]=new Id(1,o,s)}};Cd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Cd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd};var Pd=function(){};Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd},Pd.map=function(){if(arguments[0]instanceof Xh&&dh(arguments[1],Pd.MapOp)){for(var t=arguments[0],e=arguments[1],n=new hl,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(dh(arguments[0],il)&&dh(arguments[1],Pd.MapOp)){for(var o=arguments[0],s=arguments[1],a=new hl,u=o.iterator();u.hasNext();){var h=u.next(),l=s.map(h);null!==l&&a.add(l)}return a}},Pd.MapOp=function(){};var Ld=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Pp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jf,this._resultPolyList=new hl,this._resultLineList=new hl,this._resultPointList=new hl,this._graph=new Yc(new Xf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Tc(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new hl;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==fh.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new hl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new hl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Yp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Xc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Zp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Jp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ic.RIGHT),i.getLocation(1,Ic.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(jh.isTrue(!r.isNull(i,Ic.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ic.LEFT,r.getLocation(i,Ic.LEFT)),jh.isTrue(!r.isNull(i,Ic.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ic.RIGHT,r.getLocation(i,Ic.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cd);Ld.overlayOp=function(t,e,n){return new Ld(t,e).getResultGeometry(n)},Ld.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ld.createEmptyResult(Ld.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Xp.map(t,{interfaces_:function(){return[Pd.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Ld.INTERSECTION)},Ld.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ld.createEmptyResult(Ld.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Ld.SYMDIFFERENCE)},Ld.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ld.INTERSECTION:o=Math.min(r,i);break;case Ld.UNION:o=Math.max(r,i);break;case Ld.DIFFERENCE:o=r;break;case Ld.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ld.createEmptyResult=function(t,e,n,r){var i=null;switch(Ld.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ld.difference=function(t,e){return t.isEmpty()?Ld.createEmptyResult(Ld.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Ld.DIFFERENCE))},Ld.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ld.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===fh.BOUNDARY&&(i=fh.INTERIOR),o===fh.BOUNDARY&&(o=fh.INTERIOR),s){case Ld.INTERSECTION:return i===fh.INTERIOR&&o===fh.INTERIOR;case Ld.UNION:return i===fh.INTERIOR||o===fh.INTERIOR;case Ld.DIFFERENCE:return i===fh.INTERIOR&&o!==fh.INTERIOR;case Ld.SYMDIFFERENCE:return i===fh.INTERIOR&&o!==fh.INTERIOR||i!==fh.INTERIOR&&o===fh.INTERIOR}return!1}},Ld.INTERSECTION=1,Ld.UNION=2,Ld.DIFFERENCE=3,Ld.SYMDIFFERENCE=4;var Nd=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pp,this._seg=new _f;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Nd.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Nd.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fh.BOUNDARY:this._ptLocator.locate(t,this._g)},Nd.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var n=e.getLinework(),r=_c.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var Od=function(){this._linework=null,this._linework=new hl};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof tc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Od.prototype.interfaces_=function(){return[Tl]},Od.prototype.getClass=function(){return Od};var Ad=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ad.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ad.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ad.prototype.getPoints=function(t){for(var e=new hl,n=Cp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ad.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,h=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var c=new uh(h-u,l+a);r.add(c)}if(this._doRight){var f=new uh(h+u,l-a);r.add(f)}},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad};var kd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new hl;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Nd(this._geom[0],this._boundaryDistanceTolerance),new Nd(this._geom[1],this._boundaryDistanceTolerance),new Nd(this._geom[2],this._boundaryDistanceTolerance)]},Rd={TOLERANCE:{configurable:!0}};kd.prototype.reportResult=function(t,e,n){Ph.out.println("Overlay result invalid - A:"+fh.toLocationSymbol(e[0])+" B:"+fh.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fh.toLocationSymbol(e[2]))},kd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},kd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!kd.hasLocation(this._location,fh.BOUNDARY)||this.isValidResult(i,this._location)}},kd.prototype.addTestPts=function(t){var e=new Ad(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},kd.prototype.isValidResult=function(t,e){var n=Ld.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===fh.INTERIOR);return r||this.reportResult(t,e,n),r},kd.prototype.getInvalidLocation=function(){return this._invalidLocation},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},kd.computeBoundaryDistanceTolerance=function(t,e){return Math.min($p.computeSizeBasedSnapTolerance(t),$p.computeSizeBasedSnapTolerance(e))},kd.isValid=function(t,e,n,r){return new kd(t,e,r).isValid(n)},Rd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(kd,Rd);var Td=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Td.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Td.prototype.combine=function(){for(var t=new hl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.combine=function(){if(1===arguments.length)return new Td(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Td(Td.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Td(Td.createList(n,r,i)).combine()}},Td.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Td.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new hl;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new hl;return s.add(r),s.add(i),s.add(o),s}};var Dd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new hl)},Fd={STRTREE_NODE_CAPACITY:{configurable:!0}};Dd.prototype.reduceToGeometries=function(t){for(var e=new hl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;dh(r,al)?i=this.unionTree(r):r instanceof Xh&&(i=r),e.add(i)}return e},Dd.prototype.extractByEnvelope=function(t,e,n){for(var r=new hl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Dd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Td.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Dd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new hf(Dd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Dd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Dd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Dd.getGeometry(e,n),Dd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Dd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Dd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Dd.prototype.unionActual=function(t,e){return Dd.restrictToPolygons(t.union(e))},Dd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Dd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new hl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Td.combine(r)},Dd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.restrictToPolygons=function(t){if(dh(t,$l))return t;var e=Ip.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_c.toPolygonArray(e))},Dd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Dd.union=function(t){return new Dd(t).union()},Fd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dd,Fd);var Bd=function(){};function jd(){return new zd}function zd(){this.reset()}Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},Bd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ld.createEmptyResult(Ld.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Ld.UNION)},zd.prototype={constructor:zd,reset:function(){this.s=this.t=0},add:function(t){Ud(Gd,t,this.t),Ud(this,Gd.s,this.s),this.s?this.t+=Gd.t:this.s=Gd.t},valueOf:function(){return this.s}};var Gd=new zd;function Ud(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var qd=1e-6,Vd=Math.PI,Hd=Vd/2,Wd=Vd/4,Yd=2*Vd,Xd=180/Vd,Zd=Vd/180,Jd=Math.abs,Kd=Math.atan,Qd=Math.atan2,$d=Math.cos,tg=Math.sin,eg=Math.sqrt;function ng(t){return t>1?0:t<-1?Vd:Math.acos(t)}function rg(t){return t>1?Hd:t<-1?-Hd:Math.asin(t)}function ig(){}function og(t,e){t&&hg.hasOwnProperty(t.type)&&hg[t.type](t,e)}var sg,ag,ug={Feature:function(t,e){og(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)og(n[r].geometry,e)}},hg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){lg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)lg(n[r],e,0)},Polygon:function(t,e){cg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)og(n[r],e)}};function lg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function cg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)lg(t[n],e,1);e.polygonEnd()}function fg(t){return[Qd(t[1],t[0]),rg(t[2])]}function pg(t){var e=t[0],n=t[1],r=$d(n);return[r*$d(e),r*tg(e),tg(n)]}function dg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function _g(t){var e=eg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function vg(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function bg(t,e){return[t>Vd?t-Yd:t<-Vd?t+Yd:t,e]}function xg(t){return function(e,n){return[(e+=t)>Vd?e-Yd:e<-Vd?e+Yd:e,n]}}function wg(t){var e=xg(t);return e.invert=xg(-t),e}function Eg(t,e){var n=$d(t),r=tg(t),i=$d(e),o=tg(e);function s(t,e){var s=$d(e),a=$d(t)*s,u=tg(t)*s,h=tg(e),l=h*n+a*r;return[Qd(u*i-l*o,a*n-h*r),rg(l*i+u*o)]}return s.invert=function(t,e){var s=$d(e),a=$d(t)*s,u=tg(t)*s,h=tg(e),l=h*i-u*o;return[Qd(u*i+h*o,a*n+l*r),rg(l*n-a*r)]},s}function Mg(t,e){(e=pg(e))[0]-=t,_g(e);var n=ng(-e[1]);return((-e[2]<0?-n:n)+Yd-qd)%Yd}function Sg(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ig,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ig(t,e){return Jd(t[0]-e[0])<qd&&Jd(t[1]-e[1])<qd}function Cg(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Pg(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Ig(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Cg(r,t,null,!0)),u.push(n.o=new Cg(r,null,n,!1)),a.push(n=new Cg(s,t,null,!1)),u.push(n.o=new Cg(s,null,n,!0))}})),a.length){for(u.sort(e),Lg(a),Lg(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var h,l,c=a[0];;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;h=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=h.length;o<s;++o)i.point((l=h[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(h=f.p.z,o=h.length-1;o>=0;--o)i.point((l=h[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}h=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Lg(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ng(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Og(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}jd(),jd(),jd(),bg.invert=bg,1===(sg=Ng).length&&(ag=sg,sg=function(t,e){return Ng(ag(t),e)});var Ag=1e9,kg=-Ag;function Rg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,h){var l=0,c=0;if(null==i||(l=s(i,a))!==(c=s(o,a))||u(i,o)<0^a>0)do{h.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+a+4)%4)!==c);else h.point(o[0],o[1])}function s(r,i){return Jd(r[0]-t)<qd?i>0?0:3:Jd(r[0]-n)<qd?i>0?2:1:Jd(r[1]-e)<qd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,h,l,c,f,p,d,g,y,m,_,v=s,b=Sg(),x={point:w,lineStart:function(){x.point=E,h&&h.push(l=[]),m=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(E(c,f),p&&y&&b.rejoin(),u.push(b.result())),x.point=w,y&&v.lineEnd()},polygonStart:function(){v=b,u=[],h=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,s,a=h[n],u=1,l=a.length,c=a[0],f=c[0],p=c[1];u<l;++u)o=f,s=p,f=(c=a[u])[0],p=c[1],s<=r?p>r&&(f-o)*(r-s)>(p-s)*(t-o)&&++e:p<=r&&(f-o)*(r-s)<(p-s)*(t-o)&&--e;return e}(),n=_&&e,i=(u=Og(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Pg(u,a,e,o,s),s.polygonEnd()),v=s,u=h=l=null}};function w(t,e){i(t,e)&&v.point(t,e)}function E(o,s){var a=i(o,s);if(h&&l.push([o,s]),m)c=o,f=s,p=a,m=!1,a&&(v.lineStart(),v.point(o,s));else if(a&&y)v.point(o,s);else{var u=[d=Math.max(kg,Math.min(Ag,d)),g=Math.max(kg,Math.min(Ag,g))],b=[o=Math.max(kg,Math.min(Ag,o)),s=Math.max(kg,Math.min(Ag,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],h=0,l=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<h)return;s<l&&(l=s)}else if(c>0){if(s>l)return;s>h&&(h=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>l)return;s>h&&(h=s)}else if(c>0){if(s<h)return;s<l&&(l=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<h)return;s<l&&(l=s)}else if(f>0){if(s>l)return;s>h&&(h=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>l)return;s>h&&(h=s)}else if(f>0){if(s<h)return;s<l&&(l=s)}return h>0&&(t[0]=a+h*c,t[1]=u+h*f),l<1&&(e[0]=a+l*c,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?a&&(v.lineStart(),v.point(o,s),_=!1):(y||(v.lineStart(),v.point(u[0],u[1])),v.point(b[0],b[1]),a||v.lineEnd(),_=!1)}d=o,g=s,y=a}return x}}var Tg=jd();function Dg(t){return t}jd(),jd(),jd();var Fg=1/0,Bg=Fg,jg=-Fg,zg=jg,Gg={point:function(t,e){t<Fg&&(Fg=t),t>jg&&(jg=t),e<Bg&&(Bg=e),e>zg&&(zg=e)},lineStart:ig,lineEnd:ig,polygonStart:ig,polygonEnd:ig,result:function(){var t=[[Fg,Bg],[jg,zg]];return jg=zg=-(Bg=Fg=1/0),t}};function Ug(t,e,n,r){return function(i,o){var s,a,u,h=e(o),l=i.invert(r[0],r[1]),c=Sg(),f=e(c),p=!1,d={point:g,lineStart:m,lineEnd:_,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=_,a=Og(a);var t=function(t,e){var n=e[0],r=e[1],i=[tg(n),-$d(n),0],o=0,s=0;Tg.reset();for(var a=0,u=t.length;a<u;++a)if(l=(h=t[a]).length)for(var h,l,c=h[l-1],f=c[0],p=c[1]/2+Wd,d=tg(p),g=$d(p),y=0;y<l;++y,f=_,d=b,g=x,c=m){var m=h[y],_=m[0],v=m[1]/2+Wd,b=tg(v),x=$d(v),w=_-f,E=w>=0?1:-1,M=E*w,S=M>Vd,I=d*b;if(Tg.add(Qd(I*E*tg(M),g*x+I*$d(M))),o+=S?w+E*Yd:w,S^f>=n^_>=n){var C=gg(pg(c),pg(m));_g(C);var P=gg(i,C);_g(P);var L=(S^w>=0?-1:1)*rg(P[2]);(r>L||r===L&&(C[0]||C[1]))&&(s+=S^w>=0?1:-1)}}return(o<-1e-6||o<qd&&Tg<-1e-6)^1&s}(s,l);a.length?(p||(o.polygonStart(),p=!0),Pg(a,Vg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);h.point(n[0],n[1])}function m(){d.point=y,h.lineStart()}function _(){d.point=g,h.lineEnd()}function v(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function x(){v(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),h=c.result(),l=h.length;if(u.pop(),s.push(u),u=null,l)if(1&i){if((e=(n=h[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&h.push(h.pop().concat(h.shift())),a.push(h.filter(qg))}return d}}function qg(t){return t.length>1}function Vg(t,e){return((t=t.x)[0]<0?t[1]-Hd-qd:Hd-t[1])-((e=e.x)[0]<0?e[1]-Hd-qd:Hd-e[1])}jd();var Hg=Ug((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Vd:-Vd,u=Jd(o-n);Jd(u-Vd)<qd?(t.point(n,r=(r+s)/2>0?Hd:-Hd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Vd&&(Jd(n-i)<qd&&(n-=i*qd),Jd(o-a)<qd&&(o-=a*qd),r=function(t,e,n,r){var i,o,s=tg(t-n);return Jd(s)>qd?Kd((tg(e)*(o=$d(r))*tg(n)-tg(r)*(i=$d(e))*tg(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Hd,r.point(-Vd,i),r.point(0,i),r.point(Vd,i),r.point(Vd,0),r.point(Vd,-i),r.point(0,-i),r.point(-Vd,-i),r.point(-Vd,0),r.point(-Vd,i);else if(Jd(t[0]-e[0])>qd){var o=t[0]<e[0]?Vd:-Vd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Vd,-Hd]);function Wg(t,e){var n=$d(t),r=n>0,i=Jd(n)>qd;function o(t,e){return $d(t)*$d(e)>n}function s(t,e,r){var i=[1,0,0],o=gg(pg(t),pg(e)),s=dg(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var h=n*s/u,l=-n*a/u,c=gg(i,o),f=mg(i,h);yg(f,mg(o,l));var p=c,d=dg(f,p),g=dg(p,p),y=d*d-g*(dg(f,f)-1);if(!(y<0)){var m=eg(y),_=mg(p,(-d-m)/g);if(yg(_,f),_=fg(_),!r)return _;var v,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(v=b,b=x,x=v);var M=x-b,S=Jd(M-Vd)<qd;if(!S&&E<w&&(v=w,w=E,E=v),S||M<qd?S?w+E>0^_[1]<(Jd(_[0]-b)<qd?w:E):w<=_[1]&&_[1]<=E:M>Vd^(b<=_[0]&&_[0]<=x)){var I=mg(p,(-d+m)/g);return yg(I,f),[_,fg(I)]}}}function a(e,n){var i=r?t:Vd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Ug(o,(function(t){var e,n,u,h,l;return{lineStart:function(){h=u=!1,l=1},point:function(c,f){var p,d=[c,f],g=o(c,f),y=r?g?0:a(c,f):g?a(c+(c<0?Vd:-Vd),f):0;if(!e&&(h=u=g)&&t.lineStart(),g!==u&&(!(p=s(e,d))||Ig(e,p)||Ig(d,p))&&(d[0]+=qd,d[1]+=qd,g=o(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var m;y&n||!(m=s(d,e,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Ig(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(h&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=$d(e),a=tg(e),u=r*n;null==i?(i=e+r*Yd,o=e-u/2):(i=Mg(s,i),o=Mg(s,o),(r>0?i<o:i>o)&&(i+=r*Yd));for(var h,l=i;r>0?l>o:l<o;l-=u)h=fg([s,-a*$d(l),-a*tg(l)]),t.point(h[0],h[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-Vd,t-Vd])}function Yg(t){return function(e){var n=new Xg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Xg(){}function Zg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ug.hasOwnProperty(t.type)?ug[t.type](t,e):og(t,e)}(n,t.stream(Gg));var s=Gg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,h=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,h])}Xg.prototype={constructor:Xg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jg=$d(30*Zd);function Kg(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,h,l,c,f,p,d,g,y){var m=h-r,_=l-i,v=m*m+_*_;if(v>4*e&&g--){var b=s+f,x=a+p,w=u+d,E=eg(b*b+x*x+w*w),M=rg(w/=E),S=Jd(Jd(w)-1)<qd||Jd(o-c)<qd?(o+c)/2:Qd(x,b),I=t(S,M),C=I[0],P=I[1],L=C-r,N=P-i,O=_*L-m*N;(O*O/v>e||Jd((m*L+_*N)/v-.5)>.3||s*f+a*p+u*d<Jg)&&(n(r,i,o,s,a,u,C,P,S,b/=E,x/=E,w,g,y),y.point(C,P),n(C,P,S,b,x,w,h,l,c,f,p,d,g,y))}}return function(e){var r,i,o,s,a,u,h,l,c,f,p,d,g={point:y,lineStart:m,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){l=NaN,g.point=_,e.lineStart()}function _(r,i){var o=pg([r,i]),s=t(r,i);n(l,c,h,f,p,d,l=s[0],c=s[1],h=r,f=o[0],p=o[1],d=o[2],16,e),e.point(l,c)}function v(){g.point=y,e.lineEnd()}function b(){m(),g.point=x,g.lineEnd=w}function x(t,e){_(r=t,e),i=l,o=c,s=f,a=p,u=d,g.point=_}function w(){n(l,c,h,f,p,d,i,o,r,s,a,u,16,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return Yg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Qg=Yg({point:function(t,e){this.stream.point(t*Zd,e*Zd)}});function $g(t){return function(t){var e,n,r,i,o,s,a,u,h,l,c=150,f=480,p=250,d=0,g=0,y=0,m=0,_=0,v=null,b=Hg,x=null,w=Dg,E=.5,M=Kg(C,E);function S(t){return[(t=o(t[0]*Zd,t[1]*Zd))[0]*c+n,r-t[1]*c]}function I(t){return(t=o.invert((t[0]-n)/c,(r-t[1])/c))&&[t[0]*Xd,t[1]*Xd]}function C(t,i){return[(t=e(t,i))[0]*c+n,r-t[1]*c]}function P(){o=vg(i=function(t,e,n){return(t%=Yd)?e||n?vg(wg(t),Eg(e,n)):wg(t):e||n?Eg(e,n):bg}(y,m,_),e);var t=e(d,g);return n=f-t[0]*c,r=p+t[1]*c,L()}function L(){return h=l=null,S}return S.stream=function(t){return h&&l===t?h:h=Qg(b(i,M(w(l=t))))},S.clipAngle=function(t){return arguments.length?(b=+t?Wg(v=t*Zd,6*Zd):(v=null,Hg),L()):v*Xd},S.clipExtent=function(t){return arguments.length?(w=null==t?(x=s=a=u=null,Dg):Rg(x=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==x?null:[[x,s],[a,u]]},S.scale=function(t){return arguments.length?(c=+t,P()):c},S.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],P()):[f,p]},S.center=function(t){return arguments.length?(d=t[0]%360*Zd,g=t[1]%360*Zd,P()):[d*Xd,g*Xd]},S.rotate=function(t){return arguments.length?(y=t[0]%360*Zd,m=t[1]%360*Zd,_=t.length>2?t[2]%360*Zd:0,P()):[y*Xd,m*Xd,_*Xd]},S.precision=function(t){return arguments.length?(M=Kg(C,E=t*t),L()):eg(E)},S.fitExtent=function(t,e){return Zg(S,t,e)},S.fitSize=function(t,e){return function(t,e,n){return Zg(t,[[0,0],e],n)}(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&I,P()}}((function(){return t}))()}var ty=function(t){return function(e,n){var r=$d(e),i=$d(n),o=t(r*i);return[o*i*tg(e),o*tg(n)]}}((function(t){return(t=ng(t))&&t/tg(t)}));function ey(){return $g(ty).scale(79.4188).clipAngle(179.999)}function ny(t,n,r,i){var s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return j(t,(function(t){var e=ny(t,n,r,i);e&&u.push(e)})),p(u)}var h=function(t){var n=bn(t).geometry.coordinates,r=[-n[0],-n[1]];return ey().rotate(r).scale(e)}(a),l={type:a.type,coordinates:iy(a.coordinates,h)},c=(new Mc).read(l),f=v(b(n,r),"meters"),d=_p.bufferOp(c,f,i);if(!ry((d=(new Sc).write(d)).coordinates))return o({type:d.type,coordinates:oy(d.coordinates,h)},s)}function ry(t){return Array.isArray(t[0])?ry(t[0]):isNaN(t[0])}function iy(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return iy(t,e)}))}function oy(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return oy(t,e)}))}function sy(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=$u.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):y(o,n.properties)}function ay(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,h=(i+s)/2,l=2*e/ve([i,u],[s,u],n)*(s-i),c=2*e/ve([h,o],[h,a],n)*(a-o),f=l/2,d=2*f,g=Math.sqrt(3)/2*c,y=s-i,m=a-o,_=3/4*d,v=g,b=(y-d)/(d-f/2),x=Math.floor(b),w=(x*_-f/2-y)/2-f/2+_/2,E=Math.floor((m-g)/g),M=(m-E*g)/2,S=E*g-m>g/2;S&&(M-=g/4);for(var I=[],C=[],P=0;P<6;P++){var L=2*Math.PI/6*P;I.push(Math.cos(L)),C.push(Math.sin(L))}for(var N=[],O=0;O<=x;O++)for(var A=0;A<=E;A++){var k=O%2==1;if(!(0===A&&k||0===A&&S)){var R=O*_+i-w,T=A*v+o+M;if(k&&(T-=g/2),!0===n.triangles)hy([R,T],l/2,c/2,JSON.parse(r),I,C).forEach((function(t){n.mask?sy(n.mask,t)&&N.push(t):N.push(t)}));else{var D=uy([R,T],l/2,c/2,JSON.parse(r),I,C);n.mask?sy(n.mask,D)&&N.push(D):N.push(D)}}}return p(N)}function uy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),h([s],r)}function hy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(h([u],r))}return s}function ly(t){return y(t)}function cy(t){return h(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function fy(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/ve([o,s],[a,s],r)*(a-o),c=n/ve([o,s],[o,u],r)*(u-s),f=a-o,d=u-s,g=Math.floor(f/l),y=Math.floor(d/c),m=(d-y*c)/2,_=o+(f-g*l)/2,v=0;v<g;v++){for(var b=s+m,x=0;x<y;x++){var w=h([[[_,b],[_,b+c],[_+l,b+c],[_+l,b],[_,b]]],r.properties);r.mask?Ps(r.mask,w)&&i.push(w):i.push(w),b+=c}_+=l}return p(i)}(t,e,e,n)}function py(t,e,n){void 0===n&&(n={});for(var r=[],i=e/ve([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ve([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var c=null,f=null;s%2==0&&u%2==0?(c=h([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),f=h([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(c=h([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),f=h([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(c=h([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),f=h([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(c=h([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),f=h([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(sy(n.mask,c)&&r.push(c),sy(n.mask,f)&&r.push(f)):(r.push(c),r.push(f)),l+=o,u++}s++,a+=i}return p(r)}ty.invert=function(t){return function(e,n){var r=eg(e*e+n*n),i=t(r),o=tg(i),s=$d(i);return[Qd(e*o,r*s),rg(r&&n*o/r)]}}((function(t){return t})),t.along=function(t,e,n){void 0===n&&(n={});for(var r=rt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var u=vn(r[o],r[o-1])-180;return mn(r[o],s,u,n)}return a(r[o])}i+=ve(r[o],r[o+1],n)}return a(r[r.length-1])},t.angle=function(t,e,n,r){if(void 0===r&&(r={}),!P(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=w(!0!==r.mercator?vn(i,o):zi(i,o)),u=w(!0!==r.mercator?vn(s,o):zi(s,o)),h=Math.abs(a-u);return!0===r.explementary?360-h:h},t.applyFilter=uu,t.area=Ur,t.areaFactors=i,t.bbox=J,t.bboxClip=function(t,e){var n=rt(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,h=Ai(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Ai(a=t[r],e);;){if(!(h|i)){l.push(s),i!==o?(l.push(a),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(a);break}if(h&i)break;h?h=Ai(s=Oi(s,a,h,e),e):i=Ai(a=Oi(s,a,i,e),e)}h=o}l.length&&n.push(l)}(t,e,s)})),1===s.length?c(s[0],i):d(s,i);case"Polygon":return h(ki(o,e),i);case"MultiPolygon":return y(o.map((function(t){return ki(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=dn,t.bearing=vn,t.bearingToAngle=w,t.bearingToAzimuth=w,t.bezier=pn,t.bezierSpline=pn,t.booleanClockwise=Wi,t.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return ms(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(ms(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(ms(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Xr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Xr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Xr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Xr(o,t,{ignoreEndVertices:!0})&&(n=!0),!Xr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ye(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!ys(J(t),J(e)))return!1;for(;r<e.coordinates.length-1;r++)if(ye({type:"Point",coordinates:_s(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!ys(J(t),J(e)))return!1;for(var n=0,r=rt(e).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!ye(o[i],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ye(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return vs(n,r);case"Polygon":return xs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return vs(r,n);case"LineString":return function(t,e){if(Or(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),ws(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return bs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return xs(r,n);case"LineString":return bs(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanDisjoint=fs,t.booleanEqual=function(t,e){return rt(t).type===rt(e).type&&new Cs({precision:6}).compare(tn(t),tn(e))},t.booleanIntersects=Ps,t.booleanOverlap=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Cs({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var h=n.coordinates[a],l=r.coordinates[u];if(h[0]===l[0]&&h[1]===l[1])return!0}return!1;case"LineString":case"MultiLineString":q(t,(function(t){q(e,(function(e){Fi(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":q(t,(function(t){q(e,(function(e){Or(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==qs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==qs(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Jn(tn(t)).features,r=Jn(tn(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!Us(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=ye,t.booleanPointOnLine=Xr,t.booleanWithin=Jr,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){var n=ny(t,e,r,i);n&&o.push(n)})),p(o);case"FeatureCollection":return D(t,(function(t){var n=ny(t,e,r,i);n&&D(n,(function(t){t&&o.push(t)}))})),p(o)}return ny(t,e,r,i)},t.center=bn,t.centerMean=Da,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!P(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!C(n))throw new Error("counter must be a number");var r=e.weight,i=Da(t,{weight:e.weight}),o=p([]);D(t,(function(t){var e;o.features.push(xn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return Fa(i.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),it(e)){case"Point":return a(K(e),n.properties);case"Polygon":var r=[];A(e,(function(t){r.push(t)}));var i,o,s,u,h,l,c,f,p=xn(e,{properties:n.properties}),d=p.geometry.coordinates,g=0,y=0,m=0,_=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(i=0;i<r.length-1;i++)u=(o=_[i])[0],l=o[1],h=(s=_[i+1])[0],m+=f=u*(c=s[1])-h*l,g+=(u+h)*f,y+=(l+c)*f;if(0===m)return p;var v=1/(.5*m*6);return a([d[0]+v*g,d[1]+v*y],n.properties);default:var b=ge(e);return b?t(b,{properties:n.properties}):xn(e,{properties:n.properties})}},t.centroid=xn,t.circle=_n,t.cleanCoords=tn,t.clone=Me,t.clusterEach=ou,t.clusterReduce=su,t.clusters=cu,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Me(t)),n.minPoints=n.minPoints||3;var r=new ks.DBSCAN,i=r.run(B(t),S(e,n.units),n.minPoints,ve),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Me(t));var r=B(t),i=r.slice(0,e.numberOfClusters),o=Gs(r,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),D(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,r){var i=St(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=J(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},t.collectionOf=nt,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),p(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return o({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=be(function(t){var e=[],n={};return D(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),p(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(r,i,e),a=ve(i,o,e),u=ve(r,o,e);return s<=n&&a<=n&&u<=n})),r.features.length<1)return null;var i=$e(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),o(i)},t.containsNumber=$,t.convertArea=I,t.convertDistance=S,t.convertLength=S,t.convex=ge,t.coordAll=B,t.coordEach=A,t.coordReduce=k,t.createBins=au,t.degrees2radians=M,t.degreesToRadians=M,t.destination=mn,t.difference=function(t,e){var n=rt(t),r=rt(e),i=t.properties||{},o=$u.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?h(o[0],i):y(o,i)},t.dissolve=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return ni(y($u.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};D(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),s=0;s<o.length;s++){var a=y($u.union.apply(null,i[o[s]].map((function(t){return t.geometry.coordinates}))));a.properties[n]=o[s],r.push(a)}return ni(p(r))},t.distance=ve,t.distanceToDegrees=x,t.distanceToRadians=b,t.distanceWeight=Ua,t.earthRadius=e,t.ellipse=Ra,t.envelope=gn,t.explode=wn,t.factors=n,t.feature=o,t.featureCollection=p,t.featureEach=D,t.featureOf=et,t.featureReduce=F,t.filterProperties=lu,t.findPoint=X,t.findSegment=Y,t.flatten=ni,t.flattenEach=G,t.flattenReduce=U,t.flip=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Me(t)),A(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonType=tt,t.geomEach=j,t.geomReduce=z,t.geometry=s,t.geometryCollection=m,t.getCluster=iu,t.getCoord=K,t.getCoords=Q,t.getGeom=rt,t.getType=it,t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=K(t),e=K(e),r=r||{},i=i||100,o=o||10,new mi({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=O,t.hexGrid=ay,t.inside=ye,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=J(t);switch(r){case"point":case"points":s=ti(a,e,n);break;case"square":case"squares":s=fy(a,e,n);break;case"hex":case"hexes":s=ay(a,e,n);break;case"triangle":case"triangles":s=py(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return D(s,(function(e){var s=0,a=0;D(t,(function(t){var u,h=ve("point"===r?e:xn(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===h&&(s=u);var l=1/Math.pow(h,o);a+=l,s+=l*u}));var h=Me(e);h.properties[i]=s/a,u.push(h)})),p(u)},t.intersect=sy,t.invariant=ot,t.isNumber=C,t.isObject=P,t.isobands=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!P(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Ji(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Jo(Zo($i(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,r.push(u)}return r}(s,e,r);return p((a=function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,h=e.length-1,l=i/u,c=o/h,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*c+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(a,s,t)).map((function(t,e){if(o[e]&&!P(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=lt({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!P(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:r,flip:!0});return p(function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,h=e.length-1,l=i/u,c=o/h,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*c+a};return t.forEach((function(t){A(t,f)})),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=lt({},r,i[s]);u[n]=a;var h=d(pt(t,a),u);o.push(h)}return o}(s,e,r,i,o),s,t))},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Br(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(a([o[0],o[1]]))}}))})),r},t.length=Wr,t.lengthToDegrees=x,t.lengthToRadians=b,t.lineArc=wi,t.lineChunk=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return G(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Wr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Yr(t,e*s,e*(s+1),{units:n}),s)}(t,e,r,(function(t){o.push(t)}))})),p(o)},t.lineDistance=Wr,t.lineEach=H,t.lineIntersect=Or,t.lineOffset=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=it(t),o=t.properties;switch(i){case"LineString":return os(t,e,r);case"MultiLineString":var s=[];return G(t,(function(t){s.push(os(t,e,r).geometry.coordinates)})),d(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=Fi,t.lineReduce=W,t.lineSegment=Jn,t.lineSlice=function(t,e,n){var r=Q(n);if("LineString"!==it(n))throw new Error("line must be a LineString");for(var i,o=kr(n,t),s=kr(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),c(a,n.properties)},t.lineSliceAlong=Yr,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),r=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=ei(e,{precision:7});switch(r){case"Point":return vi(t,i);case"MultiPoint":return _i(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(t,Or(t,i))}},t.lineString=c,t.lineStringToPolygon=Ci,t.lineStrings=f,t.lineToPolygon=Ci,t.mask=function(t,e){var n,r=cy(e);return("FeatureCollection"===t.type?ly(2===(n=t).features.length?$u.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):$u.union.apply($u,n.features.map((function(t){return t.geometry.coordinates})))):ly($u.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},t.meta=Z,t.midpoint=function(t,e){return mn(t,ve(t,e)/2,vn(t,e))},t.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=Ua(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),a=[];D(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var u=qa(a),h=function(t){for(var e=qa(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(a),l=0,c=0,f=0,p=0,d=s.length,g=0;g<d;g++){for(var y=0,m=0;m<d;m++)l+=s[g][m]*(a[g]-u)*(a[m]-u),c+=s[g][m],f+=Math.pow(s[g][m]+s[m][g],2),y+=s[g][m]+s[m][g];p+=Math.pow(y,2)}var _=l/c/h,v=-1/(d-1),b=(d*d*(f*=.5)-d*p+c*c*3)/((d-1)*(d+1)*(c*c))-v*v,x=Math.sqrt(b);return{expectedMoranIndex:v,moranIndex:_,stdNorm:x,zNorm:(_-v)/x}},t.multiLineString=d,t.multiPoint=g,t.multiPolygon=y,t.nearest=Zn,t.nearestPoint=Zn,t.nearestPointOnLine=kr,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var s=1/0,a=null;return D(o,(function(t){var n=Tr(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=lt({dist:s},a.properties,i)),a},t.planepoint=function(t,e){var n=K(t),r=rt(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],h=n[1],l=r[0][0],c=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],y=r[2][0],m=r[2][1],_=void 0!==a?a:r[2][2];return(_*(u-l)*(h-d)+f*(u-p)*(h-m)+g*(u-y)*(h-c)-g*(u-l)*(h-m)-_*(u-p)*(h-c)-f*(u-y)*(h-d))/((u-l)*(h-d)+(u-p)*(h-m)+(u-y)*(h-c)-(u-l)*(h-m)-(u-p)*(h-c)-(u-y)*(h-d))},t.point=a,t.pointGrid=ti,t.pointOnFeature=jr,t.pointOnLine=kr,t.pointOnSurface=jr,t.pointToLineDistance=Tr,t.points=u,t.pointsWithinPolygon=_e,t.polygon=h,t.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return j(t,(function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=h(o).geometry),ja(s,a),o=a.slice(0);n.push(h(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<r;l++)a=[[[]]],s=t,l>0&&(s=y(o).geometry),za(s,a),o=a.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),p(n)},t.polygonTangents=function(t,e){var n,r,i,o,s=Q(t),u=Q(e),h=J(e),l=0,c=null;switch(s[0]>h[0]&&s[0]<h[2]&&s[1]>h[1]&&s[1]<h[3]&&(l=(c=Zn(t,wn(e))).properties.featureIndex),it(e)){case"Polygon":n=u[0][l],r=u[0][0],null!==c&&c.geometry.coordinates[1]<s[1]&&(r=u[0][l]),o=Hi(u[0][0],u[0][u[0].length-1],s);var f=qi(u[0],s,o,i,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var d=0,g=0,y=0,m=0;m<u[0].length;m++){d=m;for(var _=!1,v=0;v<u[0][m].length;v++){if(g=v,y===l){_=!0;break}y++}if(_)break}n=u[0][d][g],r=u[0][d][g],o=Hi(u[0][0][0],u[0][0][u[0][0].length-1],s),u.forEach((function(t){var e=qi(t[0],s,o,i,n,r);n=e[0],r=e[1]}))}return p([a(n),a(r)])},t.polygonToLine=Mi,t.polygonToLineString=Mi,t.polygonize=function(t){var e=cs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){ls.findEdgeRingContaining(t,r)&&r.push(t)})),p(r.map((function(t){return t.toPolygon()})))},t.polygons=l,t.projection=Za,t.propEach=R,t.propReduce=T,t.propertiesContainsFilter=hu,t.radians2degrees=E,t.radiansToDegrees=E,t.radiansToDistance=v,t.radiansToLength=v,t.random=ru,t.randomLineString=tu,t.randomPoint=Qa,t.randomPolygon=$a,t.randomPosition=Ka,t.rewind=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Me(t));var i=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){Yi(t,n)})),t;case"FeatureCollection":return D(t,(function(t){D(Yi(t,n),(function(t){i.push(t)}))})),p(i)}return Yi(t,n)},t.rhumbBearing=zi,t.rhumbDestination=Ui,t.rhumbDistance=Rr,t.round=_,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return p(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.sector=function(t,e,n,r,i){if(!P(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(ji(n)===ji(r))return _n(t,e,i);var s=Q(t),a=wi(t,e,n,r,i),u=[[s]];return A(a,(function(t){u[0].push(t)})),u[0].push(s),h(u,o)},t.segmentEach=q,t.segmentReduce=V,t.shortestPath=function(t,e,n){if(!P(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,s=n.obstacles||p([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!C(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var u=K(t),h=K(e);switch(t=a(u),e=a(h),it(s)){case"FeatureCollection":if(0===s.features.length)return c([u,h]);break;case"Polygon":s=p([o(rt(s))]);break;default:throw new Error("invalid obstacles")}var l=s;l.features.push(t),l.features.push(e);var f=J(ts(dn(J(l)),1.15));r||(r=ve([f[0],f[1]],[f[2],f[1]],n)/100),l.features.pop(),l.features.pop();for(var d=f[0],g=f[1],y=f[2],m=f[3],_=r/ve([d,g],[y,g],n)*(y-d),v=r/ve([d,g],[d,m],n)*(m-g),b=y-d,x=m-g,w=Math.floor(b/_),E=Math.floor(x/v),M=(b-w*_)/2,S=[],I=[],L=[],N=[],O=1/0,A=1/0,k=m-(x-E*v)/2,R=0;k>=g;){for(var T=[],D=[],F=d+M,B=0;F<=y;){var j=a([F,k]),z=Zs(j,s);T.push(z?0:1),D.push(F+"|"+k);var G=ve(j,t);!z&&G<O&&(O=G,L={x:B,y:R});var U=ve(j,e);!z&&U<A&&(A=U,N={x:B,y:R}),F+=_,B++}I.push(T),S.push(D),k-=v,R++}var q=new Ws(I,{diagonal:!0}),V=q.grid[L.y][L.x],H=q.grid[N.y][N.x],W=Hs.search(q,V,H),Y=[u];return W.forEach((function(t){var e=S[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(h),tn(c(Y))},t.simplify=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Me(t)),j(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;tn(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=hn(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return hn(t,e,n)}));break;case"Polygon":t.coordinates=ln(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return ln(t,e,n)}))}}(t,n,r)})),t},t.square=yn,t.squareGrid=fy,t.standardDeviationalEllipse=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!C(n))throw new Error("steps must be a number");if(!P(i))throw new Error("properties must be a number");var o=B(t).length,s=Da(t,{weight:r}),a=0,u=0,h=0;D(t,(function(t){var e=t.properties[r]||1,n=Ba(Q(t),Q(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,h+=n.x*n.y*e}));var l=a-u,c=Math.sqrt(Math.pow(l,2)+4*Math.pow(h,2)),f=2*h,d=Math.atan((l+c)/f),g=180*d/Math.PI,y=0,m=0,_=0;D(t,(function(t){var e=t.properties[r]||1,n=Ba(Q(t),Q(s));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,m+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,_+=e}));var v=Math.sqrt(2*y/_),b=Math.sqrt(2*m/_),x=Ra(s,v,b,{units:"degrees",angle:g,steps:n,properties:i}),w=_e(t,p([x])),E={meanCenterCoordinates:Q(s),semiMajorAxis:v,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*B(w).length/o};return x.properties.standardDeviationalEllipse=E,x},t.tag=function(t,e,n,r){return t=Me(t),e=Me(e),D(t,(function(t){t.properties||(t.properties={}),D(e,(function(e){void 0===t.properties[r]&&ye(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Xn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Xn(t))})),e},t.tin=be,t.toMercator=Va,t.toWgs84=Ha,t.transformRotate=$o,t.transformScale=ts,t.transformTranslate=function(t,e,n,r){if(!P(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Me(t)),A(t,(function(t){var r=Q(Ui(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=py,t.truncate=ei,t.union=function(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=$u.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):y(o,n.properties)},t.unitsFactors=r,t.unkinkPolygon=function(t){var e=[];return G(t,(function(t){"Polygon"===t.geometry.type&&D(oi(t),(function(n){e.push(h(n.geometry.coordinates,t.properties))}))})),p(e)},t.validateBBox=L,t.validateId=N,t.voronoi=function(t,e){if(!P(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),p(function(){var t=Ks,e=Qs,n=null;function r(r){return new Aa(r.map((function(n,i){var o=[Math.round(t(n,i,r)/La)*La,Math.round(e(n,i,r)/La)*La];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Js(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Js(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(ka))},t.within=_e,Object.defineProperty(t,"__esModule",{value:!0})}(t.exports)})),o.register("hPtJY",(function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})),o.register("7HNZs",(function(e,n){var r=o("ebcW3");r.default&&(r=r.default);var i=o("3Y0Ao"),s=o("lJlIM"),a=o("3xryQ"),u=o("dMYXn"),h=o("bCGV3"),l=o("hI53f"),c=o("6ZWSX").Buffer;const f=t.URL,p=new l({max:20});function d(t){if(!t)throw new Error("forgot to pass buffer");return c.isBuffer(t)?t:g(t)?c.from(t):g(t.buffer)?1===t.BYTES_PER_ELEMENT?c.from(t):c.from(t.buffer):void 0}function g(e){return e instanceof t.ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function y(t,e){return"string"==typeof t&&p.has(t)?h.resolve(p.get(t)):y.getShapefile(t,e).then((function(e){return"string"==typeof t&&p.set(t,e),e}))}y.combine=function([t,e]){const n={type:"FeatureCollection",features:[]};let r=0;const i=t.length;for(e||(e=[]);r<i;)n.features.push({type:"Feature",geometry:t[r],properties:e[r]||{}}),r++;return n},y.parseZip=async function(t,e){let n;t=d(t);const o=await i(t),s=[];for(n in e=e||[],o)-1===n.indexOf("__MACOSX")&&("shp"===n.slice(-3).toLowerCase()?(s.push(n.slice(0,-4)),o[n.slice(0,-3)+n.slice(-3).toLowerCase()]=o[n]):"prj"===n.slice(-3).toLowerCase()?o[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r(o[n]):"json"===n.slice(-4).toLowerCase()||e.indexOf(n.split(".").pop())>-1?s.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):"dbf"!==n.slice(-3).toLowerCase()&&"cpg"!==n.slice(-3).toLowerCase()||(o[n.slice(0,-3)+n.slice(-3).toLowerCase()]=o[n]));if(!s.length)throw new Error("no layers founds");const h=s.map((function(t){let n,r;const i=t.lastIndexOf(".");return i>-1&&t.slice(i).indexOf("json")>-1?(n=JSON.parse(o[t]),n.fileName=t.slice(0,i)):e.indexOf(t.slice(i+1))>-1?(n=o[t],n.fileName=t):(o[t+".dbf"]&&(r=u(o[t+".dbf"],o[t+".cpg"])),n=y.combine([a(o[t+".shp"],o[t+".prj"]),r]),n.fileName=t),n}));return 1===h.length?h[0]:h};const m=async t=>{const e=await h.all([s(t,"shp"),s(t,"prj")]);let n=!1;try{e[1]&&(n=r(e[1]))}catch(t){n=!1}return a(e[0],n)},_=async t=>{const[e,n]=await h.all([s(t,"dbf"),s(t,"cpg")]);if(e)return u(e,n)};y.getShapefile=async function(t,e){if("string"!=typeof t)return y.parseZip(t);if(((t,e)=>new f(t).pathname.slice(-4).toLowerCase()===e)(t,".zip"))return async function(t,e){const n=await s(t);return y.parseZip(n,e)}(t,e);const n=await h.all([m(t),_(t)]);return y.combine(n)},y.parseShp=function(t,e){if(t=d(t),c.isBuffer(e)&&(e=e.toString()),"string"==typeof e)try{e=r(e)}catch(t){e=!1}return a(t,e)},y.parseDbf=function(t,e){return t=d(t),u(t,e)},e.exports=y})),o.register("ebcW3",(function(t,r){e(t.exports),n(t.exports,"default",(()=>d));var i=o("66mQQ"),s=o("38qqf"),a=o("iCFRA"),u=o("5vTfu"),h=o("ezj1P"),l=o("flUkq"),c=o("ceNev"),f=o("4hMrQ"),p=o("j48cx");i.default.defaultDatum="WGS84",i.default.Proj=s.default,i.default.WGS84=new i.default.Proj("WGS84"),i.default.Point=a.default,i.default.toPoint=u.default,i.default.defs=h.default,i.default.nadgrid=l.default,i.default.transform=c.default,i.default.mgrs=f.default,i.default.version="__VERSION__",(0,p.default)(i.default);var d=i.default})),o.register("66mQQ",(function(t,e){n(t.exports,"default",(()=>h));var r=o("38qqf"),i=o("ceNev"),s=(0,r.default)("WGS84");function a(t,e,n,r){var o,s,a;return Array.isArray(n)?(o=(0,i.default)(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(n.splice(3)):[o.x,o.y,n[2]].concat(n.splice(3)):[o.x,o.y].concat(n.splice(2)):[o.x,o.y]):(s=(0,i.default)(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;s[r]=n[r]})),s)}function u(t){return t instanceof r.default?t:t.oProj?t.oProj:(0,r.default)(t)}var h=function(t,e,n){t=u(t);var r,i=!1;return void 0===e?(e=t,t=s,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=s,i=!0),e=u(e),n?a(t,e,n):(r={forward:function(n,r){return a(t,e,n,r)},inverse:function(n,r){return a(e,t,n,r)}},i&&(r.oProj=e),r)}})),o.register("38qqf",(function(t,e){n(t.exports,"default",(()=>p));var r=o("giDQh"),i=o("cWauz"),s=o("1Wo5P"),a=o("d8b9d"),u=o("gMdFS"),h=o("3MCqb"),l=o("hzXAi"),c=o("flUkq");function f(t,e){if(!(this instanceof f))return new f(t);e=e||function(t){if(t)throw t};var n=(0,r.default)(t);if("object"==typeof n){var o=f.projections.get(n.projName);if(o){if(n.datumCode&&"none"!==n.datumCode){var s=(0,l.default)(u.default,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var p=(0,a.sphere)(n.a,n.b,n.rf,n.ellps,n.sphere),d=(0,a.eccentricity)(p.a,p.b,p.rf,n.R_A),g=(0,c.getNadgrids)(n.nadgrids),y=n.datum||(0,h.default)(n.datumCode,n.datum_params,p.a,p.b,d.es,d.ep2,g);(0,i.default)(this,n),(0,i.default)(this,o),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=y,this.init(),e(null,this)}else e(t)}else e(t)}f.projections=s.default,f.projections.start();var p=f})),o.register("giDQh",(function(t,e){n(t.exports,"default",(()=>l));var r=o("ezj1P"),i=o("7UVTv"),s=o("7zrM7"),a=o("hzXAi");var u=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var h=["3857","900913","3785","102113"];var l=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in r.default}(t))return r.default[t];if(function(t){return u.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=(0,i.default)(t);if(function(t){var e=(0,a.default)(t,"authority");if(e){var n=(0,a.default)(e,"epsg");return n&&h.indexOf(n)>-1}}(e))return r.default["EPSG:3857"];var n=function(t){var e=(0,a.default)(t,"extension");if(e)return(0,a.default)(e,"proj4")}(e);return n?(0,s.default)(n):e}return function(t){return"+"===t[0]}(t)?(0,s.default)(t):void 0}})),o.register("ezj1P",(function(t,e){n(t.exports,"default",(()=>u));var r=o("cR6T8"),i=o("7zrM7"),s=o("7UVTv");function a(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?a[t]=(0,i.default)(arguments[1]):a[t]=(0,s.default)(arguments[1]):a[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?a.apply(e,t):a(t)}));if("string"==typeof t){if(t in a)return a[t]}else"EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(0,r.default)(a);var u=a})),o.register("cR6T8",(function(t,e){function r(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}n(t.exports,"default",(()=>r))})),o.register("7zrM7",(function(t,e){n(t.exports,"default",(()=>u));var r=o("gyVUi"),i=o("gyWgF"),s=o("6CY0Z"),a=o("hzXAi");function u(t){var e,n,o,u={},h=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),l={proj:"projName",datum:"datumCode",rf:function(t){u.rf=parseFloat(t)},lat_0:function(t){u.lat0=t*r.D2R},lat_1:function(t){u.lat1=t*r.D2R},lat_2:function(t){u.lat2=t*r.D2R},lat_ts:function(t){u.lat_ts=t*r.D2R},lon_0:function(t){u.long0=t*r.D2R},lon_1:function(t){u.long1=t*r.D2R},lon_2:function(t){u.long2=t*r.D2R},alpha:function(t){u.alpha=parseFloat(t)*r.D2R},gamma:function(t){u.rectified_grid_angle=parseFloat(t)},lonc:function(t){u.longc=t*r.D2R},x_0:function(t){u.x0=parseFloat(t)},y_0:function(t){u.y0=parseFloat(t)},k_0:function(t){u.k0=parseFloat(t)},k:function(t){u.k0=parseFloat(t)},a:function(t){u.a=parseFloat(t)},b:function(t){u.b=parseFloat(t)},r_a:function(){u.R_A=!0},zone:function(t){u.zone=parseInt(t,10)},south:function(){u.utmSouth=!0},towgs84:function(t){u.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){u.to_meter=parseFloat(t)},units:function(t){u.units=t;var e=(0,a.default)(s.default,t);e&&(u.to_meter=e.to_meter)},from_greenwich:function(t){u.from_greenwich=t*r.D2R},pm:function(t){var e=(0,a.default)(i.default,t);u.from_greenwich=(e||parseFloat(t))*r.D2R},nadgrids:function(t){"@null"===t?u.datumCode="none":u.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(u.axis=t)},approx:function(){u.approx=!0}};for(e in h)n=h[e],e in l?"function"==typeof(o=l[e])?o(n):u[o]=n:u[e]=n;return"string"==typeof u.datumCode&&"WGS84"!==u.datumCode&&(u.datumCode=u.datumCode.toLowerCase()),u}})),o.register("gyVUi",(function(t,e){n(t.exports,"PJD_3PARAM",(()=>r)),n(t.exports,"PJD_7PARAM",(()=>i)),n(t.exports,"PJD_GRIDSHIFT",(()=>o)),n(t.exports,"PJD_WGS84",(()=>s)),n(t.exports,"PJD_NODATUM",(()=>a)),n(t.exports,"SRS_WGS84_SEMIMAJOR",(()=>u)),n(t.exports,"SRS_WGS84_SEMIMINOR",(()=>h)),n(t.exports,"SRS_WGS84_ESQUARED",(()=>l)),n(t.exports,"SEC_TO_RAD",(()=>c)),n(t.exports,"HALF_PI",(()=>f)),n(t.exports,"SIXTH",(()=>p)),n(t.exports,"RA4",(()=>d)),n(t.exports,"RA6",(()=>g)),n(t.exports,"EPSLN",(()=>y)),n(t.exports,"D2R",(()=>m)),n(t.exports,"R2D",(()=>_)),n(t.exports,"FORTPI",(()=>v)),n(t.exports,"TWO_PI",(()=>b)),n(t.exports,"SPI",(()=>x));var r=1,i=2,o=3,s=4,a=5,u=6378137,h=6356752.314,l=.0066943799901413165,c=484813681109536e-20,f=Math.PI/2,p=.16666666666666666,d=.04722222222222222,g=.022156084656084655,y=1e-10,m=.017453292519943295,_=57.29577951308232,v=Math.PI/4,b=2*Math.PI,x=3.14159265359})),o.register("gyWgF",(function(t,e){n(t.exports,"default",(()=>r));var r={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667}})),o.register("6CY0Z",(function(t,e){n(t.exports,"default",(()=>r));var r={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}})),o.register("hzXAi",(function(t,e){n(t.exports,"default",(()=>i));var r=/[\s_\-\/\(\)]/g;function i(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),o=e.toLowerCase().replace(r,""),s=-1;++s<i.length;)if((n=i[s]).toLowerCase().replace(r,"")===o)return t[n]}})),o.register("7UVTv",(function(t,e){n(t.exports,"default",(()=>u));var r=o("6Pz8X"),i=o("7SVqc"),s=.017453292519943295;function a(t){return t*s}function u(t){var e=(0,r.default)(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var s={};return(0,i.sExpr)(e,s),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(s),s}})),o.register("6Pz8X",(function(t,e){n(t.exports,"default",(()=>r));var r=function(t){return new l(t).output()},i=1,o=/\s/,s=/[A-Za-z]/,a=/[A-Za-z84_]/,u=/[,\]]/,h=/[\d\.E\-\+]/;function l(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=i}l.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;o.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case i:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},l.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(u.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},l.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=i)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=i,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},l.prototype.number=function(t){if(!h.test(t)){if(u.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},l.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},l.prototype.keyword=function(t){if(a.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=i)}if(!u.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},l.prototype.neutral=function(t){if(s.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(h.test(t))return this.word=t,void(this.state=3);if(!u.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},l.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)}})),o.register("7SVqc",(function(t,e){function r(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,o=n.reduce((function(t,e){return i(e,t),t}),r);e&&(t[e]=o)}function i(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void i(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var o;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&i(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&i(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,n,t);default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return i(t,e[n]);return r(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}n(t.exports,"sExpr",(()=>i))})),o.register("cWauz",(function(t,e){function r(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}n(t.exports,"default",(()=>r))})),o.register("1Wo5P",(function(t,e){n(t.exports,"default",(()=>l));var r=o("ioIYn"),i=o("iMMJV"),s=[r.default,i.default],a={},u=[];function h(t,e){var n=u.length;return t.names?(u[n]=t,t.names.forEach((function(t){a[t.toLowerCase()]=n})),this):(console.log(e),!0)}var l={start:function(){s.forEach(h)},add:h,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==a[e]&&u[a[e]]?u[a[e]]:void 0}}})),o.register("ioIYn",(function(t,e){n(t.exports,"default",(()=>h));var r=o("bi5ZC"),i=o("a9oRf"),s=o("3xC66"),a=o("2AZR8"),u=o("gyVUi");var h={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,r.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,o=t.y;if(o*u.R2D>90&&o*u.R2D<-90&&r*u.R2D>180&&r*u.R2D<-180)return null;if(Math.abs(Math.abs(o)-u.HALF_PI)<=u.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,i.default)(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(u.FORTPI+.5*o));else{var a=Math.sin(o),h=(0,s.default)(this.e,o,a);e=this.x0+this.a*this.k0*(0,i.default)(r-this.long0),n=this.y0-this.a*this.k0*Math.log(h)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=u.HALF_PI-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var s=Math.exp(-o/(this.a*this.k0));if(-9999===(n=(0,a.default)(this.e,s)))return null}return e=(0,i.default)(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}})),o.register("bi5ZC",(function(t,e){function r(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}n(t.exports,"default",(()=>r))})),o.register("a9oRf",(function(t,e){n(t.exports,"default",(()=>s));var r=o("gyVUi"),i=o("boTd3");function s(t){return Math.abs(t)<=r.SPI?t:t-(0,i.default)(t)*r.TWO_PI}})),o.register("boTd3",(function(t,e){function r(t){return t<0?-1:1}n(t.exports,"default",(()=>r))})),o.register("3xC66",(function(t,e){n(t.exports,"default",(()=>i));var r=o("gyVUi");function i(t,e,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(r.HALF_PI-e))/i}})),o.register("2AZR8",(function(t,e){n(t.exports,"default",(()=>i));var r=o("gyVUi");function i(t,e){for(var n,i,o=.5*t,s=r.HALF_PI-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(s),s+=i=r.HALF_PI-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-s,Math.abs(i)<=1e-10)return s;return-9999}})),o.register("iMMJV",(function(t,e){function r(t){return t}n(t.exports,"default",(()=>i));var i={init:function(){},forward:r,inverse:r,names:["longlat","identity"]}})),o.register("d8b9d",(function(t,e){n(t.exports,"eccentricity",(()=>a)),n(t.exports,"sphere",(()=>u));var r=o("gyVUi"),i=o("bO5FE"),s=o("hzXAi");function a(t,e,n,i){var o=t*t,s=e*e,a=(o-s)/o,u=0;return i?(o=(t*=1-a*(r.SIXTH+a*(r.RA4+a*r.RA6)))*t,a=0):u=Math.sqrt(a),{es:a,e:u,ep2:(o-s)/s}}function u(t,e,n,o,a){if(!t){var u=(0,s.default)(i.default,o);u||(u=i.WGS84),t=u.a,e=u.b,n=u.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<r.EPSLN)&&(a=!0,e=t),{a:t,b:e,rf:n,sphere:a}}})),o.register("bO5FE",(function(t,e){n(t.exports,"default",(()=>r)),n(t.exports,"WGS84",(()=>i));var r={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},i=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}})),o.register("gMdFS",(function(t,e){n(t.exports,"default",(()=>r));var r={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}})),o.register("3MCqb",(function(t,e){n(t.exports,"default",(()=>i));var r=o("gyVUi");var i=function(t,e,n,i,o,s,a){var u={};return u.datum_type=void 0===t||"none"===t?r.PJD_NODATUM:r.PJD_WGS84,e&&(u.datum_params=e.map(parseFloat),0===u.datum_params[0]&&0===u.datum_params[1]&&0===u.datum_params[2]||(u.datum_type=r.PJD_3PARAM),u.datum_params.length>3&&(0===u.datum_params[3]&&0===u.datum_params[4]&&0===u.datum_params[5]&&0===u.datum_params[6]||(u.datum_type=r.PJD_7PARAM,u.datum_params[3]*=r.SEC_TO_RAD,u.datum_params[4]*=r.SEC_TO_RAD,u.datum_params[5]*=r.SEC_TO_RAD,u.datum_params[6]=u.datum_params[6]/1e6+1))),a&&(u.datum_type=r.PJD_GRIDSHIFT,u.grids=a),u.a=n,u.b=i,u.es=o,u.ep2=s,u}})),o.register("flUkq",(function(t,e){n(t.exports,"default",(()=>i)),n(t.exports,"getNadgrids",(()=>o));var r={};function i(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:u(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var s=l(t,r,n),u=c(t,r,s,n),f=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),p=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[a(s.lowerLongitude),a(s.lowerLatitude)],del:[a(s.longitudeInterval),a(s.latitudeInterval)],lim:[f,p],count:s.gridNodeCount,cvs:h(u)})}return i}(n,o,i),f={header:o,subgrids:s};return r[t]=f,f}function o(t){return void 0===t?null:t.split(",").map(s)}function s(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:r[t]||null,isNull:!1}}function a(t){return t/3600*Math.PI/180}function u(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function h(t){return t.map((function(t){return[a(t.longitudeShift),a(t.latitudeShift)]}))}function l(t,e,n){return{name:u(t,e+8,e+16).trim(),parent:u(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function c(t,e,n,r){for(var i=e+176,o=[],s=0;s<n.gridNodeCount;s++){var a={latitudeShift:t.getFloat32(i+16*s,r),longitudeShift:t.getFloat32(i+16*s+4,r),latitudeAccuracy:t.getFloat32(i+16*s+8,r),longitudeAccuracy:t.getFloat32(i+16*s+12,r)};o.push(a)}return o}})),o.register("ceNev",(function(t,e){n(t.exports,"default",(()=>l));var r=o("gyVUi"),i=o("d7qcu"),s=o("hL60j"),a=o("38qqf"),u=o("5vTfu"),h=o("coO2L");function l(t,e,n,o){var c,f=void 0!==(n=Array.isArray(n)?(0,u.default)(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if((0,h.default)(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===r.PJD_3PARAM||t.datum.datum_type===r.PJD_7PARAM||t.datum.datum_type===r.PJD_GRIDSHIFT)&&"WGS84"!==e.datumCode||(e.datum.datum_type===r.PJD_3PARAM||e.datum.datum_type===r.PJD_7PARAM||e.datum.datum_type===r.PJD_GRIDSHIFT)&&"WGS84"!==t.datumCode}(t,e)&&(n=l(t,c=new(0,a.default)("WGS84"),n,o),t=c),o&&"enu"!==t.axis&&(n=(0,s.default)(t,!1,n)),"longlat"===t.projName)n={x:n.x*r.D2R,y:n.y*r.D2R,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=(0,i.default)(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*r.R2D,y:n.y*r.R2D,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),o&&"enu"!==e.axis?(0,s.default)(e,!0,n):(f||delete n.z,n)}})),o.register("d7qcu",(function(t,e){n(t.exports,"default",(()=>u));var r=o("gyVUi"),i=o("4YPx7"),s=o("a9oRf");function a(t){return t===r.PJD_3PARAM||t===r.PJD_7PARAM}function u(t,e,n){if((0,i.compareDatums)(t,e))return n;if(t.datum_type===r.PJD_NODATUM||e.datum_type===r.PJD_NODATUM)return n;var o=t.a,s=t.es;if(t.datum_type===r.PJD_GRIDSHIFT){if(0!==h(t,!1,n))return;o=r.SRS_WGS84_SEMIMAJOR,s=r.SRS_WGS84_ESQUARED}var u=e.a,l=e.b,c=e.es;if(e.datum_type===r.PJD_GRIDSHIFT&&(u=r.SRS_WGS84_SEMIMAJOR,l=r.SRS_WGS84_SEMIMINOR,c=r.SRS_WGS84_ESQUARED),s===c&&o===u&&!a(t.datum_type)&&!a(e.datum_type))return n;if((n=(0,i.geodeticToGeocentric)(n,s,o),a(t.datum_type)&&(n=(0,i.geocentricToWgs84)(n,t.datum_type,t.datum_params)),a(e.datum_type)&&(n=(0,i.geocentricFromWgs84)(n,e.datum_type,e.datum_params)),n=(0,i.geocentricToGeodetic)(n,c,u,l),e.datum_type===r.PJD_GRIDSHIFT)&&0!==h(e,!0,n))return;return n}function h(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},s=[],a=0;a<t.grids.length;a++){var u=t.grids[a];if(s.push(u.name),u.isNull){o=i;break}if(u.mandatory,null!==u.grid){var h=u.grid.subgrids[0],c=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,f=h.ll[0]-c,p=h.ll[1]-c,d=h.ll[0]+(h.lim[0]-1)*h.del[0]+c,g=h.ll[1]+(h.lim[1]-1)*h.del[1]+c;if(!(p>i.y||f>i.x||g<i.y||d<i.x||(o=l(i,e,h),isNaN(o.x))))break}else if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*r.R2D+" "+i.y*r.R2D+" tried: '"+s+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function l(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=(0,s.default)(i.x-Math.PI)+Math.PI;var o=c(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,u,h=9;do{if(u=c(o,n),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(u.x+o.x),y:i.y-(u.y+o.y)},o.x+=a.x,o.y+=a.y}while(h--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,s.default)(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function c(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),s=r.x-1*i,a=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var h=e.cvs[n][0],l=e.cvs[n][1];n++;var c=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],y=e.cvs[n][1],m=s*a,_=s*(1-a),v=(1-s)*(1-a),b=(1-s)*a;return u.x=v*h+_*c+b*g+m*p,u.y=v*l+_*f+b*y+m*d,u}})),o.register("4YPx7",(function(t,e){n(t.exports,"compareDatums",(()=>i)),n(t.exports,"geodeticToGeocentric",(()=>s)),n(t.exports,"geocentricToGeodetic",(()=>a)),n(t.exports,"geocentricToWgs84",(()=>u)),n(t.exports,"geocentricFromWgs84",(()=>h));var r=o("gyVUi");function i(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r.PJD_3PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r.PJD_7PARAM||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function s(t,e,n){var i,o,s,a,u=t.x,h=t.y,l=t.z?t.z:0;if(h<-r.HALF_PI&&h>-1.001*r.HALF_PI)h=-r.HALF_PI;else if(h>r.HALF_PI&&h<1.001*r.HALF_PI)h=r.HALF_PI;else{if(h<-r.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(h>r.HALF_PI)return{x:1/0,y:1/0,z:t.z}}return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(h),a=Math.cos(h),s=o*o,{x:((i=n/Math.sqrt(1-e*s))+l)*a*Math.cos(u),y:(i+l)*a*Math.sin(u),z:(i*(1-e)+l)*o}}function a(t,e,n,i){var o,s,a,u,h,l,c,f,p,d,g,y,m,_,v,b=1e-12,x=t.x,w=t.y,E=t.z?t.z:0;if(o=Math.sqrt(x*x+w*w),s=Math.sqrt(x*x+w*w+E*E),o/n<b){if(_=0,s/n<b)return r.HALF_PI,v=-i,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(w,x);a=E/s,f=(u=o/s)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*u*u)),p=a*h,m=0;do{m++,l=e*(c=n/Math.sqrt(1-e*p*p))/(c+(v=o*f+E*p-c*(1-e*p*p))),y=(g=a*(h=1/Math.sqrt(1-l*(2-l)*u*u)))*f-(d=u*(1-l)*h)*p,f=d,p=g}while(y*y>1e-24&&m<30);return{x:_,y:Math.atan(g/Math.abs(d)),z:v}}function u(t,e,n){if(e===r.PJD_3PARAM)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===r.PJD_7PARAM){var i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],h=n[5],l=n[6];return{x:l*(t.x-h*t.y+u*t.z)+i,y:l*(h*t.x+t.y-a*t.z)+o,z:l*(-u*t.x+a*t.y+t.z)+s}}}function h(t,e,n){if(e===r.PJD_3PARAM)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===r.PJD_7PARAM){var i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],h=n[5],l=n[6],c=(t.x-i)/l,f=(t.y-o)/l,p=(t.z-s)/l;return{x:c+h*f-u*p,y:-h*c+f+a*p,z:u*c-a*f+p}}}})),o.register("hL60j",(function(t,e){function r(t,e,n){var r,i,o,s=n.x,a=n.y,u=n.z||0,h={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=s,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=a,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":h[i]=r;break;case"w":case"s":h[i]=-r;break;case"u":void 0!==n[i]&&(h.z=r);break;case"d":void 0!==n[i]&&(h.z=-r);break;default:return null}return h}n(t.exports,"default",(()=>r))})),o.register("5vTfu",(function(t,e){function r(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}n(t.exports,"default",(()=>r))})),o.register("coO2L",(function(t,e){function r(t){i(t.x),i(t.y)}function i(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}n(t.exports,"default",(()=>r))})),o.register("iCFRA",(function(t,e){n(t.exports,"default",(()=>s));var r=o("4hMrQ");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(t){return new i((0,r.toPoint)(t))},i.prototype.toMGRS=function(t){return(0,r.forward)([this.x,this.y],t)};var s=i})),o.register("4hMrQ",(function(t,e){n(t.exports,"default",(()=>c)),n(t.exports,"forward",(()=>f)),n(t.exports,"toPoint",(()=>p));var r=6,i="AJSAJS",o="AFAFAF",s=65,a=73,u=79,h=86,l=90,c={forward:f,inverse:function(t){var e=y(v(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:p};function f(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(x=t.easting,w=t.northing,E=t.zoneNumber,M=_(E),S=Math.floor(x/1e5),I=Math.floor(w/1e5)%20,c=S,f=I,p=M,d=p-1,g=i.charCodeAt(d),y=o.charCodeAt(d),m=g+c-1,v=y+f,b=!1,m>l&&(m=m-l+s-1,b=!0),(m===a||g<a&&m>a||(m>a||g<a)&&b)&&m++,(m===u||g<u&&m>u||(m>u||g<u)&&b)&&++m===a&&m++,m>l&&(m=m-l+s-1),v>h?(v=v-h+s-1,b=!0):b=!1,(v===a||y<a&&v>a||(v>a||y<a)&&b)&&v++,(v===u||y<u&&v>u||(v>u||y<u)&&b)&&++v===a&&v++,v>h&&(v=v-h+s-1),String.fromCharCode(m)+String.fromCharCode(v))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var c,f,p,d,g,y,m,v,b;var x,w,E,M,S,I}(function(t){var e,n,r,i,o,s,a,u,h=t.lat,l=t.lon,c=6378137,f=.00669438,p=.9996,g=d(h),y=d(l);u=Math.floor((l+180)/6)+1,180===l&&(u=60);h>=56&&h<64&&l>=3&&l<12&&(u=32);h>=72&&h<84&&(l>=0&&l<9?u=31:l>=9&&l<21?u=33:l>=21&&l<33?u=35:l>=33&&l<42&&(u=37));a=d(6*(u-1)-180+3),e=f/(1-f),n=c/Math.sqrt(1-f*Math.sin(g)*Math.sin(g)),r=Math.tan(g)*Math.tan(g),i=e*Math.cos(g)*Math.cos(g),o=Math.cos(g)*(y-a),s=c*((1-f/4-3*f*f/64-5*f*f*f/256)*g-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*g)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*g)-35*f*f*f/3072*Math.sin(6*g));var _=p*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,v=p*(s+n*Math.tan(g)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));h<0&&(v+=1e7);return{northing:Math.round(v),easting:Math.round(_),zoneNumber:u,zoneLetter:m(h)}}({lat:t[1],lon:t[0]}),e)}function p(t){var e=y(v(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function d(t){return t*(Math.PI/180)}function g(t){return t/Math.PI*180}function y(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,u,h,l,c,f,p,d=.9996,m=6378137,_=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=n-5e5,x=e;r<"N"&&(x-=1e7),c=6*(i-1)-180+3,o=.006739496752268451,p=(f=x/d/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*f)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*f)+151*v*v*v/96*Math.sin(6*f),s=m/Math.sqrt(1-_*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),h=.99330562*m/Math.pow(1-_*Math.sin(p)*Math.sin(p),1.5),l=b/(s*d);var w=p-s*Math.tan(p)/h*(l*l/2-(5+3*a+10*u-4*u*u-9*o)*l*l*l*l/24+(61+90*a+298*u+45*a*a-1.6983531815716497-3*u*u)*l*l*l*l*l*l/720);w=g(w);var E,M=(l-(1+2*a+u)*l*l*l/6+(5-2*u+28*a-3*u*u+8*o+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(M=c+g(M),t.accuracy){var S=y({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:S.lat,right:S.lon,bottom:w,left:M}}else E={lat:w,lon:M};return E}function m(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function _(t){var e=t%r;return 0===e&&(e=r),e}function v(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,c="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;c+=e,f++}var p=parseInt(c,10);if(0===f||f+3>n)throw"MGRSPoint bad conversion from: "+t;var d=t.charAt(f++);if(d<="A"||"B"===d||"Y"===d||d>="Z"||"I"===d||"O"===d)throw"MGRSPoint zone letter "+d+" not handled: "+t;r=t.substring(f,f+=2);for(var g=_(p),y=function(t,e){var n=i.charCodeAt(e-1),r=1e5,o=!1;for(;n!==t.charCodeAt(0);){if(++n===a&&n++,n===u&&n++,n>l){if(o)throw"Bad character: "+t;n=s,o=!0}r+=1e5}return r}(r.charAt(0),g),m=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=o.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===a&&n++,n===u&&n++,n>h){if(i)throw"Bad character: "+t;n=s,i=!0}r+=1e5}return r}(r.charAt(1),g);m<b(d);)m+=2e6;var v=n-f;if(v%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var x,w,E,M=v/2,S=0,I=0;return M>0&&(x=1e5/Math.pow(10,M),w=t.substring(f,f+M),S=parseFloat(w)*x,E=t.substring(f+M),I=parseFloat(E)*x),{easting:S+y,northing:I+m,zoneLetter:d,zoneNumber:p,accuracy:x}}function b(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}})),o.register("j48cx",(function(t,e){n(t.exports,"default",(()=>k));var r=o("9t3dO"),i=o("9zr9G"),s=o("kAWkR"),a=o("5HQRm"),u=o("llHto"),h=o("4gjYM"),l=o("ejQ1Z"),c=o("iubsy"),f=o("h7o5G"),p=o("0599r"),d=o("deudM"),g=o("8mhgZ"),y=o("iSJfu"),m=o("6CTAc"),_=o("cEGTl"),v=o("2Lrqq"),b=o("6Eu1X"),x=o("fpjAW"),w=o("eA4Bc"),E=o("7uCfv"),M=o("hp0oy"),S=o("1W450"),I=o("i6dz6"),C=o("37G1n"),P=o("2XUb4"),L=o("byZja"),N=o("Fj8jS"),O=o("eJp9e"),A=o("jJ6PL");function k(t){t.Proj.projections.add(r.default),t.Proj.projections.add(i.default),t.Proj.projections.add(s.default),t.Proj.projections.add(a.default),t.Proj.projections.add(u.default),t.Proj.projections.add(h.default),t.Proj.projections.add(l.default),t.Proj.projections.add(c.default),t.Proj.projections.add(f.default),t.Proj.projections.add(p.default),t.Proj.projections.add(d.default),t.Proj.projections.add(g.default),t.Proj.projections.add(y.default),t.Proj.projections.add(m.default),t.Proj.projections.add(_.default),t.Proj.projections.add(v.default),t.Proj.projections.add(b.default),t.Proj.projections.add(x.default),t.Proj.projections.add(w.default),t.Proj.projections.add(E.default),t.Proj.projections.add(M.default),t.Proj.projections.add(S.default),t.Proj.projections.add(I.default),t.Proj.projections.add(C.default),t.Proj.projections.add(P.default),t.Proj.projections.add(L.default),t.Proj.projections.add(N.default),t.Proj.projections.add(O.default),t.Proj.projections.add(A.default)}})),o.register("9t3dO",(function(t,e){n(t.exports,"default",(()=>l));var r=o("gqKpL"),i=o("hpUQm"),s=o("jQUK6"),a=o("a9oRf"),u=o("gyVUi"),h=o("boTd3");var l={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,r.default)(this.es),this.ml0=(0,i.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,o=t.x,s=t.y,h=(0,a.default)(o-this.long0),l=Math.sin(s),c=Math.cos(s);if(this.es){var f=c*h,p=Math.pow(f,2),d=this.ep2*Math.pow(c,2),g=Math.pow(d,2),y=Math.abs(c)>u.EPSLN?Math.tan(s):0,m=Math.pow(y,2),_=Math.pow(m,2);e=1-this.es*Math.pow(l,2),f/=Math.sqrt(e);var v=(0,i.default)(s,l,c,this.en);n=this.a*(this.k0*f*(1+p/6*(1-m+d+p/20*(5-18*m+_+14*d-58*m*d+p/42*(61+179*_-_*m-479*m)))))+this.x0,r=this.a*(this.k0*(v-this.ml0+l*h*f/2*(1+p/12*(5-m+9*d+4*g+p/30*(61+_-58*m+270*d-330*m*d+p/56*(1385+543*_-_*m-3111*m))))))+this.y0}else{var b=c*Math.sin(h);if(Math.abs(Math.abs(b)-1)<u.EPSLN)return 93;if(n=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,r=c*Math.cos(h)/Math.sqrt(1-Math.pow(b,2)),(b=Math.abs(r))>=1){if(b-1>u.EPSLN)return 93;r=0}else r=Math.acos(r);s<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+l/this.k0,n=(0,s.default)(e,this.es,this.en),Math.abs(n)<u.HALF_PI){var c=Math.sin(n),f=Math.cos(n),p=Math.abs(f)>u.EPSLN?Math.tan(n):0,d=this.ep2*Math.pow(f,2),g=Math.pow(d,2),y=Math.pow(p,2),m=Math.pow(y,2);e=1-this.es*Math.pow(c,2);var _=o*Math.sqrt(e)/this.k0,v=Math.pow(_,2);r=n-(e*=p)*v/(1-this.es)*.5*(1-v/12*(5+3*y-9*d*y+d-4*g-v/30*(61+90*y-252*d*y+45*m+46*d-v/56*(1385+3633*y+4095*m+1574*m*y)))),i=(0,a.default)(this.long0+_*(1-v/6*(1+2*y+d-v/20*(5+28*y+24*m+8*d*y+6*d-v/42*(61+662*y+1320*m+720*m*y))))/f)}else r=u.HALF_PI*(0,h.default)(l),i=0;else{var b=Math.exp(o/this.k0),x=.5*(b-1/b),w=this.lat0+l/this.k0,E=Math.cos(w);e=Math.sqrt((1-Math.pow(E,2))/(1+Math.pow(x,2))),r=Math.asin(e),l<0&&(r=-r),i=0===x&&0===E?0:(0,a.default)(Math.atan2(x,E)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]}})),o.register("gqKpL",(function(t,e){n(t.exports,"default",(()=>g));var r=1,i=.25,o=.046875,s=.01953125,a=.01068115234375,u=.75,h=.46875,l=.013020833333333334,c=.007120768229166667,f=.3645833333333333,p=.005696614583333333,d=.3076171875;function g(t){var e=[];e[0]=r-t*(i+t*(o+t*(s+t*a))),e[1]=t*(u-t*(o+t*(s+t*a)));var n=t*t;return e[2]=n*(h-t*(l+t*c)),n*=t,e[3]=n*(f-t*p),e[4]=n*t*d,e}})),o.register("hpUQm",(function(t,e){function r(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}n(t.exports,"default",(()=>r))})),o.register("jQUK6",(function(t,e){n(t.exports,"default",(()=>a));var r=o("hpUQm"),i=o("gyVUi"),s=20;function a(t,e,n){for(var o=1/(1-e),a=t,u=s;u;--u){var h=Math.sin(a),l=1-e*h*h;if(a-=l=((0,r.default)(a,h,Math.cos(a),n)-t)*(l*Math.sqrt(l))*o,Math.abs(l)<i.EPSLN)return a}return a}})),o.register("9zr9G",(function(t,e){n(t.exports,"default",(()=>f));var r=o("9t3dO"),i=o("zBlxr"),s=o("jU5gu"),a=o("cVtoA"),u=o("klaWo"),h=o("k0stT"),l=o("iKZ74"),c=o("a9oRf");var f={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(r.default.init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=(0,u.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(i+(0,h.default)(this.gtu,2*i))},forward:function(t){var e=(0,c.default)(t.x-this.long0),n=t.y;n=(0,u.default)(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),h=Math.cos(e);n=Math.atan2(r,h*i),e=Math.atan2(o*i,(0,s.default)(r,i*h)),e=(0,a.default)(Math.tan(e));var f,p,d=(0,l.default)(this.gtu,2*n,2*e);return n+=d[0],e+=d[1],Math.abs(e)<=2.623395162778?(f=this.a*(this.Qn*e)+this.x0,p=this.a*(this.Qn*n+this.Zb)+this.y0):(f=1/0,p=1/0),t.x=f,t.y=p,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var a=(0,l.default)(this.utg,2*o,2*r);o+=a[0],r+=a[1],r=Math.atan((0,i.default)(r));var h=Math.sin(o),f=Math.cos(o),p=Math.sin(r),d=Math.cos(r);o=Math.atan2(h*d,(0,s.default)(p,d*f)),r=Math.atan2(p,d*f),e=(0,c.default)(r+this.long0),n=(0,u.default)(this.cgb,o)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]}})),o.register("zBlxr",(function(t,e){function r(t){var e=Math.exp(t);return e=(e-1/e)/2}n(t.exports,"default",(()=>r))})),o.register("jU5gu",(function(t,e){function r(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}n(t.exports,"default",(()=>r))})),o.register("cVtoA",(function(t,e){n(t.exports,"default",(()=>s));var r=o("jU5gu"),i=o("g1hBf");function s(t){var e=Math.abs(t);return e=(0,i.default)(e*(1+e/((0,r.default)(1,e)+1))),t<0?-e:e}})),o.register("g1hBf",(function(t,e){function r(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}n(t.exports,"default",(()=>r))})),o.register("klaWo",(function(t,e){function r(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return e+n*Math.sin(2*e)}n(t.exports,"default",(()=>r))})),o.register("k0stT",(function(t,e){function r(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return Math.sin(e)*n}n(t.exports,"default",(()=>r))})),o.register("iKZ74",(function(t,e){n(t.exports,"default",(()=>s));var r=o("zBlxr"),i=o("cz4ED");function s(t,e,n){for(var o,s,a=Math.sin(e),u=Math.cos(e),h=(0,r.default)(n),l=(0,i.default)(n),c=2*u*l,f=-2*a*h,p=t.length-1,d=t[p],g=0,y=0,m=0;--p>=0;)o=y,s=g,d=c*(y=d)-o-f*(g=m)+t[p],m=f*y-s+c*g;return[(c=a*l)*d-(f=u*h)*m,c*m+f*d]}})),o.register("cz4ED",(function(t,e){function r(t){var e=Math.exp(t);return e=(e+1/e)/2}n(t.exports,"default",(()=>r))})),o.register("kAWkR",(function(t,e){n(t.exports,"default",(()=>a));var r=o("b4YJ1"),i=o("9zr9G"),s=o("gyVUi");var a={init:function(){var t=(0,r.default)(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*s.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}})),o.register("b4YJ1",(function(t,e){n(t.exports,"default",(()=>i));var r=o("a9oRf");function i(t,e){if(void 0===t){if((t=Math.floor(30*((0,r.default)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}})),o.register("5HQRm",(function(t,e){n(t.exports,"default",(()=>s));var r=o("zGHAa"),i=o("a9oRf");var s={init:function(){r.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,o,s;return t.x=(0,i.default)(t.x-this.long0),r.default.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,o,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var u=2*Math.atan2(a,this.R2);e=Math.sin(u),n=Math.cos(u),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),o=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,r.default.inverse.apply(this,[t]),t.x=(0,i.default)(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}})),o.register("zGHAa",(function(t,e){n(t.exports,"default",(()=>s));var r=o("82Tex"),i=o("gyVUi");var s={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+i.FORTPI),this.C)*(0,r.default)(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i.FORTPI),this.C)*(0,r.default)(this.e*Math.sin(n),this.ratexp))-i.HALF_PI,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,o=Math.pow(Math.tan(.5*n+i.FORTPI)/this.K,1/this.C),s=20;s>0&&(n=2*Math.atan(o*(0,r.default)(this.e*Math.sin(t.y),-.5*this.e))-i.HALF_PI,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null},names:["gauss"]}})),o.register("82Tex",(function(t,e){function r(t,e){return Math.pow((1-t)/(1+t),e)}n(t.exports,"default",(()=>r))})),o.register("llHto",(function(t,e){n(t.exports,"default",(()=>l));var r=o("gyVUi"),i=o("boTd3"),s=o("bi5ZC"),a=o("3xC66"),u=o("2AZR8"),h=o("a9oRf");var l={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.EPSLN&&(this.k0=.5*(1+(0,i.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.EPSLN&&(this.k0=.5*this.cons*(0,s.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,a.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,s.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,o,s,u,l=t.x,c=t.y,f=Math.sin(c),p=Math.cos(c),d=(0,h.default)(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=r.EPSLN&&Math.abs(c+this.lat0)<=r.EPSLN?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*f+this.coslat0*p*Math.cos(d)),t.x=this.a*e*p*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*p*Math.cos(d))+this.y0,t):(n=2*Math.atan(this.ssfn_(c,f,this.e))-r.HALF_PI,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=r.EPSLN?(s=(0,a.default)(this.e,c*this.con,this.con*f),u=2*this.a*this.k0*s/this.cons,t.x=this.x0+u*Math.sin(l-this.long0),t.y=this.y0-this.con*u*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<r.EPSLN?(e=2*this.a*this.k0/(1+o*Math.cos(d)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(d))),t.y=e*(this.cosX0*i-this.sinX0*o*Math.cos(d))+this.y0),t.x=e*o*Math.sin(d)+this.x0,t))},inverse:function(t){var e,n,i,o,s;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=r.EPSLN?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/a),e=Math.abs(this.coslat0)<r.EPSLN?this.lat0>0?(0,h.default)(this.long0+Math.atan2(t.x,-1*t.y)):(0,h.default)(this.long0+Math.atan2(t.x,t.y)):(0,h.default)(this.long0+Math.atan2(t.x*Math.sin(l),a*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r.EPSLN){if(a<=r.EPSLN)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=a*this.cons/(2*this.a*this.k0),n=this.con*(0,u.default)(this.e,i),e=this.con*(0,h.default)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=r.EPSLN?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=(0,h.default)(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*(0,u.default)(this.e,Math.tan(.5*(r.HALF_PI+s)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(r.HALF_PI+t))*Math.pow((1-e)/(1+e),.5*n)}}})),o.register("4gjYM",(function(t,e){n(t.exports,"default",(()=>r));var r={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,u=0,h=o,l=-1e3,c=0;Math.abs(h-l)>1e-7;){if(++c>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),l=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=h,t},names:["somerc"]}})),o.register("ejQ1Z",(function(t,e){n(t.exports,"default",(()=>h));var r=o("3xC66"),i=o("a9oRf"),s=o("2AZR8"),a=o("gyVUi"),u=1e-7;var h={init:function(){var t,e,n,o,s,h,l,c,f,p,d,g,y,m=0,_=0,v=0,b=0,x=0,w=0,E=0;this.no_off=(y="object"==typeof(g=this).PROJECTION?Object.keys(g.PROJECTION)[0]:g.PROJECTION,"no_uoff"in g||"no_off"in g||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var S=!1;if("rectified_grid_angle"in this&&(S=!0),M&&(E=this.alpha),S&&(m=this.rectified_grid_angle*a.D2R),M||S)_=this.longc;else if(v=this.long1,x=this.lat1,b=this.long2,w=this.lat2,Math.abs(x-w)<=u||(t=Math.abs(x))<=u||Math.abs(t-a.HALF_PI)<=u||Math.abs(Math.abs(this.lat0)-a.HALF_PI)<=u||Math.abs(Math.abs(w)-a.HALF_PI)<=u)throw new Error;var I=1-this.es;e=Math.sqrt(I),Math.abs(this.lat0)>a.EPSLN?(c=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*c*c,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/I),this.A=this.B*this.k0*e/t,(s=(o=this.B*e/(n*Math.sqrt(t)))*o-1)<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=o,this.E*=Math.pow((0,r.default)(this.e,this.lat0,c),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=s=1),M||S?(M?(d=Math.asin(Math.sin(E)/o),S||(m=E)):(d=m,E=Math.asin(o*Math.sin(d))),this.lam0=_-Math.asin(.5*(s-1/s)*Math.tan(d))/this.B):(h=Math.pow((0,r.default)(this.e,x,Math.sin(x)),this.B),l=Math.pow((0,r.default)(this.e,w,Math.sin(w)),this.B),s=this.E/h,f=(l-h)/(l+h),p=((p=this.E*this.E)-l*h)/(p+l*h),(t=v-b)<-Math.pi?b-=a.TWO_PI:t>Math.pi&&(b+=a.TWO_PI),this.lam0=(0,i.default)(.5*(v+b)-Math.atan(p*Math.tan(.5*this.B*(v-b))/f)/this.B),d=Math.atan(2*Math.sin(this.B*(0,i.default)(v-this.lam0))/(s-1/s)),m=E=Math.asin(o*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(a.FORTPI-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(a.FORTPI+s))},forward:function(t){var e,n,i,o,s,h,l,c,f={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-a.HALF_PI)>a.EPSLN){if(e=.5*((s=this.E/Math.pow((0,r.default)(this.e,t.y,Math.sin(t.y)),this.B))-(h=1/s)),n=.5*(s+h),o=Math.sin(this.B*t.x),i=(e*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(i)-1)<a.EPSLN)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),h=Math.cos(this.B*t.x),l=Math.abs(h)<u?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,h)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(f.x=l,f.y=c):(l-=this.u_0,f.x=c*this.cosrot+l*this.sinrot,f.y=l*this.cosrot-c*this.sinrot),f.x=this.a*f.x+this.x0,f.y=this.a*f.y+this.y0,f},inverse:function(t){var e,n,r,i,o,u,h,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),h=((u=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(h)-1)<a.EPSLN)l.x=0,l.y=h<0?-a.HALF_PI:a.HALF_PI;else{if(l.y=this.E/Math.sqrt((1+h)/(1-h)),l.y=(0,s.default)(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-u*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]}})),o.register("iubsy",(function(t,e){n(t.exports,"default",(()=>l));var r=o("bi5ZC"),i=o("3xC66"),s=o("boTd3"),a=o("a9oRf"),u=o("2AZR8"),h=o("gyVUi");var l={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<h.EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=(0,r.default)(this.e,e,n),s=(0,i.default)(this.e,this.lat1,e),a=Math.sin(this.lat2),u=Math.cos(this.lat2),l=(0,r.default)(this.e,a,u),c=(0,i.default)(this.e,this.lat2,a),f=(0,i.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>h.EPSLN?this.ns=Math.log(o/l)/Math.log(s/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=h.EPSLN&&(n=(0,s.default)(n)*(h.HALF_PI-2*h.EPSLN));var r,o,u=Math.abs(Math.abs(n)-h.HALF_PI);if(u>h.EPSLN)r=(0,i.default)(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if((u=n*this.ns)<=0)return null;o=0}var l=this.ns*(0,a.default)(e-this.long0);return t.x=this.k0*(o*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(l))+this.y0,t},inverse:function(t){var e,n,r,i,o,s=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+l*l),n=1):(e=-Math.sqrt(s*s+l*l),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*s,n*l)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=(0,u.default)(this.e,r)))return null}else i=-h.HALF_PI;return o=(0,a.default)(c/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]}})),o.register("h7o5G",(function(t,e){n(t.exports,"default",(()=>i));var r=o("a9oRf");var i={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,o,s,a,u,h=t.x,l=t.y,c=(0,r.default)(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),a=this.n*s,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(a)/1,t.x=u*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,h+=1}while(0===a&&h<15);return h>=15?null:t},names:["Krovak","krovak"]}})),o.register("0599r",(function(t,e){n(t.exports,"default",(()=>d));var r=o("f3cKo"),i=o("bWC4D"),s=o("hU8aC"),a=o("i9r9A"),u=o("bM0eI"),h=o("3eeGT"),l=o("a9oRf"),c=o("aDUFA"),f=o("cfNuL"),p=o("gyVUi");var d={init:function(){this.sphere||(this.e0=(0,i.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,u.default)(this.es),this.ml0=this.a*(0,r.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,o=t.y;if(i=(0,l.default)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var s=Math.sin(o),a=Math.cos(o),u=(0,h.default)(this.a,this.e,s),c=Math.tan(o)*Math.tan(o),f=i*Math.cos(o),p=f*f,d=this.es*a*a/(1-this.es);e=u*f*(1-p*c*(1/6-(8-c+8*d)*p/120)),n=this.a*(0,r.default)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+u*s/a*p*(.5+(5-c+6*d)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=this.ml0/this.a+i,a=(0,f.default)(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-p.HALF_PI)<=p.EPSLN)return t.x=this.long0,t.y=p.HALF_PI,i<0&&(t.y*=-1),t;var u=(0,h.default)(this.a,this.e,Math.sin(a)),d=u*u*u/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(a),2),y=r*this.a/u,m=y*y;e=a-u*Math.tan(a)/d*y*y*(.5-(1+3*g)*y*y/24),n=y*(1-m*(g/3+(1+3*g)*g*m/15))/Math.cos(a)}return t.x=(0,l.default)(n+this.long0),t.y=(0,c.default)(e),t},names:["Cassini","Cassini_Soldner","cass"]}})),o.register("f3cKo",(function(t,e){function r(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}n(t.exports,"default",(()=>r))})),o.register("bWC4D",(function(t,e){function r(t){return 1-.25*t*(1+t/16*(3+1.25*t))}n(t.exports,"default",(()=>r))})),o.register("hU8aC",(function(t,e){function r(t){return.375*t*(1+.25*t*(1+.46875*t))}n(t.exports,"default",(()=>r))})),o.register("i9r9A",(function(t,e){function r(t){return.05859375*t*t*(1+.75*t)}n(t.exports,"default",(()=>r))})),o.register("bM0eI",(function(t,e){function r(t){return t*t*t*(35/3072)}n(t.exports,"default",(()=>r))})),o.register("3eeGT",(function(t,e){function r(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}n(t.exports,"default",(()=>r))})),o.register("aDUFA",(function(t,e){n(t.exports,"default",(()=>s));var r=o("gyVUi"),i=o("boTd3");function s(t){return Math.abs(t)<r.HALF_PI?t:t-(0,i.default)(t)*Math.PI}})),o.register("cfNuL",(function(t,e){function r(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}n(t.exports,"default",(()=>r))})),o.register("deudM",(function(t,e){n(t.exports,"default",(()=>p));var r=o("gyVUi"),i=o("874JP"),s=o("a9oRf");var a=.3333333333333333,u=.17222222222222222,h=.10257936507936508,l=.06388888888888888,c=.0664021164021164,f=.016415012942191543;var p={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r.HALF_PI)<r.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<r.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,i.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*a,e=t*t,n[0]+=e*u,n[1]=e*l,e*=t,n[0]+=e*h,n[1]+=e*c,n[2]=e*f,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,i.default)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,o,a,u,h,l,c,f,p,d=t.x,g=t.y;if(d=(0,s.default)(d-this.long0),this.sphere){if(u=Math.sin(g),p=Math.cos(g),o=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+p*o:1+this.sinph0*u+this.cosph0*p*o)<=r.EPSLN)return null;e=(n=Math.sqrt(2/n))*p*Math.sin(d),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*p*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(g+this.lat0)<r.EPSLN)return null;n=r.FORTPI-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(d),n*=o}}else{switch(l=0,c=0,f=0,o=Math.cos(d),a=Math.sin(d),u=Math.sin(g),h=(0,i.default)(this.e,u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(l=h/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*c*o;break;case this.EQUIT:f=1+c*o;break;case this.N_POLE:f=r.HALF_PI+g,h=this.qp-h;break;case this.S_POLE:f=g-r.HALF_PI,h=this.qp+h}if(Math.abs(f)<r.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),n=this.mode===this.OBLIQ?this.ymf*f*(this.cosb1*l-this.sinb1*c*o):(f=Math.sqrt(2/(1+c*o)))*l*this.ymf,e=this.xmf*f*c*a;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(f=Math.sqrt(h))*a,n=o*(this.mode===this.S_POLE?f:-f)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,o,a,u,h,l,c,f,p=t.x/this.a,d=t.y/this.a;if(this.sphere){var g,y=0,m=0;if((n=.5*(g=Math.sqrt(p*p+d*d)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(n),y=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(g)<=r.EPSLN?0:Math.asin(d*m/g),p*=m,d=y*g;break;case this.OBLIQ:n=Math.abs(g)<=r.EPSLN?this.lat0:Math.asin(y*this.sinph0+d*m*this.cosph0/g),p*=m*this.cosph0,d=(y-Math.sin(n)*this.sinph0)*g;break;case this.N_POLE:d=-d,n=r.HALF_PI-n;break;case this.S_POLE:n-=r.HALF_PI}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(p,d):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(p/=this.dd,d*=this.dd,(u=Math.sqrt(p*p+d*d))<r.EPSLN)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*u/this.rq),i=Math.cos(o),p*=o=Math.sin(o),this.mode===this.OBLIQ?(h=i*this.sinb1+d*o*this.cosb1/u,a=this.qp*h,d=u*this.cosb1*i-d*this.sinb1*o):(h=d*o/u,a=this.qp*h,d=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(a=p*p+d*d))return t.x=this.long0,t.y=this.lat0,t;h=1-a/this.qp,this.mode===this.S_POLE&&(h=-h)}e=Math.atan2(p,d),l=Math.asin(h),c=this.apa,f=l+l,n=l+c[0]*Math.sin(f)+c[1]*Math.sin(f+f)+c[2]*Math.sin(f+f+f)}return t.x=(0,s.default)(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}})),o.register("874JP",(function(t,e){function r(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}n(t.exports,"default",(()=>r))})),o.register("8mhgZ",(function(t,e){n(t.exports,"default",(()=>h));var r=o("bi5ZC"),i=o("874JP"),s=o("a9oRf"),a=o("ljPJJ"),u=o("gyVUi");var h={init:function(){Math.abs(this.lat1+this.lat2)<u.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,r.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,i.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,r.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,i.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,i.default)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>u.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=(0,i.default)(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*(0,s.default)(e-this.long0),u=o*Math.sin(a)+this.x0,h=this.rh-o*Math.cos(a)+this.y0;return t.x=u,t.y=h,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=(0,s.default)(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,s=(0,a.default)(.5*e);if(t<u.EPSLN)return s;for(var h=t*t,l=1;l<=25;l++)if(s+=o=.5*(i=1-(r=t*(n=Math.sin(s)))*r)*i/Math.cos(s)*(e/(1-h)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return s;return null}}})),o.register("ljPJJ",(function(t,e){function r(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}n(t.exports,"default",(()=>r))})),o.register("iSJfu",(function(t,e){n(t.exports,"default",(()=>a));var r=o("a9oRf"),i=o("ljPJJ"),s=o("gyVUi");var a={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,o,a,u,h,l=t.x,c=t.y;return i=(0,r.default)(l-this.long0),e=Math.sin(c),n=Math.cos(c),o=Math.cos(i),1,(a=this.sin_p14*e+this.cos_p14*n*o)>0||Math.abs(a)<=s.EPSLN?(u=this.x0+1*this.a*n*Math.sin(i)/a,h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*o)/a):(u=this.x0+this.infinity_dist*n*Math.sin(i),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=u,t.y=h,t},inverse:function(t){var e,n,o,s,a,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),o=Math.cos(s),u=(0,i.default)(o*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),a=(0,r.default)(this.long0+a)):(u=this.phic0,a=0),t.x=a,t.y=u,t},names:["gnom"]}})),o.register("6CTAc",(function(t,e){n(t.exports,"default",(()=>u));var r=o("a9oRf"),i=o("874JP"),s=o("bi5ZC"),a=o("b4Ogv");var u={init:function(){this.sphere||(this.k0=(0,s.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,o=t.x,s=t.y,a=(0,r.default)(o-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var u=(0,i.default)(this.e,Math.sin(s));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,r.default)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=(0,a.default)(this.e,2*t.y*this.k0/this.a),e=(0,r.default)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]}})),o.register("b4Ogv",(function(t,e){n(t.exports,"default",(()=>i));var r=o("gyVUi");function i(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*r.HALF_PI:r.HALF_PI;for(var i,o,s,a,u=Math.asin(.5*e),h=0;h<30;h++)if(o=Math.sin(u),s=Math.cos(u),a=t*o,u+=i=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return u;return NaN}})),o.register("cEGTl",(function(t,e){n(t.exports,"default",(()=>s));var r=o("a9oRf"),i=o("aDUFA");var s={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,o=(0,r.default)(e-this.long0),s=(0,i.default)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.x,n=t.y;return t.x=(0,r.default)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=(0,i.default)(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]}})),o.register("2Lrqq",(function(t,e){n(t.exports,"default",(()=>p));var r=o("bWC4D"),i=o("hU8aC"),s=o("i9r9A"),a=o("bM0eI"),u=o("a9oRf"),h=o("aDUFA"),l=o("f3cKo"),c=o("gyVUi"),f=o("3eeGT");var p={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.default)(this.es),this.e1=(0,i.default)(this.es),this.e2=(0,s.default)(this.es),this.e3=(0,a.default)(this.es),this.ml0=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,s=(0,u.default)(i-this.long0);if(r=s*Math.sin(o),this.sphere)Math.abs(o)<=c.EPSLN?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*((0,h.default)(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=c.EPSLN)e=this.a*s,n=-1*this.ml0;else{var a=(0,f.default)(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(r),n=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,s,a,h,f;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=c.EPSLN)e=(0,u.default)(r/this.a+this.long0),n=0;else{var p;for(s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,h=s,o=20;o;--o)if(h+=f=-1*(s*(h*(p=Math.tan(h))+1)-h-.5*(h*h+a)*p)/((h-s)/p-1),Math.abs(f)<=c.EPSLN){n=h;break}e=(0,u.default)(this.long0+Math.asin(r*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=c.EPSLN)n=0,e=(0,u.default)(this.long0+r/this.a);else{var d,g,y,m,_;for(s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,h=s,o=20;o;--o)if(_=this.e*Math.sin(h),d=Math.sqrt(1-_*_)*Math.tan(h),g=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=f=(s*(d*(m=g/this.a)+1)-m-.5*d*(m*m+a))/(this.es*Math.sin(2*h)*(m*m+a-2*s*m)/(4*d)+(s-m)*(d*y-2/Math.sin(2*h))-y),Math.abs(f)<=c.EPSLN){n=h;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=(0,u.default)(this.long0+Math.asin(r*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]}})),o.register("6Eu1X",(function(t,e){n(t.exports,"default",(()=>i));var r=o("gyVUi");var i={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,s=i/r.SEC_TO_RAD*1e-5,a=o,u=1,h=0;for(e=1;e<=10;e++)u*=s,h+=this.A[e]*u;var l,c=h,f=a,p=1,d=0,g=0,y=0;for(e=1;e<=6;e++)l=d*c+p*f,p=p*c-d*f,d=l,g=g+this.B_re[e]*p-this.B_im[e]*d,y=y+this.B_im[e]*p+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,o=t.y,s=i-this.x0,a=(o-this.y0)/this.a,u=s/this.a,h=1,l=0,c=0,f=0;for(e=1;e<=6;e++)n=l*a+h*u,h=h*a-l*u,l=n,c=c+this.C_re[e]*h-this.C_im[e]*l,f=f+this.C_im[e]*h+this.C_re[e]*l;for(var p=0;p<this.iterations;p++){var d,g=c,y=f,m=a,_=u;for(e=2;e<=6;e++)d=y*c+g*f,g=g*c-y*f,y=d,m+=(e-1)*(this.B_re[e]*g-this.B_im[e]*y),_+=(e-1)*(this.B_im[e]*g+this.B_re[e]*y);g=1,y=0;var v=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)d=y*c+g*f,g=g*c-y*f,y=d,v+=e*(this.B_re[e]*g-this.B_im[e]*y),b+=e*(this.B_im[e]*g+this.B_re[e]*y);var x=v*v+b*b;c=(m*v+_*b)/x,f=(_*v-m*b)/x}var w=c,E=f,M=1,S=0;for(e=1;e<=9;e++)M*=w,S+=this.D[e]*M;var I=this.lat0+S*r.SEC_TO_RAD*1e5,C=this.long0+E;return t.x=C,t.y=I,t},names:["New_Zealand_Map_Grid","nzmg"]}})),o.register("fpjAW",(function(t,e){n(t.exports,"default",(()=>i));var r=o("a9oRf");var i={init:function(){},forward:function(t){var e=t.x,n=t.y,i=(0,r.default)(e-this.long0),o=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=(0,r.default)(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]}})),o.register("eA4Bc",(function(t,e){n(t.exports,"default",(()=>c));var r=o("a9oRf"),i=o("aDUFA"),s=o("gqKpL"),a=o("hpUQm"),u=o("jQUK6"),h=o("gyVUi"),l=o("ljPJJ");var c={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,s.default)(this.es)},forward:function(t){var e,n,i=t.x,o=t.y;if(i=(0,r.default)(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),u=20;u;--u){var l=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<h.EPSLN)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var c=Math.sin(o),f=Math.cos(o);n=this.a*(0,a.default)(o,c,f,this.en),e=this.a*i*f/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,l.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,l.default)(Math.sin(e)/this.n)),o=(0,r.default)(o+this.long0),e=(0,i.default)(e)):(e=(0,u.default)(t.y/this.a,this.es,this.en),(s=Math.abs(e))<h.HALF_PI?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=(0,r.default)(n)):s-h.EPSLN<h.HALF_PI&&(o=this.long0)),t.x=o,t.y=e,t},names:["Sinusoidal","sinu"]}})),o.register("7uCfv",(function(t,e){n(t.exports,"default",(()=>s));var r=o("a9oRf"),i=o("gyVUi");var s={init:function(){},forward:function(t){for(var e=t.x,n=t.y,o=(0,r.default)(e-this.long0),s=n,a=Math.PI*Math.sin(n);;){var u=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=u,Math.abs(u)<i.EPSLN)break}s/=2,Math.PI/2-Math.abs(n)<i.EPSLN&&(o=0);var h=.900316316158*this.a*o*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=h,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=(0,r.default)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=i,t.y=o,t},names:["Mollweide","moll"]}})),o.register("hp0oy",(function(t,e){n(t.exports,"default",(()=>d));var r=o("bWC4D"),i=o("hU8aC"),s=o("i9r9A"),a=o("bM0eI"),u=o("bi5ZC"),h=o("f3cKo"),l=o("a9oRf"),c=o("aDUFA"),f=o("cfNuL"),p=o("gyVUi");var d={init:function(){Math.abs(this.lat1+this.lat2)<p.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.default)(this.es),this.e1=(0,i.default)(this.es),this.e2=(0,s.default)(this.es),this.e3=(0,a.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,u.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<p.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,u.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=(0,h.default)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*(0,l.default)(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=(0,l.default)(this.long0+o/this.ns),r=(0,c.default)(this.g-n/this.a),t.x=i,t.y=r,t;var s=this.g-n/this.a;return r=(0,f.default)(s,this.e0,this.e1,this.e2,this.e3),i=(0,l.default)(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]}})),o.register("1W450",(function(t,e){n(t.exports,"default",(()=>a));var r=o("a9oRf"),i=o("gyVUi"),s=o("ljPJJ");var a={init:function(){this.R=this.a},forward:function(t){var e,n,o=t.x,a=t.y,u=(0,r.default)(o-this.long0);Math.abs(a)<=i.EPSLN&&(e=this.x0+this.R*u,n=this.y0);var h=(0,s.default)(2*Math.abs(a/Math.PI));(Math.abs(u)<=i.EPSLN||Math.abs(Math.abs(a)-i.HALF_PI)<=i.EPSLN)&&(e=this.x0,n=a>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+Math.PI*this.R*-Math.tan(.5*h));var l=.5*Math.abs(Math.PI/u-u/Math.PI),c=l*l,f=Math.sin(h),p=Math.cos(h),d=p/(f+p-1),g=d*d,y=d*(2/f-1),m=y*y,_=Math.PI*this.R*(l*(d-m)+Math.sqrt(c*(d-m)*(d-m)-(m+c)*(g-m)))/(m+c);u<0&&(_=-_),e=this.x0+_;var v=c+d;return _=Math.PI*this.R*(y*v-l*Math.sqrt((m+c)*(c+1)-v*v))/(m+c),n=a>=0?this.y0+_:this.y0-_,t.x=e,t.y=n,t},inverse:function(t){var e,n,o,s,a,u,h,l,c,f,p,d;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,a=(o=t.x/p)*o+(s=t.y/p)*s,p=3*(s*s/(l=-2*(u=-Math.abs(s)*(1+a))+1+2*s*s+a*a)+(2*(h=u-2*s*s+o*o)*h*h/l/l/l-9*u*h/l/l)/27)/(c=(u-h*h/3/l)/l)/(f=2*Math.sqrt(-c/3)),Math.abs(p)>1&&(p=p>=0?1:-1),d=Math.acos(p)/3,n=t.y>=0?(-f*Math.cos(d+Math.PI/3)-h/3/l)*Math.PI:-(-f*Math.cos(d+Math.PI/3)-h/3/l)*Math.PI,e=Math.abs(o)<i.EPSLN?this.long0:(0,r.default)(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(o*o-s*s)+a*a))/2/o),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}})),o.register("i6dz6",(function(t,e){n(t.exports,"default",(()=>d));var r=o("a9oRf"),i=o("gyVUi"),s=o("f3cKo"),a=o("bWC4D"),u=o("hU8aC"),h=o("i9r9A"),l=o("bM0eI"),c=o("3eeGT"),f=o("ljPJJ"),p=o("cfNuL");var d={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,o,f,p,d,g,y,m,_,v,b,x,w,E,M,S,I,C,P,L,N,O=t.x,A=t.y,k=Math.sin(t.y),R=Math.cos(t.y),T=(0,r.default)(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=i.EPSLN?(t.x=this.x0+this.a*(i.HALF_PI-A)*Math.sin(T),t.y=this.y0-this.a*(i.HALF_PI-A)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=i.EPSLN?(t.x=this.x0+this.a*(i.HALF_PI+A)*Math.sin(T),t.y=this.y0+this.a*(i.HALF_PI+A)*Math.cos(T),t):(I=this.sin_p12*k+this.cos_p12*R*Math.cos(T),S=(M=Math.acos(I))?M/Math.sin(M):1,t.x=this.x0+this.a*S*R*Math.sin(T),t.y=this.y0+this.a*S*(this.cos_p12*k-this.sin_p12*R*Math.cos(T)),t):(e=(0,a.default)(this.es),n=(0,u.default)(this.es),o=(0,h.default)(this.es),f=(0,l.default)(this.es),Math.abs(this.sin_p12-1)<=i.EPSLN?(p=this.a*(0,s.default)(e,n,o,f,i.HALF_PI),d=this.a*(0,s.default)(e,n,o,f,A),t.x=this.x0+(p-d)*Math.sin(T),t.y=this.y0-(p-d)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=i.EPSLN?(p=this.a*(0,s.default)(e,n,o,f,i.HALF_PI),d=this.a*(0,s.default)(e,n,o,f,A),t.x=this.x0+(p+d)*Math.sin(T),t.y=this.y0+(p+d)*Math.cos(T),t):(g=k/R,y=(0,c.default)(this.a,this.e,this.sin_p12),m=(0,c.default)(this.a,this.e,k),_=Math.atan((1-this.es)*g+this.es*y*this.sin_p12/(m*R)),C=0===(v=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(_)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.abs(Math.abs(v)-Math.PI)<=i.EPSLN?-Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.asin(Math.sin(T)*Math.cos(_)/Math.sin(v)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),M=y*C*(1-(P=C*C)*(E=(x=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es))*x)*(1-E)/6+(L=P*C)/8*(w=b*x)*(1-2*E)+(N=L*C)/120*(E*(4-7*E)-3*b*b*(1-7*E))-N*C/48*w),t.x=this.x0+M*Math.sin(v),t.y=this.y0+M*Math.cos(v),t))},inverse:function(t){var e,n,o,d,g,y,m,_,v,b,x,w,E,M,S,I,C,P,L,N,O,A,k,R;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i.HALF_PI*this.a)return;return n=e/this.a,o=Math.sin(n),d=Math.cos(n),g=this.long0,Math.abs(e)<=i.EPSLN?y=this.lat0:(y=(0,f.default)(d*this.sin_p12+t.y*o*this.cos_p12/e),m=Math.abs(this.lat0)-i.HALF_PI,g=Math.abs(m)<=i.EPSLN?this.lat0>=0?(0,r.default)(this.long0+Math.atan2(t.x,-t.y)):(0,r.default)(this.long0-Math.atan2(-t.x,t.y)):(0,r.default)(this.long0+Math.atan2(t.x*o,e*this.cos_p12*d-t.y*this.sin_p12*o))),t.x=g,t.y=y,t}return _=(0,a.default)(this.es),v=(0,u.default)(this.es),b=(0,h.default)(this.es),x=(0,l.default)(this.es),Math.abs(this.sin_p12-1)<=i.EPSLN?(E=(w=this.a*(0,s.default)(_,v,b,x,i.HALF_PI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),y=(0,p.default)(E/this.a,_,v,b,x),g=(0,r.default)(this.long0+Math.atan2(t.x,-1*t.y)),t.x=g,t.y=y,t):Math.abs(this.sin_p12+1)<=i.EPSLN?(w=this.a*(0,s.default)(_,v,b,x,i.HALF_PI),E=(e=Math.sqrt(t.x*t.x+t.y*t.y))-w,y=(0,p.default)(E/this.a,_,v,b,x),g=(0,r.default)(this.long0+Math.atan2(t.x,t.y)),t.x=g,t.y=y,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),I=Math.atan2(t.x,t.y),M=(0,c.default)(this.a,this.e,this.sin_p12),C=Math.cos(I),L=-(P=this.e*this.cos_p12*C)*P/(1-this.es),N=3*this.es*(1-L)*this.sin_p12*this.cos_p12*C/(1-this.es),k=1-L*(A=(O=e/M)-L*(1+L)*Math.pow(O,3)/6-N*(1+3*L)*Math.pow(O,4)/24)*A/2-O*A*A*A/6,S=Math.asin(this.sin_p12*Math.cos(A)+this.cos_p12*Math.sin(A)*C),g=(0,r.default)(this.long0+Math.asin(Math.sin(I)*Math.sin(A)/Math.cos(S))),R=Math.sin(S),y=Math.atan2((R-this.es*k*this.sin_p12)*Math.tan(S),R*(1-this.es)),t.x=g,t.y=y,t)},names:["Azimuthal_Equidistant","aeqd"]}})),o.register("37G1n",(function(t,e){n(t.exports,"default",(()=>a));var r=o("a9oRf"),i=o("ljPJJ"),s=o("gyVUi");var a={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,o,a,u,h,l=t.x,c=t.y;return i=(0,r.default)(l-this.long0),e=Math.sin(c),n=Math.cos(c),o=Math.cos(i),1,((a=this.sin_p14*e+this.cos_p14*n*o)>0||Math.abs(a)<=s.EPSLN)&&(u=1*this.a*n*Math.sin(i),h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*o)),t.x=u,t.y=h,t},inverse:function(t){var e,n,o,a,u,h,l;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=(0,i.default)(e/this.a),o=Math.sin(n),a=Math.cos(n),h=this.long0,Math.abs(e)<=s.EPSLN?(l=this.lat0,t.x=h,t.y=l,t):(l=(0,i.default)(a*this.sin_p14+t.y*o*this.cos_p14/e),u=Math.abs(this.lat0)-s.HALF_PI,Math.abs(u)<=s.EPSLN?(h=this.lat0>=0?(0,r.default)(this.long0+Math.atan2(t.x,-t.y)):(0,r.default)(this.long0-Math.atan2(-t.x,t.y)),t.x=h,t.y=l,t):(h=(0,r.default)(this.long0+Math.atan2(t.x*o,e*this.cos_p14*a-t.y*this.sin_p14*o)),t.x=h,t.y=l,t))},names:["ortho"]}})),o.register("2XUb4",(function(t,e){n(t.exports,"default",(()=>d));var r=o("gyVUi"),i=1,s=2,a=3,u=4,h=5,l=6,c={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function f(t,e,n,i){var o;return t<r.EPSLN?(i.value=c.AREA_0,o=0):(o=Math.atan2(e,n),Math.abs(o)<=r.FORTPI?i.value=c.AREA_0:o>r.FORTPI&&o<=r.HALF_PI+r.FORTPI?(i.value=c.AREA_1,o-=r.HALF_PI):o>r.HALF_PI+r.FORTPI||o<=-(r.HALF_PI+r.FORTPI)?(i.value=c.AREA_2,o=o>=0?o-r.SPI:o+r.SPI):(i.value=c.AREA_3,o+=r.HALF_PI)),o}function p(t,e){var n=t+e;return n<-r.SPI?n+=r.TWO_PI:n>+r.SPI&&(n-=r.TWO_PI),n}var d={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r.HALF_PI-r.FORTPI/2?this.face=h:this.lat0<=-(r.HALF_PI-r.FORTPI/2)?this.face=l:Math.abs(this.long0)<=r.FORTPI?this.face=i:Math.abs(this.long0)<=r.HALF_PI+r.FORTPI?this.face=this.long0>0?s:u:this.face=a,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,o,d,g,y,m={x:0,y:0},_={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===h)d=r.HALF_PI-e,n>=r.FORTPI&&n<=r.HALF_PI+r.FORTPI?(_.value=c.AREA_0,o=n-r.HALF_PI):n>r.HALF_PI+r.FORTPI||n<=-(r.HALF_PI+r.FORTPI)?(_.value=c.AREA_1,o=n>0?n-r.SPI:n+r.SPI):n>-(r.HALF_PI+r.FORTPI)&&n<=-r.FORTPI?(_.value=c.AREA_2,o=n+r.HALF_PI):(_.value=c.AREA_3,o=n);else if(this.face===l)d=r.HALF_PI+e,n>=r.FORTPI&&n<=r.HALF_PI+r.FORTPI?(_.value=c.AREA_0,o=-n+r.HALF_PI):n<r.FORTPI&&n>=-r.FORTPI?(_.value=c.AREA_1,o=-n):n<-r.FORTPI&&n>=-(r.HALF_PI+r.FORTPI)?(_.value=c.AREA_2,o=-n-r.HALF_PI):(_.value=c.AREA_3,o=n>0?-n+r.SPI:-n-r.SPI);else{var v,b,x,w,E,M;this.face===s?n=p(n,+r.HALF_PI):this.face===a?n=p(n,+r.SPI):this.face===u&&(n=p(n,-r.HALF_PI)),w=Math.sin(e),E=Math.cos(e),M=Math.sin(n),v=E*Math.cos(n),b=E*M,x=w,this.face===i?o=f(d=Math.acos(v),x,b,_):this.face===s?o=f(d=Math.acos(b),x,-v,_):this.face===a?o=f(d=Math.acos(-v),x,-b,_):this.face===u?o=f(d=Math.acos(-b),x,v,_):(d=o=0,_.value=c.AREA_0)}return y=Math.atan(12/r.SPI*(o+Math.acos(Math.sin(o)*Math.cos(r.FORTPI))-r.HALF_PI)),g=Math.sqrt((1-Math.cos(d))/(Math.cos(y)*Math.cos(y))/(1-Math.cos(Math.atan(1/Math.cos(o))))),_.value===c.AREA_1?y+=r.HALF_PI:_.value===c.AREA_2?y+=r.SPI:_.value===c.AREA_3&&(y+=1.5*r.SPI),m.x=g*Math.cos(y),m.y=g*Math.sin(y),m.x=m.x*this.a+this.x0,m.y=m.y*this.a+this.y0,t.x=m.x,t.y=m.y,t},inverse:function(t){var e,n,i,o,f,d,g,y,m,_,v,b,x={lam:0,phi:0},w={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?w.value=c.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(w.value=c.AREA_1,e-=r.HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(w.value=c.AREA_2,e=e<0?e+r.SPI:e-r.SPI):(w.value=c.AREA_3,e+=r.HALF_PI),m=r.SPI/12*Math.tan(e),f=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),d=Math.atan(f),(g=1-(i=Math.cos(e))*i*(o=Math.tan(n))*o*(1-Math.cos(Math.atan(1/Math.cos(d)))))<-1?g=-1:g>1&&(g=1),this.face===h)y=Math.acos(g),x.phi=r.HALF_PI-y,w.value===c.AREA_0?x.lam=d+r.HALF_PI:w.value===c.AREA_1?x.lam=d<0?d+r.SPI:d-r.SPI:w.value===c.AREA_2?x.lam=d-r.HALF_PI:x.lam=d;else if(this.face===l)y=Math.acos(g),x.phi=y-r.HALF_PI,w.value===c.AREA_0?x.lam=-d+r.HALF_PI:w.value===c.AREA_1?x.lam=-d:w.value===c.AREA_2?x.lam=-d-r.HALF_PI:x.lam=d<0?-d-r.SPI:-d+r.SPI;else{var E,M,S;m=(E=g)*E,M=(m+=(S=m>=1?0:Math.sqrt(1-m)*Math.sin(d))*S)>=1?0:Math.sqrt(1-m),w.value===c.AREA_1?(m=M,M=-S,S=m):w.value===c.AREA_2?(M=-M,S=-S):w.value===c.AREA_3&&(m=M,M=S,S=-m),this.face===s?(m=E,E=-M,M=m):this.face===a?(E=-E,M=-M):this.face===u&&(m=E,E=M,M=-m),x.phi=Math.acos(-S)-r.HALF_PI,x.lam=Math.atan2(M,E),this.face===s?x.lam=p(x.lam,-r.HALF_PI):this.face===a?x.lam=p(x.lam,-r.SPI):this.face===u&&(x.lam=p(x.lam,+r.HALF_PI))}return 0!==this.es&&(_=x.phi<0?1:0,v=Math.tan(x.phi),b=this.b/Math.sqrt(v*v+this.one_minus_f_squared),x.phi=Math.atan(Math.sqrt(this.a*this.a-b*b)/(this.one_minus_f*b)),_&&(x.phi=-x.phi)),x.lam+=this.long0,t.x=x.lam,t.y=x.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}})),o.register("byZja",(function(t,e){n(t.exports,"default",(()=>d));var r=o("gyVUi"),i=o("a9oRf"),s=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],a=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],u=.8487,h=1.3523,l=r.R2D/5,c=1/l,f=18,p=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var d={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=(0,i.default)(t.x-this.long0),n=Math.abs(t.y),o=Math.floor(n*l);o<0?o=0:o>=f&&(o=17),n=r.R2D*(n-c*o);var d={x:p(s[o],n)*e,y:p(a[o],n)};return t.y<0&&(d.y=-d.y),d.x=d.x*this.a*u+this.x0,d.y=d.y*this.a*h+this.y0,d},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*u),y:Math.abs(t.y-this.y0)/(this.a*h)};if(e.y>=1)e.x/=s[18][0],e.y=t.y<0?-r.HALF_PI:r.HALF_PI;else{var n=Math.floor(e.y*f);for(n<0?n=0:n>=f&&(n=17);;)if(a[n][0]>e.y)--n;else{if(!(a[n+1][0]<=e.y))break;++n}var o=a[n],l=5*(e.y-o[0])/(a[n+1][0]-o[0]);l=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(p(o,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(o,t)}),l,r.EPSLN,100),e.x/=p(s[n],l),e.y=(5*n+l)*r.D2R,t.y<0&&(e.y=-e.y)}return e.x=(0,i.default)(e.x+this.long0),e},names:["Robinson","robin"]}})),o.register("Fj8jS",(function(t,e){n(t.exports,"default",(()=>i));var r=o("4YPx7");var i={init:function(){this.name="geocent"},forward:function(t){return(0,r.geodeticToGeocentric)(t,this.es,this.a)},inverse:function(t){return(0,r.geocentricToGeodetic)(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]}})),o.register("eJp9e",(function(t,e){n(t.exports,"default",(()=>c));var r=o("gyVUi"),i=o("jU5gu"),s=0,a=1,u=2,h=3,l={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var c={init:function(){if(Object.keys(l).forEach(function(t){if(void 0===this[t])this[t]=l[t].def;else{if(l[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);l[t].num&&(this[t]=parseFloat(this[t]))}l[t].degrees&&(this[t]=this[t]*r.D2R)}.bind(this)),Math.abs(Math.abs(this.lat0)-r.HALF_PI)<r.EPSLN?this.mode=this.lat0<0?a:s:Math.abs(this.lat0)<r.EPSLN?this.mode=u:(this.mode=h,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),l=Math.cos(t.y),c=Math.cos(t.x);switch(this.mode){case h:n=this.sinph0*o+this.cosph0*l*c;break;case u:n=l*c;break;case a:n=-o;break;case s:n=o}switch(e=(n=this.pn1/(this.p-n))*l*Math.sin(t.x),this.mode){case h:n*=this.cosph0*o-this.sinph0*l*c;break;case u:n*=o;break;case s:n*=-l*c;break;case a:n*=l*c}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,o,l={x:t.x,y:t.y};o=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*o,n=this.pn1*t.y*this.cw*o,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var c=(0,i.default)(t.x,t.y);if(Math.abs(c)<r.EPSLN)l.x=0,l.y=t.y;else{var f,p;switch(p=1-c*c*this.pfact,p=(this.p-Math.sqrt(p))/(this.pn1/c+c/this.pn1),f=Math.sqrt(1-p*p),this.mode){case h:l.y=Math.asin(f*this.sinph0+t.y*p*this.cosph0/c),t.y=(f-this.sinph0*Math.sin(l.y))*c,t.x*=p*this.cosph0;break;case u:l.y=Math.asin(t.y*p/c),t.y=f*c,t.x*=p;break;case s:l.y=Math.asin(f),t.y=-t.y;break;case a:l.y=-Math.asin(f)}l.x=Math.atan2(t.x,t.y)}return t.x=l.x+this.long0,t.y=l.y,t},names:["Tilted_Perspective","tpers"]}})),o.register("jJ6PL",(function(t,e){n(t.exports,"default",(()=>i));var r=o("jU5gu");var i={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,i,o,s=t.x,a=t.y;if(s-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var u=this.radius_p/(0,r.default)(this.radius_p*Math.cos(a),Math.sin(a));if(n=u*Math.cos(s)*Math.cos(a),i=u*Math.sin(s)*Math.cos(a),o=u*Math.sin(a),(this.radius_g-n)*n-i*i-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.default)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.default)(i,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(s)*e,i=Math.sin(s)*e,o=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.default)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.default)(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,o,s=-1,a=0,u=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*(0,r.default)(1,u)):(a=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*(0,r.default)(1,a));var h=u/this.radius_p;if(e=a*a+h*h+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+o*s,a*=o,u*=o,t.x=Math.atan2(a,s),t.y=Math.atan(u*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+u*u)):(a=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+u*u+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+o*s,a*=o,u*=o,t.x=Math.atan2(a,s),t.y=Math.atan(u*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]}})),o.register("3Y0Ao",(function(t,e){var n=o("lUp03");t.exports=async t=>{const e=new n;await e.loadAsync(t);const r=e.file(/.+/),i={};return await Promise.all(r.map((async t=>{let e;e="shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?await t.async("nodebuffer"):await t.async("text"),i[t.name]=e}))),i}})),o.register("lUp03",(function(e,n){
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
var r=o("6ZWSX").Buffer,i=o("hPtJY");e.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u=void 0;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return i(e[s][1][t]||t)}),l,l.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){var r=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,i,s,a,u,h,l=[],c=0,f=t.length,p=f,d="string"!==r.getTypeOf(t);c<t.length;)p=f-c,i=d?(e=t[c++],n=c<f?t[c++]:0,c<f?t[c++]:0):(e=t.charCodeAt(c++),n=c<f?t.charCodeAt(c++):0,c<f?t.charCodeAt(c++):0),s=e>>2,a=(3&e)<<4|n>>4,u=1<p?(15&n)<<2|i>>6:64,h=2<p?63&i:64,l.push(o.charAt(s)+o.charAt(a)+o.charAt(u)+o.charAt(h));return l.join("")},n.decode=function(t){var e,n,r,s,a,u,h=0,l=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&p--,t.charAt(t.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|p):new Array(0|p);h<t.length;)e=o.indexOf(t.charAt(h++))<<2|(s=o.indexOf(t.charAt(h++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(h++)))>>2,r=(3&a)<<6|(u=o.indexOf(t.charAt(h++))),f[l++]=e,64!==a&&(f[l++]=n),64!==u&&(f[l++]=r);return f}},{"./support":30,"./utils":32}],2:[function(t,e,n){var r=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){var r=t("./utils"),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){var r=null;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=r?"uint8array":"array";function u(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new u("Deflate",t)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){function r(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function i(t,e,n,i,s,l){var c,f,p=t.file,d=t.compression,g=l!==a.utf8encode,y=o.transformTo("string",l(p.name)),m=o.transformTo("string",a.utf8encode(p.name)),_=p.comment,v=o.transformTo("string",l(_)),b=o.transformTo("string",a.utf8encode(_)),x=m.length!==p.name.length,w=b.length!==_.length,E="",M="",S="",I=p.dir,C=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(P.crc32=t.crc32,P.compressedSize=t.compressedSize,P.uncompressedSize=t.uncompressedSize);var L=0;e&&(L|=8),g||!x&&!w||(L|=2048);var N=0,O=0;I&&(N|=16),"UNIX"===s?(O=798,N|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,I)):(O=20,N|=function(t){return 63&(t||0)}(p.dosPermissions)),c=C.getUTCHours(),c<<=6,c|=C.getUTCMinutes(),c<<=5,c|=C.getUTCSeconds()/2,f=C.getUTCFullYear()-1980,f<<=4,f|=C.getUTCMonth()+1,f<<=5,f|=C.getUTCDate(),x&&(M=r(1,1)+r(u(y),4)+m,E+="up"+r(M.length,2)+M),w&&(S=r(1,1)+r(u(v),4)+b,E+="uc"+r(S.length,2)+S);var A="";return A+="\n\0",A+=r(L,2),A+=d.magic,A+=r(c,2),A+=r(f,2),A+=r(P.crc32,4),A+=r(P.compressedSize,4),A+=r(P.uncompressedSize,4),A+=r(y.length,2),A+=r(E.length,2),{fileRecord:h.LOCAL_FILE_HEADER+A+y+E,dirRecord:h.CENTRAL_FILE_HEADER+r(O,2)+A+r(v.length,2)+"\0\0\0\0"+r(N,4)+r(i,4)+y+E+v}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),u=t("../crc32"),h=t("../signature");function l(t,e,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return h.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,i=function(t,e,n,i,s){var a=o.transformTo("string",s(i));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(t,2)+r(t,2)+r(e,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){var r=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new i(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},u=n.dir,h=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:t,dir:u,date:h,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){var r=t("./utils"),i=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function h(t){return new i.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new a);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[i.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var o=0;o<r.length;o++)n.push(h(r[o]));return i.Promise.all(n)})).then((function(t){for(var i=t.shift(),o=i.files,s=0;s<o.length;s++){var a=o[s],u=a.fileNameStr,h=r.resolve(a.fileNameStr);n.file(h,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(n.file(h).unsafeOriginalName=u)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){var r=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(o,i),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){var r=t("readable-stream").Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),n&&n(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){e.exports={isNode:void 0!==r,newBufferFrom:function(t,e){if(r.from&&r.from!==Uint8Array.from)return r.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new r(t,e)},allocBuffer:function(t){if(r.alloc)return r.alloc(t);var e=new r(t);return e.fill(0),e},isBuffer:function(t){return r.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){function r(t,e,n){var r,i=o.getTypeOf(e),a=o.extend(n||{},u);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=g(t)),a.createFolders&&(r=d(t))&&y.call(this,r,!0);var c="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!c),(e instanceof h&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",i="string");var m=null;m=e instanceof h||e instanceof s?e:f.isNode&&f.isStream(e)?new p(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var _=new l(t,m,a);this.files[t]=_}var i=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),u=t("./defaults"),h=t("./compressedObject"),l=t("./zipObject"),c=t("./generate"),f=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:u.createFolders,t=g(t),this.files[t]||r.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r)},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,r.call(this,t,e,n),this;if(m(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=y.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=c.generateWorker(this,n,r)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){var r=t("./DataReader");function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){var r=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,n){var r=t("./Uint8ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){var r=t("./DataReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){var r=t("./ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){var r=t("../utils"),i=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new a(t):i.uint8array?new u(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){var r=t("./GenericWorker"),i=t("../utils");function o(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,r),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){var r=t("./GenericWorker"),i=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,e,n){var i=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),a=t("../base64"),u=t("../support"),h=t("../external"),l=null;if(u.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e){return new h.Promise((function(n,o){var s=[],u=t._internalType,h=t._outputType,l=t._mimeType;t.on("data",(function(t,n){s.push(t),e&&e(n)})).on("error",(function(t){s=[],o(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return i.transformTo(t,e)}}(h,function(t,e){var n,i=0,o=null,s=0;for(n=0;n<e.length;n++)s+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(o=new Uint8Array(s),n=0;n<e.length;n++)o.set(e[n],i),i+=e[n].length;return o;case"nodebuffer":return r.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(u,s),l);n(t)}catch(t){o(t)}s=[]})).resume()}))}function f(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,i.checkSupport(r),this._worker=t.pipe(new o(r)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return c(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==r,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=0===o.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){for(var r=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,r,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),o=s=0;s<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return i.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,o,s=t.length,u=new Array(2*s);for(e=n=0;e<s;)if((i=t[e++])<128)u[n++]=i;else if(4<(o=a[i]))u[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&e<s;)i=i<<6|63&t[e++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(t=r.transformTo(i.uint8array?"uint8array":"array",t))},r.inherits(h,s),h.prototype.processChunk=function(t){var e=r.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),u=e;s!==e.length&&(i.uint8array?(u=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(u=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(u),meta:t.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,r.inherits(l,s),l.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){var r=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),s=t("./external");function a(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function l(t){var e=65536,r=n.getTypeOf(t),i=!0;if("uint8array"===r?i=h.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=h.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return h.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return h.stringifyByChar(t)}function c(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=l;var f={};f.string={string:a,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,o.allocBuffer(t.length))}},f.array={string:l,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:a},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var r=n.getTypeOf(e);return f[r][t](e)},n.resolve=function(t){for(var e=t.split("/"),n=[],r=0;r<e.length;r++){var i=e[r];"."===i||""===i&&0!==r&&r!==e.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&o.isBuffer(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},n.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,a,h){return s.Promise.resolve(e).then((function(t){return r.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(e){var l=n.getTypeOf(e);return l?("arraybuffer"===l?e=n.transformTo("uint8array",e):"string"===l&&(h?e=i.decode(e):o&&!0!==a&&(e=function(t){return u(t,r.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){var r=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=t("./support");function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){var r=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),u=t("./compressions"),h=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(Object.prototype.hasOwnProperty.call(u,e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(i)},handleUTF8:function(){var t=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){function r(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),u=t("./stream/GenericWorker");r.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&r&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new u("error")).error(t)}return new i(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<h.length;c++)r.prototype[h[c]]=l;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(t){var e,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),e=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,e=function(){u.port2.postMessage(0)}}var h=[];function l(){var t,e;r=!0;for(var n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}r=!1}n.exports=function(t){1!==h.push(t)||r||e()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){var r=t("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(t,e,n){r((function(){var r;try{r=e(n)}catch(r){return o.reject(t,r)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var s=d((function(){e(i,r)}));"error"===s.status&&r(s.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=h).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(i);return this.state!==u?c(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){o.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},h.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},h.reject=function(t){var e=new this(i);return o.reject(e,t)},h.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,h=new this(i);++u<n;)l(t[u],u);return h;function l(t,i){e.resolve(t).then((function(t){s[i]=t,++a!==n||r||(r=!0,o.resolve(h,s))}),(function(t){r||(r=!0,o.reject(h,t))}))}},h.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s,a=-1,u=new this(i);++a<n;)s=t[a],e.resolve(s).then((function(t){r||(r=!0,o.resolve(u,t))}),(function(t){r||(r=!0,o.reject(u,t))}));return u}},{immediate:36}],38:[function(t,e,n){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){var r=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),u=Object.prototype.toString,h=0,l=-1,c=0,f=8;function p(t){if(!(this instanceof p))return new p(t);this.options=i.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(s[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,d))!==h)throw new Error(s[n]);this._dict_set=!0}}function d(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}p.prototype.push=function(t,e){var n,s,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(l),a.next_out=0,a.avail_out=l),1!==(n=r.deflate(a,s))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==s||(this.onEnd(h),a.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=d,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){var r=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new h,r.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(t,e){var n,a,u,h,c,f,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,y=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(d),p.next_out=0,p.avail_out=d),(n=r.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(f="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,f)),n===s.Z_BUF_ERROR&&!0===y&&(n=s.Z_OK,y=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==s.Z_STREAM_END&&(0!==p.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(p.output,p.next_out),h=p.next_out-u,c=o.buf2string(p.output,u),p.next_out=h,p.avail_out=d-h,h&&i.arraySet(p.output,p.output,u,h,0),this.onData(c)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(y=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),p.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=f,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,s;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(s=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(t,e,n){var r=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(u),o=s=0;s<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return u(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,o,a=e||t.length,h=new Array(2*a);for(n=r=0;n<a;)if((i=t[n++])<128)h[r++]=i;else if(4<(o=s[i]))h[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&t[n++],o--;1<o?h[r++]=65533:i<65536?h[r++]=i:(i-=65536,h[r++]=55296|i>>10&1023,h[r++]=56320|1023&i)}return u(h,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){var r,i=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),u=t("./messages"),h=0,l=4,c=0,f=-2,p=-1,d=4,g=2,y=8,m=9,_=286,v=30,b=19,x=2*_+1,w=15,E=3,M=258,S=M+E+1,I=42,C=113,P=1,L=2,N=3,O=4;function A(t,e){return t.msg=u[e],e}function k(t){return(t<<1)-(4<t?9:0)}function R(t){for(var e=t.length;0<=--e;)t[e]=0}function T(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function D(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,T(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function B(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function j(t,e){var n,r,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-S?t.strstart-(t.w_size-S):0,h=t.window,l=t.w_mask,c=t.prev,f=t.strstart+M,p=h[o+s-1],d=h[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(h[(n=e)+s]===d&&h[n+s-1]===p&&h[n]===h[o]&&h[++n]===h[o+1]){o+=2,n++;do{}while(h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&o<f);if(r=M-(f-o),o=f-M,s<r){if(t.match_start=e,a<=(s=r))break;p=h[o+s-1],d=h[o+s]}}}while((e=c[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function z(t){var e,n,r,o,u,h,l,c,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-S)){for(i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;r=t.head[--e],t.head[e]=d<=r?r-d:0,--n;);for(e=n=d;r=t.prev[--e],t.prev[e]=d<=r?r-d:0,--n;);o+=d}if(0===t.strm.avail_in)break;if(h=t.strm,l=t.window,c=t.strstart+t.lookahead,p=void 0,(f=o)<(p=h.avail_in)&&(p=f),n=0===p?0:(h.avail_in-=p,i.arraySet(l,h.input,h.next_in,p,c),1===h.state.wrap?h.adler=s(h.adler,l,p,c):2===h.state.wrap&&(h.adler=a(h.adler,l,p,c)),h.next_in+=p,h.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=E)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+E-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<S&&0!==t.strm.avail_in)}function G(t,e){for(var n,r;;){if(t.lookahead<S){if(z(t),t.lookahead<S&&e===h)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-S&&(t.match_length=j(t,n)),t.match_length>=E)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(D(t,!0),0===t.strm.avail_out?N:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:L}function U(t,e){for(var n,r,i;;){if(t.lookahead<S){if(z(t),t.lookahead<S&&e===h)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-S&&(t.match_length=j(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===E&&4096<t.strstart-t.match_start)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-E,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=E-1,t.strstart++,r&&(D(t,!1),0===t.strm.avail_out))return P}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&D(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return P}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(D(t,!0),0===t.strm.avail_out?N:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:L}function q(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*x),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*b+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(w+1),this.heap=new i.Buf16(2*_+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?I:C,t.adler=2===e.wrap?0:1,e.last_flush=h,o._tr_init(e),c):A(t,f)}function W(t){var e=H(t);return e===c&&function(t){t.window_size=2*t.w_size,R(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=E-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,n,r,o,s){if(!t)return f;var a=1;if(e===p&&(e=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),o<1||m<o||n!==y||r<8||15<r||e<0||9<e||s<0||d<s)return A(t,f);8===r&&(r=9);var u=new V;return(t.state=u).strm=t,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+E-1)/E),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=n,W(t)}r=[new q(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(z(t),0===t.lookahead&&e===h)return P;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,D(t,!1),0===t.strm.avail_out))return P;if(t.strstart-t.block_start>=t.w_size-S&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?N:O):(t.strstart>t.block_start&&(D(t,!1),t.strm.avail_out),P)})),new q(4,4,8,4,G),new q(4,5,16,8,G),new q(4,6,32,32,G),new q(4,4,16,16,U),new q(8,16,32,32,U),new q(8,16,128,128,U),new q(8,32,128,256,U),new q(32,128,258,1024,U),new q(32,258,258,4096,U)],n.deflateInit=function(t,e){return Y(t,e,y,15,8,0)},n.deflateInit2=Y,n.deflateReset=W,n.deflateResetKeep=H,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,c):f},n.deflate=function(t,e){var n,i,s,u;if(!t||!t.state||5<e||e<0)return t?A(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==l)return A(t,0===t.avail_out?-5:f);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===I)if(2===i.wrap)t.adler=0,F(i,31),F(i,139),F(i,8),i.gzhead?(F(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),F(i,255&i.gzhead.time),F(i,i.gzhead.time>>8&255),F(i,i.gzhead.time>>16&255),F(i,i.gzhead.time>>24&255),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(F(i,255&i.gzhead.extra.length),F(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(F(i,0),F(i,0),F(i,0),F(i,0),F(i,0),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,3),i.status=C);else{var p=y+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=C,B(i,p),0!==i.strstart&&(B(i,t.adler>>>16),B(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),T(t),s=i.pending,i.pending!==i.pending_buf_size));)F(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),T(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,F(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),T(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,F(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&T(t),i.pending+2<=i.pending_buf_size&&(F(i,255&t.adler),F(i,t.adler>>8&255),t.adler=0,i.status=C)):i.status=C),0!==i.pending){if(T(t),0===t.avail_out)return i.last_flush=-1,c}else if(0===t.avail_in&&k(e)<=k(n)&&e!==l)return A(t,-5);if(666===i.status&&0!==t.avail_in)return A(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==h&&666!==i.status){var d=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(z(t),0===t.lookahead)){if(e===h)return P;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?N:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:L}(i,e):3===i.strategy?function(t,e){for(var n,r,i,s,a=t.window;;){if(t.lookahead<=M){if(z(t),t.lookahead<=M&&e===h)return P;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&0<t.strstart&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=t.strstart+M;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=M-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=E?(n=o._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(D(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===l?(D(t,!0),0===t.strm.avail_out?N:O):t.last_lit&&(D(t,!1),0===t.strm.avail_out)?P:L}(i,e):r[i.level].func(i,e);if(d!==N&&d!==O||(i.status=666),d===P||d===N)return 0===t.avail_out&&(i.last_flush=-1),c;if(d===L&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(R(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),T(t),0===t.avail_out))return i.last_flush=-1,c}return e!==l?c:i.wrap<=0?1:(2===i.wrap?(F(i,255&t.adler),F(i,t.adler>>8&255),F(i,t.adler>>16&255),F(i,t.adler>>24&255),F(i,255&t.total_in),F(i,t.total_in>>8&255),F(i,t.total_in>>16&255),F(i,t.total_in>>24&255)):(B(i,t.adler>>>16),B(i,65535&t.adler)),T(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?c:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==I&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?A(t,f):(t.state=null,e===C?A(t,-3):c):f},n.deflateSetDictionary=function(t,e){var n,r,o,a,u,h,l,p,d=e.length;if(!t||!t.state)return f;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==I||n.lookahead)return f;for(1===a&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,e,d-n.w_size,n.w_size,0),e=p,d=n.w_size),u=t.avail_in,h=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,z(n);n.lookahead>=E;){for(r=n.strstart,o=n.lookahead-(E-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+E-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=E-1,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=u,n.wrap=a,c},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){e.exports=function(t,e){var n,r,i,o,s,a,u,h,l,c,f,p,d,g,y,m,_,v,b,x,w,E,M,S,I;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),o=t.next_out,I=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=n.dmax,h=n.wsize,l=n.whave,c=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{d<15&&(p+=S[r++]<<d,d+=8,p+=S[r++]<<d,d+=8),v=g[p&m];e:for(;;){if(p>>>=b=v>>>24,d-=b,0==(b=v>>>16&255))I[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=g[(65535&v)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&v,(b&=15)&&(d<b&&(p+=S[r++]<<d,d+=8),x+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=S[r++]<<d,d+=8,p+=S[r++]<<d,d+=8),v=y[p&_];n:for(;;){if(p>>>=b=v>>>24,d-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=y[(65535&v)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&v,d<(b&=15)&&(p+=S[r++]<<d,(d+=8)<b&&(p+=S[r++]<<d,d+=8)),u<(w+=p&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,(b=o-s)<w){if(l<(b=w-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(M=f,(E=0)===c){if(E+=h-b,b<x){for(x-=b;I[o++]=f[E++],--b;);E=o-w,M=I}}else if(c<b){if(E+=h+c-b,(b-=c)<x){for(x-=b;I[o++]=f[E++],--b;);if(E=0,c<x){for(x-=b=c;I[o++]=f[E++],--b;);E=o-w,M=I}}}else if(E+=c-b,b<x){for(x-=b;I[o++]=f[E++],--b;);E=o-w,M=I}for(;2<x;)I[o++]=M[E++],I[o++]=M[E++],I[o++]=M[E++],x-=3;x&&(I[o++]=M[E++],1<x&&(I[o++]=M[E++]))}else{for(E=o-w;I[o++]=I[E++],I[o++]=I[E++],I[o++]=I[E++],2<(x-=3););x&&(I[o++]=I[E++],1<x&&(I[o++]=I[E++]))}break}}break}}while(r<i&&o<a);r-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=d}},{}],49:[function(t,e,n){var r=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=1,h=2,l=0,c=-2,f=1,p=852,d=592;function g(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=f,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(p),e.distcode=e.distdyn=new r.Buf32(d),e.sane=1,e.back=-1,l):c}function _(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,m(t)):c}function v(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,_(t))):c}function b(t,e){var n,r;return t?(r=new y,(t.state=r).window=null,(n=v(t,e))!==l&&(t.state=null),n):c}var x,w,E=!0;function M(t){if(E){var e;for(x=new r.Buf32(512),w=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(u,t.lens,0,288,x,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(h,t.lens,0,32,w,0,t.work,{bits:5}),E=!1}t.lencode=x,t.lenbits=9,t.distcode=w,t.distbits=5}function S(t,e,n,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),r.arraySet(s.window,e,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=_,n.inflateReset2=v,n.inflateResetKeep=m,n.inflateInit=function(t){return b(t,15)},n.inflateInit2=b,n.inflate=function(t,e){var n,p,d,y,m,_,v,b,x,w,E,I,C,P,L,N,O,A,k,R,T,D,F,B,j=0,z=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(n=t.state).mode&&(n.mode=13),m=t.next_out,d=t.output,v=t.avail_out,y=t.next_in,p=t.input,_=t.avail_in,b=n.hold,x=n.bits,w=_,E=v,D=l;t:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(2&n.wrap&&35615===b){z[n.check=0]=255&b,z[1]=b>>>8&255,n.check=o(n.check,z,2,0),x=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){t.msg="unknown compression method",n.mode=30;break}if(x-=4,T=8+(15&(b>>>=4)),0===n.wbits)n.wbits=T;else if(T>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<T,t.adler=n.check=1,n.mode=512&b?10:12,x=b=0;break;case 2:for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(n.flags=b,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=o(n.check,z,2,0)),x=b=0,n.mode=3;case 3:for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.head&&(n.head.time=b),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,z[2]=b>>>16&255,z[3]=b>>>24&255,n.check=o(n.check,z,4,0)),x=b=0,n.mode=4;case 4:for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=o(n.check,z,2,0)),x=b=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=o(n.check,z,2,0)),x=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(_<(I=n.length)&&(I=_),I&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,y,I,T)),512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,n.length-=I),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break t;for(I=0;T=p[y+I++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T)),T&&I<_;);if(512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,T)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break t;for(I=0;T=p[y+I++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T)),T&&I<_;);if(512&n.flags&&(n.check=o(n.check,p,I,y)),_-=I,y+=I,T)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}x=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}t.adler=n.check=g(b),x=b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){b>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}switch(n.last=1&b,x-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(M(n),n.mode=20,6!==e)break;b>>>=2,x-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}b>>>=2,x-=2;break;case 14:for(b>>>=7&x,x-=7&x;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,x=b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(I=n.length){if(_<I&&(I=_),v<I&&(I=v),0===I)break t;r.arraySet(d,p,y,I,m),_-=I,y+=I,v-=I,m+=I,n.length-=I;break}n.mode=12;break;case 17:for(;x<14;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(n.nlen=257+(31&b),b>>>=5,x-=5,n.ndist=1+(31&b),b>>>=5,x-=5,n.ncode=4+(15&b),b>>>=4,x-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.lens[G[n.have++]]=7&b,b>>>=3,x-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},D=a(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,D){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=(j=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,O=65535&j,!((L=j>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(O<16)b>>>=L,x-=L,n.lens[n.have++]=O;else{if(16===O){for(B=L+2;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b>>>=L,x-=L,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}T=n.lens[n.have-1],I=3+(3&b),b>>>=2,x-=2}else if(17===O){for(B=L+3;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}x-=L,T=0,I=3+(7&(b>>>=L)),b>>>=3,x-=3}else{for(B=L+7;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}x-=L,T=0,I=11+(127&(b>>>=L)),b>>>=7,x-=7}if(n.have+I>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;I--;)n.lens[n.have++]=T}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},D=a(u,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,D){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},D=a(h,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,D){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=_&&258<=v){t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,s(t,E),m=t.next_out,d=t.output,v=t.avail_out,y=t.next_in,p=t.input,_=t.avail_in,b=n.hold,x=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;N=(j=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,O=65535&j,!((L=j>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(N&&0==(240&N)){for(A=L,k=N,R=O;N=(j=n.lencode[R+((b&(1<<A+k)-1)>>A)])>>>16&255,O=65535&j,!(A+(L=j>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}b>>>=A,x-=A,n.back+=A}if(b>>>=L,x-=L,n.back+=L,n.length=O,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=12;break}if(64&N){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for(B=n.extra;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=(j=n.distcode[b&(1<<n.distbits)-1])>>>16&255,O=65535&j,!((L=j>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(0==(240&N)){for(A=L,k=N,R=O;N=(j=n.distcode[R+((b&(1<<A+k)-1)>>A)])>>>16&255,O=65535&j,!(A+(L=j>>>24)<=x);){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}b>>>=A,x-=A,n.back+=A}if(b>>>=L,x-=L,n.back+=L,64&N){t.msg="invalid distance code",n.mode=30;break}n.offset=O,n.extra=15&N,n.mode=24;case 24:if(n.extra){for(B=n.extra;x<B;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break t;if(I=E-v,n.offset>I){if((I=n.offset-I)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}C=I>n.wnext?(I-=n.wnext,n.wsize-I):n.wnext-I,I>n.length&&(I=n.length),P=n.window}else P=d,C=m-n.offset,I=n.length;for(v<I&&(I=v),v-=I,n.length-=I;d[m++]=P[C++],--I;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break t;d[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===_)break t;_--,b|=p[y++]<<x,x+=8}if(E-=v,t.total_out+=E,n.total+=E,E&&(t.adler=n.check=n.flags?o(n.check,d,E,m-E):i(n.check,d,E,m-E)),E=v,(n.flags?b:g(b))!==n.check){t.msg="incorrect data check",n.mode=30;break}x=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===_)break t;_--,b+=p[y++]<<x,x+=8}if(b!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}x=b=0}n.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;default:return c}return t.next_out=m,t.avail_out=v,t.next_in=y,t.avail_in=_,n.hold=b,n.bits=x,(n.wsize||E!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&S(t,t.output,t.next_out,E-t.avail_out)?(n.mode=31,-4):(w-=t.avail_in,E-=t.avail_out,t.total_in+=w,t.total_out+=E,n.total+=E,n.wrap&&E&&(t.adler=n.check=n.flags?o(n.check,d,E,t.next_out-E):i(n.check,d,E,t.next_out-E)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===E||4===e)&&D===l&&(D=-5),D)},n.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,l},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:((n.head=e).done=!1,l):c},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,e,r,0)!==n.check?-3:S(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,l):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,u,h,l,c,f){var p,d,g,y,m,_,v,b,x,w=f.bits,E=0,M=0,S=0,I=0,C=0,P=0,L=0,N=0,O=0,A=0,k=null,R=0,T=new r.Buf16(16),D=new r.Buf16(16),F=null,B=0;for(E=0;E<=15;E++)T[E]=0;for(M=0;M<u;M++)T[e[n+M]]++;for(C=w,I=15;1<=I&&0===T[I];I--);if(I<C&&(C=I),0===I)return h[l++]=20971520,h[l++]=20971520,f.bits=1,0;for(S=1;S<I&&0===T[S];S++);for(C<S&&(C=S),E=N=1;E<=15;E++)if(N<<=1,(N-=T[E])<0)return-1;if(0<N&&(0===t||1!==I))return-1;for(D[1]=0,E=1;E<15;E++)D[E+1]=D[E]+T[E];for(M=0;M<u;M++)0!==e[n+M]&&(c[D[e[n+M]]++]=M);if(_=0===t?(k=F=c,19):1===t?(k=i,R-=257,F=o,B-=257,256):(k=s,F=a,-1),E=S,m=l,L=M=A=0,g=-1,y=(O=1<<(P=C))-1,1===t&&852<O||2===t&&592<O)return 1;for(;;){for(v=E-L,x=c[M]<_?(b=0,c[M]):c[M]>_?(b=F[B+c[M]],k[R+c[M]]):(b=96,0),p=1<<E-L,S=d=1<<P;h[m+(A>>L)+(d-=p)]=v<<24|b<<16|x|0,0!==d;);for(p=1<<E-1;A&p;)p>>=1;if(0!==p?(A&=p-1,A+=p):A=0,M++,0==--T[E]){if(E===I)break;E=e[n+c[M]]}if(C<E&&(A&y)!==g){for(0===L&&(L=C),m+=S,N=1<<(P=E-L);P+L<I&&!((N-=T[P+L])<=0);)P++,N<<=1;if(O+=1<<P,1===t&&852<O||2===t&&592<O)return 1;h[g=A&y]=C<<24|P<<16|m-l|0}}return 0!==A&&(h[m+A]=E-L<<24|4194304),f.bits=C,0}},{"../utils/common":41}],51:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){var r=t("../utils/common"),i=0,o=1;function s(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,u=29,h=256,l=h+1+u,c=30,f=19,p=2*l+1,d=15,g=16,y=7,m=256,_=16,v=17,b=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(l+2));s(S);var I=new Array(2*c);s(I);var C=new Array(512);s(C);var P=new Array(256);s(P);var L=new Array(u);s(L);var N,O,A,k=new Array(c);function R(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function T(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function D(t){return t<256?C[t]:C[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,n){t.bi_valid>g-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>g-t.bi_valid,t.bi_valid+=n-g):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function j(t,e,n){B(t,n[2*e],n[2*e+1])}function z(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function G(t,e,n){var r,i,o=new Array(d+1),s=0;for(r=1;r<=d;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=z(o[a]++,a))}}function U(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<c;e++)t.dyn_dtree[2*e]=0;for(e=0;e<f;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function q(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function V(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function H(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&V(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!V(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function W(t,e,n){var r,i,o,s,a=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===r?j(t,i,e):(j(t,(o=P[i])+h+1,e),0!==(s=x[o])&&B(t,i-=L[o],s),j(t,o=D(--r),n),0!==(s=w[o])&&B(t,r-=k[o],s)),a<t.last_lit;);j(t,m,e)}function Y(t,e){var n,r,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=p,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=h=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=h,n=t.heap_len>>1;1<=n;n--)H(t,o,n);for(i=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,s,a,u=e.dyn_tree,h=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,y=e.stat_desc.max_length,m=0;for(o=0;o<=d;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<p;n++)y<(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)&&(o=y,m++),u[2*r+1]=o,h<r||(t.bl_count[o]++,s=0,g<=r&&(s=f[r-g]),a=u[2*r],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(l[2*r+1]+s)));if(0!==m){do{for(o=y-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[y]--,m-=2}while(0<m);for(o=y;0!==o;o--)for(r=t.bl_count[o];0!==r;)h<(i=t.heap[--n])||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),G(o,h,t.bl_count)}function X(t,e,n){var r,i,o=-1,s=e[1],a=0,u=7,h=4;for(0===s&&(u=138,h=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=e[2*(r+1)+1],++a<u&&i===s||(a<h?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*_]++):a<=10?t.bl_tree[2*v]++:t.bl_tree[2*b]++,o=i,h=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function Z(t,e,n){var r,i,o=-1,s=e[1],a=0,u=7,h=4;for(0===s&&(u=138,h=3),r=0;r<=n;r++)if(i=s,s=e[2*(r+1)+1],!(++a<u&&i===s)){if(a<h)for(;j(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==o&&(j(t,i,t.bl_tree),a--),j(t,_,t.bl_tree),B(t,a-3,2)):a<=10?(j(t,v,t.bl_tree),B(t,a-3,3)):(j(t,b,t.bl_tree),B(t,a-11,7));o=i,h=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}s(k);var J=!1;function K(t,e,n,i){B(t,(a<<1)+(i?1:0),3),function(t,e,n,i){q(t),i&&(F(t,n),F(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){J||(function(){var t,e,n,r,i,o=new Array(d+1);for(r=n=0;r<u-1;r++)for(L[r]=n,t=0;t<1<<x[r];t++)P[n++]=r;for(P[n-1]=r,r=i=0;r<16;r++)for(k[r]=i,t=0;t<1<<w[r];t++)C[i++]=r;for(i>>=7;r<c;r++)for(k[r]=i<<7,t=0;t<1<<w[r]-7;t++)C[256+i++]=r;for(e=0;e<=d;e++)o[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,o[8]++;for(;t<=255;)S[2*t+1]=9,t++,o[9]++;for(;t<=279;)S[2*t+1]=7,t++,o[7]++;for(;t<=287;)S[2*t+1]=8,t++,o[8]++;for(G(S,l+1,o),t=0;t<c;t++)I[2*t+1]=5,I[2*t]=z(t,5);N=new R(S,x,h+1,l,d),O=new R(I,w,0,c,d),A=new R(new Array(0),E,0,f,y)}(),J=!0),t.l_desc=new T(t.dyn_ltree,N),t.d_desc=new T(t.dyn_dtree,O),t.bl_desc=new T(t.bl_tree,A),t.bi_buf=0,t.bi_valid=0,U(t)},n._tr_stored_block=K,n._tr_flush_block=function(t,e,n,r){var s,a,u=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<h;e++)if(0!==t.dyn_ltree[2*e])return o;return i}(t)),Y(t,t.l_desc),Y(t,t.d_desc),u=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=f-1;3<=e&&0===t.bl_tree[2*M[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),s=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==e?K(t,e,n,r):4===t.strategy||a===s?(B(t,2+(r?1:0),3),W(t,S,I)):(B(t,4+(r?1:0),3),function(t,e,n,r){var i;for(B(t,e-257,5),B(t,n-1,5),B(t,r-4,4),i=0;i<r;i++)B(t,t.bl_tree[2*M[i]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),W(t,t.dyn_ltree,t.dyn_dtree)),U(t),r&&q(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+h+1)]++,t.dyn_dtree[2*D(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){B(t,2,3),j(t,m,S),function(t){16===t.bi_valid?(F(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(t){!function(t,e){if(!t.setImmediate){var n,r,o,s,a=1,u={},h=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,n="[object process]"==={}.toString.call(t.process)?function(t){i.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(s="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",d,!1):t.attachEvent("onmessage",d),function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):function(t){setTimeout(p,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return u[a]=i,n(a),a++},c.clearImmediate=f}function f(t){delete u[t]}function p(t){if(h)setTimeout(p,0,t);else{var n=u[t];if(n){h=!0;try{!function(t){var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(e,r)}}(n)}finally{f(t),h=!1}}}}function d(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})),o.register("6ZWSX",(function(t,e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r,i,s,a;n(t.exports,"Buffer",(()=>r),(t=>r=t)),n(t.exports,"SlowBuffer",(()=>i),(t=>i=t)),n(t.exports,"INSPECT_MAX_BYTES",(()=>s),(t=>s=t)),n(t.exports,"kMaxLength",(()=>a),(t=>a=t));var u=o("kuxul"),h=o("9NvM5"),l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r=p,i=function(t){+t!=t&&(t=0);return p.alloc(+t)},s=50;var c=2147483647;function f(t){if(t>c)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(t)}return d(t,e,n)}function d(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|b(t,e),r=f(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){var e=new Uint8Array(t);return _(e.buffer,e.byteOffset,e.byteLength)}return m(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return _(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return _(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return p.from(r,e,n);var i=function(t){if(p.isBuffer(t)){var e=0|v(t.length),n=f(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?f(0):m(t);if("Buffer"===t.type&&Array.isArray(t.data))return m(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function g(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function y(t){return g(t),f(t<0?0:0|v(t))}function m(t){for(var e=t.length<0?0:0|v(t.length),n=f(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function _(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,p.prototype),r}function v(t){if(t>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|t}function b(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(i)return r?-1:q(t).length;e=(""+e).toLowerCase(),i=!0}}function x(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return N(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function E(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:M(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):M(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function M(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function S(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(Y(a))return s;t[n+s]=a}return s}function I(t,e,n,r){return H(q(e,t.length-n),t,n,r)}function C(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function P(t,e,n,r){return H(V(e),t,n,r)}function L(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function N(t,e,n){return 0===e&&n===t.length?u.fromByteArray(t):u.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}a=c,p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,n){return d(t,e,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,n){return function(t,e,n){return g(t),t<=0?f(t):void 0!==e?"string"==typeof n?f(t).fill(e,n):f(t).fill(e):f(t)}(t,e,n)},p.allocUnsafe=function(t){return y(t)},p.allocUnsafeSlow=function(t){return y(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(W(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=p.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(W(o,Uint8Array))i+o.length>r.length?p.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):x.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=s;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l&&(p.prototype[l]=p.prototype.inspect),p.prototype.compare=function(t,e,n,r,i){if(W(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),h=t.slice(e,n),l=0;l<a;++l)if(u[l]!==h[l]){o=u[l],s=h[l];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,t,e,n);case"utf8":case"utf-8":return I(this,t,e,n);case"ascii":case"latin1":case"binary":return C(this,t,e,n);case"base64":return P(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=X[t[o]];return i}function D(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,4),h.write(t,e,n,r,23,4),n+4}function G(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,8),h.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},p.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),h.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),h.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),h.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),h.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return G(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return G(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=p.isBuffer(t)?t:p.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+/0-9A-Za-z-_]/g;function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return u.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}var X=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()})),o.register("kuxul",(function(t,e){var r,i;n(t.exports,"toByteArray",(()=>r),(t=>r=t)),n(t.exports,"fromByteArray",(()=>i),(t=>i=t)),r=function(t){var e,n,r=l(t),i=r[0],o=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,i,o)),h=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)e=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===o&&(e=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,u[h++]=255&e);1===o&&(e=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},i=function(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,u=n-r;a<u;a+=s)i.push(c(t,a,a+s>u?u:a+s));1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"="));return i.join("")};for(var o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0;h<64;++h)o[h]=u[h],s[u.charCodeAt(h)]=h;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,i,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63})),o.register("9NvM5",(function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var r,i;n(t.exports,"read",(()=>r),(t=>r=t)),n(t.exports,"write",(()=>i),(t=>i=t)),r=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},i=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*g}})),o.register("lJlIM",(function(e,n){var r=o("ekChr"),i=o("4pU9y"),s=o("6ZWSX").Buffer;e.exports=async function(e,n){if(!t.fetch)return r(e,n);const o=i(e,n),a="prj"===n||"cpg"===n;try{const t=await fetch(o);if(t.status>399)throw new Error(t.statusText);if(a)return t.text();const e=await t.arrayBuffer();return s.from(e)}catch(t){if(console.log("ERROR",t,n),a||"dbf"===n)return!1;throw t}}})),o.register("ekChr",(function(t,e){var n=o("bCGV3"),r=o("4pU9y"),i=o("6ZWSX").Buffer;t.exports=function(t,e){return new n((function(n,o){const s=r(t,e),a=new XMLHttpRequest;a.open("GET",s,!0),"prj"!==e&&"cpg"!==e&&(a.responseType="arraybuffer"),a.addEventListener("load",(function(){return a.status>399?"prj"===e||"cpg"===e?n(!1):o(new Error(a.status)):n("prj"!==e&&"cpg"!==e?i.from(a.response):a.response)}),!1),a.send()}))}})),o.register("bCGV3",(function(t,e){var n=o("dxxqI");function r(){}var i={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return i.reject(t,e)}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}var s=d((function(){e(o,r)}));"error"===s.status&&r(s.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=h,h.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);this.state!==u?c(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e));return n},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},h.resolve=function(t){return t instanceof this?t:i.resolve(new this(r),t)},h.reject=function(t){var e=new this(r);return i.reject(e,t)},h.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,u=-1,h=new this(r);for(;++u<n;)l(t[u],u);return h;function l(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||o||(o=!0,i.resolve(h,s))}),(function(t){o||(o=!0,i.reject(h,t))}))}},h.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);var s=-1,a=new this(r);for(;++s<n;)u=t[s],e.resolve(u).then((function(t){o||(o=!0,i.resolve(a,t))}),(function(t){o||(o=!0,i.reject(a,t))}));var u;return a}})),o.register("dxxqI",(function(e,n){var r,i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(c),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),r=function(){u.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var h=new t.MessageChannel;h.port1.onmessage=c,r=function(){h.port2.postMessage(0)}}var l=[];function c(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}e.exports=function(t){1!==l.push(t)||i||r()}})),o.register("4pU9y",(function(e,n){const r=t.URL;e.exports=(t,e)=>{if(!e)return t;const n=new r(t);return n.pathname=`${n.pathname}.${e}`,n.href}})),o.register("3xryQ",(function(t,e){function n(t,e){return!function(t){let e=0,n=1;const r=t.length;let i,o;for(;n<r;)i=o||t[0],o=t[n],e+=(o[0]-i[0])*(o[1]+i[1]),n++;return e>0}(e)&&t.length?t[t.length-1].push(e):t.push([e]),t}i.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},i.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.readDoubleLE(16)),e},i.prototype.parsePointArray=function(t,e,n){const r=[];let i=0;for(;i<n;)r.push(this.parseCoord(t,e)),e+=16,i++;return r},i.prototype.parseZPointArray=function(t,e,n,r){let i=0;for(;i<n;)r[i].push(t.readDoubleLE(e)),i++,e+=8;return r},i.prototype.parseArrayGroup=function(t,e,n,r,i){const o=[];let s,a,u=0,h=0;for(;u<r;)u++,n+=4,s=h,h=u===r?i:t.readInt32LE(n),a=h-s,a&&(o.push(this.parsePointArray(t,e,a)),e+=a<<4);return o},i.prototype.parseZArrayGroup=function(t,e,n,r){let i=0;for(;i<n;)r[i]=this.parseZPointArray(t,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r},i.prototype.parseMultiPoint=function(t){const e={},n=t.readInt32LE(32,!0);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];return 1===n?(e.type="Point",e.coordinates=this.parseCoord(t,36)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,36,n)),e},i.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let n;if("Point"===e.type)return e.coordinates.push(t.readDoubleLE(72)),e;n=e.coordinates.length;const r=52+(n<<4);return e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e},i.prototype.parsePolyline=function(t){const e={},n=t.readInt32LE(32);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];const o=t.readInt32LE(36);let s,a;return 1===n?(e.type="LineString",s=44,e.coordinates=this.parsePointArray(t,s,o)):(e.type="MultiLineString",s=40+(n<<2),a=40,e.coordinates=this.parseArrayGroup(t,s,40,n,o)),e},i.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const n=e.coordinates.length;let r;if("LineString"===e.type)return r=60+(n<<4),e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e;return r=56+(e.coordinates.reduce((function(t,e){return t+e.length}),0)<<4)+(n<<2),e.coordinates=this.parseZArrayGroup(t,r,n,e.coordinates),e},i.prototype.polyFuncs=function(t){return t?"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(n,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)):t},i.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},i.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const r={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function i(t,e){if(!(this instanceof i))return new i(t,e);this.buffer=t,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(e),this.rows=this.getRows()}i.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in r))throw new Error("I don't know that shp type");var n;this.parseFunc=this[r[e]],this.parseCoord=(n=t)?function(t,e){const r=[t.readDoubleLE(e),t.readDoubleLE(e+8)];return n.inverse(r)}:function(t,e){return[t.readDoubleLE(e),t.readDoubleLE(e+8)]}},i.prototype.getShpCode=function(){return this.parseHeader().shpCode},i.prototype.parseHeader=function(){const t=this.buffer.slice(0,100);return{length:t.readInt32BE(24)<<1,version:t.readInt32LE(28),shpCode:t.readInt32LE(32),bbox:[t.readDoubleLE(36),t.readDoubleLE(44),t.readDoubleLE(52),t.readDoubleLE(52)]}},i.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength,n=[];let r;for(;t<e&&(r=this.getRow(t),r);)t+=8,t+=r.len,r.type?n.push(this.parseFunc(r.data)):n.push(null);return n},i.prototype.getRow=function(t){const e=this.buffer.slice(t,t+12),n=e.readInt32BE(4)<<1,r=e.readInt32BE(0);return 0===n?{id:r,len:n,type:0}:{id:r,len:n,data:this.buffer.slice(t+12,t+n+8),type:e.readInt32LE(8)}},t.exports=function(t,e){return new i(t,e).rows}})),o.register("dMYXn",(function(t,e){var n=o("6vjRP");function r(t,e,n,r,i){var o=i(t.slice(e,e+n));switch(r){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return"y"===o.toLowerCase()||"t"===o.toLowerCase();default:return o}}function i(t,e,n,i){for(var o,s,a={},u=0,h=n.length;u<h;)o=r(t,e,(s=n[u]).len,s.dataType,i),e+=s.len,void 0!==o&&(a[s.name]=o),u++;return a}t.exports=function(t,e){for(var r=n(e),o=function(t){var e={};return e.lastUpdated=new Date(t.readUInt8(1)+1900,t.readUInt8(2),t.readUInt8(3)),e.records=t.readUInt32LE(4),e.headerLen=t.readUInt16LE(8),e.recLen=t.readUInt16LE(10),e}(t),s=function(t,e,n){for(var r=[],i=32;i<e&&(r.push({name:n(t.slice(i,i+11)),dataType:String.fromCharCode(t.readUInt8(i+11)),len:t.readUInt8(i+16),decimal:t.readUInt8(i+17)}),13!==t.readUInt8(i+32));)i+=32;return r}(t,o.headerLen-1,r),a=2+(s.length+1<<5),u=o.recLen,h=o.records,l=[];h;)l.push(i(t,a,s,r)),a+=u,h--;return l}})),o.register("6vjRP",(function(t,e){o("2Lv1T");var n=o("eNRCS").StringDecoder;function r(t){var e=new n;return(e.write(t)+e.end()).replace(/\0/g,"").trim()}t.exports=function t(e,n){if(!e)return r;try{new TextDecoder(e.trim())}catch(s){var o=i.exec(e);return o&&!n?t("windows-"+o[1],!0):r}return function(t){var n=new TextDecoder(e);return(n.decode(t,{stream:!0})+n.decode()).replace(/\0/g,"").trim()}};var i=/^(?:ANSI\s)?(\d+)$/m})),o.register("2Lv1T",(function(t,e){t.exports=o("jpov1")})),o.register("jpov1",(function(t,e){!function(e){function n(t,e,n){return e<=t&&t<=n}t.exports&&!e["encoding-indexes"]&&o("kjyEk");var r=Math.floor;function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function s(t){return 0<=t&&t<=127}var a=s,u=-1;function h(t){this.tokens=[].slice.call(t),this.tokens.reverse()}h.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():u},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var l=-1;function c(t,e){if(t)throw TypeError("Decoder error");return e||65533}function f(t){throw TypeError("The code point "+t+" could not be encoded.")}function p(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(g,t)?g[t]:null}var d=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],g={};d.forEach((function(t){t.encodings.forEach((function(t){t.labels.forEach((function(e){g[e]=t}))}))}));var y,m,_={},v={};function b(t,e){return e&&e[t]||null}function x(t,e){var n=e.indexOf(t);return-1===n?null:n}function w(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var E="utf-8";function M(t,e){if(!(this instanceof M))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):E,e=i(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=p(t);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!v[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var r=this;return r._encoding=n,Boolean(e.fatal)&&(r._error_mode="fatal"),Boolean(e.ignoreBOM)&&(r._ignoreBOM=!0),Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase(),this.fatal="fatal"===r._error_mode,this.ignoreBOM=r._ignoreBOM),r}function S(t,n){if(!(this instanceof S))throw TypeError("Called as a function. Did you forget 'new'?");n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var r=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var o=p(t=void 0!==t?String(t):E);if(null===o||"replacement"===o.name)throw RangeError("Unknown encoding: "+t);if(!_[o.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");r._encoding=o}else r._encoding=p("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase()),r}function I(t){var e=t.fatal,r=0,i=0,o=0,s=128,a=191;this.handler=function(t,h){if(h===u&&0!==o)return o=0,c(e);if(h===u)return l;if(0===o){if(n(h,0,127))return h;if(n(h,194,223))o=1,r=31&h;else if(n(h,224,239))224===h&&(s=160),237===h&&(a=159),o=2,r=15&h;else{if(!n(h,240,244))return c(e);240===h&&(s=144),244===h&&(a=143),o=3,r=7&h}return null}if(!n(h,s,a))return r=o=i=0,s=128,a=191,t.prepend(h),c(e);if(s=128,a=191,r=r<<6|63&h,(i+=1)!==o)return null;var f=r;return r=o=i=0,f}}function C(t){t.fatal;this.handler=function(t,e){if(e===u)return l;if(a(e))return e;var r,i;n(e,128,2047)?(r=1,i=192):n(e,2048,65535)?(r=2,i=224):n(e,65536,1114111)&&(r=3,i=240);for(var o=[(e>>6*r)+i];r>0;){var s=e>>6*(r-1);o.push(128|63&s),r-=1}return o}}function P(t,e){var n=e.fatal;this.handler=function(e,r){if(r===u)return l;if(s(r))return r;var i=t[r-128];return null===i?c(n):i}}function L(t,e){e.fatal;this.handler=function(e,n){if(n===u)return l;if(a(n))return n;var r=x(n,t);return null===r&&f(n),r+128}}function N(t){var e=t.fatal,r=0,i=0,o=0;this.handler=function(t,a){if(a===u&&0===r&&0===i&&0===o)return l;var h;if(a!==u||0===r&&0===i&&0===o||(r=0,i=0,o=0,c(e)),0!==o){h=null,n(a,48,57)&&(h=function(t){if(t>39419&&t<189e3||t>1237575)return null;if(7457===t)return 59335;var e,n=0,r=0,i=w("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[0]<=t))break;n=o[0],r=o[1]}return r+t-n}(10*(126*(10*(r-129)+i-48)+o-129)+a-48));var f=[i,o,a];return r=0,i=0,o=0,null===h?(t.prepend(f),c(e)):h}if(0!==i)return n(a,129,254)?(o=a,null):(t.prepend([i,a]),r=0,i=0,c(e));if(0!==r){if(n(a,48,57))return i=a,null;var p=r,d=null;r=0;var g=a<127?64:65;return(n(a,64,126)||n(a,128,254))&&(d=190*(p-129)+(a-g)),null===(h=null===d?null:b(d,w("gb18030")))&&s(a)&&t.prepend(a),null===h?c(e):h}return s(a)?a:128===a?8364:n(a,129,254)?(r=a,null):c(e)}}function O(t,e){t.fatal;this.handler=function(t,n){if(n===u)return l;if(a(n))return n;if(58853===n)return f(n);if(e&&8364===n)return 128;var i=x(n,w("gb18030"));if(null!==i){var o=i%190;return[r(i/190)+129,o+(o<63?64:65)]}if(e)return f(n);i=function(t){if(59335===t)return 7457;var e,n=0,r=0,i=w("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[1]<=t))break;n=o[1],r=o[0]}return r+t-n}(n);var s=r(i/10/126/10),h=r((i-=12600*s)/10/126),c=r((i-=1260*h)/10);return[s+129,h+48,c+129,i-10*c+48]}}function A(t){var e=t.fatal,r=0;this.handler=function(t,i){if(i===u&&0!==r)return r=0,c(e);if(i===u&&0===r)return l;if(0!==r){var o=r,a=null;r=0;var h=i<127?64:98;switch((n(i,64,126)||n(i,161,254))&&(a=157*(o-129)+(i-h)),a){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var f=null===a?null:b(a,w("big5"));return null===f&&s(i)&&t.prepend(i),null===f?c(e):f}return s(i)?i:n(i,129,254)?(r=i,null):c(e)}}function k(t){t.fatal;this.handler=function(t,e){if(e===u)return l;if(a(e))return e;var n=function(t){m=m||w("big5").map((function(t,e){return e<5024?null:t}));var e=m;return 9552===t||9566===t||9569===t||9578===t||21313===t||21317===t?e.lastIndexOf(t):x(t,e)}(e);if(null===n)return f(e);var i=r(n/157)+129;if(i<161)return f(e);var o=n%157;return[i,o+(o<63?64:98)]}}function R(t){var e=t.fatal,r=!1,i=0;this.handler=function(t,o){if(o===u&&0!==i)return i=0,c(e);if(o===u&&0===i)return l;if(142===i&&n(o,161,223))return i=0,65216+o;if(143===i&&n(o,161,254))return r=!0,i=o,null;if(0!==i){var a=i;i=0;var h=null;return n(a,161,254)&&n(o,161,254)&&(h=b(94*(a-161)+(o-161),w(r?"jis0212":"jis0208"))),r=!1,n(o,161,254)||t.prepend(o),null===h?c(e):h}return s(o)?o:142===o||143===o||n(o,161,254)?(i=o,null):c(e)}}function T(t){t.fatal;this.handler=function(t,e){if(e===u)return l;if(a(e))return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return[142,e-65377+161];8722===e&&(e=65293);var i=x(e,w("jis0208"));return null===i?f(e):[r(i/94)+161,i%94+161]}}function D(t){var e=t.fatal,r=0,i=1,o=2,s=3,a=4,h=5,f=6,p=r,d=r,g=0,y=!1;this.handler=function(t,m){switch(p){default:case r:return 27===m?(p=h,null):n(m,0,127)&&14!==m&&15!==m&&27!==m?(y=!1,m):m===u?l:(y=!1,c(e));case i:return 27===m?(p=h,null):92===m?(y=!1,165):126===m?(y=!1,8254):n(m,0,127)&&14!==m&&15!==m&&27!==m&&92!==m&&126!==m?(y=!1,m):m===u?l:(y=!1,c(e));case o:return 27===m?(p=h,null):n(m,33,95)?(y=!1,65344+m):m===u?l:(y=!1,c(e));case s:return 27===m?(p=h,null):n(m,33,126)?(y=!1,g=m,p=a,null):m===u?l:(y=!1,c(e));case a:if(27===m)return p=h,c(e);if(n(m,33,126)){p=s;var _=b(94*(g-33)+m-33,w("jis0208"));return null===_?c(e):_}return m===u?(p=s,t.prepend(m),c(e)):(p=s,c(e));case h:return 36===m||40===m?(g=m,p=f,null):(t.prepend(m),y=!1,p=d,c(e));case f:var v=g;g=0;var x=null;if(40===v&&66===m&&(x=r),40===v&&74===m&&(x=i),40===v&&73===m&&(x=o),36!==v||64!==m&&66!==m||(x=s),null!==x){p=p=x;var E=y;return y=!0,E?c(e):null}return t.prepend([v,m]),y=!1,p=d,c(e)}}}function F(t){t.fatal;var e=0,n=1,i=2,o=e;this.handler=function(t,s){if(s===u&&o!==e)return t.prepend(s),o=e,[27,40,66];if(s===u&&o===e)return l;if(!(o!==e&&o!==n||14!==s&&15!==s&&27!==s))return f(65533);if(o===e&&a(s))return s;if(o===n&&(a(s)&&92!==s&&126!==s||165==s||8254==s)){if(a(s))return s;if(165===s)return 92;if(8254===s)return 126}if(a(s)&&o!==e)return t.prepend(s),o=e,[27,40,66];if((165===s||8254===s)&&o!==n)return t.prepend(s),o=n,[27,40,74];8722===s&&(s=65293);var h=x(s,w("jis0208"));return null===h?f(s):o!==i?(t.prepend(s),o=i,[27,36,66]):[r(h/94)+33,h%94+33]}}function B(t){var e=t.fatal,r=0;this.handler=function(t,i){if(i===u&&0!==r)return r=0,c(e);if(i===u&&0===r)return l;if(0!==r){var o=r,a=null;r=0;var h=i<127?64:65,f=o<160?129:193;if((n(i,64,126)||n(i,128,252))&&(a=188*(o-f)+i-h),n(a,8836,10715))return 48508+a;var p=null===a?null:b(a,w("jis0208"));return null===p&&s(i)&&t.prepend(i),null===p?c(e):p}return s(i)||128===i?i:n(i,161,223)?65216+i:n(i,129,159)||n(i,224,252)?(r=i,null):c(e)}}function j(t){t.fatal;this.handler=function(t,e){if(e===u)return l;if(a(e)||128===e)return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return e-65377+161;8722===e&&(e=65293);var i=function(t){return y=y||w("jis0208").map((function(t,e){return n(e,8272,8835)?null:t})),y.indexOf(t)}(e);if(null===i)return f(e);var o=r(i/188),s=i%188;return[o+(o<31?129:193),s+(s<63?64:65)]}}function z(t){var e=t.fatal,r=0;this.handler=function(t,i){if(i===u&&0!==r)return r=0,c(e);if(i===u&&0===r)return l;if(0!==r){var o=r,a=null;r=0,n(i,65,254)&&(a=190*(o-129)+(i-65));var h=null===a?null:b(a,w("euc-kr"));return null===a&&s(i)&&t.prepend(i),null===h?c(e):h}return s(i)?i:n(i,129,254)?(r=i,null):c(e)}}function G(t){t.fatal;this.handler=function(t,e){if(e===u)return l;if(a(e))return e;var n=x(e,w("euc-kr"));return null===n?f(e):[r(n/190)+129,n%190+65]}}function U(t,e){var n=t>>8,r=255&t;return e?[n,r]:[r,n]}function q(t,e){var r=e.fatal,i=null,o=null;this.handler=function(e,s){if(s===u&&(null!==i||null!==o))return c(r);if(s===u&&null===i&&null===o)return l;if(null===i)return i=s,null;var a;if(a=t?(i<<8)+s:(s<<8)+i,i=null,null!==o){var h=o;return o=null,n(a,56320,57343)?65536+1024*(h-55296)+(a-56320):(e.prepend(U(a,t)),c(r))}return n(a,55296,56319)?(o=a,null):n(a,56320,57343)?c(r):a}}function V(t,e){e.fatal;this.handler=function(e,r){if(r===u)return l;if(n(r,0,65535))return U(r,t);var i=U(55296+(r-65536>>10),t),o=U(56320+(r-65536&1023),t);return i.concat(o)}}function H(t){t.fatal;this.handler=function(t,e){return e===u?l:s(e)?e:63360+e-128}}function W(t){t.fatal;this.handler=function(t,e){return e===u?l:a(e)?e:n(e,63360,63487)?e-63360+128:f(e)}}Object.defineProperty&&(Object.defineProperty(M.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(M.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(M.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),M.prototype.decode=function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._do_not_flush||(this._decoder=v[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var r,o=new h(n),s=[];;){var a=o.read();if(a===u)break;if((r=this._decoder.handler(o,a))===l)break;null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(o,o.read()))===l)break;null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r))}while(!o.endOfStream());this._decoder=null}return function(t){var e,n;return e=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===e.indexOf(n)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(t)}.call(this,s)},Object.defineProperty&&Object.defineProperty(S.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),S.prototype.encode=function(t,e){t=void 0===t?"":String(t),e=i(e),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var n,r=new h(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var s=e.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(t)),o=[];;){var s=r.read();if(s===u)break;if((n=this._encoder.handler(r,s))===l)break;Array.isArray(n)?o.push.apply(o,n):o.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(r,r.read()))!==l;)Array.isArray(n)?o.push.apply(o,n):o.push(n);this._encoder=null}return new Uint8Array(o)},_["UTF-8"]=function(t){return new C(t)},v["UTF-8"]=function(t){return new I(t)},"encoding-indexes"in e&&d.forEach((function(t){"Legacy single-byte encodings"===t.heading&&t.encodings.forEach((function(t){var e=t.name,n=w(e.toLowerCase());v[e]=function(t){return new P(n,t)},_[e]=function(t){return new L(n,t)}}))})),v.GBK=function(t){return new N(t)},_.GBK=function(t){return new O(t,!0)},_.gb18030=function(t){return new O(t)},v.gb18030=function(t){return new N(t)},_.Big5=function(t){return new k(t)},v.Big5=function(t){return new A(t)},_["EUC-JP"]=function(t){return new T(t)},v["EUC-JP"]=function(t){return new R(t)},_["ISO-2022-JP"]=function(t){return new F(t)},v["ISO-2022-JP"]=function(t){return new D(t)},_.Shift_JIS=function(t){return new j(t)},v.Shift_JIS=function(t){return new B(t)},_["EUC-KR"]=function(t){return new G(t)},v["EUC-KR"]=function(t){return new z(t)},_["UTF-16BE"]=function(t){return new V(!0,t)},v["UTF-16BE"]=function(t){return new q(!0,t)},_["UTF-16LE"]=function(t){return new V(!1,t)},v["UTF-16LE"]=function(t){return new q(!1,t)},_["x-user-defined"]=function(t){return new W(t)},v["x-user-defined"]=function(t){return new H(t)},e.TextEncoder||(e.TextEncoder=S),e.TextDecoder||(e.TextDecoder=M),t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(t.exports||{})})),o.register("kjyEk",(function(t,e){})),o.register("eNRCS",(function(t,e){var r;n(t.exports,"StringDecoder",(()=>r),(t=>r=t));var i=o("1U9GM").Buffer,s=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=f,this.end=p,e=3;break;default:return this.write=d,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function u(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function h(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function g(t){return t&&t.length?this.write(t):""}r=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=u(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=u(e[r]),i>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=u(e[r]),i>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),o.register("1U9GM",(function(t,e){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=o("6ZWSX"),r=n.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,t.exports),t.exports.Buffer=s),s.prototype=Object.create(r.prototype),i(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}})),o.register("hI53f",(function(t,e){!function(){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(){return 1}t.exports?t.exports=o:this.LRUCache=o;var r=!1;function i(t){r||"string"==typeof t||"number"==typeof t||(r=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,this.reset()}function s(t,e,n){i(e);var r=t._cache[e];return r&&(a(t,r)?(l(t,r),t._allowStale||(r=void 0)):n&&function(t,e){h(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}(t,r),r&&(r=r.value)),r}function a(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t._maxAge&&n>t._maxAge}function u(t){for(;t._lru<t._mru&&t._length>t._max;)l(t,t._lruList[t._lru])}function h(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function l(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],h(t,e))}function c(t,e,n,r,i,o){this.key=t,this.value=e,this.lu=n,this.length=r,this.now=i,o&&(this.maxAge=o)}Object.defineProperty(o.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this._max=t,this._length>this._max&&u(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t)for(var e in this._lengthCalculator=n,this._length=this._itemCount,this._cache)this._cache[e].length=1;else for(var e in this._lengthCalculator=t,this._length=0,this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length;this._length>this._max&&u(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(t,e){e=e||this;for(var n=0,r=this._itemCount,i=this._mru-1;i>=0&&n<r;i--)if(this._lruList[i]){n++;var o=this._lruList[i];a(this,o)&&(l(this,o),this._allowStale||(o=void 0)),o&&t.call(e,o.value,o.key,this)}},o.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.key}return t},o.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.value}return t},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var t=[],e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];a(this,r)||(++e,t.push({k:r.key,v:r.value,e:r.now+(r.maxAge||0)}))}return t},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(t,n,r){r=r||this._maxAge,i(t);var o=r?Date.now():0,s=this._lengthCalculator(n);if(e(this._cache,t))return s>this._max?(l(this,this._cache[t]),!1):(this._dispose&&this._dispose(t,this._cache[t].value),this._cache[t].now=o,this._cache[t].maxAge=r,this._cache[t].value=n,this._length+=s-this._cache[t].length,this._cache[t].length=s,this.get(t),this._length>this._max&&u(this),!0);var a=new c(t,n,this._mru++,s,o,r);return a.length>this._max?(this._dispose&&this._dispose(t,n),!1):(this._length+=a.length,this._lruList[a.lu]=this._cache[t]=a,this._itemCount++,this._length>this._max&&u(this),!0)},o.prototype.has=function(t){return i(t),!!e(this._cache,t)&&!a(this,this._cache[t])},o.prototype.get=function(t){return i(t),s(this,t,!0)},o.prototype.peek=function(t){return i(t),s(this,t,!1)},o.prototype.pop=function(){var t=this._lruList[this._lru];return l(this,t),t||null},o.prototype.del=function(t){i(t),l(this,this._cache[t])},o.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n];i(r.k);var o=r.e||0;if(0===o)this.set(r.k,r.v);else{var s=o-e;s>0&&this.set(r.k,r.v,s)}}}}()})),o.register("dxKuV",(function(t,e){function n(t,e,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(r=t,(i=document.createElement("div")).className="accordion",i.id=r,i),a=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.createElement("div");r=i?n:n+'<a href="#" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-custom-class="custom-tooltip" data-bs-title="Donnée issue de simulation ICI" style="padding-left: 25%;>\n        info\n        </a>';return o.className="accordion-item",o.id=t,o.id=t,o.innerHTML+='<h2 class="accordion-header" id="panelsStayOpen-heading'.concat(t,'">\n    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"\n        data-bs-target="#panelsStayOpen-collapse').concat(t,'" aria-expanded="false"\n        aria-controls="panelsStayOpen-collapse').concat(t,'">\n        ').concat(e,'\n    </button>\n</h2>\n<div id="panelsStayOpen-collapse').concat(t,'" class="accordion-collapse collapse"\n    aria-labelledby="panelsStayOpen-heading').concat(t,'">\n    <div class="accordion-body">\n\n    ').concat(r,"\n\n    </div>\n</div>"),o}(t+"child",e,n,o);return s.appendChild(a),s}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.createAccordion=n,t.exports.createAccordionForListValues=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="";return t.forEach((function(t){t&&(o+=r?t.name4User+": "+t.val+"<br>":n(t.attribut+e,t.name4User,t.val,i).outerHTML)})),o},t.exports.dataINSEE4Chart=function(t,e){var n=[];return Object.entries(e).forEach((function(e){t.includes(e[1].attribut)&&n.push({name:e[1].name4User,value:e[1].val})})),n},t.exports.generateAccordionItem=function(t,e){var n='<div class="accordion-item">';return n+='<h2 class="accordion-header" id="panelsStayOpen-heading'+t+'">',n+='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse'+t+'" aria-expanded="false" aria-controls="panelsStayOpen-collapse'+t+'">',n+=t,n+="</button></h2>",n+='<div id="panelsStayOpen-collapse'+t+'" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-heading'+t+'">',n+='<div class="accordion-body" style="width:100%;"><canvas id="'+e+'"></canvas></div></div></div>'}})),o.register("jqz8H",(function(t,r){e(t.exports),n(t.exports,"default",(()=>u));var i=o("2RVy2");(i=o("2RVy2")).Chart.register(...i.registerables);var s,a,u=i.Chart;s=t.exports,a=i,Object.keys(a).forEach((function(t){"default"===t||"__esModule"===t||s.hasOwnProperty(t)||Object.defineProperty(s,t,{enumerable:!0,get:function(){return a[t]}})}))})),o.register("2RVy2",(function(t,e){n(t.exports,"animator",(()=>s)),n(t.exports,"Animation",(()=>h)),n(t.exports,"Animations",(()=>l)),n(t.exports,"DatasetController",(()=>w)),n(t.exports,"BarController",(()=>O)),n(t.exports,"BubbleController",(()=>A)),n(t.exports,"DoughnutController",(()=>k)),n(t.exports,"LineController",(()=>R)),n(t.exports,"PolarAreaController",(()=>T)),n(t.exports,"PieController",(()=>D)),n(t.exports,"RadarController",(()=>F)),n(t.exports,"ScatterController",(()=>B)),n(t.exports,"controllers",(()=>j)),n(t.exports,"_adapters",(()=>U)),n(t.exports,"Interaction",(()=>Z)),n(t.exports,"layouts",(()=>ut)),n(t.exports,"BasePlatform",(()=>ht)),n(t.exports,"BasicPlatform",(()=>lt)),n(t.exports,"DomPlatform",(()=>St)),n(t.exports,"_detectPlatform",(()=>It)),n(t.exports,"Element",(()=>Ct)),n(t.exports,"Scale",(()=>Ft)),n(t.exports,"registry",(()=>zt)),n(t.exports,"Chart",(()=>le)),n(t.exports,"ArcElement",(()=>ye)),n(t.exports,"LineElement",(()=>Se)),n(t.exports,"PointElement",(()=>Ce)),n(t.exports,"BarElement",(()=>Re)),n(t.exports,"elements",(()=>Te)),n(t.exports,"Colors",(()=>Ue)),n(t.exports,"Decimation",(()=>He)),n(t.exports,"Filler",(()=>hn)),n(t.exports,"Legend",(()=>pn)),n(t.exports,"Title",(()=>gn)),n(t.exports,"SubTitle",(()=>mn)),n(t.exports,"Tooltip",(()=>An)),n(t.exports,"plugins",(()=>kn)),n(t.exports,"CategoryScale",(()=>Dn)),n(t.exports,"LinearScale",(()=>jn)),n(t.exports,"LogarithmicScale",(()=>Hn)),n(t.exports,"RadialLinearScale",(()=>tr)),n(t.exports,"TimeScale",(()=>ur)),n(t.exports,"TimeSeriesScale",(()=>lr)),n(t.exports,"scales",(()=>cr)),n(t.exports,"registerables",(()=>fr)),n(t.exports,"Ticks",(()=>o("c7mKY").aL)),n(t.exports,"defaults",(()=>o("c7mKY").d));
/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
var r=o("c7mKY");r=o("c7mKY");class i{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],o=e.duration;i.forEach((r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=r.r.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var s=new i;const a="transparent",u={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=(0,r.c)(t||a),o=i.valid&&(0,r.c)(e||a);return o&&o.valid?o.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class h{constructor(t,e,n,i){const o=e[n];i=(0,r.a)([t.to,i,o,t.from]);const s=(0,r.a)([t.from,o,i]);this._active=!0,this._fn=t.fn||u[t.type||typeof s],this._easing=r.e[t.easing]||r.e.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,s=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=(0,r.a)([t.to,e,i,t.from]),this._from=(0,r.a)([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||e<n),!this._active)return this._target[r]=s,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class l{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!(0,r.i)(t))return;const e=Object.keys(r.d.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const o=t[i];if(!(0,r.i)(o))return;const s={};for(const t of e)s[t]=o[t];((0,r.b)(o.properties)&&o.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const u=o[a];if("$"===u.charAt(0))continue;if("options"===u){r.push(...this._animateOptions(t,e));continue}const l=e[u];let c=i[u];const f=n.get(u);if(c){if(f&&c.active()){c.update(f,l,s);continue}c.cancel()}f&&f.duration?(i[u]=c=new h(f,t,u,l),r.push(c)):t[u]=l}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(s.add(this._chart,n),!0):void 0}}function c(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function f(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function p(t,e,n,i={}){const o=t.keys,s="single"===i.mode;let a,u,h,l;if(null!==e){for(a=0,u=o.length;a<u;++a){if(h=+o[a],h===n){if(i.all)continue;break}l=t.values[h],(0,r.g)(l)&&(s||0===e||(0,r.s)(e)===(0,r.s)(l))&&(e+=l)}return e}}function d(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function g(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function y(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function m(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,u=o.axis,h=s.axis,l=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,s,r),c=e.length;let f;for(let t=0;t<c;++t){const n=e[t],{[u]:o,[h]:c}=n;f=(n._stacks||(n._stacks={}))[h]=g(i,l,o),f[a]=c,f._top=y(f,s,!0,r.type),f._bottom=y(f,s,!1,r.type);(f._visualValues||(f._visualValues={}))[a]=c}}function _(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function v(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const b=t=>"reset"===t||"none"===t,x=(t,e)=>e?t:Object.assign({},t);class w{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=d(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&v(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,o=e.xAxisID=(0,r.v)(n.xAxisID,_(t,"x")),s=e.yAxisID=(0,r.v)(n.yAxisID,_(t,"y")),a=e.rAxisID=(0,r.v)(n.rAxisID,_(t,"r")),u=e.indexAxis,h=e.iAxisID=i(u,o,s,a),l=e.vAxisID=i(u,s,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&(0,r.u)(this._data,this),t._stacked&&v(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if((0,r.i)(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r],n[r]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){(0,r.u)(n,this);const t=this._cachedMeta;v(t),t._parsed=[]}e&&Object.isExtensible(e)&&(0,r.l)(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=d(e.vScale,e),e.stack!==n.stack&&(r=!0,v(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&m(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:s}=n,a=o.axis;let u,h,l,c=0===t&&e===i.length||n._sorted,f=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,l=i;else{l=(0,r.b)(i[t])?this.parseArrayData(n,i,t,e):(0,r.i)(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const o=()=>null===h[a]||f&&h[a]<f[a];for(u=0;u<e;++u)n._parsed[u+t]=h=l[u],c&&(o()&&(c=!1),f=h);n._sorted=c}s&&m(this,l)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:o}=t,s=i.axis,a=o.axis,u=i.getLabels(),h=i===o,l=new Array(r);let c,f,p;for(c=0,f=r;c<f;++c)p=c+n,l[c]={[s]:h||i.parse(u[p],p),[a]:o.parse(e[p],p)};return l}parseArrayData(t,e,n,r){const{xScale:i,yScale:o}=t,s=new Array(r);let a,u,h,l;for(a=0,u=r;a<u;++a)h=a+n,l=e[h],s[a]={x:i.parse(l[0],h),y:o.parse(l[1],h)};return s}parseObjectData(t,e,n,i){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:u="y"}=this._parsing,h=new Array(i);let l,c,f,p;for(l=0,c=i;l<c;++l)f=l+n,p=e[f],h[l]={x:o.parse((0,r.f)(p,a),f),y:s.parse((0,r.f)(p,u),f)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,o=e[t.axis];return p({keys:f(r,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let o=null===i?NaN:i;const s=r&&n._stacks[e.axis];r&&s&&(r.values=s,o=p(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,s=i.length,a=this._getOtherScale(t),u=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:f(n,!0),values:null})(e,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:c}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let p,d;function g(){d=i[p];const e=d[a.axis];return!(0,r.g)(d[t.axis])||l>e||c<e}for(p=0;p<s&&(g()||(this.updateRangeFromParsed(h,t,d,u),!o));++p);if(o)for(p=s-1;p>=0;--p)if(!g()){this.updateRangeFromParsed(h,t,d,u);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,o,s;for(i=0,o=e.length;i<o;++i)s=e[i][t.axis],(0,r.g)(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,o;return(0,r.i)(t)?(e=t.top,n=t.right,i=t.bottom,o=t.left):e=n=i=o=t,{top:e,right:n,bottom:i,left:o,disabled:!1===t}}((0,r.v)(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=c(t,n),i=c(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,u=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,i,s,a),h=s;h<s+a;++h){const e=r[h];e.hidden||(e.active&&u?o.push(e):e.draw(t,i))}for(h=0;h<o.length;++h)o[h].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=function(t,e,n){return(0,r.j)(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return(0,r.j)(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,o=this._cachedDataOpts,s=t+"-"+e,a=o[s],u=this.enableOptionSharing&&(0,r.h)(n);if(a)return x(a,u);const h=this.chart.config,l=h.datasetElementScopeKeys(this._type,t),c=i?[`${t}Hover`,"hover",t,""]:[t,""],f=h.getOptionScopes(this.getDataset(),l),p=Object.keys(r.d.elements[t]),d=h.resolveNamedOptions(f,p,(()=>this.getContext(n,i,e)),c);return d.$shared&&(d.$shared=u,o[s]=Object.freeze(x(d,u))),d}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${e}`,s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(t,n,e))}const u=new l(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||b(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}updateElement(t,e,n,r){b(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!b(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(i),s=t;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&v(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function E(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=(0,r._)(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,o,s,a,u=e._length;const h=()=>{32767!==s&&-32768!==s&&((0,r.h)(a)&&(u=Math.min(u,Math.abs(s-a)||u)),a=s)};for(i=0,o=n.length;i<o;++i)s=e.getPixelForValue(n[i]),h();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),h();return u}function M(t,e,n,i){return(0,r.b)(t)?function(t,e,n,r){const i=n.parse(t[0],r),o=n.parse(t[1],r),s=Math.min(i,o),a=Math.max(i,o);let u=s,h=a;Math.abs(s)>Math.abs(a)&&(u=a,h=s),e[n.axis]=h,e._custom={barStart:u,barEnd:h,start:i,end:o,min:s,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function S(t,e,n,r){const i=t.iScale,o=t.vScale,s=i.getLabels(),a=i===o,u=[];let h,l,c,f;for(h=n,l=n+r;h<l;++h)f=e[h],c={},c[i.axis]=a||i.parse(s[h],h),u.push(M(f,c,o,h));return u}function I(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function C(t,e,n,r){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:u,top:h,bottom:l}=function(t){let e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=h:(n._bottom||0)===r?i=l:(o[P(l,s,a,u)]=!0,i=h)),o[P(i,s,a,u)]=!0,t.borderSkipped=o}function P(t,e,n,r){var i,o,s;return r?(s=n,t=L(t=(i=t)===(o=e)?s:i===s?o:i,n,e)):t=L(t,e,n),t}function L(t,e,n){return"start"===t?e:"end"===t?n:t}function N(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class O extends w{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return S(t,e,n,r)}parseArrayData(t,e,n,r){return S(t,e,n,r)}parseObjectData(t,e,n,i){const{iScale:o,vScale:s}=t,{xAxisKey:a="x",yAxisKey:u="y"}=this._parsing,h="x"===o.axis?a:u,l="x"===s.axis?a:u,c=[];let f,p,d,g;for(f=n,p=n+i;f<p;++f)g=e[f],d={},d[o.axis]=o.parse((0,r.f)(g,h),f),c.push(M((0,r.f)(g,l),d,s,f));return c}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),o=i._custom,s=I(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const o="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,u=a.getBasePixel(),h=a.isHorizontal(),l=this._getRuler(),{sharedOptions:c,includeOptions:f}=this._getSharedOptions(e,i);for(let p=e;p<e+n;p++){const e=this.getParsed(p),n=o||(0,r.k)(e[a.axis])?{base:u,head:u}:this._calculateBarValuePixels(p),d=this._calculateBarIndexPixels(p,l),g=(e._stacks||{})[a.axis],y={horizontal:h,base:n.base,enableBorderRadius:!g||I(e._custom)||s===g._top||s===g._bottom,x:h?n.head:d.center,y:h?d.center:n.head,height:h?d.size:Math.abs(n.size),width:h?Math.abs(n.size):d.size};f&&(y.options=c||this.resolveDataElementOptions(p,t[p].active?"active":i));const m=y.options||t[p].options;C(y,m,g,s),N(y,m,l.ratio),this.updateElement(t[p],p,y,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),o=n.options.stacked,s=[],a=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if((0,r.k)(i)||isNaN(i))return!0};for(const n of i)if((void 0===e||!a(n))&&((!1===o||-1===s.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&s.push(n.stack),n.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,o;for(i=0,o=e.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=t.barThickness;return{min:s||E(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:o,minBarLength:s}}=this,a=o||0,u=this.getParsed(t),h=u._custom,l=I(h);let c,f,p=u[e.axis],d=0,g=n?this.applyStack(e,u,n):p;g!==p&&(d=g-p,g=p),l&&(p=h.barStart,g=h.barEnd-h.barStart,0!==p&&(0,r.s)(p)!==(0,r.s)(h.barEnd)&&(d=0),d+=p);const y=(0,r.k)(o)||l?d:o;let m=e.getPixelForValue(y);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(d+g):m,f=c-m,Math.abs(f)<s){f=function(t,e,n){return 0!==t?(0,r.s)(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(f,e,a)*s,p===a&&(m-=f/2);const t=e.getPixelForDecimal(0),o=e.getPixelForDecimal(1),h=Math.min(t,o),d=Math.max(t,o);m=Math.max(Math.min(m,d),h),c=m+f,n&&!l&&(u._stacks[e.axis]._visualValues[i]=e.getValueForPixel(c)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=(0,r.s)(f)*e.getLineWidthForValue(a)/2;m+=t,f-=t}return{size:f,base:m,head:c,center:c+f/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,o=i.skipNull,s=(0,r.v)(i.maxBarThickness,1/0);let a,u;if(e.grouped){const n=o?this._getStackCount(t):e.stackCount,h="flex"===i.barThickness?function(t,e,n,r){const i=e.pixels,o=i[t];let s=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const u=n.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const h=o-(o-Math.min(s,a))/2*u;return{chunk:Math.abs(a-s)/2*u/r,ratio:n.barPercentage,start:h}}(t,e,i,n):function(t,e,n,i){const o=n.barThickness;let s,a;return(0,r.k)(o)?(s=e.min*n.categoryPercentage,a=n.barPercentage):(s=o*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[t]-s/2}}(t,e,i,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*l+h.chunk/2,u=Math.min(s,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),u=Math.min(s,e.min*e.ratio);return{base:a-u/2,head:a+u/2,center:a,size:u}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}}class A extends w{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,i){const o=super.parseArrayData(t,e,n,i);for(let t=0;t<o.length;t++){const i=e[n+t];o[t]._custom=(0,r.v)(i[2],this.resolveDataElementOptions(t+n).radius)}return o}parseObjectData(t,e,n,i){const o=super.parseObjectData(t,e,n,i);for(let t=0;t<o.length;t++){const i=e[n+t];o[t]._custom=(0,r.v)(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y),u=o._custom;return{label:n[t]||"",value:"("+s+", "+a+(u?", "+u:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:u}=this._getSharedOptions(e,r),h=o.axis,l=s.axis;for(let c=e;c<e+n;c++){const e=t[c],n=!i&&this.getParsed(c),f={},p=f[h]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[h]),d=f[l]=i?s.getBasePixel():s.getPixelForValue(n[l]);f.skip=isNaN(p)||isNaN(d),u&&(f.options=a||this.resolveDataElementOptions(c,e.active?"active":r),i&&(f.options.radius=0)),this.updateElement(e,c,f,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return"active"!==e&&(i.radius=0),i.radius+=(0,r.v)(n&&n._custom,o),i}}class k extends w{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let o,s,a=t=>+n[t];if((0,r.i)(n[t])){const{key:t="value"}=this._parsing;a=e=>+(0,r.f)(n[e],t)}for(o=t,s=t+e;o<s;++o)i._parsed[o]=a(o)}}_getRotation(){return(0,r.t)(this.options.rotation-90)}_getCircumference(){return(0,r.t)(this.options.circumference)}_getRotationExtents(){let t=r.T,e=-r.T;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,o=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),u=Math.min((0,r.m)(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:l,rotation:c}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:d,offsetY:g}=function(t,e,n){let i=1,o=1,s=0,a=0;if(e<r.T){const u=t,h=u+e,l=Math.cos(u),c=Math.sin(u),f=Math.cos(h),p=Math.sin(h),d=(t,e,i)=>(0,r.p)(t,u,h,!0)?1:Math.max(e,e*n,i,i*n),g=(t,e,i)=>(0,r.p)(t,u,h,!0)?-1:Math.min(e,e*n,i,i*n),y=d(0,l,f),m=d(r.H,c,p),_=g(r.P,l,f),v=g(r.P+r.H,c,p);i=(y-_)/2,o=(m-v)/2,s=-(y+_)/2,a=-(m+v)/2}return{ratioX:i,ratioY:o,offsetX:s,offsetY:a}}(c,l,u),y=(n.width-s)/f,m=(n.height-s)/p,_=Math.max(Math.min(y,m)/2,0),v=(0,r.n)(this.options.radius,_),b=(v-Math.max(v*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=d*v,this.offsetY=g*v,i.total=this.calculateTotal(),this.outerRadius=v-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*h,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/r.T)}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,u=(s.left+s.right)/2,h=(s.top+s.bottom)/2,l=i&&a.animateScale,c=l?0:this.innerRadius,f=l?0:this.outerRadius,{sharedOptions:p,includeOptions:d}=this._getSharedOptions(e,r);let g,y=this._getRotation();for(g=0;g<e;++g)y+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],o={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:f,innerRadius:c};d&&(o.options=p||this.resolveDataElementOptions(g,n.active?"active":r)),y+=e,this.updateElement(n,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?r.T*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=(0,r.o)(e._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,o,s,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,s=o.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max((0,r.v)(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class R extends w{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=e,s=this.chart._animationsDisabled;let{start:a,count:u}=(0,r.q)(e,i,s);this._drawStart=a,this._drawCount=u,(0,r.w)(e)&&(a=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:h},t),this.updateElements(i,a,u,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:s,vScale:a,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i),f=s.axis,p=a.axis,{spanGaps:d,segment:g}=this.options,y=(0,r.x)(d)?d:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||o||"none"===i,_=e+n,v=t.length;let b=e>0&&this.getParsed(e-1);for(let n=0;n<v;++n){const d=t[n],v=m?d:{};if(n<e||n>=_){v.skip=!0;continue}const x=this.getParsed(n),w=(0,r.k)(x[p]),E=v[f]=s.getPixelForValue(x[f],n),M=v[p]=o||w?a.getBasePixel():a.getPixelForValue(u?this.applyStack(a,x,u):x[p],n);v.skip=isNaN(E)||isNaN(M)||w,v.stop=n>0&&Math.abs(x[f]-b[f])>y,g&&(v.parsed=x,v.raw=h.data[n]),c&&(v.options=l||this.resolveDataElementOptions(n,d.active?"active":i)),m||this.updateElement(d,n,v,i),b=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class T extends w{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=(0,r.o)(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:o}}parseObjectData(t,e,n,i){return r.y.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const o="reset"===i,s=this.chart,a=s.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,l=u.yCenter,c=u.getIndexAngle(0)-.5*r.P;let f,p=c;const d=360/this.countVisibleElements();for(f=0;f<e;++f)p+=this._computeAngle(f,i,d);for(f=e;f<e+n;f++){const e=t[f];let n=p,r=p+this._computeAngle(f,i,d),g=s.getDataVisibility(f)?u.getDistanceFromCenterForValue(this.getParsed(f).r):0;p=r,o&&(a.animateScale&&(g=0),a.animateRotate&&(n=r=c));const y={x:h,y:l,innerRadius:0,outerRadius:g,startAngle:n,endAngle:r,options:this.resolveDataElementOptions(f,e.active?"active":i)};this.updateElement(e,f,y,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?(0,r.t)(this.resolveDataElementOptions(t,e).angle||n):0}}class D extends k{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class F extends w{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return r.y.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),u=o?i.xCenter:a.x,h=o?i.yCenter:a.y,l={x:u,y:h,angle:a.angle,skip:isNaN(u)||isNaN(h),options:n};this.updateElement(e,s,l,r)}}}class B extends w{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:o,count:s}=(0,r.q)(e,n,i);if(this._drawStart=o,this._drawCount=s,(0,r.w)(e)&&(o=0,s=n.length),this.options.showLine){const{dataset:r,_dataset:o}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=n;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:s},t)}this.updateElements(n,o,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const o="reset"===i,{iScale:s,vScale:a,_stacked:u,_dataset:h}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),c=this.getSharedOptions(l),f=this.includeOptions(i,c),p=s.axis,d=a.axis,{spanGaps:g,segment:y}=this.options,m=(0,r.x)(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||"none"===i;let v=e>0&&this.getParsed(e-1);for(let l=e;l<e+n;++l){const e=t[l],n=this.getParsed(l),g=_?e:{},b=(0,r.k)(n[d]),x=g[p]=s.getPixelForValue(n[p],l),w=g[d]=o||b?a.getBasePixel():a.getPixelForValue(u?this.applyStack(a,n,u):n[d],l);g.skip=isNaN(x)||isNaN(w)||b,g.stop=l>0&&Math.abs(n[p]-v[p])>m,y&&(g.parsed=n,g.raw=h.data[l]),f&&(g.options=c||this.resolveDataElementOptions(l,e.active?"active":i)),_||this.updateElement(e,l,g,i),v=n}this.updateSharedOptions(c,i,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,o)/2}}var j=Object.freeze({__proto__:null,BarController:O,BubbleController:A,DoughnutController:k,LineController:R,PolarAreaController:T,PieController:D,RadarController:F,ScatterController:B});function z(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class G{static override(t){Object.assign(G.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return z()}parse(){return z()}format(){return z()}add(){return z()}diff(){return z()}startOf(){return z()}endOf(){return z()}}var U={_date:G};function q(t,e,n,i){const{controller:o,data:s,_sorted:a}=t,u=o._cachedMeta.iScale;if(u&&e===u.axis&&"r"!==e&&a&&s.length){const t=u._reversePixels?r.A:r.B;if(!i)return t(s,e,n);if(o._sharedOptions){const r=s[0],i="function"==typeof r.getRange&&r.getRange(e);if(i){const r=t(s,e,n-i),o=t(s,e,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function V(t,e,n,r,i){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:a}=o[t],{lo:u,hi:h}=q(o[t],e,s,i);for(let t=u;t<=h;++t){const e=a[t];e.skip||r(e,n,t)}}}function H(t,e,n,i,o){const s=[];if(!o&&!t.isPointInArea(e))return s;return V(t,n,e,(function(n,a,u){(o||(0,r.C)(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:a,index:u})}),!0),s}function W(t,e,n,r,i,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let u=Number.POSITIVE_INFINITY;return V(t,n,e,(function(n,h,l){const c=n.inRange(e.x,e.y,i);if(r&&!c)return;const f=n.getCenterPoint(i);if(!(!!o||t.isPointInArea(f))&&!c)return;const p=a(e,f);p<u?(s=[{element:n,datasetIndex:h,index:l}],u=p):p===u&&s.push({element:n,datasetIndex:h,index:l})})),s}function Y(t,e,n,i,o,s){return s||t.isPointInArea(e)?"r"!==n||i?W(t,e,n,i,o,s):function(t,e,n,i){let o=[];return V(t,n,e,(function(t,n,s){const{startAngle:a,endAngle:u}=t.getProps(["startAngle","endAngle"],i),{angle:h}=(0,r.D)(t,{x:e.x,y:e.y});(0,r.p)(h,a,u)&&o.push({element:t,datasetIndex:n,index:s})})),o}(t,e,n,o):[]}function X(t,e,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return V(t,n,e,((t,r,u)=>{t[s](e[n],i)&&(o.push({element:t,datasetIndex:r,index:u}),a=a||t.inRange(e.x,e.y,i))})),r&&!a?[]:o}var Z={evaluateInteractionItems:V,modes:{index(t,e,n,i){const o=(0,r.z)(e,t),s=n.axis||"x",a=n.includeInvisible||!1,u=n.intersect?H(t,o,s,i,a):Y(t,o,s,!1,i,a),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=u[0].index,n=t.data[e];n&&!n.skip&&h.push({element:n,datasetIndex:t.index,index:e})})),h):[]},dataset(t,e,n,i){const o=(0,r.z)(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let u=n.intersect?H(t,o,s,i,a):Y(t,o,s,!1,i,a);if(u.length>0){const e=u[0].datasetIndex,n=t.getDatasetMeta(e).data;u=[];for(let t=0;t<n.length;++t)u.push({element:n[t],datasetIndex:e,index:t})}return u},point:(t,e,n,i)=>H(t,(0,r.z)(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const o=(0,r.z)(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;return Y(t,o,s,n.intersect,i,a)},x:(t,e,n,i)=>X(t,(0,r.z)(e,t),"x",n.intersect,i),y:(t,e,n,i)=>X(t,(0,r.z)(e,t),"y",n.intersect,i)}};const J=["left","top","right","bottom"];function K(t,e){return t.filter((t=>t.pos===e))}function Q(t,e){return t.filter((t=>-1===J.indexOf(t.pos)&&t.box.axis===e))}function $(t,e){return t.sort(((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function tt(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!J.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:s&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:s&&e.availableHeight)}return n}function et(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function nt(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function rt(t,e,n,i){const{pos:o,box:s}=n,a=t.maxPadding;if(!(0,r.i)(o)){n.size&&(t[o]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[o]+=n.size}s.getPadding&&nt(a,s.getPadding());const u=Math.max(0,e.outerWidth-et(a,t,"left","right")),h=Math.max(0,e.outerHeight-et(a,t,"top","bottom")),l=u!==t.w,c=h!==t.h;return t.w=u,t.h=h,n.horizontal?{same:l,other:c}:{same:c,other:l}}function it(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function ot(t,e,n,r){const i=[];let o,s,a,u,h,l;for(o=0,s=t.length,h=0;o<s;++o){a=t[o],u=a.box,u.update(a.width||e.w,a.height||e.h,it(a.horizontal,e));const{same:s,other:c}=rt(e,n,a,r);h|=s&&i.length,l=l||c,u.fullSize||i.push(a)}return h&&ot(i,e,n,r)||l}function st(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function at(t,e,n,i){const o=n.padding;let{x:s,y:a}=e;for(const u of t){const t=u.box,h=i[u.stack]||{count:1,placed:0,weight:1},l=u.stackWeight/h.weight||1;if(u.horizontal){const i=e.w*l,s=h.size||t.height;(0,r.h)(h.start)&&(a=h.start),t.fullSize?st(t,o.left,a,n.outerWidth-o.right-o.left,s):st(t,e.left+h.placed,a,i,s),h.start=a,h.placed+=i,a=t.bottom}else{const i=e.h*l,a=h.size||t.width;(0,r.h)(h.start)&&(s=h.start),t.fullSize?st(t,s,o.top,a,n.outerHeight-o.bottom-o.top):st(t,s,e.top+h.placed,a,i),h.start=s,h.placed+=i,s=t.right}}e.x=s,e.y=a}var ut={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=(0,r.E)(t.options.layout.padding),s=Math.max(e-o.width,0),a=Math.max(n-o.height,0),u=function(t){const e=function(t){const e=[];let n,r,i,o,s,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}(t),n=$(e.filter((t=>t.box.fullSize)),!0),r=$(K(e,"left"),!0),i=$(K(e,"right")),o=$(K(e,"top"),!0),s=$(K(e,"bottom")),a=Q(e,"x"),u=Q(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(u).concat(s).concat(a),chartArea:K(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:o.concat(s).concat(a)}}(t.boxes),h=u.vertical,l=u.horizontal;(0,r.F)(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),p=Object.assign({},o);nt(p,(0,r.E)(i));const d=Object.assign({maxPadding:p,w:s,h:a,x:o.left,y:o.top},o),g=tt(h.concat(l),f);ot(u.fullSize,d,f,g),ot(h,d,f,g),ot(l,d,f,g)&&ot(h,d,f,g),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(d),at(u.leftAndTop,d,f,g),d.x+=d.w,d.y+=d.h,at(u.rightAndBottom,d,f,g),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},(0,r.F)(u.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}};class ht{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class lt extends ht{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ct="$chartjs",ft={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pt=t=>null===t||""===t;const dt=!!r.K&&{passive:!0};function gt(t,e,n){t.canvas.removeEventListener(e,n,dt)}function yt(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function mt(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||yt(n.addedNodes,r),e=e&&!yt(n.removedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function _t(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||yt(n.removedNodes,r),e=e&&!yt(n.addedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const vt=new Map;let bt=0;function xt(){const t=window.devicePixelRatio;t!==bt&&(bt=t,vt.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function wt(t,e,n){const i=t.canvas,o=i&&(0,r.I)(i);if(!o)return;const s=(0,r.L)(((t,e)=>{const r=o.clientWidth;n(t,e),r<o.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||s(n,r)}));return a.observe(o),function(t,e){vt.size||window.addEventListener("resize",xt),vt.set(t,e)}(t,s),a}function Et(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){vt.delete(t),vt.size||window.removeEventListener("resize",xt)}(t)}function Mt(t,e,n){const i=t.canvas,o=(0,r.L)((e=>{null!==t.ctx&&n(function(t,e){const n=ft[t.type]||t.type,{x:i,y:o}=(0,r.z)(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==o?o:null}}(e,t))}),t);return function(t,e,n){t.addEventListener(e,n,dt)}(i,e,o),o}class St extends ht{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[ct]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",pt(o)){const e=(0,r.J)(t,"width");void 0!==e&&(t.width=e)}if(pt(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=(0,r.J)(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[ct])return!1;const n=e[ct].initial;["height","width"].forEach((t=>{const i=n[t];(0,r.k)(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[ct],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:mt,detach:_t,resize:wt}[e]||Mt;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Et,detach:Et,resize:Et}[e]||gt)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return(0,r.G)(t,e,n,i)}isAttached(t){const e=(0,r.I)(t);return!(!e||!e.isConnected)}}function It(t){return!(0,r.M)()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?lt:St}class Ct{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return(0,r.x)(this.x)&&(0,r.x)(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach((t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),r}}function Pt(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),o=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],a=s.length,u=s[0],h=s[a-1],l=[];if(a>o)return function(t,e,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===s&&(e.push(t[i]),o++,s=n[o*r])}(e,l,s,a/o),l;const c=function(t,e,n){const i=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),o=e.length/n;if(!i)return Math.max(o,1);const s=(0,r.N)(i);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>o)return e}return Math.max(o,1)}(s,e,o);if(a>0){let t,n;const i=a>1?Math.round((h-u)/(a-1)):null;for(Lt(e,l,c,(0,r.k)(i)?0:u-i,u),t=0,n=a-1;t<n;t++)Lt(e,l,c,s[t],s[t+1]);return Lt(e,l,c,h,(0,r.k)(i)?e.length:h+i),l}return Lt(e,l,c),l}function Lt(t,e,n,i,o){const s=(0,r.v)(i,0),a=Math.min((0,r.v)(o,t.length),t.length);let u,h,l,c=0;for(n=Math.ceil(n),o&&(u=o-i,n=u/Math.floor(u/n)),l=s;l<0;)c++,l=Math.round(s+c*n);for(h=Math.max(s,0);h<a;h++)h===l&&(e.push(t[h]),c++,l=Math.round(s+c*n))}const Nt=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Ot=(t,e)=>Math.min(e||t,t);function At(t,e){const n=[],r=t.length/e,i=t.length;let o=0;for(;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function kt(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),o=t._startPixel,s=t._endPixel,a=1e-6;let u,h=t.getPixelForTick(i);if(!(n&&(u=1===r?Math.max(h-o,s-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(i-1))/2,h+=i<e?u:-u,h<o-a||h>s+a)))return h}function Rt(t){return t.drawTicks?t.tickLength:0}function Tt(t,e){if(!t.display)return 0;const n=(0,r.a0)(t.font,e),i=(0,r.E)(t.padding);return((0,r.b)(t.text)?t.text.length:1)*n.lineHeight+i.height}function Dt(t,e,n){let i=(0,r.a1)(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Ft extends Ct{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=(0,r.O)(t,Number.POSITIVE_INFINITY),e=(0,r.O)(e,Number.NEGATIVE_INFINITY),n=(0,r.O)(n,Number.POSITIVE_INFINITY),i=(0,r.O)(i,Number.NEGATIVE_INFINITY),{min:(0,r.O)(t,n),max:(0,r.O)(e,i),minDefined:(0,r.g)(t),maxDefined:(0,r.g)(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();if(o&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let r=0,u=a.length;r<u;++r)e=a[r].controller.getMinMax(this,t),o||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=o&&n>i?n:i,{min:(0,r.O)(n,(0,r.O)(i,n)),max:(0,r.O)(i,(0,r.O)(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,r.Q)(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,r.R)(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=a<this.ticks.length;this._convertTicksToLabels(u?At(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Pt(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,r.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,r.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,r.Q)(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),(0,r.Q)(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,r.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=(0,r.Q)(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){(0,r.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,r.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Ot(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,o=e.maxRotation;let s,a,u,h=i;if(!this._isVisible()||!e.display||i>=o||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),c=l.widest.width,f=l.highest.height,p=(0,r.S)(this.chart.width-c,0,this.maxWidth);s=t.offset?this.maxWidth/n:p/(n-1),c+6>s&&(s=p/(n-(t.offset?.5:1)),a=this.maxHeight-Rt(t.grid)-e.padding-Tt(t.title,this.chart.options.font),u=Math.sqrt(c*c+f*f),h=(0,r.U)(Math.min(Math.asin((0,r.S)((l.highest.height+6)/s,-1,1)),Math.asin((0,r.S)(a/u,-1,1))-Math.asin((0,r.S)(f/u,-1,1)))),h=Math.max(i,Math.min(o,h))),this.labelRotation=h}afterCalculateLabelRotation(){(0,r.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,r.Q)(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=Tt(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Rt(o)+s):(t.height=this.maxHeight,t.width=Rt(o)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:o,highest:s}=this._getLabelSizes(),u=2*n.padding,h=(0,r.t)(this.labelRotation),l=Math.cos(h),c=Math.sin(h);if(a){const e=n.mirror?0:c*o.width+l*s.height;t.height=Math.min(this.maxHeight,t.height+e+u)}else{const e=n.mirror?0:l*o.width+c*s.height;t.width=Math.min(this.maxWidth,t.width+e+u)}this._calculatePadding(e,i,c,l)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,u="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let l=0,c=0;a?u?(l=r*t.width,c=n*e.height):(l=n*t.height,c=r*e.width):"start"===i?c=e.width:"end"===i?l=t.width:"inner"!==i&&(l=t.width/2,c=e.width/2),this.paddingLeft=Math.max((l-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((c-h+o)*this.width/(this.width-h),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,r.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)(0,r.k)(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=At(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:o}=this,s=[],a=[],u=Math.floor(e/Ot(e,n));let h,l,c,f,p,d,g,y,m,_,v,b=0,x=0;for(h=0;h<e;h+=u){if(f=t[h].label,p=this._resolveTickFontOptions(h),i.font=d=p.string,g=o[d]=o[d]||{data:{},gc:[]},y=p.lineHeight,m=_=0,(0,r.k)(f)||(0,r.b)(f)){if((0,r.b)(f))for(l=0,c=f.length;l<c;++l)v=f[l],(0,r.k)(v)||(0,r.b)(v)||(m=(0,r.V)(i,g.data,g.gc,m,v),_+=y)}else m=(0,r.V)(i,g.data,g.gc,m,f),_=y;s.push(m),a.push(_),b=Math.max(m,b),x=Math.max(_,x)}!function(t,e){(0,r.F)(t,(t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}}))}(o,e);const w=s.indexOf(b),E=a.indexOf(x),M=t=>({width:s[t]||0,height:a[t]||0});return{first:M(0),last:M(e-1),widest:M(w),highest:M(E),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return(0,r.W)(this._alignToPixels?(0,r.X)(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return(0,r.j)(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=(n=this.chart.getContext(),i=this,(0,r.j)(n,{scale:i,type:"scale"})));var n,i}_tickSize(){const t=this.options.ticks,e=(0,r.t)(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=t.autoSkipPadding||0,a=o?o.widest.width+s:0,u=o?o.highest.height+s:0;return this.isHorizontal()?u*n>a*i?a/n:u/i:u*i<a*n?u/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:o,position:s,border:a}=i,u=o.offset,h=this.isHorizontal(),l=this.ticks.length+(u?1:0),c=Rt(o),f=[],p=a.setContext(this.getContext()),d=p.display?p.width:0,g=d/2,y=function(t){return(0,r.X)(n,t,d)};let m,_,v,b,x,w,E,M,S,I,C,P;if("top"===s)m=y(this.bottom),w=this.bottom-c,M=m-g,I=y(t.top)+g,P=t.bottom;else if("bottom"===s)m=y(this.top),I=t.top,P=y(t.bottom)-g,w=m+g,M=this.top+c;else if("left"===s)m=y(this.right),x=this.right-c,E=m-g,S=y(t.left)+g,C=t.right;else if("right"===s)m=y(this.left),S=t.left,C=y(t.right)-g,x=m+g,E=this.left+c;else if("x"===e){if("center"===s)m=y((t.top+t.bottom)/2+.5);else if((0,r.i)(s)){const t=Object.keys(s)[0],e=s[t];m=y(this.chart.scales[t].getPixelForValue(e))}I=t.top,P=t.bottom,w=m+g,M=w+c}else if("y"===e){if("center"===s)m=y((t.left+t.right)/2);else if((0,r.i)(s)){const t=Object.keys(s)[0],e=s[t];m=y(this.chart.scales[t].getPixelForValue(e))}x=m-g,E=x-c,S=t.left,C=t.right}const L=(0,r.v)(i.ticks.maxTicksLimit,l),N=Math.max(1,Math.ceil(l/L));for(_=0;_<l;_+=N){const t=this.getContext(_),e=o.setContext(t),i=a.setContext(t),s=e.lineWidth,l=e.color,c=i.dash||[],p=i.dashOffset,d=e.tickWidth,g=e.tickColor,y=e.tickBorderDash||[],m=e.tickBorderDashOffset;v=kt(this,_,u),void 0!==v&&(b=(0,r.X)(n,v,s),h?x=E=S=C=b:w=M=I=P=b,f.push({tx1:x,ty1:w,tx2:E,ty2:M,x1:S,y1:I,x2:C,y2:P,width:s,color:l,borderDash:c,borderDashOffset:p,tickWidth:d,tickColor:g,tickBorderDash:y,tickBorderDashOffset:m}))}return this._ticksLength=l,this._borderValue=m,f}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:o}=n,s=this.isHorizontal(),a=this.ticks,{align:u,crossAlign:h,padding:l,mirror:c}=o,f=Rt(n.grid),p=f+l,d=c?-l:p,g=-(0,r.t)(this.labelRotation),y=[];let m,_,v,b,x,w,E,M,S,I,C,P,L="middle";if("top"===i)w=this.bottom-d,E=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+d,E=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(f);E=t.textAlign,x=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(f);E=t.textAlign,x=t.x}else if("x"===e){if("center"===i)w=(t.top+t.bottom)/2+p;else if((0,r.i)(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)+p}E=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)x=(t.left+t.right)/2-p;else if((0,r.i)(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)}E=this._getYAxisLabelAlignment(f).textAlign}"y"===e&&("start"===u?L="top":"end"===u&&(L="bottom"));const N=this._getLabelSizes();for(m=0,_=a.length;m<_;++m){v=a[m],b=v.label;const t=o.setContext(this.getContext(m));M=this.getPixelForTick(m)+o.labelOffset,S=this._resolveTickFontOptions(m),I=S.lineHeight,C=(0,r.b)(b)?b.length:1;const e=C/2,n=t.color,u=t.textStrokeColor,l=t.textStrokeWidth;let f,p=E;if(s?(x=M,"inner"===E&&(p=m===_-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),P="top"===i?"near"===h||0!==g?-C*I+I/2:"center"===h?-N.highest.height/2-e*I+I:-N.highest.height+I/2:"near"===h||0!==g?I/2:"center"===h?N.highest.height/2-e*I:N.highest.height-C*I,c&&(P*=-1),0===g||t.showLabelBackdrop||(x+=I/2*Math.sin(g))):(w=M,P=(1-C)*I/2),t.showLabelBackdrop){const e=(0,r.E)(t.backdropPadding),n=N.heights[m],i=N.widths[m];let o=P-e.top,s=0-e.left;switch(L){case"middle":o-=n/2;break;case"bottom":o-=n}switch(E){case"center":s-=i/2;break;case"right":s-=i}f={left:s,top:o,width:i+e.width,height:n+e.height,color:t.backdropColor}}y.push({label:b,font:S,textOffset:P,options:{rotation:g,color:n,strokeColor:u,strokeWidth:l,textAlign:p,textBaseline:L,translation:[x,w],backdrop:f}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-(0,r.t)(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=t+i,s=this._getLabelSizes().widest.width;let a,u;return"left"===e?r?(u=this.right+i,"near"===n?a="left":"center"===n?(a="center",u+=s/2):(a="right",u+=s)):(u=this.right-o,"near"===n?a="right":"center"===n?(a="center",u-=s/2):(a="left",u=this.left)):"right"===e?r?(u=this.left+i,"near"===n?a="right":"center"===n?(a="center",u-=s/2):(a="left",u-=s)):(u=this.left+o,"near"===n?a="left":"center"===n?(a="center",u+=s/2):(a="right",u=this.right)):a="right",{textAlign:a,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const s=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,o=r.length;i<o;++i){const t=r[i];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),s=n.display?o.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,l,c,f;this.isHorizontal()?(h=(0,r.X)(t,this.left,s)-s/2,l=(0,r.X)(t,this.right,a)+a/2,c=f=u):(c=(0,r.X)(t,this.top,s)-s/2,f=(0,r.X)(t,this.bottom,a)+a/2,h=l=u),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(h,c),e.lineTo(l,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&(0,r.Y)(e,n);const i=this.getLabelItems(t);for(const t of i){const n=t.options,i=t.font,o=t.label,s=t.textOffset;(0,r.Z)(e,o,0,s,i,n)}n&&(0,r.$)(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const o=(0,r.a0)(n.font),s=(0,r.E)(n.padding),a=n.align;let u=o.lineHeight/2;"bottom"===e||"center"===e||(0,r.i)(e)?(u+=s.bottom,(0,r.b)(n.text)&&(u+=o.lineHeight*(n.text.length-1))):u+=s.top;const{titleX:h,titleY:l,maxWidth:c,rotation:f}=function(t,e,n,i){const{top:o,left:s,bottom:a,right:u,chart:h}=t,{chartArea:l,scales:c}=h;let f,p,d,g=0;const y=a-o,m=u-s;if(t.isHorizontal()){if(p=(0,r.a2)(i,s,u),(0,r.i)(n)){const t=Object.keys(n)[0],r=n[t];d=c[t].getPixelForValue(r)+y-e}else d="center"===n?(l.bottom+l.top)/2+y-e:Nt(t,n,e);f=u-s}else{if((0,r.i)(n)){const t=Object.keys(n)[0],r=n[t];p=c[t].getPixelForValue(r)-m+e}else p="center"===n?(l.left+l.right)/2-m+e:Nt(t,n,e);d=(0,r.a2)(i,a,o),g="left"===n?-r.H:r.H}return{titleX:p,titleY:d,maxWidth:f,rotation:g}}(this,u,e,a);(0,r.Z)(t,n.text,0,0,o,{color:n.color,maxWidth:c,rotation:f,textAlign:Dt(a,e,i),textBaseline:"middle",translation:[h,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=(0,r.v)(t.grid&&t.grid.z,-1),i=(0,r.v)(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Ft.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[n]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return(0,r.a0)(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bt{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,o=t.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,function(t,e,n){const i=(0,r.a4)(Object.create(null),[n?r.d.get(n):{},r.d.get(e),t.defaults]);r.d.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),o=i.pop(),s=[t].concat(i).join("."),a=e[n].split("."),u=a.pop(),h=a.join(".");r.d.route(s,o,h,u)}))}(e,t.defaultRoutes);t.descriptors&&r.d.describe(e,t.descriptors)}(t,s,n),this.override&&r.d.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in r.d[i]&&(delete r.d[i][n],this.override&&delete r.a3[n])}}class jt{constructor(){this.controllers=new Bt(w,"datasets",!0),this.elements=new Bt(Ct,"elements"),this.plugins=new Bt(Object,"plugins"),this.scales=new Bt(Ft,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):(0,r.F)(e,(e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,n){const i=(0,r.a5)(t);(0,r.Q)(n["before"+i],[],n),e[t](n),(0,r.Q)(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var zt=new jt;class Gt{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const o of t){const t=o.plugin,s=t[n],a=[e,i,o.options];if(!1===(0,r.Q)(s,a,t)&&i.cancelable)return!1}return!0}invalidate(){(0,r.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=(0,r.v)(n.options&&n.options.plugins,{}),o=function(t){const e={},n=[],r=Object.keys(zt.plugins.items);for(let t=0;t<r.length;t++)n.push(zt.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},r,i){const o=[],s=t.getContext();for(const a of e){const e=a.id,u=Ut(r[e],i);null!==u&&o.push({plugin:a,options:qt(t.config,{plugin:a,local:n[e]},u,s)})}return o}(t,o,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function Ut(t,e){return e||!1!==t?!0===t?{}:t:null}function qt(t,{plugin:e,local:n},r,i){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(r,o);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vt(t,e){const n=r.d.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ht(t,e){if("x"===t||"y"===t||"r"===t)return t;var n;if(t=e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.length>1&&Ht(t[0].toLowerCase(),e))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function Wt(t){const e=t.options||(t.options={});e.plugins=(0,r.v)(e.plugins,{}),e.scales=function(t,e){const n=r.a3[t.type]||{scales:{}},i=e.scales||{},o=Vt(t.type,e),s=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!(0,r.i)(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=Ht(t,e),u=function(t,e){return t===e?"_index_":"_value_"}(a,o),h=n.scales||{};s[t]=(0,r.ab)(Object.create(null),[{axis:a},e,h[a],h[u]])})),t.data.datasets.forEach((n=>{const o=n.type||t.type,a=n.indexAxis||Vt(o,e),u=(r.a3[o]||{}).scales||{};Object.keys(u).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),o=n[e+"AxisID"]||e;s[o]=s[o]||Object.create(null),(0,r.ab)(s[o],[{axis:e},i[o],u[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];(0,r.ab)(e,[r.d.scales[e.type],r.d.scale])})),s}(t,e)}function Yt(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Xt=new Map,Zt=new Set;function Jt(t,e){let n=Xt.get(t);return n||(n=e(),Xt.set(t,n),Zt.add(n)),n}const Kt=(t,e,n)=>{const i=(0,r.f)(e,n);void 0!==i&&t.add(i)};class Qt{constructor(t){this._config=function(t){return(t=t||{}).data=Yt(t.data),Wt(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Yt(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Wt(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Jt(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Jt(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Jt(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Jt(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:i,type:o}=this,s=this._cachedScopes(t,n),a=s.get(e);if(a)return a;const u=new Set;e.forEach((e=>{t&&(u.add(t),e.forEach((e=>Kt(u,t,e)))),e.forEach((t=>Kt(u,i,t))),e.forEach((t=>Kt(u,r.a3[o]||{},t))),e.forEach((t=>Kt(u,r.d,t))),e.forEach((t=>Kt(u,r.a6,t)))}));const h=Array.from(u);return 0===h.length&&h.push(Object.create(null)),Zt.has(e)&&s.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,r.a3[e]||{},r.d.datasets[e]||{},{type:e},r.d,r.a6]}resolveNamedOptions(t,e,n,i=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=$t(this._resolverCache,t,i);let u=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=(0,r.aa)(t);for(const o of e){const e=n(o),s=i(o),a=(s||e)&&t[o];if(e&&((0,r.a7)(a)||te(a))||s&&(0,r.b)(a))return!0}return!1}(s,e)){o.$shared=!1,n=(0,r.a7)(n)?n():n;const e=this.createResolver(t,n,a);u=(0,r.a8)(s,n,e)}for(const t of e)o[t]=u[t];return o}createResolver(t,e,n=[""],i){const{resolver:o}=$t(this._resolverCache,t,n);return(0,r.i)(e)?(0,r.a8)(o,e,void 0,i):o}}function $t(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let s=i.get(o);if(!s){s={resolver:(0,r.a9)(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(o,s)}return s}const te=t=>(0,r.i)(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||(0,r.a7)(t[n])),!1);const ee=["top","bottom","left","right","chartArea"];function ne(t,e){return"top"===t||"bottom"===t||-1===ee.indexOf(t)&&"x"===e}function re(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function ie(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),(0,r.Q)(n&&n.onComplete,[t],e)}function oe(t){const e=t.chart,n=e.options.animation;(0,r.Q)(n&&n.onProgress,[t],e)}function se(t){return(0,r.M)()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ae={},ue=t=>{const e=se(t);return Object.values(ae).filter((t=>t.canvas===e)).pop()};function he(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}class le{static defaults=r.d;static instances=ae;static overrides=r.a3;static registry=zt;static version="4.2.1";static getChart=ue;static register(...t){zt.add(...t),ce()}static unregister(...t){zt.remove(...t),ce()}constructor(t,e){const n=this.config=new Qt(e),i=se(t),o=ue(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||It(i)),this.platform.updateConfig(n);const u=this.platform.acquireContext(i,a.aspectRatio),h=u&&u.canvas,l=h&&h.height,c=h&&h.width;this.id=(0,r.ac)(),this.ctx=u,this.canvas=h,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,r.ad)((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],ae[this.id]=this,u&&h?(s.listen(this,"complete",ie),s.listen(this,"progress",oe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:o}=this;return(0,r.k)(t)?e&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return zt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,r.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,r.af)(this.canvas,this.ctx),this}stop(){return s.stop(this),this}resize(t,e){s.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,(0,r.ae)(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),(0,r.Q)(n.onResize,[this,s],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};(0,r.F)(t,((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let o=[];e&&(o=o.concat(Object.keys(e).map((t=>{const n=e[t],r=Ht(t,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),(0,r.F)(o,(e=>{const o=e.options,s=o.id,a=Ht(s,o),u=(0,r.v)(o.type,e.dtype);void 0!==o.position&&ne(o.position,a)===ne(e.dposition)||(o.position=e.dposition),i[s]=!0;let h=null;if(s in n&&n[s].type===u)h=n[s];else{h=new(zt.getScale(u))({id:s,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(o,t)})),(0,r.F)(i,((t,e)=>{t||delete n[e]})),(0,r.F)(n,(t=>{ut.configure(this,t,t.options),ut.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(re("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let o=this.getDatasetMeta(n);const s=i.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=s,o.indexAxis=i.indexAxis||Vt(s,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const e=zt.getController(s),{datasetElementType:i,dataElementType:a}=r.d.datasets[s];Object.assign(e,{dataElementType:zt.getElement(a),datasetElementType:i&&zt.getElement(i)}),o.controller=new e(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){(0,r.F)(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===o.indexOf(e);e.buildOrUpdateElements(n),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||(0,r.F)(o,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(re("z","_idx"));const{_active:a,_lastEvent:u}=this;u?this._eventHandler(u,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){(0,r.F)(this.scales,(t=>{ut.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(0,r.ag)(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){he(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!(0,r.ag)(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ut.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],(0,r.F)(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,(0,r.a7)(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(s.has(this)?this.attached&&!s.running(this)&&s.start(this):(this.draw(),ie({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,o=function(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}(t)||this.chartArea,s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&(0,r.Y)(e,{left:!1===n.left?0:o.left-n.left,right:!1===n.right?this.width:o.right+n.right,top:!1===n.top?0:o.top-n.top,bottom:!1===n.bottom?this.height:o.bottom+n.bottom}),t.controller.draw(),i&&(0,r.$)(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return(0,r.C)(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=Z.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=(0,r.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,i);(0,r.h)(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(o,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),s.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),(0,r.af)(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ae[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};(0,r.F)(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){(0,r.F)(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},(0,r.F)(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!(0,r.ah)(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=i(e,t),s=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:o}=this,s=e,a=this._getActiveElements(t,i,n,s),u=(0,r.ai)(t),h=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,(0,r.Q)(o.onHover,[t,a,this],this),u&&(0,r.Q)(o.onClick,[t,a,this],this));const l=!(0,r.ah)(a,i);return(l||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=h,l}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function ce(){return(0,r.F)(le.instances,(t=>t._plugins.invalidate()))}function fe(t,e,n,i){const o=(s=t.options.borderRadius,(0,r.ak)(s,["outerStart","outerEnd","innerStart","innerEnd"]));var s;const a=(n-e)/2,u=Math.min(a,i*e/2),h=t=>{const e=(n-Math.min(a,t))*i/2;return(0,r.S)(t,0,Math.min(a,e))};return{outerStart:h(o.outerStart),outerEnd:h(o.outerEnd),innerStart:(0,r.S)(o.innerStart,0,u),innerEnd:(0,r.S)(o.innerEnd,0,u)}}function pe(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function de(t,e,n,i,o,s){const{x:a,y:u,startAngle:h,pixelMargin:l,innerRadius:c}=e,f=Math.max(e.outerRadius+i+n-l,0),p=c>0?c+i+n+l:0;let d=0;const g=o-h;if(i){const t=((c>0?c-i:0)+(f>0?f-i:0))/2;d=(g-(0!==t?g*t/(t+i):g))/2}const y=(g-Math.max(.001,g*f-n/r.P)/f)/2,m=h+y+d,_=o-y-d,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=fe(e,p,f,_-m),E=f-v,M=f-b,S=m+v/E,I=_-b/M,C=p+x,P=p+w,L=m+x/C,N=_-w/P;if(t.beginPath(),s){const e=(S+I)/2;if(t.arc(a,u,f,S,e),t.arc(a,u,f,e,I),b>0){const e=pe(M,I,a,u);t.arc(e.x,e.y,b,I,_+r.H)}const n=pe(P,_,a,u);if(t.lineTo(n.x,n.y),w>0){const e=pe(P,N,a,u);t.arc(e.x,e.y,w,_+r.H,N+Math.PI)}const i=(_-w/p+(m+x/p))/2;if(t.arc(a,u,p,_-w/p,i,!0),t.arc(a,u,p,i,m+x/p,!0),x>0){const e=pe(C,L,a,u);t.arc(e.x,e.y,x,L+Math.PI,m-r.H)}const o=pe(E,m,a,u);if(t.lineTo(o.x,o.y),v>0){const e=pe(E,S,a,u);t.arc(e.x,e.y,v,m-r.H,S)}}else{t.moveTo(a,u);const e=Math.cos(S)*f+a,n=Math.sin(S)*f+u;t.lineTo(e,n);const r=Math.cos(I)*f+a,i=Math.sin(I)*f+u;t.lineTo(r,i)}t.closePath()}function ge(t,e,n,i,o){const{fullCircles:s,startAngle:a,circumference:u,options:h}=e,{borderWidth:l,borderJoinStyle:c}=h,f="inner"===h.borderAlign;if(!l)return;f?(t.lineWidth=2*l,t.lineJoin=c||"round"):(t.lineWidth=l,t.lineJoin=c||"bevel");let p=e.endAngle;if(s){de(t,e,n,i,p,o);for(let e=0;e<s;++e)t.stroke();isNaN(u)||(p=a+(u%r.T||r.T))}f&&function(t,e,n){const{startAngle:i,pixelMargin:o,x:s,y:a,outerRadius:u,innerRadius:h}=e;let l=o/u;t.beginPath(),t.arc(s,a,u,i-l,n+l),h>o?(l=o/h,t.arc(s,a,h,n+l,i-l,!0)):t.arc(s,a,o,n+r.H,i-r.H),t.closePath(),t.clip()}(t,e,p),s||(de(t,e,n,i,p,o),t.stroke())}class ye extends Ct{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:o,distance:s}=(0,r.D)(i,{x:t,y:e}),{startAngle:a,endAngle:u,innerRadius:h,outerRadius:l,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=this.options.spacing/2,p=(0,r.v)(c,u-a)>=r.T||(0,r.p)(o,a,u),d=(0,r.aj)(s,h+f,l+f);return p&&d}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:u}=this.options,h=(r+i)/2,l=(o+s+u+a)/2;return{x:e+Math.cos(h)*l,y:n+Math.sin(h)*l}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,o=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>r.T?Math.floor(n/r.T):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const u=i*(1-Math.sin(Math.min(r.P,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,o){const{fullCircles:s,startAngle:a,circumference:u}=e;let h=e.endAngle;if(s){de(t,e,n,i,h,o);for(let e=0;e<s;++e)t.fill();isNaN(u)||(h=a+(u%r.T||r.T))}de(t,e,n,i,h,o),t.fill()}(t,this,u,o,s),ge(t,this,u,o,s),t.restore()}}function me(t,e,n=e){t.lineCap=(0,r.v)(n.borderCapStyle,e.borderCapStyle),t.setLineDash((0,r.v)(n.borderDash,e.borderDash)),t.lineDashOffset=(0,r.v)(n.borderDashOffset,e.borderDashOffset),t.lineJoin=(0,r.v)(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=(0,r.v)(n.borderWidth,e.borderWidth),t.strokeStyle=(0,r.v)(n.borderColor,e.borderColor)}function _e(t,e,n){t.lineTo(n.x,n.y)}function ve(t,e,n={}){const r=t.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=e,u=Math.max(i,s),h=Math.min(o,a),l=i<s&&o<s||i>a&&o>a;return{count:r,start:u,loop:e.loop,ilen:h<u&&!l?r+h-u:h-u}}function be(t,e,n,i){const{points:o,options:s}=e,{count:a,start:u,loop:h,ilen:l}=ve(o,n,i),c=function(t){return t.stepped?r.ar:t.tension||"monotone"===t.cubicInterpolationMode?r.as:_e}(s);let f,p,d,{move:g=!0,reverse:y}=i||{};for(f=0;f<=l;++f)p=o[(u+(y?l-f:f))%a],p.skip||(g?(t.moveTo(p.x,p.y),g=!1):c(t,d,p,y,s.stepped),d=p);return h&&(p=o[(u+(y?l:0))%a],c(t,d,p,y,s.stepped)),!!h}function xe(t,e,n,r){const i=e.points,{count:o,start:s,ilen:a}=ve(i,n,r),{move:u=!0,reverse:h}=r||{};let l,c,f,p,d,g,y=0,m=0;const _=t=>(s+(h?a-t:t))%o,v=()=>{p!==d&&(t.lineTo(y,d),t.lineTo(y,p),t.lineTo(y,g))};for(u&&(c=i[_(0)],t.moveTo(c.x,c.y)),l=0;l<=a;++l){if(c=i[_(l)],c.skip)continue;const e=c.x,n=c.y,r=0|e;r===f?(n<p?p=n:n>d&&(d=n),y=(m*y+e)/++m):(v(),t.lineTo(e,n),f=r,m=0,p=d=n),g=n}v()}function we(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?xe:be}const Ee="function"==typeof Path2D;function Me(t,e,n,r){Ee&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),me(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:o}=e,s=we(e);for(const a of i)me(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class Se extends Ct{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;(0,r.al)(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,r.am)(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],o=this.points,s=(0,r.an)(this,{property:e,start:i,end:i});if(!s.length)return;const a=[],u=function(t){return t.stepped?r.ao:t.tension||"monotone"===t.cubicInterpolationMode?r.ap:r.aq}(n);let h,l;for(h=0,l=s.length;h<l;++h){const{start:r,end:l}=s[h],c=o[r],f=o[l];if(c===f){a.push(c);continue}const p=u(c,f,Math.abs((i-c[e])/(f[e]-c[e])),n.stepped);p[e]=t[e],a.push(p)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return we(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=we(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const s of r)o&=i(t,this,s,{start:e,end:e+n-1});return!!o}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Me(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ie(t,e,n,r){const i=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<i.radius+i.hitRadius}class Ce extends Ct{static id="point";static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return Ie(this,t,"x",e)}inYRange(t,e){return Ie(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!(0,r.C)(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,(0,r.at)(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Pe(t,e){const{x:n,y:r,base:i,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,u,h,l,c;return t.horizontal?(c=s/2,a=Math.min(n,i),u=Math.max(n,i),h=r-c,l=r+c):(c=o/2,a=n-c,u=n+c,h=Math.min(r,i),l=Math.max(r,i)),{left:a,top:h,right:u,bottom:l}}function Le(t,e,n,i){return t?0:(0,r.S)(e,n,i)}function Ne(t){const e=Pe(t),n=e.right-e.left,i=e.bottom-e.top,o=function(t,e,n){const i=t.options.borderWidth,o=t.borderSkipped,s=(0,r.av)(i);return{t:Le(o.top,s.top,0,n),r:Le(o.right,s.right,0,e),b:Le(o.bottom,s.bottom,0,n),l:Le(o.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,s=(0,r.aw)(o),a=Math.min(e,n),u=t.borderSkipped,h=i||(0,r.i)(o);return{topLeft:Le(!h||u.top||u.left,s.topLeft,0,a),topRight:Le(!h||u.top||u.right,s.topRight,0,a),bottomLeft:Le(!h||u.bottom||u.left,s.bottomLeft,0,a),bottomRight:Le(!h||u.bottom||u.right,s.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function Oe(t,e,n,i){const o=null===e,s=null===n,a=t&&!(o&&s)&&Pe(t,i);return a&&(o||(0,r.aj)(e,a.left,a.right))&&(s||(0,r.aj)(n,a.top,a.bottom))}function Ae(t,e){t.rect(e.x,e.y,e.w,e.h)}function ke(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,s=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+s,radius:t.radius}}class Re extends Ct{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:s}=Ne(this),a=(u=s.radius).topLeft||u.topRight||u.bottomLeft||u.bottomRight?r.au:Ae;var u;t.save(),s.w===o.w&&s.h===o.h||(t.beginPath(),a(t,ke(s,e,o)),t.clip(),a(t,ke(o,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,ke(o,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Oe(this,t,e,n)}inXRange(t,e){return Oe(this,t,null,e)}inYRange(t,e){return Oe(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}var Te=Object.freeze({__proto__:null,ArcElement:ye,LineElement:Se,PointElement:Ce,BarElement:Re});const De=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Fe=De.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function Be(t){return De[t%De.length]}function je(t){return Fe[t%Fe.length]}function ze(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof k?e=function(t,e){return t.backgroundColor=t.data.map((()=>Be(e++))),e}(n,e):i instanceof T?e=function(t,e){return t.backgroundColor=t.data.map((()=>je(e++))),e}(n,e):i&&(e=function(t,e){return t.borderColor=Be(e),t.backgroundColor=je(e),++e}(n,e))}}function Ge(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Ue={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:o}=i;if(!n.forceOverride&&(Ge(r)||(s=i)&&(s.borderColor||s.backgroundColor)||o&&Ge(o)))return;var s;const a=ze(t);r.forEach(a)}};function qe(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Ve(t){t.data.datasets.forEach((t=>{qe(t)}))}var He={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Ve(t);const i=t.width;t.data.datasets.forEach(((e,o)=>{const{_data:s,indexAxis:a}=e,u=t.getDatasetMeta(o),h=s||e.data;if("y"===(0,r.a)([a,t.options.indexAxis]))return;if(!u.controller.supportsDecimation)return;const l=t.scales[u.xAxisID];if("linear"!==l.type&&"time"!==l.type)return;if(t.options.parsing)return;let{start:c,count:f}=function(t,e){const n=e.length;let i,o=0;const{iScale:s}=t,{min:a,max:u,minDefined:h,maxDefined:l}=s.getUserBounds();return h&&(o=(0,r.S)((0,r.B)(e,s.axis,a).lo,0,n-1)),i=l?(0,r.S)((0,r.B)(e,s.axis,u).hi+1,o,n)-o:n-o,{start:o,count:i}}(u,h);if(f<=(n.threshold||4*i))return void qe(e);let p;switch((0,r.k)(s)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":p=function(t,e,n,r,i){const o=i.samples||r;if(o>=n)return t.slice(e,e+n);const s=[],a=(n-2)/(o-2);let u=0;const h=e+n-1;let l,c,f,p,d,g=e;for(s[u++]=t[g],l=0;l<o-2;l++){let r,i=0,o=0;const h=Math.floor((l+1)*a)+1+e,y=Math.min(Math.floor((l+2)*a)+1,n)+e,m=y-h;for(r=h;r<y;r++)i+=t[r].x,o+=t[r].y;i/=m,o/=m;const _=Math.floor(l*a)+1+e,v=Math.min(Math.floor((l+1)*a)+1,n)+e,{x:b,y:x}=t[g];for(f=p=-1,r=_;r<v;r++)p=.5*Math.abs((b-i)*(t[r].y-x)-(b-t[r].x)*(o-x)),p>f&&(f=p,c=t[r],d=r);s[u++]=c,g=d}return s[u++]=t[h],s}(h,c,f,i,n);break;case"min-max":p=function(t,e,n,i){let o,s,a,u,h,l,c,f,p,d,g=0,y=0;const m=[],_=e+n-1,v=t[e].x,b=t[_].x-v;for(o=e;o<e+n;++o){s=t[o],a=(s.x-v)/b*i,u=s.y;const e=0|a;if(e===h)u<p?(p=u,l=o):u>d&&(d=u,c=o),g=(y*g+s.x)/++y;else{const n=o-1;if(!(0,r.k)(l)&&!(0,r.k)(c)){const e=Math.min(l,c),r=Math.max(l,c);e!==f&&e!==n&&m.push({...t[e],x:g}),r!==f&&r!==n&&m.push({...t[r],x:g})}o>0&&n!==f&&m.push(t[n]),m.push(s),h=e,y=0,p=d=u,l=c=f=o}}return m}(h,c,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=p}))},destroy(t){Ve(t)}};function We(t,e,n,i){if(i)return;let o=e[t],s=n[t];return"angle"===t&&(o=(0,r.ay)(o),s=(0,r.ay)(s)),{property:t,start:o,end:s}}function Ye(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Xe(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Ze(t,e){let n=[],i=!1;return(0,r.b)(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=Ye(t,e,i);const s=i[t],a=i[e];null!==r?(o.push({x:s.x,y:r}),o.push({x:a.x,y:r})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:a.y}))})),o}(t,e),n.length?new Se({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Je(t){return t&&!1!==t.fill}function Ke(t,e,n){let i=t[e].fill;const o=[e];let s;if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!(0,r.g)(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function Qe(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=(0,r.v)(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);return!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if((0,r.i)(i))return!isNaN(i.value)&&i;let o=parseFloat(i);return(0,r.g)(o)&&Math.floor(o)===o?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);return!(n===e||n<0||n>=r)&&n}(i[0],e,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function $e(t,e,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:s,last:a,point:u}=tn(o,e,"x");if(!(!u||s&&a))if(s)r.unshift(u);else if(t.push(u),!a)break}t.push(...r)}function tn(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],s=t.segments,a=t.points;let u=!1,h=!1;for(let t=0;t<s.length;t++){const e=s[t],i=a[e.start][n],l=a[e.end][n];if((0,r.aj)(o,i,l)){u=o===i,h=o===l;break}}return{first:u,last:h,point:i}}class en{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:o,radius:s}=this;return e=e||{start:0,end:r.T},t.arc(i,o,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function nn(t){const{chart:e,fill:n,line:i}=t;if((0,r.g)(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],o=r.segments,s=r.points,a=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);a.push(Ze({x:null,y:e.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)$e(i,s[t],a)}return new Se({points:i,options:{}})}(t);if("shape"===n)return!0;const o=function(t){const e=t.scale||{};return e.getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,o=e.getLabels().length,s=i.reverse?e.max:e.min,a=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:(0,r.i)(t)?t.value:e.getBaseValue(),i}(n,e,s),u=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,s);return new en({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<o;++t)u.push(e.getPointPositionForValue(t,a));return u}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:(0,r.i)(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if((0,r.g)(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return o instanceof en?o:Ze(o,i)}function rn(t,e,n){const i=nn(e),{line:o,scale:s,axis:a}=e,u=o.options,h=u.fill,l=u.backgroundColor,{above:c=l,below:f=l}=h||{};i&&o.points.length&&((0,r.Y)(t,n),function(t,e){const{line:n,target:r,above:i,below:o,area:s,scale:a}=e,u=n._loop?"angle":e.axis;t.save(),"x"===u&&o!==i&&(on(t,r,s.top),sn(t,{line:n,target:r,color:i,scale:a,property:u}),t.restore(),t.save(),on(t,r,s.bottom));sn(t,{line:n,target:r,color:o,scale:a,property:u}),t.restore()}(t,{line:o,target:i,above:c,below:f,area:n,scale:s,axis:a}),(0,r.$)(t))}function on(t,e,n){const{segments:r,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of r){const{start:r,end:u}=a,h=i[r],l=i[Ye(r,u,i)];o?(t.moveTo(h.x,h.y),o=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(l.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function sn(t,e){const{line:n,target:i,property:o,color:s,scale:a}=e,u=function(t,e,n){const i=t.segments,o=t.points,s=e.points,a=[];for(const t of i){let{start:i,end:u}=t;u=Ye(i,u,o);const h=We(n,o[i],o[u],t.loop);if(!e.segments){a.push({source:t,target:h,start:o[i],end:o[u]});continue}const l=(0,r.an)(e,h);for(const e of l){const i=We(n,s[e.start],s[e.end],e.loop),u=(0,r.ax)(t,o,i);for(const t of u)a.push({source:t,target:e,start:{[n]:Xe(h,i,"start",Math.max)},end:{[n]:Xe(h,i,"end",Math.min)}})}}return a}(n,i,o);for(const{source:e,target:r,start:h,end:l}of u){const{style:{backgroundColor:u=s}={}}=e,c=!0!==i;t.save(),t.fillStyle=u,an(t,a,c&&We(o,h,l)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(c){f?t.closePath():un(t,i,l,o);const e=!!i.pathSegment(t,r,{move:f,reverse:!0});p=f&&e,p||un(t,i,h,o)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function an(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:o,start:s,end:a}=n||{};"x"===o&&(t.beginPath(),t.rect(s,r,a-s,i-r),t.clip())}function un(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var hn={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let o,s,a,u;for(s=0;s<r;++s)o=t.getDatasetMeta(s),a=o.dataset,u=null,a&&a.options&&a instanceof Se&&(u={visible:t.isDatasetVisible(s),index:s,fill:Qe(a,s,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=u,i.push(u);for(s=0;s<r;++s)u=i[s],u&&!1!==u.fill&&(u.fill=Ke(i,s,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),r&&n.fill&&rn(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;Je(n)&&rn(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;Je(r)&&"beforeDatasetDraw"===n.drawTime&&rn(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ln=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class cn extends Ct{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=(0,r.Q)(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=(0,r.a0)(n.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:u}=ln(n,o);let h,l;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,l=this._fitRows(s,o,a,u)+10):(l=this.maxHeight,h=this._fitCols(s,i,a,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+s;let l=t;i.textAlign="left",i.textBaseline="middle";let c=-1,f=-h;return this.legendItems.forEach(((t,p)=>{const d=n+e/2+i.measureText(t.text).width;(0===p||u[u.length-1]+d+2*s>o)&&(l+=h,u[u.length-(p>0?0:1)]=0,f+=h,c++),a[p]={left:0,top:f,row:c,width:d,height:r},u[u.length-1]+=d+s})),l}_fitCols(t,e,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t;let l=s,c=0,f=0,p=0,d=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:y}=function(t,e,n,r,i){const o=function(t,e,n,r){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+r.measureText(i).width}(r,t,e,n),s=function(t,e,n){let r=t;"string"!=typeof e.text&&(r=fn(e,n));return r}(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}(n,e,i,t,r);o>0&&f+y+2*s>h&&(l+=c+s,u.push({width:c,height:f}),p+=c+s,d++,c=f=0),a[o]={left:p,top:f,col:d,width:g,height:y},c=Math.max(c,g),f+=y+s})),l+=c,u.push({width:c,height:f}),l}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:o}}=this,s=(0,r.az)(o,this.left,this.width);if(this.isHorizontal()){let o=0,a=(0,r.a2)(n,this.left+i,this.right-this.lineWidths[o]);for(const u of e)o!==u.row&&(o=u.row,a=(0,r.a2)(n,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+t+i,u.left=s.leftForLtr(s.x(a),u.width),a+=u.width+i}else{let o=0,a=(0,r.a2)(n,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const u of e)u.col!==o&&(o=u.col,a=(0,r.a2)(n,this.top+t+i,this.bottom-this.columnSizes[o].height)),u.top=a,u.left+=this.left+i,u.left=s.leftForLtr(s.x(u.left),u.width),a+=u.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;(0,r.Y)(t,this),this._draw(),(0,r.$)(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:o,labels:s}=t,a=r.d.color,u=(0,r.az)(t.rtl,this.left,this.width),h=(0,r.a0)(s.font),{padding:l}=s,c=h.size,f=c/2;let p;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:d,boxHeight:g,itemHeight:y}=ln(s,c),m=this.isHorizontal(),_=this._computeTitleHeight();p=m?{x:(0,r.a2)(o,this.left+l,this.right-n[0]),y:this.top+l+_,line:0}:{x:this.left+l,y:(0,r.a2)(o,this.top+_+l,this.bottom-e[0].height),line:0},(0,r.aA)(this.ctx,t.textDirection);const v=y+l;this.legendItems.forEach(((b,x)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const w=i.measureText(b.text).width,E=u.textAlign(b.textAlign||(b.textAlign=s.textAlign)),M=d+f+w;let S=p.x,I=p.y;u.setWidth(this.width),m?x>0&&S+M+l>this.right&&(I=p.y+=v,p.line++,S=p.x=(0,r.a2)(o,this.left+l,this.right-n[p.line])):x>0&&I+v>this.bottom&&(S=p.x=S+e[p.line].width+l,p.line++,I=p.y=(0,r.a2)(o,this.top+_+l,this.bottom-e[p.line].height));if(function(t,e,n){if(isNaN(d)||d<=0||isNaN(g)||g<0)return;i.save();const o=(0,r.v)(n.lineWidth,1);if(i.fillStyle=(0,r.v)(n.fillStyle,a),i.lineCap=(0,r.v)(n.lineCap,"butt"),i.lineDashOffset=(0,r.v)(n.lineDashOffset,0),i.lineJoin=(0,r.v)(n.lineJoin,"miter"),i.lineWidth=o,i.strokeStyle=(0,r.v)(n.strokeStyle,a),i.setLineDash((0,r.v)(n.lineDash,[])),s.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:o},h=u.xPlus(t,d/2),l=e+f;(0,r.aD)(i,a,h,l,s.pointStyleWidth&&d)}else{const s=e+Math.max((c-g)/2,0),a=u.leftForLtr(t,d),h=(0,r.aw)(n.borderRadius);i.beginPath(),Object.values(h).some((t=>0!==t))?(0,r.au)(i,{x:a,y:s,w:d,h:g,radius:h}):i.rect(a,s,d,g),i.fill(),0!==o&&i.stroke()}i.restore()}(u.x(S),I,b),S=(0,r.aB)(E,S+d+f,m?S+M:this.right,t.rtl),function(t,e,n){(0,r.Z)(i,n.text,t,e+y/2,h,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})}(u.x(S),I,b),m)p.x+=M+l;else if("string"!=typeof b.text){const t=h.lineHeight;p.y+=fn(b,t)}else p.y+=v})),(0,r.aC)(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=(0,r.a0)(e.font),i=(0,r.E)(e.padding);if(!e.display)return;const o=(0,r.az)(t.rtl,this.left,this.width),s=this.ctx,a=e.position,u=n.size/2,h=i.top+u;let l,c=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),l=this.top+h,c=(0,r.a2)(t.align,c,this.right-f);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=h+(0,r.a2)(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const p=(0,r.a2)(a,c,c+f);s.textAlign=o.textAlign((0,r.a1)(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,(0,r.Z)(s,e.text,p,l,n)}_computeTitleHeight(){const t=this.options.title,e=(0,r.a0)(t.font),n=(0,r.E)(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,o;if((0,r.aj)(t,this.left,this.right)&&(0,r.aj)(e,this.top,this.bottom))for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],(0,r.aj)(t,i.left,i.left+i.width)&&(0,r.aj)(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,a=(o=n,null!==(i=s)&&null!==o&&i.datasetIndex===o.datasetIndex&&i.index===o.index);s&&!a&&(0,r.Q)(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!a&&(0,r.Q)(e.onHover,[t,n,this],this)}else n&&(0,r.Q)(e.onClick,[t,n,this],this);var i,o}}function fn(t,e){return e*(t.text?t.text.length+.5:0)}var pn={id:"legend",_element:cn,start(t,e,n){const r=t.legend=new cn({ctx:t.ctx,options:n,chart:t});ut.configure(t,r,n),ut.addBox(t,r)},stop(t){ut.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;ut.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:s,useBorderRadius:a,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const h=t.controller.getStyle(n?0:void 0),l=(0,r.E)(h.borderWidth);return{text:e[t.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:o||h.textAlign,borderRadius:a&&(u||h.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class dn extends Ct{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=(0,r.b)(n.text)?n.text.length:1;this._padding=(0,r.E)(n.padding);const o=i*(0,r.a0)(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:o,options:s}=this,a=s.align;let u,h,l,c=0;return this.isHorizontal()?(h=(0,r.a2)(a,n,o),l=e+t,u=o-n):("left"===s.position?(h=n+t,l=(0,r.a2)(a,i,e),c=-.5*r.P):(h=o-t,l=(0,r.a2)(a,e,i),c=.5*r.P),u=i-e),{titleX:h,titleY:l,maxWidth:u,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=(0,r.a0)(e.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:a,rotation:u}=this._drawArgs(i);(0,r.Z)(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:u,textAlign:(0,r.a1)(e.align),textBaseline:"middle",translation:[o,s]})}}var gn={id:"title",_element:dn,start(t,e,n){!function(t,e){const n=new dn({ctx:t.ctx,options:e,chart:t});ut.configure(t,n,e),ut.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;ut.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;ut.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const yn=new WeakMap;var mn={id:"subtitle",start(t,e,n){const r=new dn({ctx:t.ctx,options:n,chart:t});ut.configure(t,r,n),ut.addBox(t,r),yn.set(t,r)},stop(t){ut.removeBox(t,yn.get(t)),yn.delete(t)},beforeUpdate(t,e,n){const r=yn.get(t);ut.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _n={average(t){if(!t.length)return!1;let e,n,r=0,i=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r+=t.x,i+=t.y,++o}}return{x:r/o,y:i/o}},nearest(t,e){if(!t.length)return!1;let n,i,o,s=e.x,a=e.y,u=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=i.getCenterPoint(),n=(0,r.aE)(e,t);n<u&&(u=n,o=i)}}if(o){const t=o.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}};function vn(t,e){return e&&((0,r.b)(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function bn(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function xn(t,e){const{element:n,datasetIndex:r,index:i}=e,o=t.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function wn(t,e){const n=t.chart.ctx,{body:i,footer:o,title:s}=t,{boxWidth:a,boxHeight:u}=e,h=(0,r.a0)(e.bodyFont),l=(0,r.a0)(e.titleFont),c=(0,r.a0)(e.footerFont),f=s.length,p=o.length,d=i.length,g=(0,r.E)(e.padding);let y=g.height,m=0,_=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(y+=f*l.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){y+=d*(e.displayColors?Math.max(u,h.lineHeight):h.lineHeight)+(_-d)*h.lineHeight+(_-1)*e.bodySpacing}p&&(y+=e.footerMarginTop+p*c.lineHeight+(p-1)*e.footerSpacing);let v=0;const b=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=l.string,(0,r.F)(t.title,b),n.font=h.string,(0,r.F)(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?a+2+e.boxPadding:0,(0,r.F)(i,(t=>{(0,r.F)(t.before,b),(0,r.F)(t.lines,b),(0,r.F)(t.after,b)})),v=0,n.font=c.string,(0,r.F)(t.footer,b),n.restore(),m+=g.width,{width:m,height:y}}function En(t,e,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:u}}=t;let h="center";return"center"===r?h=i<=(a+u)/2?"left":"right":i<=o/2?h="left":i>=s-o/2&&(h="right"),function(t,e,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===t&&i+o+s>e.width||"right"===t&&i-o-s<0||void 0}(h,t,e,n)&&(h="center"),h}function Mn(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||En(t,e,n,r),yAlign:r}}function Sn(t,e,n,i){const{caretSize:o,caretPadding:s,cornerRadius:a}=t,{xAlign:u,yAlign:h}=n,l=o+s,{topLeft:c,topRight:f,bottomLeft:p,bottomRight:d}=(0,r.aw)(a);let g=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,u);const y=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,h,l);return"center"===h?"left"===u?g+=l:"right"===u&&(g-=l):"left"===u?g-=Math.max(c,p)+o:"right"===u&&(g+=Math.max(f,d)+o),{x:(0,r.S)(g,0,i.width-e.width),y:(0,r.S)(y,0,i.height-e.height)}}function In(t,e,n){const i=(0,r.E)(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Cn(t){return vn([],bn(t))}function Pn(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ln={beforeTitle:r.aF,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:r.aF,beforeBody:r.aF,beforeLabel:r.aF,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return(0,r.k)(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:r.aF,afterBody:r.aF,beforeFooter:r.aF,footer:r.aF,afterFooter:r.aF};function Nn(t,e,n,r){const i=t[e].call(n,r);return void 0===i?Ln[e].call(n,r):i}class On extends Ct{static positioners=_n;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new l(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,(0,r.j)(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=Nn(n,"beforeTitle",this,t),i=Nn(n,"title",this,t),o=Nn(n,"afterTitle",this,t);let s=[];return s=vn(s,bn(r)),s=vn(s,bn(i)),s=vn(s,bn(o)),s}getBeforeBody(t,e){return Cn(Nn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return(0,r.F)(t,(t=>{const e={before:[],lines:[],after:[]},r=Pn(n,t);vn(e.before,bn(Nn(r,"beforeLabel",this,t))),vn(e.lines,Nn(r,"label",this,t)),vn(e.after,bn(Nn(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return Cn(Nn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=Nn(n,"beforeFooter",this,t),i=Nn(n,"footer",this,t),o=Nn(n,"afterFooter",this,t);let s=[];return s=vn(s,bn(r)),s=vn(s,bn(i)),s=vn(s,bn(o)),s}_createItems(t){const e=this._active,n=this.chart.data,i=[],o=[],s=[];let a,u,h=[];for(a=0,u=e.length;a<u;++a)h.push(xn(this.chart,e[a]));return t.filter&&(h=h.filter(((e,r,i)=>t.filter(e,r,i,n)))),t.itemSort&&(h=h.sort(((e,r)=>t.itemSort(e,r,n)))),(0,r.F)(h,(e=>{const n=Pn(t.callbacks,e);i.push(Nn(n,"labelColor",this,e)),o.push(Nn(n,"labelPointStyle",this,e)),s.push(Nn(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=h,h}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const t=_n[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=wn(this,n),s=Object.assign({},t,e),a=Mn(this.chart,n,s),u=Sn(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:u.x,y:u.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:o}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:u,topRight:h,bottomLeft:l,bottomRight:c}=(0,r.aw)(a),{x:f,y:p}=t,{width:d,height:g}=e;let y,m,_,v,b,x;return"center"===o?(b=p+g/2,"left"===i?(y=f,m=y-s,v=b+s,x=b-s):(y=f+d,m=y+s,v=b-s,x=b+s),_=y):(m="left"===i?f+Math.max(u,l)+s:"right"===i?f+d-Math.max(h,c)-s:this.caretX,"top"===o?(v=p,b=v-s,y=m-s,_=m+s):(v=p+g,b=v+s,y=m+s,_=m-s),x=v),{x1:y,x2:m,x3:_,y1:v,y2:b,y3:x}}drawTitle(t,e,n){const i=this.title,o=i.length;let s,a,u;if(o){const h=(0,r.az)(n.rtl,this.x,this.width);for(t.x=In(this,n.titleAlign,n),e.textAlign=h.textAlign(n.titleAlign),e.textBaseline="middle",s=(0,r.a0)(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,u=0;u<o;++u)e.fillText(i[u],h.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,u+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,o){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:u,boxWidth:h,boxPadding:l}=o,c=(0,r.a0)(o.bodyFont),f=In(this,"left",o),p=i.x(f),d=u<c.lineHeight?(c.lineHeight-u)/2:0,g=e.y+d;if(o.usePointStyle){const e={radius:Math.min(h,u)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(p,h)+h/2,l=g+u/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,(0,r.at)(t,e,n,l),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,(0,r.at)(t,e,n,l)}else{t.lineWidth=(0,r.i)(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(p,h-l),n=i.leftForLtr(i.xPlus(p,1),h-l-2),a=(0,r.aw)(s.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,(0,r.au)(t,{x:e,y:g,w:h,h:u,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),(0,r.au)(t,{x:n,y:g+1,w:h-2,h:u-2,radius:a}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,g,h,u),t.strokeRect(e,g,h,u),t.fillStyle=s.backgroundColor,t.fillRect(n,g+1,h-2,u-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:u,boxWidth:h,boxPadding:l}=n,c=(0,r.a0)(n.bodyFont);let f=c.lineHeight,p=0;const d=(0,r.az)(n.rtl,this.x,this.width),g=function(n){e.fillText(n,d.x(t.x+p),t.y+f/2),t.y+=f+o},y=d.textAlign(s);let m,_,v,b,x,w,E;for(e.textAlign=s,e.textBaseline="middle",e.font=c.string,t.x=In(this,y,n),e.fillStyle=n.bodyColor,(0,r.F)(this.beforeBody,g),p=a&&"right"!==y?"center"===s?h/2+l:h+2+l:0,b=0,w=i.length;b<w;++b){for(m=i[b],_=this.labelTextColors[b],e.fillStyle=_,(0,r.F)(m.before,g),v=m.lines,a&&v.length&&(this._drawColorBox(e,t,b,d,n),f=Math.max(c.lineHeight,u)),x=0,E=v.length;x<E;++x)g(v[x]),f=c.lineHeight;(0,r.F)(m.after,g)}p=0,f=c.lineHeight,(0,r.F)(this.afterBody,g),t.y-=o}drawFooter(t,e,n){const i=this.footer,o=i.length;let s,a;if(o){const u=(0,r.az)(n.rtl,this.x,this.width);for(t.x=In(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=u.textAlign(n.footerAlign),e.textBaseline="middle",s=(0,r.a0)(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,a=0;a<o;++a)e.fillText(i[a],u.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:o,yAlign:s}=this,{x:a,y:u}=t,{width:h,height:l}=n,{topLeft:c,topRight:f,bottomLeft:p,bottomRight:d}=(0,r.aw)(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+c,u),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+h-f,u),e.quadraticCurveTo(a+h,u,a+h,u+f),"center"===s&&"right"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+h,u+l-d),e.quadraticCurveTo(a+h,u+l,a+h-d,u+l),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+p,u+l),e.quadraticCurveTo(a,u+l,a,u+l-p),"center"===s&&"left"===o&&this.drawCaret(t,e,n,i),e.lineTo(a,u+c),e.quadraticCurveTo(a,u,a+c,u),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=_n[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=wn(this,t),s=Object.assign({},n,this._size),a=Mn(e,t,s),u=Sn(t,s,a,e);r._to===u.x&&i._to===u.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=(0,r.E)(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,e),(0,r.aA)(t,e.textDirection),o.y+=s.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),(0,r.aC)(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),o=!(0,r.ah)(n,i),s=this._positionChanged(i,e);(o||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],s=this._getActiveElements(t,o,e,n),a=this._positionChanged(s,t),u=e||!(0,r.ah)(s,o)||a;return u&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),u}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e;const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,o=_n[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}var An={id:"tooltip",_element:On,positioners:_n,afterInit(t,e,n){n&&(t.tooltip=new On({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ln},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},kn=Object.freeze({__proto__:null,Colors:Ue,Decimation:He,Filler:hn,Legend:pn,SubTitle:mn,Title:gn,Tooltip:An});function Rn(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function Tn(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Dn extends Ft{static id="category";static defaults={ticks:{callback:Tn}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if((0,r.k)(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:(0,r.S)(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:Rn(n,t,(0,r.v)(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return Tn.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Fn(t,e,{horizontal:n,minRotation:i}){const o=(0,r.t)(i),s=(n?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}class Bn extends Ft{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return(0,r.k)(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const s=t=>i=e?i:t,a=t=>o=n?o:t;if(t){const t=(0,r.s)(i),e=(0,r.s)(o);t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(i===o){let e=0===o?1:Math.abs(.05*o);a(o+e),t||s(i-e)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=function(t,e){const n=[],{bounds:i,step:o,min:s,max:a,precision:u,count:h,maxTicks:l,maxDigits:c,includeBounds:f}=t,p=o||1,d=l-1,{min:g,max:y}=e,m=!(0,r.k)(s),_=!(0,r.k)(a),v=!(0,r.k)(h),b=(y-g)/(c+1);let x,w,E,M,S=(0,r.aH)((y-g)/d/p)*p;if(S<1e-14&&!m&&!_)return[{value:g},{value:y}];M=Math.ceil(y/S)-Math.floor(g/S),M>d&&(S=(0,r.aH)(M*S/d/p)*p),(0,r.k)(u)||(x=Math.pow(10,u),S=Math.ceil(S*x)/x),"ticks"===i?(w=Math.floor(g/S)*S,E=Math.ceil(y/S)*S):(w=g,E=y),m&&_&&o&&(0,r.aI)((a-s)/o,S/1e3)?(M=Math.round(Math.min((a-s)/S,l)),S=(a-s)/M,w=s,E=a):v?(w=m?s:w,E=_?a:E,M=h-1,S=(E-w)/M):(M=(E-w)/S,M=(0,r.aJ)(M,Math.round(M),S/1e3)?Math.round(M):Math.ceil(M));const I=Math.max((0,r.aK)(S),(0,r.aK)(w));x=Math.pow(10,(0,r.k)(u)?I:u),w=Math.round(w*x)/x,E=Math.round(E*x)/x;let C=0;for(m&&(f&&w!==s?(n.push({value:s}),w<s&&C++,(0,r.aJ)(Math.round((w+C*S)*x)/x,s,Fn(s,b,t))&&C++):w<s&&C++);C<M;++C)n.push({value:Math.round((w+C*S)*x)/x});return _&&f&&E!==a?n.length&&(0,r.aJ)(n[n.length-1].value,a,Fn(a,b,t))?n[n.length-1].value=a:n.push({value:a}):_&&E!==a||n.push({value:E}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&(0,r.aG)(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return(0,r.o)(t,this.chart.options.locale,this.options.ticks.format)}}class jn extends Bn{static id="linear";static defaults={ticks:{callback:r.aL.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=(0,r.g)(t)?t:0,this.max=(0,r.g)(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=(0,r.t)(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const zn=t=>Math.floor((0,r.aM)(t)),Gn=(t,e)=>Math.pow(10,zn(t)+e);function Un(t){return 1===t/Math.pow(10,zn(t))}function qn(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Vn(t,{min:e,max:n}){e=(0,r.O)(t.min,e);const i=[],o=zn(e);let s=function(t,e){let n=zn(e-t);for(;qn(t,e,n)>10;)n++;for(;qn(t,e,n)<10;)n--;return Math.min(n,zn(t))}(e,n),a=s<0?Math.pow(10,Math.abs(s)):1;const u=Math.pow(10,s),h=o>s?Math.pow(10,o):0,l=Math.round((e-h)*a)/a,c=Math.floor((e-h)/u/10)*u*10;let f=Math.floor((l-c)/Math.pow(10,s)),p=(0,r.O)(t.min,Math.round((h+c+f*Math.pow(10,s))*a)/a);for(;p<n;)i.push({value:p,major:Un(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,a=s>=0?1:a),p=Math.round((h+c+f*Math.pow(10,s))*a)/a;const d=(0,r.O)(t.max,p);return i.push({value:d,major:Un(d),significand:f}),i}class Hn extends Ft{static id="logarithmic";static defaults={ticks:{callback:r.aL.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Bn.prototype.parse.apply(this,[t,e]);if(0!==n)return(0,r.g)(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=(0,r.g)(t)?Math.max(0,t):null,this.max=(0,r.g)(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,r.g)(this._userMin)&&(this.min=t===Gn(this.min,0)?Gn(this.min,-1):Gn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,o=t=>r=e?r:t;n===r&&(n<=0?(i(1),o(10)):(i(Gn(n,-1)),o(Gn(r,1)))),n<=0&&i(Gn(r,-1)),r<=0&&o(Gn(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=Vn({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&(0,r.aG)(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":(0,r.o)(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=(0,r.aM)(t),this._valueRange=(0,r.aM)(this.max)-(0,r.aM)(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:((0,r.aM)(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Wn(t){const e=t.ticks;if(e.display&&t.display){const t=(0,r.E)(e.backdropPadding);return(0,r.v)(e.font&&e.font.size,r.d.font.size)+t.height}return 0}function Yn(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Xn(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],s=t._pointLabels.length,a=t.options.pointLabels,u=a.centerPointLabels?r.P/s:0;for(let f=0;f<s;f++){const s=a.setContext(t.getPointLabelContext(f));o[f]=s.padding;const p=t.getPointPosition(f,t.drawingArea+o[f],u),d=(0,r.a0)(s.font),g=(h=t.ctx,l=d,c=t._pointLabels[f],c=(0,r.b)(c)?c:[c],{w:(0,r.aN)(h,l.string,c),h:c.length*l.lineHeight});i[f]=g;const y=(0,r.ay)(t.getIndexAngle(f)+u),m=Math.round((0,r.U)(y));Zn(n,e,y,Yn(m,p.x,g.w,0,180),Yn(m,p.y,g.h,90,270))}var h,l,c;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],o=t._pointLabels.length,s=t.options,a=Wn(s)/2,u=t.drawingArea,h=s.pointLabels.centerPointLabels?r.P/o:0;for(let s=0;s<o;s++){const o=t.getPointPosition(s,u+a+n[s],h),l=Math.round((0,r.U)((0,r.ay)(o.angle+r.H))),c=e[s],f=Qn(o.y,c.h,l),p=Jn(l),d=Kn(o.x,c.w,p);i.push({x:o.x,y:f,textAlign:p,left:d,top:f,right:d+c.w,bottom:f+c.h})}return i}(t,i,o)}function Zn(t,e,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,u=0;r.start<e.l?(a=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(u=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-u)):i.end>e.b&&(u=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+u))}function Jn(t){return 0===t||180===t?"center":t<180?"left":"right"}function Kn(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Qn(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function $n(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,r.T);else{let n=t.getPointPosition(0,e);o.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),o.lineTo(n.x,n.y)}}class tr extends Bn{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:r.aL.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=(0,r.E)(Wn(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=(0,r.g)(t)&&!isNaN(t)?t:0,this.max=(0,r.g)(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wn(this.options))}generateTickLabels(t){Bn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=(0,r.Q)(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Xn(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){const e=r.T/(this._pointLabels.length||1),n=this.options.startAngle||0;return(0,r.ay)(t*e+(0,r.t)(n))}getDistanceFromCenterForValue(t){if((0,r.k)(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if((0,r.k)(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return(0,r.j)(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-r.H+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),$n(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:o}=e,s=this._pointLabels.length;let a,u,h;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let o=e-1;o>=0;o--){const e=i.setContext(t.getPointLabelContext(o)),s=(0,r.a0)(e.font),{x:a,y:u,textAlign:h,left:l,top:c,right:f,bottom:p}=t._pointLabelItems[o],{backdropColor:d}=e;if(!(0,r.k)(d)){const t=(0,r.aw)(e.borderRadius),i=(0,r.E)(e.backdropPadding);n.fillStyle=d;const o=l-i.left,s=c-i.top,a=f-l+i.width,u=p-c+i.height;Object.values(t).some((t=>0!==t))?(n.beginPath(),(0,r.au)(n,{x:o,y:s,w:a,h:u,radius:t}),n.fill()):n.fillRect(o,s,a,u)}(0,r.Z)(n,t._pointLabels[o],a,u+s.lineHeight/2,s,{color:e.color,textAlign:h,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){u=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),r=i.setContext(n),a=o.setContext(n);!function(t,e,n,r,i){const o=t.ctx,s=e.circular,{color:a,lineWidth:u}=e;!s&&!r||!a||!u||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=u,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),$n(t,n,s,r),o.closePath(),o.stroke(),o.restore())}(this,r,u,s,a)}})),n.display){for(t.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:o}=r;o&&i&&(t.lineWidth=o,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,u=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,u),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&!e.reverse)return;const u=n.setContext(this.getContext(a)),h=(0,r.a0)(u.font);if(o=this.getDistanceFromCenterForValue(this.ticks[a].value),u.showLabelBackdrop){t.font=h.string,s=t.measureText(i.label).width,t.fillStyle=u.backdropColor;const e=(0,r.E)(u.backdropPadding);t.fillRect(-s/2-e.left,-o-h.size/2-e.top,s+e.width,h.size+e.height)}(0,r.Z)(t,i.label,0,-o,h,{color:u.color})})),t.restore()}drawTitle(){}}const er={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nr=Object.keys(er);function rr(t,e){return t-e}function ir(t,e){if((0,r.k)(e))return null;const n=t._adapter,{parser:i,round:o,isoWeekday:s}=t._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),(0,r.g)(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null===a?null:(o&&(a="week"!==o||!(0,r.x)(s)&&!0!==s?n.startOf(a,o):n.startOf(a,"isoWeek",s)),+a)}function or(t,e,n,r){const i=nr.length;for(let o=nr.indexOf(t);o<i-1;++o){const t=er[nr[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return nr[o]}return nr[i-1]}function sr(t,e,n){if(n){if(n.length){const{lo:i,hi:o}=(0,r.aP)(n,e);t[n[i]>=e?n[i]:n[o]]=!0}}else t[e]=!0}function ar(t,e,n){const r=[],i={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(t,e,n,r){const i=t._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value;let a,u;for(a=o;a<=s;a=+i.add(a,1,r))u=n[a],u>=0&&(e[u].major=!0);return e}(t,r,i,n):r}class ur extends Ft{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new U._date(t.adapters.date);i.init(e),(0,r.ab)(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:ir(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:s,maxDefined:a}=this.getUserBounds();function u(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(o=Math.max(o,t.max))}s&&a||(u(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||u(this.getMinMax(!1))),i=(0,r.g)(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),o=(0,r.g)(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,s=this.max,a=(0,r.aO)(i,o,s);return this._unit=e.unit||(n.autoSkip?or(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,n,r,i){for(let o=nr.length-1;o>=nr.indexOf(n);o--){const n=nr[o];if(er[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return nr[n?nr.indexOf(n):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=nr.indexOf(t)+1,n=nr.length;e<n;++e)if(er[nr[e]].common)return nr[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&a.reverse(),ar(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,i=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),o=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;i=(0,r.S)(i,0,s),o=(0,r.S)(o,0,s),this._offsets={start:i,end:o,factor:1/(i+1+o)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,o=i.time,s=o.unit||or(o.minUnit,e,n,this._getLabelCapacity(e)),a=(0,r.v)(i.ticks.stepSize,1),u="week"===s&&o.isoWeekday,h=(0,r.x)(u)||!0===u,l={};let c,f,p=e;if(h&&(p=+t.startOf(p,"isoWeek",u)),p=+t.startOf(p,h?"day":s),t.diff(n,e,s)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+s);const d="data"===i.ticks.source&&this.getDataTimestamps();for(c=p,f=0;c<n;c=+t.add(c,a,s),f++)sr(l,c,d);return c!==n&&"ticks"!==i.bounds&&1!==f||sr(l,c,d),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,i){const o=this.options,s=o.ticks.callback;if(s)return(0,r.Q)(s,[t,e,n],this);const a=o.time.displayFormats,u=this._unit,h=this._majorUnit,l=u&&a[u],c=h&&a[h],f=n[e],p=h&&c&&f&&f.major;return this._adapter.format(t,i||(p?c:l))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=(0,r.t)(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*s,h:n*s+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,ar(this,[t],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(ir(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return(0,r._)(t.sort(rr))}}function hr(t,e,n){let i,o,s,a,u=0,h=t.length-1;n?(e>=t[u].pos&&e<=t[h].pos&&({lo:u,hi:h}=(0,r.B)(t,"pos",e)),({pos:i,time:s}=t[u]),({pos:o,time:a}=t[h])):(e>=t[u].time&&e<=t[h].time&&({lo:u,hi:h}=(0,r.B)(t,"time",e)),({time:i,pos:s}=t[u]),({time:o,pos:a}=t[h]));const l=o-i;return l?s+(a-s)*(e-i)/l:s}class lr extends ur{static id="timeseries";static defaults=ur.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=hr(e,this.min),this._tableRange=hr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let o,s,a,u,h;for(o=0,s=t.length;o<s;++o)u=t[o],u>=e&&u<=n&&r.push(u);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)h=r[o+1],a=r[o-1],u=r[o],Math.round((h+a)/2)!==u&&i.push({time:u,pos:o/(s-1)});return i}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(hr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return hr(this._table,n*this._tableRange+this._minPos,!0)}}var cr=Object.freeze({__proto__:null,CategoryScale:Dn,LinearScale:jn,LogarithmicScale:Hn,RadialLinearScale:tr,TimeScale:ur,TimeSeriesScale:lr});const fr=[j,Te,kn,cr]})),o.register("c7mKY",(function(t,e){n(t.exports,"aF",(()=>i)),n(t.exports,"ac",(()=>s)),n(t.exports,"k",(()=>a)),n(t.exports,"b",(()=>u)),n(t.exports,"i",(()=>h)),n(t.exports,"g",(()=>l)),n(t.exports,"O",(()=>c)),n(t.exports,"v",(()=>f)),n(t.exports,"m",(()=>p)),n(t.exports,"n",(()=>d)),n(t.exports,"Q",(()=>g)),n(t.exports,"F",(()=>y)),n(t.exports,"ah",(()=>m)),n(t.exports,"a4",(()=>x)),n(t.exports,"ab",(()=>w)),n(t.exports,"f",(()=>S)),n(t.exports,"a5",(()=>I)),n(t.exports,"h",(()=>C)),n(t.exports,"a7",(()=>P)),n(t.exports,"ag",(()=>L)),n(t.exports,"ai",(()=>N)),n(t.exports,"P",(()=>O)),n(t.exports,"T",(()=>A)),n(t.exports,"H",(()=>D)),n(t.exports,"aM",(()=>j)),n(t.exports,"s",(()=>z)),n(t.exports,"aJ",(()=>G)),n(t.exports,"aH",(()=>U)),n(t.exports,"N",(()=>q)),n(t.exports,"x",(()=>V)),n(t.exports,"aI",(()=>H)),n(t.exports,"aG",(()=>W)),n(t.exports,"t",(()=>Y)),n(t.exports,"U",(()=>X)),n(t.exports,"aK",(()=>Z)),n(t.exports,"D",(()=>J)),n(t.exports,"aE",(()=>K)),n(t.exports,"ay",(()=>$)),n(t.exports,"p",(()=>tt)),n(t.exports,"S",(()=>et)),n(t.exports,"W",(()=>nt)),n(t.exports,"aj",(()=>rt)),n(t.exports,"aP",(()=>it)),n(t.exports,"B",(()=>ot)),n(t.exports,"A",(()=>st)),n(t.exports,"aO",(()=>at)),n(t.exports,"l",(()=>ht)),n(t.exports,"u",(()=>lt)),n(t.exports,"_",(()=>ct)),n(t.exports,"r",(()=>ft)),n(t.exports,"L",(()=>pt)),n(t.exports,"ad",(()=>dt)),n(t.exports,"a1",(()=>gt)),n(t.exports,"a2",(()=>yt)),n(t.exports,"aB",(()=>mt)),n(t.exports,"q",(()=>_t)),n(t.exports,"w",(()=>vt)),n(t.exports,"e",(()=>Et)),n(t.exports,"c",(()=>St)),n(t.exports,"o",(()=>Nt)),n(t.exports,"aL",(()=>At)),n(t.exports,"a3",(()=>kt)),n(t.exports,"a6",(()=>Rt)),n(t.exports,"d",(()=>Bt)),n(t.exports,"V",(()=>jt)),n(t.exports,"aN",(()=>zt)),n(t.exports,"X",(()=>Gt)),n(t.exports,"af",(()=>Ut)),n(t.exports,"at",(()=>qt)),n(t.exports,"aD",(()=>Vt)),n(t.exports,"C",(()=>Ht)),n(t.exports,"Y",(()=>Wt)),n(t.exports,"$",(()=>Yt)),n(t.exports,"ar",(()=>Xt)),n(t.exports,"as",(()=>Zt)),n(t.exports,"Z",(()=>Jt)),n(t.exports,"au",(()=>$t)),n(t.exports,"ak",(()=>ie)),n(t.exports,"av",(()=>oe)),n(t.exports,"aw",(()=>se)),n(t.exports,"E",(()=>ae)),n(t.exports,"a0",(()=>ue)),n(t.exports,"a",(()=>he)),n(t.exports,"R",(()=>le)),n(t.exports,"j",(()=>ce)),n(t.exports,"a9",(()=>fe)),n(t.exports,"a8",(()=>pe)),n(t.exports,"aa",(()=>de)),n(t.exports,"y",(()=>Se)),n(t.exports,"al",(()=>Ae)),n(t.exports,"M",(()=>ke)),n(t.exports,"I",(()=>Re)),n(t.exports,"z",(()=>ze)),n(t.exports,"G",(()=>Ue)),n(t.exports,"ae",(()=>qe)),n(t.exports,"K",(()=>Ve)),n(t.exports,"J",(()=>He)),n(t.exports,"aq",(()=>We)),n(t.exports,"ao",(()=>Ye)),n(t.exports,"ap",(()=>Xe)),n(t.exports,"az",(()=>Ke)),n(t.exports,"aA",(()=>Qe)),n(t.exports,"aC",(()=>$e)),n(t.exports,"ax",(()=>nn)),n(t.exports,"an",(()=>rn)),n(t.exports,"am",(()=>on));
/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
var r=o("bFoGN");function i(){}const s=(()=>{let t=0;return()=>t++})();function a(t){return null==t}function u(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function h(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function c(t,e){return l(t)?t:e}function f(t,e){return void 0===t?e:t}const p=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,d=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function g(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function y(t,e,n,r){let i,o,s;if(u(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(h(t))for(s=Object.keys(t),o=s.length,i=0;i<o;i++)e.call(n,t[s[i]],s[i])}function m(t,e){let n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function _(t){if(u(t))return t.map(_);if(h(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=_(t[n[i]]);return e}return t}function v(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function b(t,e,n,r){if(!v(t))return;const i=e[t],o=n[t];h(i)&&h(o)?x(i,o,r):e[t]=_(o)}function x(t,e,n){const r=u(e)?e:[e],i=r.length;if(!h(t))return t;const o=(n=n||{}).merger||b;let s;for(let e=0;e<i;++e){if(s=r[e],!h(s))continue;const i=Object.keys(s);for(let e=0,r=i.length;e<r;++e)o(i[e],t,s,n)}return t}function w(t,e){return x(t,e,{merger:E})}function E(t,e,n){if(!v(t))return;const r=e[t],i=n[t];h(r)&&h(i)?w(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=_(i))}const M={"":t=>t,x:t=>t.x,y:t=>t.y};function S(t,e){const n=M[e]||(M[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function I(t){return t.charAt(0).toUpperCase()+t.slice(1)}const C=t=>void 0!==t,P=t=>"function"==typeof t,L=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function N(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const O=Math.PI,A=2*O,k=A+O,R=Number.POSITIVE_INFINITY,T=O/180,D=O/2,F=O/4,B=2*O/3,j=Math.log10,z=Math.sign;function G(t,e,n){return Math.abs(t-e)<n}function U(t){const e=Math.round(t);t=G(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(j(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function q(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r==0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}function V(t){return!isNaN(parseFloat(t))&&isFinite(t)}function H(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function W(t,e,n){let r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Y(t){return t*(O/180)}function X(t){return t*(180/O)}function Z(t){if(!l(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function J(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*O&&(o+=A),{angle:o,distance:i}}function K(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Q(t,e){return(t-e+k)%A-O}function $(t){return(t%A+A)%A}function tt(t,e,n,r){const i=$(t),o=$(e),s=$(n),a=$(o-i),u=$(s-i),h=$(i-o),l=$(i-s);return i===o||i===s||r&&o===s||a>u&&h<l}function et(t,e,n){return Math.max(e,Math.min(n,t))}function nt(t){return et(t,-32768,32767)}function rt(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function it(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const ot=(t,e,n,r)=>it(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),st=(t,e,n)=>it(t,n,(r=>t[r][e]>=n));function at(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const ut=["push","pop","shift","splice","unshift"];function ht(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ut.forEach((e=>{const n="_onData"+I(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const i=r.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[n]&&t[n](...e)})),i}})})))}function lt(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(ut.forEach((e=>{delete t[e]})),delete t._chartjs)}function ct(t){const e=new Set;let n,r;for(n=0,r=t.length;n<r;++n)e.add(t[n]);return e.size===r?t:Array.from(e)}const ft="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function pt(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,ft.call(window,(()=>{r=!1,t.apply(e,n)})))}}function dt(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const gt=t=>"start"===t?"left":"end"===t?"right":"center",yt=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,mt=(t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e;function _t(t,e,n){const r=e.length;let i=0,o=r;if(t._sorted){const{iScale:s,_parsed:a}=t,u=s.axis,{min:h,max:l,minDefined:c,maxDefined:f}=s.getUserBounds();c&&(i=et(Math.min(ot(a,s.axis,h).lo,n?r:ot(e,u,s.getPixelForValue(h)).lo),0,r-1)),o=f?et(Math.max(ot(a,s.axis,l,!0).hi+1,n?0:ot(e,u,s.getPixelForValue(l),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function vt(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const bt=t=>0===t||1===t,xt=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*A/n),wt=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*A/n)+1,Et={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*D),easeOutSine:t=>Math.sin(t*D),easeInOutSine:t=>-.5*(Math.cos(O*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>bt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>bt(t)?t:xt(t,.075,.3),easeOutElastic:t=>bt(t)?t:wt(t,.075,.3),easeInOutElastic(t){const e=.1125;return bt(t)?t:t<.5?.5*xt(2*t,e,.45):.5+.5*wt(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Et.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Et.easeInBounce(2*t):.5*Et.easeOutBounce(2*t-1)+.5};function Mt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function St(t){return Mt(t)?t:new(0,r.Color)(t)}function It(t){return Mt(t)?t:new(0,r.Color)(t).saturate(.5).darken(.1).hexString()}const Ct=["x","y","borderWidth","radius","tension"],Pt=["color","borderColor","backgroundColor"];const Lt=new Map;function Nt(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Lt.get(n);return r||(r=new Intl.NumberFormat(t,e),Lt.set(n,r)),r}(e,n).format(t)}const Ot={values:t=>u(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const s=j(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(u,this.options.ticks.format),Nt(t,r,u)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(j(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?Ot.numeric.call(this,t,e,n):""}};var At={formatters:Ot};const kt=Object.create(null),Rt=Object.create(null);function Tt(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function Dt(t,e,n){return"string"==typeof e?x(Tt(t,e),n):x(Tt(t,""),e)}class Ft{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>It(e.backgroundColor),this.hoverBorderColor=(t,e)=>It(e.borderColor),this.hoverColor=(t,e)=>It(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Dt(this,t,e)}get(t){return Tt(this,t)}describe(t,e){return Dt(Rt,t,e)}override(t,e){return Dt(kt,t,e)}route(t,e,n,r){const i=Tt(this,t),o=Tt(this,n),s="_"+e;Object.defineProperties(i,{[s]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[r];return h(t)?Object.assign({},e,t):f(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach((t=>t(this)))}}var Bt=new Ft({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Pt},numbers:{type:"number",properties:Ct}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:At.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function jt(t,e,n,r,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function zt(t,e,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let s=0;const a=n.length;let h,l,c,f,p;for(h=0;h<a;h++)if(f=n[h],null!=f&&!0!==u(f))s=jt(t,i,o,s,f);else if(u(f))for(l=0,c=f.length;l<c;l++)p=f[l],null==p||u(p)||(s=jt(t,i,o,s,p));t.restore();const d=o.length/2;if(d>n.length){for(h=0;h<d;h++)delete i[o[h]];o.splice(0,d)}return s}function Gt(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Ut(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function qt(t,e,n,r){Vt(t,e,n,r,null)}function Vt(t,e,n,r,i){let o,s,a,u,h,l,c,f;const p=e.pointStyle,d=e.rotation,g=e.radius;let y=(d||0)*T;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,g,0,0,A):t.arc(n,r,g,0,A),t.closePath();break;case"triangle":l=i?i/2:g,t.moveTo(n+Math.sin(y)*l,r-Math.cos(y)*g),y+=B,t.lineTo(n+Math.sin(y)*l,r-Math.cos(y)*g),y+=B,t.lineTo(n+Math.sin(y)*l,r-Math.cos(y)*g),t.closePath();break;case"rectRounded":h=.516*g,u=g-h,s=Math.cos(y+F)*u,c=Math.cos(y+F)*(i?i/2-h:u),a=Math.sin(y+F)*u,f=Math.sin(y+F)*(i?i/2-h:u),t.arc(n-c,r-a,h,y-O,y-D),t.arc(n+f,r-s,h,y-D,y),t.arc(n+c,r+a,h,y,y+D),t.arc(n-f,r+s,h,y+D,y+O),t.closePath();break;case"rect":if(!d){u=Math.SQRT1_2*g,l=i?i/2:u,t.rect(n-l,r-u,2*l,2*u);break}y+=F;case"rectRot":c=Math.cos(y)*(i?i/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(n-c,r-a),t.lineTo(n+f,r-s),t.lineTo(n+c,r+a),t.lineTo(n-f,r+s),t.closePath();break;case"crossRot":y+=F;case"cross":c=Math.cos(y)*(i?i/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(n-c,r-a),t.lineTo(n+c,r+a),t.moveTo(n+f,r-s),t.lineTo(n-f,r+s);break;case"star":c=Math.cos(y)*(i?i/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(n-c,r-a),t.lineTo(n+c,r+a),t.moveTo(n+f,r-s),t.lineTo(n-f,r+s),y+=F,c=Math.cos(y)*(i?i/2:g),s=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(n-c,r-a),t.lineTo(n+c,r+a),t.moveTo(n+f,r-s),t.lineTo(n-f,r+s);break;case"line":s=i?i/2:Math.cos(y)*g,a=Math.sin(y)*g,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(y)*(i?i/2:g),r+Math.sin(y)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Ht(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yt(t){t.restore()}function Xt(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Zt(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Jt(t,e,n,r,i,o={}){const s=u(e)?e:[e],h=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);a(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&Qt(t,o.backdrop),h&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),a(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,r,o.maxWidth)),t.fillText(c,n,r,o.maxWidth),Kt(t,n,r,c,o),r+=i.lineHeight;t.restore()}function Kt(t,e,n,r,i){if(i.strikethrough||i.underline){const o=t.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,u=n-o.actualBoundingBoxAscent,h=n+o.actualBoundingBoxDescent,l=i.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,l),t.lineTo(a,l),t.stroke()}}function Qt(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function $t(t,e){const{x:n,y:r,w:i,h:o,radius:s}=e;t.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-D,O,!0),t.lineTo(n,r+o-s.bottomLeft),t.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,O,D,!0),t.lineTo(n+i-s.bottomRight,r+o),t.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,D,0,!0),t.lineTo(n+i,r+s.topRight),t.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-D,!0),t.lineTo(n+s.topLeft,r)}const te=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ne(t,e){const n=(""+t).match(te);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const re=t=>+t||0;function ie(t,e){const n={},r=h(e),i=r?Object.keys(e):e,o=h(t)?r?n=>f(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=re(o(t));return n}function oe(t){return ie(t,{top:"y",right:"x",bottom:"y",left:"x"})}function se(t){return ie(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ae(t){const e=oe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ue(t,e){t=t||{},e=e||Bt.font;let n=f(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=f(t.style,e.style);r&&!(""+r).match(ee)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:f(t.family,e.family),lineHeight:ne(f(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:f(t.weight,e.weight),string:""};return i.string=function(t){return!t||a(t.size)||a(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function he(t,e,n,r){let i,o,s,a=!0;for(i=0,o=t.length;i<o;++i)if(s=t[i],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==n&&u(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function le(t,e,n){const{min:r,max:i}=t,o=d(e,(i-r)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function ce(t,e){return Object.assign(Object.create(t),e)}function fe(t,e=[""],n=t,r,i=(()=>t[0])){C(r)||(r=Ee("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>fe([i,...t],e,n,r)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>me(n,r,(()=>function(t,e,n,r){let i;for(const o of e)if(i=Ee(ge(o,t),n),C(i))return ye(t,i)?xe(n,r,t,i):i}(r,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Me(t).includes(e),ownKeys:t=>Me(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function pe(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:de(t,r),setContext:e=>pe(t,e,n,r),override:i=>pe(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>me(t,e,(()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=t;let a=r[e];P(a)&&s.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(o,s||r),a.delete(t),ye(t,e)&&(e=xe(i._scopes,i,t,e));return e}(e,a,t,n));u(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if(C(o.index)&&r(t))e=e[o.index%e.length];else if(h(e[0])){const n=e,r=i._scopes.filter((t=>t!==n));e=[];for(const u of n){const n=xe(r,i,t,u);e.push(pe(n,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));ye(e,a)&&(a=pe(a,i,o&&o[e],s));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function de(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:P(n)?n:()=>n,isIndexable:P(r)?r:()=>r}}const ge=(t,e)=>t?t+I(e):e,ye=(t,e)=>h(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function me(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function _e(t,e,n){return P(t)?t(e,n):t}const ve=(t,e)=>!0===t?e:"string"==typeof t?S(e,t):void 0;function be(t,e,n,r,i){for(const o of e){const e=ve(n,o);if(e){t.add(e);const o=_e(e._fallback,n,i);if(C(o)&&o!==n&&o!==r)return o}else if(!1===e&&C(r)&&n!==r)return null}return!1}function xe(t,e,n,r){const i=e._rootScopes,o=_e(e._fallback,n,r),s=[...t,...i],a=new Set;a.add(r);let l=we(a,s,n,o||n,r);return null!==l&&((!C(o)||o===n||(l=we(a,s,o,l,r),null!==l))&&fe(Array.from(a),[""],i,o,(()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return u(i)&&h(n)?n:i||{}}(e,n,r))))}function we(t,e,n,r,i){for(;n;)n=be(t,e,n,r,i);return n}function Ee(t,e){for(const n of e){if(!n)continue;const e=n[t];if(C(e))return e}}function Me(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Se(t,e,n,r){const{iScale:i}=t,{key:o="r"}=this._parsing,s=new Array(r);let a,u,h,l;for(a=0,u=r;a<u;++a)h=a+n,l=e[h],s[a]={r:i.parse(S(l,o),h)};return s}const Ie=Number.EPSILON||1e-14,Ce=(t,e)=>e<t.length&&!t[e].skip&&t[e],Pe=t=>"x"===t?"y":"x";function Le(t,e,n,r){const i=t.skip?e:t,o=e,s=n.skip?e:n,a=K(o,i),u=K(s,o);let h=a/(a+u),l=u/(a+u);h=isNaN(h)?0:h,l=isNaN(l)?0:l;const c=r*h,f=r*l;return{previous:{x:o.x-c*(s.x-i.x),y:o.y-c*(s.y-i.y)},next:{x:o.x+f*(s.x-i.x),y:o.y+f*(s.y-i.y)}}}function Ne(t,e="x"){const n=Pe(e),r=t.length,i=Array(r).fill(0),o=Array(r);let s,a,u,h=Ce(t,0);for(s=0;s<r;++s)if(a=u,u=h,h=Ce(t,s+1),u){if(h){const t=h[e]-u[e];i[s]=0!==t?(h[n]-u[n])/t:0}o[s]=a?h?z(i[s-1])!==z(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(t,e,n){const r=t.length;let i,o,s,a,u,h=Ce(t,0);for(let l=0;l<r-1;++l)u=h,h=Ce(t,l+1),u&&h&&(G(e[l],0,Ie)?n[l]=n[l+1]=0:(i=n[l]/e[l],o=n[l+1]/e[l],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[l]=i*s*e[l],n[l+1]=o*s*e[l])))}(t,i,o),function(t,e,n="x"){const r=Pe(n),i=t.length;let o,s,a,u=Ce(t,0);for(let h=0;h<i;++h){if(s=a,a=u,u=Ce(t,h+1),!a)continue;const i=a[n],l=a[r];s&&(o=(i-s[n])/3,a[`cp1${n}`]=i-o,a[`cp1${r}`]=l-o*e[h]),u&&(o=(u[n]-i)/3,a[`cp2${n}`]=i+o,a[`cp2${r}`]=l+o*e[h])}}(t,o,e)}function Oe(t,e,n){return Math.max(Math.min(t,n),e)}function Ae(t,e,n,r,i){let o,s,a,u;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Ne(t,i);else{let n=r?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],u=Le(n,a,t[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=u.previous.x,a.cp1y=u.previous.y,a.cp2x=u.next.x,a.cp2y=u.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,o,s,a=Ht(t[0],e);for(n=0,r=t.length;n<r;++n)s=o,o=a,a=n<r-1&&Ht(t[n+1],e),o&&(i=t[n],s&&(i.cp1x=Oe(i.cp1x,e.left,e.right),i.cp1y=Oe(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Oe(i.cp2x,e.left,e.right),i.cp2y=Oe(i.cp2y,e.top,e.bottom)))}(t,n)}function ke(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Re(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Te(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const De=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const Fe=["top","right","bottom","left"];function Be(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=Fe[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const je=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ze(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=De(n),o="border-box"===i.boxSizing,s=Be(i,"padding"),a=Be(i,"border","width"),{x:u,y:h,box:l}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=r;let s,a,u=!1;if(je(i,o,t.target))s=i,a=o;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,a=r.clientY-t.top,u=!0}return{x:s,y:a,box:u}}(t,n),c=s.left+(l&&a.left),f=s.top+(l&&a.top);let{width:p,height:d}=e;return o&&(p-=s.width+a.width,d-=s.height+a.height),{x:Math.round((u-c)/p*n.width/r),y:Math.round((h-f)/d*n.height/r)}}const Ge=t=>Math.round(10*t)/10;function Ue(t,e,n,r){const i=De(t),o=Be(i,"margin"),s=Te(i.maxWidth,t,"clientWidth")||R,a=Te(i.maxHeight,t,"clientHeight")||R,u=function(t,e,n){let r,i;if(void 0===e||void 0===n){const o=Re(t);if(o){const t=o.getBoundingClientRect(),s=De(o),a=Be(s,"border","width"),u=Be(s,"padding");e=t.width-u.width-a.width,n=t.height-u.height-a.height,r=Te(s.maxWidth,o,"clientWidth"),i=Te(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||R,maxHeight:i||R}}(t,e,n);let{width:h,height:l}=u;if("content-box"===i.boxSizing){const t=Be(i,"border","width"),e=Be(i,"padding");h-=e.width+t.width,l-=e.height+t.height}h=Math.max(0,h-o.width),l=Math.max(0,r?h/r:l-o.height),h=Ge(Math.min(h,s,u.maxWidth)),l=Ge(Math.min(l,a,u.maxHeight)),h&&!l&&(l=Ge(h/2));return(void 0!==e||void 0!==n)&&r&&u.height&&l>u.height&&(l=u.height,h=Ge(Math.floor(l*r))),{width:h,height:l}}function qe(t,e,n){const r=e||1,i=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(t.currentDevicePixelRatio=r,s.height=i,s.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const Ve=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function He(t,e){const n=function(t,e){return De(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function We(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ye(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function Xe(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=We(t,i,n),a=We(i,o,n),u=We(o,e,n),h=We(s,a,n),l=We(a,u,n);return We(h,l,n)}const Ze=function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}},Je=function(){return{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}};function Ke(t,e,n){return t?Ze(e,n):Je()}function Qe(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $e(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function tn(t){return"angle"===t?{between:tt,compare:Q,normalize:$}:{between:rt,compare:(t,e)=>t-e,normalize:t=>t}}function en({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function nn(t,e,n){if(!n)return[t];const{property:r,start:i,end:o}=n,s=e.length,{compare:a,between:u,normalize:h}=tn(r),{start:l,end:c,loop:f,style:p}=function(t,e,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=tn(r),u=e.length;let h,l,{start:c,end:f,loop:p}=t;if(p){for(c+=u,f+=u,h=0,l=u;h<l&&s(a(e[c%u][r]),i,o);++h)c--,f--;c%=u,f%=u}return f<c&&(f+=u),{start:c,end:f,loop:p,style:t.style}}(t,e,n),d=[];let g,y,m,_=!1,v=null;const b=()=>_||u(i,m,g)&&0!==a(i,m),x=()=>!_||0===a(o,g)||u(o,m,g);for(let t=l,n=l;t<=c;++t)y=e[t%s],y.skip||(g=h(y[r]),g!==m&&(_=u(g,i,o),null===v&&b()&&(v=0===a(g,i)?t:n),null!==v&&x()&&(d.push(en({start:v,end:t,loop:f,count:s,style:p})),v=null),n=t,m=g));return null!==v&&d.push(en({start:v,end:c,loop:f,count:s,style:p})),d}function rn(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const o=nn(r[i],t.points,e);o.length&&n.push(...o)}return n}function on(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,n,r){let i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(n,i,o,r);if(!0===r)return sn(t,[{start:s,end:a,loop:o}],n,e);return sn(t,function(t,e,n,r){const i=t.length,o=[];let s,a=e,u=t[e];for(s=e+1;s<=n;++s){const n=t[s%i];n.skip||n.stop?u.skip||(r=!1,o.push({start:e%i,end:(s-1)%i,loop:r}),e=a=n.stop?s:null):(a=s,u.skip&&(e=s)),u=n}return null!==a&&o.push({start:e%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!t._fullLoop&&0===s&&a===i-1),n,e)}function sn(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),o=an(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,u=n.length,h=[];let l=o,c=e[0].start,f=c;function p(t,e,r,i){const o=a?-1:1;if(t!==e){for(t+=u;n[t%u].skip;)t-=o;for(;n[e%u].skip;)e+=o;t%u!=e%u&&(h.push({start:t%u,end:e%u,loop:r,style:i}),l=i,c=e%u)}}for(const t of e){c=a?c:t.start;let e,o=n[c%u];for(f=c+1;f<=t.end;f++){const a=n[f%u];e=an(r.setContext(ce(i,{type:"segment",p0:o,p1:a,p0DataIndex:(f-1)%u,p1DataIndex:f%u,datasetIndex:s}))),un(e,l)&&p(c,f-1,t.loop,l),o=a,l=e}c<f-1&&p(c,f-1,t.loop,l)}return h}(t,e,n,r):e}function an(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function un(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}})),o.register("bFoGN",(function(t,e){
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
function r(t){return t+.5|0}n(t.exports,"Color",(()=>T));const i=(t,e,n)=>Math.max(Math.min(t,n),e);function o(t){return i(r(2.55*t),0,255)}function s(t){return i(r(255*t),0,255)}function a(t){return i(r(t/2.55)/100,0,1)}function u(t){return i(r(100*t),0,100)}const h={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},l=[..."0123456789ABCDEF"],c=t=>l[15&t],f=t=>l[(240&t)>>4]+l[15&t],p=t=>(240&t)>>4==(15&t);function d(t){var e=(t=>p(t.r)&&p(t.g)&&p(t.b)&&p(t.a))(t)?c:f;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const g=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function m(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function _(t,e,n){const r=y(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function v(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),s=(i+o)/2;let a,u,h;return i!==o&&(h=i-o,u=s>.5?h/(2-i-o):h/(i+o),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,h,i),a=60*a+.5),[0|a,u||0,s]}function b(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(s)}function x(t,e,n){return b(y,t,e,n)}function w(t){return(t%360+360)%360}function E(t){const e=g.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?o(+e[5]):s(+e[5]));const i=w(+e[2]),a=+e[3]/100,u=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return b(_,t,e,n)}(i,a,u):"hsv"===e[1]?function(t,e,n){return b(m,t,e,n)}(i,a,u):x(i,a,u),{r:n[0],g:n[1],b:n[2],a:r}}const M={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},S={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let I;function C(t){I||(I=function(){const t={},e=Object.keys(S),n=Object.keys(M);let r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,M[o]);o=parseInt(S[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),I.transparent=[0,0,0,0]);const e=I[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const P=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const L=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,N=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function O(t,e,n){if(t){let r=v(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=x(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function A(t,e){return t?Object.assign(e||{},t):t}function k(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=s(t[3]))):(e=A(t,{r:0,g:0,b:0,a:1})).a=s(e.a),e}function R(t){return"r"===t.charAt(0)?function(t){const e=P.exec(t);let n,r,s,a=255;if(e){if(e[7]!==n){const t=+e[7];a=e[8]?o(t):i(255*t,0,255)}return n=+e[1],r=+e[3],s=+e[5],n=255&(e[2]?o(n):i(n,0,255)),r=255&(e[4]?o(r):i(r,0,255)),s=255&(e[6]?o(s):i(s,0,255)),{r:n,g:r,b:s,a:a}}}(t):E(t)}class T{constructor(t){if(t instanceof T)return t;const e=typeof t;let n;var r,i,o;"object"===e?n=k(t):"string"===e&&(o=(r=t).length,"#"===r[0]&&(4===o||5===o?i={r:255&17*h[r[1]],g:255&17*h[r[2]],b:255&17*h[r[3]],a:5===o?17*h[r[4]]:255}:7!==o&&9!==o||(i={r:h[r[1]]<<4|h[r[2]],g:h[r[3]]<<4|h[r[4]],b:h[r[5]]<<4|h[r[6]],a:9===o?h[r[7]]<<4|h[r[8]]:255})),n=i||C(t)||R(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=A(this._rgb);return t&&(t.a=a(t.a)),t}set rgb(t){this._rgb=k(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${a(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?d(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=v(t),n=e[0],r=u(e[1]),i=u(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${a(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const o=e===i?.5:e,s=2*o-1,a=n.a-r.a,u=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;i=1-u,n.r=255&u*n.r+i*r.r+.5,n.g=255&u*n.g+i*r.g+.5,n.b=255&u*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=N(a(t.r)),i=N(a(t.g)),o=N(a(t.b));return{r:s(L(r+n*(N(a(e.r))-r))),g:s(L(i+n*(N(a(e.g))-i))),b:s(L(o+n*(N(a(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new T(this.rgb)}alpha(t){return this._rgb.a=s(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=r(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return O(this._rgb,2,t),this}darken(t){return O(this._rgb,2,-t),this}saturate(t){return O(this._rgb,1,t),this}desaturate(t){return O(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=v(t);n[0]=w(n[0]+e),n=x(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}})),o.register("8QTk7",(function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,s=Object.create(i.prototype),a=new C(r||[]);return o(s,"_invoke",{value:E(t,n,a)}),s}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p={};function d(){}function g(){}function y(){}var m={};l(m,a,(function(){return this}));var _=Object.getPrototypeOf,v=_&&_(_(P([])));v&&v!==e&&i.call(v,a)&&(m=v);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,s,a,u){var h=f(t[o],t,s);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==n(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(h.arg)}var s;o(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function E(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return L()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=M(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function M(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,M(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return g.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,h,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new w(c(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(b),l(b,h,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var s=t.apply(e,n);function a(t){i(s,r,o,a,u,"next",t)}function u(t){i(s,r,o,a,u,"throw",t)}a(void 0)}))}}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,s=void 0,s=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===n(s)?s:String(s)),i)}var o,s}function a(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function u(t,e){return p(t,g(t,e,"get"))}function h(t,e,n,r){return f(t,e),c(n,"set"),y(t,n,r),r}function l(t,e,n){return f(t,e),c(n,"get"),p(t,n)}function c(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function f(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function p(t,e){return e.get?e.get.call(t):e.value}function d(t,e,n){return y(t,g(t,e,"set"),n),n}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function y(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=void 0;var m=new WeakMap,_=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,m,{writable:!0,value:void 0}),this.name=e,this.view=n,this.source=r,this.field=i,this.gradation_or_classes=o,d(this,m,!1),o?this.setGradation("rgb(255,0,0)","",NaN,NaN):this.setClasses({}),this}var e,n,i,c,f,p;return e=t,n=[{key:"setExtrude",value:function(t,e){return this.field_ground=t,this.field_height=e,d(this,m,!0),this}},{key:"to3D",value:function(t){return void 0===this.field_ground||void 0===this.field_height?(d(this,m,!1),this):(d(this,m,t),this)}},{key:"setGradation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.min,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.max;return t=t.replace(" ","").slice(4,-1).split(","),this.color1={r:+t[0],g:+t[1],b:+t[2]},""!=e&&(e=e.replace(" ","").slice(4,-1).split(","),this.color2={r:+e[0],g:+e[1],b:+e[2]}),this.min=n,this.max=r,this}},{key:"setClasses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.classes_map=t,void 0===this.classes_map["no-data-color"]&&(this.classes_map["no-data-color"]="rgb(169,169,169)"),this}},{key:"autoMinMax",value:(p=o(r().mark((function e(){var n,i,o,s,a,u=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.min,i=this.max,!isNaN(n)&&!isNaN(i)){e.next=11;break}return o=function(t){return void 0===t[this.field]||isNaN(t[this.field])||((isNaN(this.min)||t[this.field]<this.min)&&(this.min=t[this.field]),(isNaN(this.max)||t[this.field]>this.max)&&(this.max=t[this.field])),!0}.bind(this),h(t,t,b,l(t,t,b)+1),s=l(t,t,b),a=new itowns.FeatureGeometryLayer("to_delete_minmax_style"+s,{batchId:function(t,e){return e},filter:o,source:this.source,visible:!1}),e.abrupt("return",this.view.addLayer(a).then((function(){isNaN(n)||(u.min=n),isNaN(i)||(u.max=i),u.view.removeLayer("to_delete_minmax_style"+s),a.delete()})));case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"autoClass",value:(f=o(r().mark((function e(){var n,i,o,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=Object.keys(this.classes_map).length){e.next=9;break}return n=function(t){return void 0!==t[this.field]&&void 0===this.classes_map[t[this.field]]&&(this.classes_map[t[this.field]]="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")"),!0}.bind(this),h(t,t,b,l(t,t,b)+1),i=l(t,t,b),o=new itowns.FeatureGeometryLayer("to_delete_class_style"+i,{batchId:function(t,e){return e},filter:n,source:this.source,visible:!1}),e.abrupt("return",this.view.addLayer(o).then((function(){s.view.removeLayer("to_delete_class_style"+i),o.delete()})));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"to_itowns_layer",value:(c=o(r().mark((function e(){var n,i,o,s,a,c,f,p=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clean(),!this.gradation_or_classes){e.next=8;break}if(!isNaN(this.min)&&!isNaN(this.max)){e.next=5;break}return e.next=5,this.autoMinMax();case 5:n=this.color2?function(t){if(void 0!==t[this.field]){var e,n,r=(this.max+this.min)/2;t[this.field]<r?(e=(t[this.field]-this.min)/(r-this.min),n=this.color2):(e=1-(t[this.field]-r)/(this.max-r),n=this.color1);var i=[];i.push(Math.floor(e*(255-n.r)+n.r)),i.push(Math.floor(e*(255-n.g)+n.g)),i.push(Math.floor(e*(255-n.b)+n.b));for(var o=0;o<3;o++)i[o]<0?i[o]=0:i[o]>255&&(i[o]=255);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}return"rgb(169,169,169)"}:function(t){if(void 0!==t[this.field]){var e=1-(t[this.field]-this.min)/(this.max-this.min),n=[];n.push(Math.floor(e*(255-this.color1.r)+this.color1.r)),n.push(Math.floor(e*(255-this.color1.g)+this.color1.g)),n.push(Math.floor(e*(255-this.color1.b)+this.color1.b));for(var r=0;r<3;r++)n[r]<0?n[r]=0:n[r]>255&&(n[r]=255);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}return"rgb(169,169,169)"},e.next=12;break;case 8:if(1!=Object.keys(this.classes_map).length){e.next=11;break}return e.next=11,this.autoClass();case 11:n=function(t){return void 0!==t[this.field]&&void 0!==this.classes_map[t[this.field]]?this.classes_map[t[this.field]]:this.classes_map["no-data-color"]};case 12:return i=n.bind(this),h(t,t,v,l(t,t,v)+1),o="style_layer_"+l(t,t,v),u(this,m)?(a=function(t){return t[p.field_ground]},c=function(t){return t[p.field_height]},f=function(t){return!!t[p.field_height]&&!!t[p.field_ground]},s=new itowns.FeatureGeometryLayer(o,{batchId:function(t,e){return e},filter:f,source:this.source,zoom:{min:0,max:12},style:new itowns.Style({fill:{color:i,extrusion_height:c,base_altitude:a}}),onMeshCreated:function(t){var e=t.children[0].children[0].children[0].children[0],n=new itowns.THREE.LineSegments(new itowns.THREE.EdgesGeometry(e.geometry),new itowns.THREE.LineBasicMaterial({color:"black"}));e.add(n)}})):s=new itowns.ColorLayer(o,{batchId:function(t,e){return e},source:this.source,zoom:{min:14},style:new itowns.Style({fill:{color:i},stroke:{color:"black"}})}),this.view.addLayer(s).then((function(){p.view.notifyChange(p.view.camera.camera3D,!0)})),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"clean",value:function(){var e="style_layer_"+l(t,t,v);try{var n=this.view.getLayerById(e);this.view.removeLayer(e),n.delete()}catch(t){}return this}},{key:"getLegend",value:function(){var t=document.createElement("div"),e=document.createElement("h5");if(e.innerText=this.name,this.gradation_or_classes){t.innerHTML+='<p><span style="color:rgb(169,169,169);font-size: 2em">■</span> no-data-color</p><br>',t.appendChild(e);var n=document.createElement("canvas"),r=n.getContext("2d");n.height=120;var i=80;r.fillStyle="rgb(0,0,0)",r.fillRect(0,0,300,82);var o=r.createLinearGradient(20,0,280,0);void 0===this.color2?o.addColorStop(0,"rgb(255,255,255)"):(o.addColorStop(0,"rgb("+this.color2.r+","+this.color2.g+","+this.color2.b+")"),o.addColorStop(.5,"rgb(255,255,255)")),o.addColorStop(1,"rgb("+this.color1.r+","+this.color1.g+","+this.color1.b+")"),r.fillStyle=o,r.fillRect(1,1,298,i),r.fillStyle="rgb(0,0,0)",r.font="18px Arial",r.fillText("I",0,97),r.fillText("I",296,97);var s=""+this.max;r.font="bold 18px Arial",r.fillText(""+this.min,0,115),r.fillText(s,n.width-10*s.length,115),t.appendChild(n)}else{t.appendChild(e);for(var a="",u=0,h=Object.keys(this.classes_map);u<h.length;u++){var l=h[u];a+='<p><span style="color:'+this.classes_map[l]+';font-size: 2em">■</span> '+l+"</p>"}t.innerHTML+=a}return t}},{key:"to_config_json",value:function(){var t={};return t.name=this.name,t.field=this.field,t.extrude=u(this,m),void 0!==this.field_ground&&void 0!==this.field_height&&(t.field_ground=this.field_ground,t.field_height=this.field_height),t.gradation_or_classes=this.gradation_or_classes,this.gradation_or_classes?(t.color1=this.color1,void 0!==this.color2&&(t.color2=this.color2),t.min=this.min,t.max=this.max):t.classes_map=this.classes_map,this.source.isFileSource&&(t.source_info={type:"FileSource",fetchedData:this.source.fetchedData,crs:this.source.crs,format:this.source.format}),t}}],i=[{key:"load",value:function(e,n){var r;"FileSource"==n.source_info.type&&(r=new itowns.FileSource({fetchedData:n.source_info.fetchedData,crs:n.source_info.crs,format:n.source_info.format}));var i=new t(n.name,e,r,n.field,n.gradation_or_classes);return void 0!==n.field_ground&&void 0!==n.field_height&&i.setExtrude(n.field_ground,n.field_height),n.gradation_or_classes?void 0===n.color2?i.setGradation(n.color1,"",n.min,n.max):i.setGradation(n.color1,n.color2,n.min,n.max):i.setClasses(n.classes_map),i}}],n&&s(e.prototype,n),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports.default=_;var v={writable:!0,value:0},b={writable:!0,value:0}}));var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.addOrthoLayer=function(t,e){t.source=new itowns.WMTSSource(t.source);var n=new itowns.ColorLayer("Ortho",t);e.addLayer(n)};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.addElevationLayer=function(t,e){t.source=new itowns.WMTSSource(t.source);var n=new itowns.ElevationLayer(t.id,t);e.addLayer(n)};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.addShp=function(t,e,n,r,i,o){(0,l.loadBufferDataFromShp)(t).then((function(t){var o=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"}),s=new itowns.ColorLayer(e,{source:o,style:new itowns.Style({zoom:{min:0},fill:{color:r},stroke:{color:n,width:1}}),addLabelLayer:!0});return i.addLayer(s)})).then((function(t){return o&&FeatureToolTip.addLayer(t,{filterAllProperties:!1}),t}))};var l={};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}Object.defineProperty(l,"__esModule",{value:!0}),l.loadBufferDataFromShp=function(t){return itowns.Fetcher.multiple(t,{arrayBuffer:["shp","dbf","shx"],text:["prj"]}).then((function(t){return Promise.all([t.shp,t.dbf])})).then((function(t){var e=t[0],n=t[1];return f.combine([f.parseShp(e),f.parseDbf(n)])}))};var f=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(o("7HNZs"));function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.addSpecificBuilings=function(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20;shapefile.open(t).then((function(t){return t.read().then((function a(u){if(!u.done){try{if(u.value.properties[e]==n){var h=new itowns.FileSource({fetchedData:{type:"FeatureCollection",features:[{type:"Feature",properties:u.value.properties,geometry:{type:"Polygon",coordinates:[u.value.geometry.coordinates[0]]}}]},crs:"EPSG:4326",format:"application/json"}),l=new itowns.FeatureGeometryLayer(u.value.properties[e]+r,{source:h,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:"yellow",extrusion_height:function(t){return t.hauteur?t.hauteur:t.HAUTEUR?t.HAUTEUR:s},base_altitude:function(t){return t.altitude_s?t.altitude_s:t.Z_MIN_SOL?t.Z_MIN_SOL:20}}}),onMeshCreated:function(t){var e=t.children[0].children[0].children[0].children[0];(0,g.addEdgeObj3d)(e,"black",o)}});i.addLayer(l)}}catch(t){console.log(t)}return t.read().then(a)}}))})).catch((function(t){return console.error(t.stack)}))};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.addEdgeObj3d=function(t,e,n){var r=new n.LineSegments(new n.EdgesGeometry(t.geometry),new n.LineBasicMaterial({color:e}));t.add(r)};var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.importCsvFile=function(t){return w.apply(this,arguments)};var m=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==v(t)&&"function"!=typeof t)return{default:t};var n=_(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(o("gKeLP"));function _(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(_=function(t){return t?n:e})(t)}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
b=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,s=Object.create(o.prototype),a=new C(i||[]);return r(s,"_invoke",{value:E(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var c={};function f(){}function p(){}function d(){}var g={};u(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(P([])));m&&m!==e&&n.call(m,o)&&(g=m);var _=d.prototype=f.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(r,o,s,a){var u=l(t[r],t,o);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"==v(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(c).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,a)}))}a(u.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function E(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return L()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=M(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function M(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,M(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,c;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=d,r(_,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},x(w.prototype),u(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new w(h(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(_),u(_,a,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function x(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function w(){var t;return t=b().mark((function t(e){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){return new Promise((function(t){m.parse(e,{header:!0,download:!0,dynamicTyping:!0,complete:function(e){t(e.data)}})}))},t.next=3,n();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})),w=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){x(o,r,i,s,a,"next",t)}function a(t){x(o,r,i,s,a,"throw",t)}s(void 0)}))},w.apply(this,arguments)}var E={};function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(E,"__esModule",{value:!0}),E.getBdnbInfo=function(t,e,n){return t.then((function(t){var r=t.filter((function(t){return t[e]===n}))[0];if(r){var i=Object.entries(r).filter((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,h=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return""!==o&&null!==o&&null!==i}));return Object.fromEntries(i)}}))};var S=ht(o("hEixu")),I={};Object.defineProperty(I,"__esModule",{value:!0}),I.widgetNavigation=function(t){var e=new itowns_widgets.Navigation(t);e.addButton("rotate-up",'<p style="font-size: 20px">&#8595</p>',"rotate camera up",(function(){t.controls.lookAtCoordinate({tilt:t.controls.getTilt()-10,time:500})}),"button-bar-rotation"),e.addButton("rotate-down",'<p style="font-size: 20px">&#8593</p>',"rotate camera down",(function(){t.controls.lookAtCoordinate({tilt:t.controls.getTilt()+10,time:500})}),"button-bar-rotation"),e.addButton("reset-position","&#8634","reset position")};var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.geojsontToFeatureGeom=function(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"red",h=t.features.reduce((function(t,n){var r=n.properties[e];return t.includes(r)||t.push(r),t}),[]),l=(0,P.generateUniqueColors)(h);document.getElementById("exampleModalLabel").innerText=e;var c=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"}),f=new itowns.FeatureGeometryLayer(n,{source:c,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:function(t){if(r)return u;var n=l[t[e]];return n},extrusion_height:function(t){return""!==s?t[s]:t.hauteur?t.hauteur:t.bdtopo_bat_hauteur_mean?t.bdtopo_bat_hauteur_mean:t.HAUTEUR?t.HAUTEUR:20},base_altitude:function(t){return""!==a?t[a]:t.altitude_s?t.altitude_s:t.bdtopo_bat_altitude_sol_mean?t.bdtopo_bat_altitude_sol_mean:t.Z_MIN_SOL?t.Z_MIN_SOL:100}}}),onMeshCreated:function(t){var e=t.children[0].children[0].children[0].children[0];(0,g.addEdgeObj3d)(e,"black",o)}});i.addLayer(f),(0,N.setLegend)(l)};var P={};function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(P,"__esModule",{value:!0}),P.generateUniqueColors=function(t){for(var e=(i=new Set(t),function(t){if(Array.isArray(t))return L(t)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n={},r=0;r<e.length;r++)n[e[r]]="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}));var i;return n.undefined="rgb(169,169,169)",n};var N={};function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(N,"__esModule",{value:!0}),N.setLegend=function(t){for(var e="<div>",n=0,r=Object.entries(t);n<r.length;n++){var i=(a=r[n],u=2,function(t){if(Array.isArray(t))return t}(a)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,h=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}(a,u)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(a,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],s=i[1];e+='<div style="display:flex;flex-direction:row"> <div style="background-color:'.concat(s,';width: 31px;height: 16px; margin-right: 20px;"></div><div>').concat(o,"</div></div>")}var a,u;e+="</div>",document.getElementById("legend").innerHTML=e};var A,k=(A=o("8QTk7"))&&A.__esModule?A:{default:A},R={};function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(R,"__esModule",{value:!0}),R.generateAccordion4Attribute=j,R.generateAttributes4Tab=function(t,e,n,r){if(0!==n.length){var i="",o=document.getElementById(t);r.includes(e)&&(o.innerHTML="",n.forEach((function(t){i=j(t.attribut,t.name4User,t.val,t.source),o.innerHTML+=i})))}},R.loadDataToJSON=B,R.spreadDataToTabs=function(t,e,n){var r;return Object.entries(t).forEach((function(t){var i,o,s=(o=2,function(t){if(Array.isArray(t))return t}(i=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,h=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}(i,o)||function(t,e){if(t){if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],u=s[1];r=B(e,a,u,n)})),r};var D={libelle_adr_principale_ban:"Adresse",fiabilite_cr_adr_niv_1:"Fiabilité de l'adresse ",code_iris:"Code IRIS",libelle_commune_insee:"Commune",code_departement_insee:"Numéro de département",bdtopo_zoa_l_toponyme:"Toponyme",code_commune_insee:"Code INSEE",ffo_bat_annee_construction:"Année de construction",ETAT:"État du bâtiment",NATURE:"Nature",ffo_bat_usage_niveau_1_txt:"Usage",USAGE1:"Usage 1",USAGE2:"Usage 2",bdtopo_bat_altitude_sol_mean:"Altitude au sol",bdtopo_bat_hauteur_mean:"Hauteur du bâtiment",NB_ETAGES:"Nombre d'étages",DATE_CREAT:"Date de Création",nbEntrances:"Nombre d'entrées",nbHousing:"Nombre de logements",nbWorkingPlace:"Nombre de lieux de travail",code_commu:"Code commune",code_depar:"Code département",argiles_alea:"Risque argile",radon_alea:"Risque radon",dpe_arrete_2021_nb_classe_conso_energie_arrete_2012:"Notes énergétique des logements",dpe_nb_classe_ener_a:"Nombre de logements de classe énergétique A",dpe_nb_classe_ener_b:"Nombre de logements de classe énergétique B",dpe_nb_classe_ener_c:"Nombre de logements de classe énergétique C",dpe_nb_classe_ener_d:"Nombre de logements de classe énergétique D",dpe_nb_classe_ener_e:"Nombre de logements de classe énergétique E",dpe_nb_classe_ener_f:"Nombre de logements de classe énergétique F",dpe_nb_classe_ener_g:"Nombre de logements de classe énergétique G",dpe_nb_classe_ener_nc:"Nombre de logements de classe énergétique non communiquée",dpe_nb_classe_ges_a:"Nombre de logements d'émission de GES de classe A",dpe_nb_classe_ges_b:"Nombre de logements d'émission de GES de classe B",dpe_nb_classe_ges_c:"Nombre de logements d'émission de GES de classe C",dpe_nb_classe_ges_d:"Nombre de logements d'émission de GES de classe D",dpe_nb_classe_ges_e:"Nombre de logements d'émission de GES de classe E",dpe_nb_classe_ges_f:"Nombre de logements d'émission de GES de classe F",dpe_nb_classe_ges_g:"Nombre de logements d'émission de GES de classe G",dpe_nb_classe_ges_nc:"Nombre de logements d'émission de GES de classe non communiquée",dpe_class_conso_ener_mean:"Note moyenne de la consommation énergétique du bâtiment",dpe_conso_ener_mean:"Consommation énergétique moyenne du bâtiment",dpe_conso_ener_std:"Ecart-type des valeurs de consommation énergétique du bâtiment",dpe_class_estim_ges_mean:"Note moyenne de l'émission de Gaz à effet de serre du bâtiment",dpe_estim_ges_mean:"Moyenne de l'émission de Gaz à effet de serre du bâtiment",dpe_estim_ges_std:"Ecart-type des valeurs d'émission de Gaz à effet de serre du bâtiment. ",dpe_logtype_mur_pos_isol_ext:"Matériaux d'isolations des murs extérieurs",dpe_logtype_pb_pos_isol:"Matériaux d'isolations des planchers bas",dpe_logtype_ph_pos_isol:"Matériaux d'isolations des planchers hauts",P19_POP15P_MARIEE:"Marié",P19_POP15P_PACSEE:"Pacsé",P19_POP15P_CONCUB_UNION_LIBRE:"Concubinage - union libre",P19_POP15P_VEUFS:"Veuf",P19_POP15P_DIVORCEE:"Divorcé",P19_POP15P_CELIBATAIRE:"Célibataire",P19_POP1524:"15-24 ans",P19_POP2554:"25-54 ans",P19_POP5579:"55-79 ans",P19_POP80P:"80+ ans",C19_NE24F0:"0 enfant",C19_NE24F1:"1 enfant",C19_NE24F2:"2 enfants",C19_NE24F3:"3 enfants",C19_NE24F4P:"4 enfants",FamilyChildrenNumber:"Nombre d'enfants dans la famille",HouseholdComposition:"Composition du ménage",HouseholdSize:"Nombre d'individus dans le ménage",age:"Age",occupation:"Occupation",sex:"Sexe"},F={ongletBatiment:["bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean","ffo_bat_usage_niveau_1_txt","ffo_bat_annee_construction","DATE_CREAT","ETAT","NATURE","NB_ETAGES","USAGE1","USAGE2","nbEntrances","nbHousing","nbWorkingPlace"],ongletRisque:["radon_alea","argiles_alea"],ongletInfoGen:["code_commune_insee","code_departement_insee","code_iris","fiabilite_cr_adr_niv_1","libelle_adr_principale_ban","libelle_commune_insee","bdtopo_zoa_l_toponyme","code_commu","code_depar"],ongletEnergie:["dpe_arrete_2021_nb_classe_conso_energie_arrete_2012","dpe_nb_classe_ener_a","dpe_nb_classe_ener_b","dpe_nb_classe_ener_c","dpe_nb_classe_ener_d","dpe_nb_classe_ener_e","dpe_nb_classe_ener_f","dpe_nb_classe_ener_g","dpe_nb_classe_ener_nc","dpe_nb_classe_ges_a","dpe_nb_classe_ges_b","dpe_nb_classe_ges_c","dpe_nb_classe_ges_d","dpe_nb_classe_ges_e","dpe_nb_classe_ges_f","dpe_nb_classe_ges_g","dpe_nb_classe_ges_nc","dpe_class_conso_ener_mean","dpe_conso_ener_mean","dpe_conso_ener_std","dpe_class_estim_ges_mean","dpe_estim_ges_mean","dpe_estim_ges_std","dpe_logtype_mur_pos_isol_ext","dpe_logtype_pb_pos_isol","dpe_logtype_ph_pos_isol"],ongletPopulation:["P19_POP15P_MARIEE","P19_POP15P_PACSEE","P19_POP15P_CONCUB_UNION_LIBRE","P19_POP15P_VEUFS","P19_POP15P_DIVORCEE","P19_POP15P_CELIBATAIRE","P19_POP1524","P19_POP2554","P19_POP5579","P19_POP80P","C19_NE24F0","C19_NE24F1","C19_NE24F2","C19_NE24F3","C19_NE24F4P","FamilyChildrenNumber","HouseholdComposition","HouseholdSize","age","occupation","sex"]};function B(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=D[e],s={attribut:e,name4User:o,val:n,source:r};return i&&o?s:(F.ongletInfoGen.includes(e)?t.tabInfoGen.push(s):F.ongletBatiment.includes(e)?t.tabBatiment.push(s):F.ongletRisque.includes(e)?t.tabRisques.push(s):F.ongletEnergie.includes(e)?t.tabEnergie.push(s):F.ongletPopulation.includes(e)&&t.tabPopulation.push(s),t)}function j(t,e,n,r){var i="";return i+='<div class="accordion-item">',i+='<h2 class="accordion-header" id="heading'+t+'">',i+='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse'+t+'" aria-expanded="false" aria-controls="collapse'+t+'">',i+=e,i+="</button></h2></div>",i+='<div id="collapse'+t+'" class="accordion-collapse collapse" aria-labelledby="heading'+t+'">',i+='<div class="accordion-body" id="info'+t+'">',i+='<div style="width:100%;display:flex; flex-direction:row;justify-content:space-around">',i+="<span>"+n+"</span>",i+='<a href="#" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-custom-class="custom-tooltip" data-bs-title="Donnée issue de la '+r+" sur "+t+'">',i+="info",i+="</a></div></div></div>"}var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.geosjontToColorLayer=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"red",s=t.features.reduce((function(t,n){var r=n.properties[e];return t.includes(r)||t.push(r),t}),[]),a=(0,P.generateUniqueColors)(s);document.getElementById("exampleModalLabel").innerText=e;var u=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"}),h=new itowns.ColorLayer(n,{source:u,transparent:!0,opacity:.7,zoom:{min:0},style:new itowns.Style({fill:{color:function(t){if(r)return o;var n=a[t[e]];return n}},stroke:{color:"blue",width:1}})});i.addLayer(h),(0,N.setLegend)(a)};var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.updateSelectOption=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,U.getUniquePropNames)(e);document.getElementById(t).innerHTML="",(0,q.updateSelectOptionFromList)(t,r,n)};var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.getUniquePropNames=function(t){return t.features.reduce((function(t,e){return t.concat(Object.keys(e.properties))}),[]).reduce((function(t,e){return t.includes(e)||t.push(e),t}),[])};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.updateSelectOptionFromList=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.getElementById(t);r.innerHTML="",e.forEach((function(t){var e=document.createElement("option");e.text=t,e.value=t,t===n&&(e.selected=!0),r.add(e)}))};var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.addShpLayerOnChange=function(t,e,n,r,i,o){document.getElementById(t).addEventListener("change",(function(){document.getElementById(t).checked?(0,h.addShp)(e,n,r,i,o,!1):o.removeLayer(n)}))};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.exploreData=function(t,e,n,r,i,o,s){document.getElementById(t).checked?(n.num+=1,n.id=n.name+"_"+n.num,(0,G.updateSelectOption)(r,e,i),(0,C.geojsontToFeatureGeom)(e,i,n.id,!1,o,s)):o.removeLayer(n.id);return n};var W=ht(o("7HNZs")),Y={};function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Z=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var o=e&&e.prototype instanceof f?e:f,s=Object.create(o.prototype),a=new S(i||[]);return r(s,"_invoke",{value:x(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var c={};function f(){}function p(){}function d(){}var g={};u(g,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==e&&n.call(m,o)&&(g=m);var _=d.prototype=f.prototype=Object.create(g);function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(r,o,s,a){var u=l(t[r],t,o);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"==X(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(c).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,a)}))}a(u.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var i=l(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,c;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=d,r(_,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,s,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new b(h(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},v(_),u(_,a,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,h=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function $(){var t;return t=Z().mark((function t(e,n,r,i,o,s){var a,u,h,l,c,f,p,d,g,y,m;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:return a=t.sent,Object.entries(a).forEach((function(t){if(t[1].idBdTopo&&t[1].idBdTopo.includes(s))return u=t[1]})),h=(0,R.spreadDataToTabs)(u,e,"Building ICI"),t.next=7,r;case 7:return l=t.sent,c=[],Object.entries(l).forEach((function(t){t[1].BuildingID&&t[1].BuildingID.includes(u.ID)&&c.push(t[1].ID)})),f={},t.next=13,i;case 13:return p=t.sent,Object.entries(p).forEach((function(t){c.includes(t[1].HousingID)&&(f[t[1].ID]={},f[t[1].ID].household=[],Object.entries(t[1]).forEach((function(e){var n=J(e,2),r=n[0],i=n[1];d=(0,R.loadDataToJSON)({},r,i,"Household ICI",!0),0!==Object.keys(d).length&&f[t[1].ID].household.push(d)})))})),Object.entries(f).forEach((function(t){var e=J(t,2),n=e[0],r=e[1];0===Object.keys(r).length&&delete f[n]})),g=[],Object.entries(f).forEach((function(t){g.push(t[0])})),t.next=20,o;case 20:return y=t.sent,Object.entries(y).forEach((function(t){if(t[1].IDHousehold){var e=[];g.includes(t[1].IDHousehold)&&(Object.entries(t[1]).forEach((function(t){var n=J(t,2),r=n[0],i=n[1];m=(0,R.loadDataToJSON)({},r,i,"Individual ICI",!0),0!==Object.keys(m).length&&e.push(m)})),f[t[1].IDHousehold].individuals?f[t[1].IDHousehold].individuals.push(e):f[t[1].IDHousehold].individuals=[e])}})),h.tabPopulation=f,t.abrupt("return",h);case 24:case"end":return t.stop()}}),t)})),$=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){Q(o,r,i,s,a,"next",t)}function a(t){Q(o,r,i,s,a,"throw",t)}s(void 0)}))},$.apply(this,arguments)}Object.defineProperty(Y,"__esModule",{value:!0}),Y.getDataICI=function(t,e,n,r,i,o){return $.apply(this,arguments)};var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.getDataBDTOPO=function(t,e,n){var r=t.then((function(t){var n=t.features.filter((function(t){if(e.value.properties.batiment_c.includes(t.properties.ID))return t}));return n[0]})).then((function(t){if(t.properties)return(0,R.spreadDataToTabs)(t.properties,n,"BDTopo")}));return r};var et={};function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}Object.defineProperty(et,"__esModule",{value:!0}),et.getDataINSEE=function(t,e,n,r,i){var o=t.then((function(t){var o=t.filter((function(t){return t.IRIS===Number(e.value.properties.code_iris)}))[0],s=(0,R.spreadDataToTabs)(o,n,"INSEE"),a=[];return Object.entries({status15OuPlus:["P19_POP15P_MARIEE","P19_POP15P_PACSEE","P19_POP15P_CONCUB_UNION_LIBRE","P19_POP15P_VEUFS","P19_POP15P_DIVORCEE","P19_POP15P_CELIBATAIRE"],repartitionPop:["P19_POP1524","P19_POP2554","P19_POP5579","P19_POP80P"],enfant25:["C19_NE24F0","C19_NE24F1","C19_NE24F2","C19_NE24F3","C19_NE24F4P"]}).forEach((function(t){a.push(rt.dataINSEE4Chart(t[1],s.tabPopulation))})),r+=rt.generateAccordionItem("Status_15_ans+","status"),r+=rt.generateAccordionItem("Repartion_pop_15_ans+","repartition"),r+=rt.generateAccordionItem("Nombre_famille_enfants_-25ans","enfant"),i.innerHTML+=r,(0,it.addChart)("status",a[0],"name","value","Nombre de personnes"),(0,it.addChart)("repartition",a[1],"name","value","Nombre d'individus"),(0,it.addChart)("enfant",a[2],"name","value","Nombre de familles"),s}));return o};var rt=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==nt(t)&&"function"!=typeof t)return{default:t};var n=st(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(o("dxKuV")),it={};Object.defineProperty(it,"__esModule",{value:!0}),it.addChart=function(t,e,n,r,i){return new ot.default(document.getElementById(t),{type:"bar",data:{labels:e.map((function(t){return t[n]})),datasets:[{label:i,data:e.map((function(t){return t[r]}))}]}})};var ot=function(t){return t&&t.__esModule?t:{default:t}}(o("jqz8H"));function st(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(st=function(t){return t?n:e})(t)}var at=ht(o("dxKuV"));function ut(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(ut=function(t){return t?n:e})(t)}function ht(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var n=ut(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function lt(t){return function(t){if(Array.isArray(t))return dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
ct=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof p?e:p,s=Object.create(o.prototype),a=new I(i||[]);return r(s,"_invoke",{value:w(t,n,a)}),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function g(){}var y={};h(y,o,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(C([])));_&&_!==e&&n.call(_,o)&&(y=_);var v=g.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(r,o,a,u){var h=c(t[r],t,o);if("throw"!==h.type){var l=h.arg,f=l.value;return f&&"object"==s(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return i("throw",t,a,u)}))}u(h.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=g,r(v,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:d,configurable:!0}),d.displayName=h(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,h(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(x.prototype),h(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new x(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),h(v,u,"Generator"),h(v,o,(function(){return this})),h(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,h=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}(t,e)||pt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){if(t){if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){gt(o,r,i,s,a,"next",t)}function a(t){gt(o,r,i,s,a,"throw",t)}s(void 0)}))}}var mt=itowns.THREE,_t="./data/shp/prg/bdnb_perigeux8",vt="./data/shp/prg/bd_topo_2",bt="./data/shp/paris_11/bdtopo_paris11",xt="./data/shp/prg/osm",wt="./data/shp/prg/cadastre_perigeux8",Et="./data/shp/innondation/forte/n_tri_peri_inondable_01_01for_s_024",Mt="./data/shp/prg/bat_innondable",St=document.createElement("div");St.className="bat",St.id="bat";var It,Ct=[],Pt=[1,2],Lt={ino_random_id:{name:"innondation",num:0,id:"innondation_0"},bdnb_random_id:{name:"bdnb",num:0,id:"bdnb_0",dataGeojson:{}},bdtopo_radom_id:{name:"bdtopo",num:0,id:"bdtopo_0",dataGeojson:{}},osm_random_id:{name:"osm",num:0,id:"osm_0",dataGeojson:{}},cadastre_random_id:{name:"cadastre",num:0,id:"cadastre_0",dataGeojson:{}}},Nt={"2dDrop":{},"2dDropId":{name:"2dDropId",num:0,id:"2dDropId_0"},"3dDropId":{name:"3dDropId",num:0,id:"3dDropId_0"}},Ot={updatedGeojson:{},csvLayerId:{name:"updatedLayerWithCsv",num:0,id:"updatedLayerWithCsv_0"}},At=document.createElement("div"),kt=document.createElement("div");kt.classList.add("bubble"),At.appendChild(kt);var Rt=document.createElement("div");Rt.classList.add("pointer"),At.appendChild(Rt);var Tt={coord:new itowns.Coordinates("EPSG:4326",.72829,45.1826,2),range:200,tilt:33},Dt=document.getElementById("site_state"),Ft=document.getElementById("viewerDiv");Ft.appendChild(St);var Bt=new itowns.GlobeView(Ft,Tt);setupLoadingScreen(Ft,Bt),FeatureToolTip.init(Ft,Bt),(0,I.widgetNavigation)(Bt),document.getElementById("changloc").addEventListener("click",(function(){var t=Bt.controls.getLookAtCoordinate();Dt.checked?(t.x=2.380015,t.y=48.859424,t.z=86):(t.x=.72829,t.y=45.1826,t.z=86),Bt.camera.camera3D.position.copy(t.as(Bt.referenceCrs)),Bt.camera.camera3D.updateMatrixWorld(),Bt.notifyChange(Bt.camera.camera3D,!0)})),document.getElementById("changloc").addEventListener("click",(function(){var t=Bt.controls.getLookAtCoordinate();Dt.unchecked&&(t.x=.72829,t.y=45.1826,t.z=86),Bt.camera.camera3D.position.copy(t.as(Bt.referenceCrs)),Bt.camera.camera3D.updateMatrixWorld(),Bt.notifyChange(Bt.camera.camera3D,!0)})),itowns.Fetcher.json("./data/layers/JSONLayers/WORLD_DTM.json").then((function(t){return(0,u.addElevationLayer)(t,Bt)})),itowns.Fetcher.json("./data/layers/JSONLayers/IGN_MNT_HIGHRES.json").then((function(t){return(0,u.addElevationLayer)(t,Bt)})),itowns.Fetcher.json("./data/layers/JSONLayers/Ortho.json").then((function(t){return(0,a.addOrthoLayer)(t,Bt)}));var jt,zt,Gt=(0,y.importCsvFile)("./data/csv/base-ic-couples-familles-menages-2019.CSV"),Ut=(0,y.importCsvFile)("./data/shp/prg/data_bdnb.csv"),qt=(0,y.importCsvFile)("./data/csv/bdnb_paris11.csv"),Vt=(0,y.importCsvFile)("./data/csv/ICI-csv/building.csv"),Ht=(0,y.importCsvFile)("./data/csv/ICI-csv/household.csv"),Wt=(0,y.importCsvFile)("./data/csv/ICI-csv/housing.csv"),Yt=(0,y.importCsvFile)("./data/csv/ICI-csv/individual.csv"),Xt=(0,l.loadBufferDataFromShp)(_t),Zt=(0,l.loadBufferDataFromShp)(vt),Jt=(0,l.loadBufferDataFromShp)(xt),Kt=(0,l.loadBufferDataFromShp)(wt),Qt=(0,l.loadBufferDataFromShp)(bt);Bt.addEventListener(itowns.GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED,function(){var t=yt(ct().mark((function t(){var e,n,r,i,o,s;return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut.then((function(t){jt=t.reduce((function(t,e){return t[e.batiment_groupe_id]=Object.entries(e).reduce((function(t,e){var n=ft(e,2),r=n[0],i=n[1];return null===i||(t[r]=i),t}),{}),t}),{})}));case 2:return t.next=4,(0,h.addShp)("./data/shp/paris_11/paris11_bdnb","bdnbParis","red","",Bt,!0);case 4:return t.next=6,(0,h.addShp)("./data/shp/prg/bdnb_perigeux8","bdnb","black","",Bt,!0);case 6:return t.next=8,Xt;case 8:return(zt=t.sent).features.forEach((function(t){var e=jt[t.properties.batiment_g];e&&(t.properties=e)})),Lt.bdnb_random_id.dataGeojson=zt,t.next=13,Zt;case 13:return Lt.bdtopo_radom_id.dataGeojson=t.sent,t.next=16,Jt;case 16:return Lt.osm_random_id.dataGeojson=t.sent,t.next=19,Kt;case 19:return Lt.cadastre_random_id.dataGeojson=t.sent,e=document.getElementById("checkbox_style_3D"),n=document.getElementById("select_style"),r=document.getElementById("button_style_apply"),t.next=25,(0,l.loadBufferDataFromShp)(_t).then((function(t){t.features.forEach((function(t){var e=jt[t.properties.batiment_g];e&&(t.properties=e)})),i=new itowns.FileSource({fetchedData:t,crs:"EPSG:4326",format:"application/json"})}));case 25:for((o=[]).push(new k.default("Iris",Bt,i,"code_iris",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean")),o.push(new k.default("Hauteur",Bt,i,"bdtopo_bat_hauteur_mean",!0).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setGradation("rgb(255,0,0)")),o.push(new k.default("Nature du bâtiment",Bt,i,"bdtopo_bat_l_nature",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean")),o.push(new k.default("Année de construction",Bt,i,"ffo_bat_annee_construction",!0).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setGradation("rgb(0,0,255)")),o.push(new k.default("Notes consommation d'énergie",Bt,i,"dpe_logtype_classe_conso_ener",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({A:"rgb(1,149,65)",B:"rgb(83,174,50)",C:"rgb(202,211,0)",D:"rgb(255,223,1)",E:"rgb(251,185,1)",F:"rgb(237,102,7)",G:"rgb(228,19,18)"})),o.push(new k.default("Risques liés aux argiles",Bt,i,"argiles_alea",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({Faible:"rgb(82,255,71)",Moyen:"rgb(255,165,0)",Fort:"rgb(255,0,0)"})),o.push(new k.default("Risques liés au radon",Bt,i,"radon_alea",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({Faible:"rgb(82,255,71)",Moyen:"rgb(255,165,0)",Fort:"rgb(255,0,0)"})),o.push(new k.default("Fiabilité de la hauteur",Bt,i,"fiabilite_hauteur",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({BONNE:"rgb(82,255,71)",MOYENNE:"rgb(255,165,0)",FAIBLE:"rgb(255,0,0)"})),o.push(new k.default("Fiabilité de l'emprise au sol",Bt,i,"fiabilite_emprise_sol",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({BONNE:"rgb(82,255,71)",MOYENNE:"rgb(255,165,0)",FAIBLE:"rgb(255,0,0)"})),o.push(new k.default("Fiabilité de l'adresse",Bt,i,"fiabilite_cr_adr_niv_1",!1).setExtrude("bdtopo_bat_altitude_sol_mean","bdtopo_bat_hauteur_mean").setClasses({"données croisées à l'adresse fiables":"rgb(82,255,71)","données croisées à l'adresse fiables à l'echelle de la parcelle unifiee":"rgb(255,255,0)","données croisées à l'adresse moyennement fiables":"rgb(255,165,0)","problème de géocodage":"rgb(255,0,0)"})),s=0;s<o.length;s++)n.innerHTML+="<option value='"+s+"'>"+o[s].name+"</option>";r.addEventListener("click",(function(){if(-1==n.value)o[0].clean();else{var t=o[n.value];t.to3D(e.checked),t.to_itowns_layer().then((function(){document.getElementById("legend").replaceChildren(t.getLegend())}))}}));case 38:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());var $t=document.getElementById("tooltip"),te=document.getElementById("listConsoPopulationIris"),ee=document.getElementById("listConsoPopulationICI");Ft.addEventListener("mouseup",(function(){if(Pt.push($t.value.properties.fid),Pt[Pt.length-1]!=Pt[Pt.length-2]){Pt=[Pt[Pt.length-1]];var t={tabInfoGen:[],tabBatiment:[],tabRisques:[],tabEnergie:[],tabPopulation:[]};te.innerHTML="";var e="";e+='<div class="accordion" id="accordionPanelsStayOpenExample">';var n="#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)})),r=$t.value.properties.batiment_c+n;if(Ct.push(r),Ct[1]){var i=Bt.getLayerById(Ct[0]);Bt.removeLayer(Ct[0]),i.delete(),Bt.notifyChange(),Bt.mainLoop.gfxEngine.renderer.render(Bt.scene,Bt.camera.camera3D),Ct=[Ct[1]]}(0,d.addSpecificBuilings)("./data/shp/prg/bdnb_perigeux8","batiment_c",$t.value.properties.batiment_c,n,Bt,mt),(0,d.addSpecificBuilings)("./data/shp/paris_11/paris11_bdnb","batiment_c",$t.value.properties.batiment_c,n,Bt,mt);var o=$t.value.properties.batiment_c;o.includes("-")&&(o=o.slice(0,-2)),(0,E.getBdnbInfo)(qt,"batiment_g",$t.value.properties.batiment_g).then(function(){var n=yt(ct().mark((function n(r){var i,s,a,u;return ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,R.spreadDataToTabs)(r,t,"BDNB");case 2:return i=n.sent,n.next=5,(0,et.getDataINSEE)(Gt,$t,i,e,te);case 5:return s=n.sent,n.next=8,(0,tt.getDataBDTOPO)(Qt,$t,s);case 8:return a=n.sent,n.next=11,(0,Y.getDataICI)(a,Vt,Wt,Ht,Yt,o);case 11:return u=n.sent,n.abrupt("return",u);case 13:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).then((function(t){Object.entries(t).forEach((function(t){var e=ft(t,2),n=e[0],r=e[1];(0,R.generateAttributes4Tab)("infoGenAccordion","tabInfoGen",r,n),(0,R.generateAttributes4Tab)("batimentAccordion","tabBatiment",r,n)}));var e,n,r,i,o,s="",a="",u=0;Object.entries(t.tabPopulation).forEach((function(t){var h=ft(t,2),l=h[0],c=h[1];u++,n="",c.individuals.forEach((function(t,r){o=r+1,e="",e+=at.createAccordionForListValues(t,"",!0),n+=at.createAccordion("individu"+l+o,"Individu "+o,e).innerHTML})),a=at.createAccordionForListValues(c.household,l),i=at.createAccordion("individu","Individu(s)",n,!0).outerHTML,r=at.createAccordion("household"+l,"Ménage "+u,a+i,!0),s+=r.outerHTML})),ee.innerHTML=s,lt(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)}))})),(0,E.getBdnbInfo)(Ut,"batiment_groupe_id",$t.value.properties.batiment_g).then(function(){var n=yt(ct().mark((function n(r){var i,o,s;return ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,R.spreadDataToTabs)(r,t,"BDNB");case 2:return i=n.sent,n.next=5,(0,et.getDataINSEE)(Gt,$t,i,e,te);case 5:return o=n.sent,n.next=8,(0,tt.getDataBDTOPO)(Zt,$t,o);case 8:return s=n.sent,n.abrupt("return",s);case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).then((function(t){Object.entries(t).forEach((function(t){var e=ft(t,2),n=e[0],r=e[1];(0,R.generateAttributes4Tab)("infoGenAccordion","tabInfoGen",r,n),(0,R.generateAttributes4Tab)("batimentAccordion","tabBatiment",r,n),(0,R.generateAttributes4Tab)("RisquesAccordion","tabRisques",r,n),(0,R.generateAttributes4Tab)("energieAccordion","tabEnergie",r,n)})),lt(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)}))})),shapefile.open("./data/shp/prg/bdnb_perigeux8").then((function(t){return t.read().then(function(){var e=yt(ct().mark((function e(r){var i,o;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.done){e.next=2;break}return e.abrupt("return","done");case 2:return r.value.properties.batiment_g===$t.value.properties.batiment_g&&(i=r.value.geometry.coordinates,o=S.polygon(i),shapefile.open("./data/shp/prg/osm").then((function(t){return t.read().then((function e(n){if(n.done)return"done";var r=S.polygon(n.value.geometry.coordinates);return S.intersect(r,o)?void 0:t.read().then(e)}))}))),e.abrupt("return",t.read().then(n));case 4:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}())}))}})),te.innerHTML+="</div>",(0,V.addShpLayerOnChange)("showIgnLayer",vt,"bd_topo","red","",Bt),(0,V.addShpLayerOnChange)("showOsmLayer",xt,"osm","yellow","",Bt),(0,V.addShpLayerOnChange)("showCadastreLayer",wt,"cadastre","red","",Bt),document.getElementById("showInnondationLayer").addEventListener("change",(function(){document.getElementById("showInnondationLayer").checked?((0,h.addShp)(Et,"inno","black","blue",Bt,!1).num+=1,Lt.ino_random_id.id=Lt.ino_random_id.name+"_"+Lt.ino_random_id.num,(0,l.loadBufferDataFromShp)(Mt).then((function(t){(0,C.geojsontToFeatureGeom)(t,"selectPropValue",Lt.ino_random_id.id,!0,Bt,mt)}))):(Bt.removeLayer(Lt.ino_random_id.id),Bt.removeLayer("inno"))})),document.getElementById("exploredata").addEventListener("change",(function(){var t=(0,H.exploreData)("exploredata",zt,Lt.bdnb_random_id,"selectProp","argiles_alea",Bt,mt);Lt.bdnb_random_id.num=t.num,Lt.bdnb_random_id.id=t.id})),document.getElementById("exploredataIgn").addEventListener("change",(function(){var t=(0,H.exploreData)("exploredataIgn",Lt.bdtopo_radom_id.dataGeojson,Lt.bdtopo_radom_id,"selectProp","USAGE1",Bt,mt);Lt.bdtopo_radom_id.num=t.num,Lt.bdtopo_radom_id.id=t.id})),document.getElementById("exploredataOsm").addEventListener("change",(function(){var t=(0,H.exploreData)("exploredataOsm",Lt.osm_random_id.dataGeojson,Lt.osm_random_id,"selectProp","USAGE1",Bt,mt);Lt.osm_random_id.num=t.num,Lt.osm_random_id.id=t.id})),document.getElementById("exploredataCadastre").addEventListener("change",(function(){var t=(0,H.exploreData)("exploredataCadastre",Lt.cadastre_random_id.dataGeojson,Lt.cadastre_random_id,"selectProp","created",Bt,mt);Lt.cadastre_random_id.num=t.num,Lt.cadastre_random_id.id=t.id})),document.getElementById("confirmExporation").addEventListener("click",(function(){var t=document.getElementById("selectProp").value;if(document.getElementById("exploredataIgn").checked){Bt.removeLayer(Lt.bdtopo_radom_id.id),Lt.bdtopo_radom_id.num+=1,Lt.bdtopo_radom_id.id=Lt.bdtopo_radom_id.name+"_"+Lt.bdtopo_radom_id.num;var e=Lt.bdtopo_radom_id.dataGeojson;(0,G.updateSelectOption)("selectProp",e,t),(0,C.geojsontToFeatureGeom)(e,t,Lt.bdtopo_radom_id.id,!1,Bt,mt)}if(document.getElementById("exploredata").checked){Bt.removeLayer(Lt.bdnb_random_id.id),Lt.bdnb_random_id.num+=1,Lt.bdnb_random_id.id=Lt.bdnb_random_id.name+"_"+Lt.bdnb_random_id.num;var n=zt;(0,G.updateSelectOption)("selectProp",n,t),(0,C.geojsontToFeatureGeom)(n,t,Lt.bdnb_random_id.id,!1,Bt,mt)}if(document.getElementById("exploredataOsm").checked){Bt.removeLayer(Lt.osm_random_id.id),Lt.osm_random_id.num+=1,Lt.osm_random_id.id=Lt.osm_random_id.name+"_"+Lt.osm_random_id.num;var r=Lt.osm_random_id.dataGeojson;(0,G.updateSelectOption)("selectProp",r,t),(0,C.geojsontToFeatureGeom)(r,t,Lt.osm_random_id.id,!1,Bt,mt)}if(document.getElementById("exploredataCadastre").checked){Bt.removeLayer(Lt.cadastre_random_id.id),Lt.cadastre_random_id.num+=1,Lt.cadastre_random_id.id=Lt.cadastre_random_id.name+"_"+Lt.cadastre_random_id.num;var i=Lt.cadastre_random_id.dataGeojson;(0,G.updateSelectOption)("selectProp",i,t),(0,C.geojsontToFeatureGeom)(i,t,Lt.cadastre_random_id.id,!1,Bt,mt)}}));var ne=document.getElementById("drop-zone");ne.addEventListener("dragover",(function(t){t.preventDefault(),ne.classList.add("drag-over")})),ne.addEventListener("dragleave",(function(){ne.classList.remove("drag-over")})),ne.addEventListener("drop",(function(t){t.preventDefault(),ne.classList.remove("drag-over");var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if(n.type.includes("zip")){var r=new FileReader;r.onload=function(t){var e=t.target.result;W(e).then((function(t){(0,G.updateSelectOption)("select2dZiped",t),Nt["2dDrop"]=t}))},r.readAsArrayBuffer(n)}else alert("Please drop a ZIP file")}})),document.getElementById("afficheDrop2d").addEventListener("click",(function(){Nt["2dDropId"].num+=1,Nt["2dDropId"].id=Nt["2dDropId"].name+"_"+Nt["2dDropId"].num;var t=Nt["2dDrop"],e=document.getElementById("select2dZiped").value;(0,z.geosjontToColorLayer)(t,e,Nt["2dDropId"].id,!1,Bt)})),document.getElementById("checkbox-supprime-2ddrop").addEventListener("click",(function(){Bt.removeLayer(Nt["2dDropId"].id)}));var re=document.getElementById("drop-zone-3D");re.addEventListener("dragover",(function(t){t.preventDefault(),re.classList.add("drag-over")})),re.addEventListener("dragleave",(function(){re.classList.remove("drag-over")})),re.addEventListener("drop",(function(t){t.preventDefault(),re.classList.remove("drag-over");var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if(n.type.includes("zip")){var r=new FileReader;r.onload=function(t){var e=t.target.result;W(e).then((function(t){(0,G.updateSelectOption)("selectHauteur3dZiped",t),(0,G.updateSelectOption)("selectAltiSol3dZiped",t),(0,G.updateSelectOption)("selectCol3dZiped",t),Nt["3dDrop"]=t}))},r.readAsArrayBuffer(n)}else alert("Please drop a ZIP file")}})),document.getElementById("afficheDrop3d").addEventListener("click",(function(){Nt["3dDropId"].num+=1,Nt["3dDropId"].id=Nt["3dDropId"].name+"_"+Nt["3dDropId"].num;var t=Nt["3dDrop"],e=document.getElementById("selectHauteur3dZiped").value,n=document.getElementById("selectAltiSol3dZiped").value,r=document.getElementById("selectCol3dZiped").value;(0,C.geojsontToFeatureGeom)(t,r,Nt["3dDropId"].id,!1,Bt,mt,e,n)})),document.getElementById("checkbox-supprime-3ddrop").addEventListener("click",(function(){Bt.removeLayer(Nt["3dDropId"].id)}));var ie=document.getElementById("drop-zone-csv");ie.addEventListener("dragover",(function(t){t.preventDefault(),ie.classList.add("drag-over")})),ie.addEventListener("dragleave",(function(){ie.classList.remove("drag-over")})),ie.addEventListener("drop",(function(t){var e;t.preventDefault(),ie.classList.remove("drag-over");var n=t.dataTransfer.files;n.length>0&&(e=n[0]);var r=new FileReader;r.onload=function(){var t=[],e=r.result.split("\n"),n=e[0].split(",");(0,q.updateSelectOptionFromList)("attJointureCsv",n),(0,q.updateSelectOptionFromList)("selectCouleurCsv",n);for(var i=1;i<e.length;i++){for(var o=e[i].split(","),s={},a=0;a<n.length;a++)s[n[a]]=o[a];s=Object.entries(s).reduce((function(t,e){var n=ft(e,2),r=n[0],i=n[1];return null===i||""===i||(t[r]=i),t}),{}),t.push(s)}It=t},r.readAsText(e);var i=Bt.getLayers().reduce((function(t,e){return t.push(e.id),t}),[]);i=i.filter((function(t){return"globe"!==t&&"atmosphere"!==t&&"Ortho"!==t&&"IGN_MNT_HIGHRES"!==t&&"MNT_WORLD_SRTM3"!==t&&!t.includes("label")})),(0,q.updateSelectOptionFromList)("selectJoinLayer",i)})),document.getElementById("selectJoinLayer").addEventListener("change",(function(){var t=document.getElementById("selectJoinLayer").value,e=Bt.getLayerById(t).source.fetchedData,n=(0,U.getUniquePropNames)(e);(0,q.updateSelectOptionFromList)("selectJoinAttribut",n),Ot.updatedGeojson=e})),document.getElementById("selectJoinAttribut").addEventListener("change",(function(){var t=document.getElementById("attJointureCsv").value,e=document.getElementById("selectJoinAttribut").value,n=It.reduce((function(e,n){return e[n[t]]=n,e}),{});Ot.updatedGeojson.features.forEach((function(t){var r=n[t.properties[e]];r&&Object.entries(r).forEach((function(e){var n=ft(e,2),r=n[0],i=n[1];t.properties[r]=i}))}))})),document.getElementById("afficheDropCsv").addEventListener("click",(function(){Ot.csvLayerId.num+=1,Ot.csvLayerId.id=Ot.csvLayerId.name+"_"+Ot.csvLayerId.num;var t=Ot.updatedGeojson,e=document.getElementById("selectCouleurCsv").value;(0,C.geojsontToFeatureGeom)(t,e,Ot.csvLayerId.id,!1,Bt,mt)})),document.getElementById("checkbox-supprime-csv").addEventListener("click",(function(){Bt.removeLayer(Ot.csvLayerId.id)}));
//# sourceMappingURL=index.14ffaa0b.js.map
