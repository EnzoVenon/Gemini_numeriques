var FeatureToolTip=function(){var e,t,o=[],r=[],i=0;function n(e){return function(){return e.properties}}function s(e,t,o){for(var r,i,s,p,l,d,a="",u="",c=0;c<e.length;c++){s=(i=(r=e[c]).geometry).properties&&i.properties.style||r.style||t.style;var f={globals:{},properties:n(i)};if(s=s.drawingStylefromContext(f),r.type===itowns.FEATURE_TYPES.POLYGON?(u="&#9724",s&&(p=s.fill&&s.fill.color,l=s.stroke&&"1.25px "+s.stroke.color)):r.type===itowns.FEATURE_TYPES.LINE?(u="&#9473",p=s&&s.stroke&&s.stroke.color,l="0px"):r.type===itowns.FEATURE_TYPES.POINT&&(u="&#9679",s&&s.point&&(p=s.point.color,l="1.25px "+s.point.line)),a+="<div>",a+='<span style="color: '+p+"; -webkit-text-stroke: "+l+'">',a+=u+" ",a+="</span>",i.properties&&(a+=i.properties.name||i.properties.nom||i.properties.description||t.name||""),r.type===itowns.FEATURE_TYPES.POINT&&(a+='<br/><span class="coord">long '+r.coordinates[0].toFixed(4)+"</span>",a+='<br/><span class="coord">lat '+r.coordinates[1].toFixed(4)+"</span>"),i.properties&&!o.filterAllProperties)if(o.format)for(d in i.properties)o.filterProperties.includes(d)||(a+=o.format(d,i.properties[d])||"");else{for(d in a+="<ul>",i.properties)o.filterProperties.includes(d)||(a+="<li>"+d+": "+i.properties[d]+"</li>");a.endsWith("<ul>")?a=a.replace("<ul>",""):a+="</ul>"}a+="</div>"}return a}return document.body.addEventListener("mousedown",(function(){++i}),!1),document.body.addEventListener("mouseup",(function(){--i}),!1),{init:function(n,p){function l(n){i?(e.style.left=t.eventToViewCoords(n).x+"px",e.style.top=t.eventToViewCoords(n).y+"px"):function(i){e.innerHTML="",e.style.display="none";var n,p=t.pickFeaturesAt.apply(t,[i,3].concat(r));for(var l in p)0!=p[l].length&&(n=o[r.indexOf(l)])&&("function"==typeof n.options.filterGeometries&&(p[l]=n.options.filterGeometries(p[l],n.layer)||[]),e.innerHTML+=s(p[l],n.layer,n.options));""!=e.innerHTML&&(e.style.display="block",e.style.left=t.eventToViewCoords(i).x+"px",e.style.top=t.eventToViewCoords(i).y+"px")}(n)}(e=document.createElement("div")).className="tooltip",n.appendChild(e),t=p,document.addEventListener("mousemove",l,!1),document.addEventListener("mousedown",l,!1)},addLayer:function(e,t){if(!e.isLayer)return e;var i=t||{filterAllProperties:!0};return i.filterProperties=null==i.filterProperties?[]:i.filterProperties,i.filterProperties.concat(["name","nom","style","description"]),o.push({layer:e,options:i}),r.push(e.id),e}}}();"undefined"!=typeof module&&module.exports&&(module.exports=FeatureToolTip);
//# sourceMappingURL=index.8872b7cc.js.map
