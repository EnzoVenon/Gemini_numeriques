{"mappings":"AA6BA,SAASA,EAASC,GACd,OAAO,IAAIC,OAAOC,MAAMC,MAAM,SAClC,CAGA,SAASC,EAAaJ,GAClB,OAAOA,EAAWK,OACtB,CAGA,SAASC,EAAYN,GACjB,OAAOA,EAAWO,MAAQP,EAAWK,OACzC,CCnCA,MAAMG,EAAYC,SAASC,eAAe,aAUpCC,EAAY,CACdC,MAAO,IAAIX,OAAOY,YAAY,YAAa,OAAS,SACpDC,MAAO,IACPC,KAAM,IAGV,IAAIC,EAAO,IAAIf,OAAOgB,UAAUT,EAAWG,GAI3C,MAAMO,ECzBC,SAAmBC,EAAWC,EAAKC,EAAMC,EAAeC,GAE3D,MAAMC,EAAc,IAAIvB,OAAOwB,WAAW,CACtCC,IAAKP,EACLC,IAAKA,EACLC,KAAMA,EACNC,cAAeA,EACfC,OAAQA,IAQZ,OAJmB,IAAItB,OAAO0B,WAAW,QAAS,CAC9CC,OAAQJ,GAIhB,CDSmB,CAAU,6DACzB,YACA,2BACA,KACA,cAEJR,EAAKa,SAASX,GAGd,MAAMY,EEnCC,SAAwBX,EAAWC,EAAKC,EAAMC,EAAeC,GAEhE,MAAMQ,EAAkB,IAAI9B,OAAOwB,WAAW,CAC1CC,IAAKP,EACLC,IAAKA,EACLC,KAAMA,EACNC,cAAeA,EACfC,OAAQA,EACRS,oBAAqB,CACjB,GAAI,CACAC,WAAY,IACZC,WAAY,KACZC,WAAY,KACZC,WAAY,MAEhB,GAAI,CACAH,WAAY,IACZC,WAAY,KACZC,WAAY,KACZC,WAAY,MAEhB,GAAI,CACAH,WAAY,KACZC,WAAY,KACZC,WAAY,KACZC,WAAY,OAEhB,GAAI,CACAH,WAAY,KACZC,WAAY,KACZC,WAAY,MACZC,WAAY,UAUxB,OAJiB,IAAInC,OAAOoC,eAAe,YAAa,CACpDT,OAAQG,GAIhB,CFPwB,CAAe,6DACnC,YACA,0CACA,SACA,uBAEJf,EAAKa,SAASC,IDxCP,SAAuBX,EAAWmB,EAAUlB,EAAKmB,EAAcC,GAElE,MAAMC,EAAiB,IAAIxC,OAAOyC,UAAU,CACxChB,IAAKP,EACLwB,SAAUL,EACVlB,IAAKA,EACLoB,OAAQA,IAIM,IAAIvC,OAAO2C,qBAAqB,YAAa,CAC3DhB,OAAQa,EACRI,KAAM,CAAEC,IAAKP,GACbQ,MAAO,IAAI9C,OAAO+C,MAAM,CACpBC,KAAM,CACFC,MAAOnD,EACPoD,cAAe7C,EACf8C,iBAAkBhD,MAQlC,CCkBmB,CAAc,6DAC7B,2CACA,YACA,GAtCW,CACXiD,KAAM,OACNC,KAAM,OACNC,MAAO,SACPC,MAAO,UAsCXxC,EAAKa,SAAS4B","sources":["src/models/building.js","src/main.js","src/models/wmts.js","src/models/elevation.js"],"sourcesContent":["\nexport function buildingLayer(serverURL, nameType, crs, zoomMinLayer, extent) {\n    // Source\n    const geometrySource = new itowns.WFSSource({\n        url: serverURL,\n        typeName: nameType,\n        crs: crs,\n        extent: extent\n    });\n\n    // Geometry Layer\n    const geomLayer = new itowns.FeatureGeometryLayer('Buildings', {\n        source: geometrySource,\n        zoom: { min: zoomMinLayer },\n        style: new itowns.Style({\n            fill: {\n                color: setColor,\n                base_altitude: setAltitude,\n                extrusion_height: setExtrusion,\n            },\n\n        }),\n\n    });\n\n    return geomLayer;\n}\n\n// Coloring the data\nfunction setColor(properties) {\n    return new itowns.THREE.Color(0xaaaaaa);\n}\n\n// Extruding the data \nfunction setExtrusion(properties) {\n    return properties.hauteur;\n}\n\n// Placing the data on the ground\nfunction setAltitude(properties) {\n    return properties.z_min - properties.hauteur;\n}\n\n\n/* Properties example:\n            geometry_name: \"the_geom\"\n            hauteur: 9\n            id: \"bati_indifferencie.19138409\"\n            origin_bat: \"Cadastre\"\n            prec_alti: 5\n            prec_plani: 2.5\n            z_max: 83.7\n            z_min: 83.7\n*/\n\n","// ------------ Imports ------------ //\nimport { wmtsLayer } from \"./models/wmts\";\nimport { elevationLayer } from \"./models/elevation\";\nimport { buildingLayer, addMeshToScene } from \"./models/building\";\n\n// ------------ View ------------ //\nconst viewerDiv = document.getElementById('viewerDiv');\n\n// Perigueux extent\nconst extent = {\n    west: 0.67289,\n    east: 0.74665,\n    south: 45.17272,\n    north: 45.2135\n};\n\nconst placement = {\n    coord: new itowns.Coordinates('EPSG:4326', 0.71829, 45.18260),\n    range: 3000,\n    tilt: 20\n};\n\nlet view = new itowns.GlobeView(viewerDiv, placement);\n\n// ------------ Layers ------------ //\n// WMTS Layer\nconst wmts_layer = wmtsLayer('http://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/wmts',\n    'EPSG:3857',\n    'ORTHOIMAGERY.ORTHOPHOTOS',\n    'PM',\n    'image/jpeg');\n\nview.addLayer(wmts_layer);\n\n// Elevation Layer\nconst elevation_layer = elevationLayer('http://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/wmts',\n    'EPSG:4326',\n    'ELEVATION.ELEVATIONGRIDCOVERAGE.HIGHRES',\n    'WGS84G',\n    'image/x-bil;bits=32');\n\nview.addLayer(elevation_layer);\n\n// Geometry Layer\nconst layerCoord = buildingLayer('http://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/wfs?',\n    'BDTOPO_BDD_WLD_WGS84G:bati_indifferencie',\n    'EPSG:4326',\n    14,\n    extent,\n    view);\n\nview.addLayer(geometry_layer);","\nexport function wmtsLayer(serverURL, crs, name, tileMatrixSet, format) {\n    // Source\n    const colorSource = new itowns.WMTSSource({\n        url: serverURL,\n        crs: crs,\n        name: name,\n        tileMatrixSet: tileMatrixSet,\n        format: format,\n    });\n\n    // Layer\n    const colorLayer = new itowns.ColorLayer('Ortho', {\n        source: colorSource,\n    });\n\n    return colorLayer;\n}","export function elevationLayer(serverURL, crs, name, tileMatrixSet, format) {\n    // Source\n    const elevationSource = new itowns.WMTSSource({\n        url: serverURL,\n        crs: crs,\n        name: name,\n        tileMatrixSet: tileMatrixSet,\n        format: format,\n        tileMatrixSetLimits: {\n            11: {\n                minTileRow: 442,\n                maxTileRow: 1267,\n                minTileCol: 1344,\n                maxTileCol: 2683\n            },\n            12: {\n                minTileRow: 885,\n                maxTileRow: 2343,\n                minTileCol: 3978,\n                maxTileCol: 5126\n            },\n            13: {\n                minTileRow: 1770,\n                maxTileRow: 4687,\n                minTileCol: 7957,\n                maxTileCol: 10253\n            },\n            14: {\n                minTileRow: 3540,\n                maxTileRow: 9375,\n                minTileCol: 15914,\n                maxTileCol: 20507\n            }\n        },\n    });\n\n    // Layer\n    const eleLayer = new itowns.ElevationLayer('MNT_WORLD', {\n        source: elevationSource,\n    });\n\n    return eleLayer;\n}"],"names":["$298c0b498438ffe5$var$setColor","properties","itowns","THREE","Color","$298c0b498438ffe5$var$setExtrusion","hauteur","$298c0b498438ffe5$var$setAltitude","z_min","$2b6e161c9edcf319$var$viewerDiv","document","getElementById","$2b6e161c9edcf319$var$placement","coord","Coordinates","range","tilt","$2b6e161c9edcf319$var$view","GlobeView","$2b6e161c9edcf319$var$wmts_layer","serverURL","crs","name","tileMatrixSet","format","colorSource","WMTSSource","url","ColorLayer","source","addLayer","$2b6e161c9edcf319$var$elevation_layer","elevationSource","tileMatrixSetLimits","minTileRow","maxTileRow","minTileCol","maxTileCol","ElevationLayer","nameType","zoomMinLayer","extent","geometrySource","WFSSource","typeName","FeatureGeometryLayer","zoom","min","style","Style","fill","color","base_altitude","extrusion_height","west","east","south","north","geometry_layer"],"version":3,"file":"index.b8ce9a0a.js.map"}