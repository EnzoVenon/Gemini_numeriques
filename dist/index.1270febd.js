let e=[];function t(e){let t=new itowns.THREE.Color;return"RÃ©sidentiel"===e.usage_1?t.set(16645631):"Annexe"===e.usage_1?t.set(13026745):"Commercial et services"===e.usage_1?t.set(6460062):"Religieux"===e.usage_1?t.set(3751231):"Sportif"===e.usage_1?t.set(5532283):t.set(5592405)}function n(e){return e.altitude_minimale_sol}function o(e){return e.hauteur}function i(e){return!!e.hauteur}itowns.proj4.defs("EPSG:3946","+proj=lcc +lat_1=45.25 +lat_2=46.75 +lat_0=46 +lon_0=3 +x_0=1700000 +y_0=5200000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");const r={coord:new itowns.Coordinates("EPSG:4326",.71829,45.1826),range:3e3,tilt:30},s=document.getElementById("viewerDiv"),a=new itowns.GlobeView(s,r);function u(e){e.source=new itowns.WMTSSource(e.source);const t=new itowns.ElevationLayer(e.id,e);a.addLayer(t).then(l.addLayerGUI.bind(l))}setupLoadingScreen(s,a),itowns.Fetcher.json("../data/layers/JSONLayers/Ortho.json").then((function(e){e.source=new itowns.WMTSSource(e.source);const t=new itowns.ColorLayer("Ortho",e);a.addLayer(t).then(l.addLayerGUI.bind(l))})),itowns.Fetcher.json("../data/layers/JSONLayers/WORLD_DTM.json").then(u),itowns.Fetcher.json("../data/layers/JSONLayers/IGN_MNT_HIGHRES.json").then(u),a.addFrameRequester(itowns.MAIN_LOOP_EVENTS.BEFORE_RENDER,(function(){let t,n;for(e.length&&view.notifyChange(view.camera.camera3D,!0),t=0;t<e.length;t++)n=e[t],n&&(n.scale.z=Math.min(1,n.scale.z+.1),n.updateMatrixWorld(!0));e=e.filter((function(e){return e.scale.z<1}))}));const c=function(r,s,a,u,c,l,d,w){const g=new itowns.WFSSource({url:r,version:s,typeName:a,crs:u,ipr:c,format:l,extent:d});return{layer:new itowns.FeatureGeometryLayer("WFS Building",{batchId:function(e,t){return t},onMeshCreated:function(t){t.children.forEach((t=>{t.scale.z=.01,e.push(t)}))},filter:i,source:g,zoom:{min:w},style:new itowns.Style({fill:{color:t,base_altitude:n,extrusion_height:o}})}),meshList:e}}("https://wxs.ign.fr/topographie/geoportail/wfs?","2.0.0","BDTOPO_V3:batiment","EPSG:4326","IGN","application/json",{west:.67289,east:.74665,south:45.17272,north:45.2135},14);a.addLayer(c);const l=new GuiTools("menuDiv",a);function d(e){if(a.controls.isPaused){const t=document.getElementById("info"),n=a.pickObjectsAt(e,3,"WFS Building");let o,i,r;t.innerHTML=" ",n.length&&(r=n[0].object.geometry.attributes.batchId.array[n[0].face.a],o=n[0].object.feature.geometries[r].properties,Object.keys(o).map((function(e){const n=o[e];if(n){const o=e.toString();"_"!==o[0]&&"geometry_name"!==o&&(i=n.toString(),t.innerHTML+="<li><b>"+o+": </b>"+i+"</li>")}})))}}a.addEventListener(itowns.GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED,(function(){console.info("Globe initialized")})),debug.createTileDebugUI(l.gui,a);for(const e of a.getLayers())"WFS Building"===e.id&&e.whenReady.then((function(e){const t=debug.GeometryDebug.createGeometryDebugUI(l.gui,a,e);debug.GeometryDebug.addWireFrameCheckbox(t,a,e),window.addEventListener("mousemove",d,!1)}));
//# sourceMappingURL=index.1270febd.js.map
